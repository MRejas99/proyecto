!function(){function e(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function t(e,t){return r(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,a=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(u){s=!0,i=u}finally{try{o||null==n.return||n.return()}finally{if(s)throw i}}return a}(e,t)||u(e,t)||n()}function n(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function r(e){if(Array.isArray(e))return e}function i(e,t,n){return(i="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=b(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function a(e){return function(e){if(Array.isArray(e))return c(e)}(e)||o(e)||u(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function s(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=u(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function u(e,t){if(e){if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(e,t):void 0}}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e,t,n){return t&&l(e.prototype,t),n&&l(e,n),e}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&w(e,t)}function v(e){var t=k();return function(){var n,r=b(e);if(t){var i=b(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return p(this,n)}}function p(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return m(e)}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(e){var t="function"==typeof Map?new Map:void 0;return(g=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return y(e,arguments,b(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),w(r,e)})(e)}function y(e,t,n){return(y=k()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&w(i,n.prototype),i}).apply(null,arguments)}function k(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function w(e,t){return(w=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}(self.webpackChunkappcovid_frontend=self.webpackChunkappcovid_frontend||[]).push([[179],{8255:function(e){function t(e){return Promise.resolve().then(function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t})}t.keys=function(){return[]},t.resolve=t,t.id=8255,e.exports=t},3018:function(e,n,r){"use strict";r.d(n,{deG:function(){return vn},tb:function(){return xu},AFp:function(){return yu},ip1:function(){return mu},CZH:function(){return gu},hGG:function(){return pc},z2F:function(){return ac},sBO:function(){return Rs},Sil:function(){return Pu},_Vd:function(){return $o},EJc:function(){return Su},SBq:function(){return ns},qLn:function(){return Lr},vpe:function(){return eu},gxx:function(){return ga},tBr:function(){return jn},XFs:function(){return Z},OlP:function(){return dn},zs3:function(){return Oa},ZZ4:function(){return bs},aQg:function(){return xs},soG:function(){return Iu},YKP:function(){return Ms},v3s:function(){return sc},h0i:function(){return Fs},PXZ:function(){return ec},R0b:function(){return Mu},FiY:function(){return Vn},Lbi:function(){return _u},g9A:function(){return bu},Qsj:function(){return as},FYo:function(){return is},JOm:function(){return Ur},Tiy:function(){return ss},q3G:function(){return Sr},tp0:function(){return qn},EAV:function(){return lc},Rgc:function(){return Ds},dDg:function(){return Zu},DyG:function(){return pn},q4F:function(){return cs},GfV:function(){return us},s_b:function(){return js},ifc:function(){return Q},eFA:function(){return tc},G48:function(){return $u},Gpc:function(){return E},X6Q:function(){return Ju},_c5:function(){return dc},VLi:function(){return Gu},c2e:function(){return Tu},zSh:function(){return ka},wAp:function(){return jo},vHH:function(){return A},EiD:function(){return Tr},mCW:function(){return ur},qzn:function(){return Jn},JVY:function(){return Xn},pB0:function(){return rr},eBb:function(){return tr},L6k:function(){return er},LAX:function(){return nr},cg1:function(){return Fo},Tjo:function(){return fc},kL8:function(){return Mo},yhl:function(){return $n},dqk:function(){return X},sIi:function(){return qa},CqO:function(){return ro},QGY:function(){return to},F4k:function(){return no},RDi:function(){return Me},AaK:function(){return T},z3N:function(){return Yn},qOj:function(){return Pa},TTD:function(){return Ae},_Bn:function(){return Qo},xp6:function(){return bi},uIk:function(){return Za},Tol:function(){return go},ekj:function(){return mo},Suo:function(){return du},Xpm:function(){return le},lG2:function(){return ge},Yz7:function(){return P},cJS:function(){return L},oAB:function(){return ve},Yjl:function(){return ye},Y36:function(){return Ga},_UZ:function(){return Ja},BQk:function(){return Xa},ynx:function(){return $a},qZA:function(){return Ya},TgZ:function(){return Qa},EpF:function(){return eo},n5z:function(){return un},Ikx:function(){return No},LFG:function(){return On},$8M:function(){return ln},NdJ:function(){return io},CRH:function(){return vu},oxw:function(){return so},Q6J:function(){return Ka},iGM:function(){return fu},CHM:function(){return tt},oJD:function(){return Er},LSH:function(){return Rr},kYT:function(){return pe},Udp:function(){return po},d8E:function(){return Oo},YNc:function(){return Ha},_uU:function(){return Ro},Oqu:function(){return Co},hij:function(){return Ao}});var o=r(9765),u=r(5319),c=r(7574),l=r(6682),p=r(2441),k=r(1307);function w(){return new o.xQ}function _(e){for(var t in e)if(e[t]===_)return t;throw Error("Could not find renamed property on target object.")}function x(e,t){for(var n in t)t.hasOwnProperty(n)&&!e.hasOwnProperty(n)&&(e[n]=t[n])}function T(e){if("string"==typeof e)return e;if(Array.isArray(e))return"["+e.map(T).join(", ")+"]";if(null==e)return""+e;if(e.overriddenName)return"".concat(e.overriddenName);if(e.name)return"".concat(e.name);var t=e.toString();if(null==t)return""+t;var n=t.indexOf("\n");return-1===n?t:t.substring(0,n)}function I(e,t){return null==e||""===e?null===t?"":t:null==t||""===t?e:e+" "+t}var S=_({__forward_ref__:_});function E(e){return e.__forward_ref__=E,e.toString=function(){return T(this())},e}function R(e){return C(e)?e():e}function C(e){return"function"==typeof e&&e.hasOwnProperty(S)&&e.__forward_ref__===E}var A=function(e){d(n,e);var t=v(n);function n(e,r){var i;return f(this,n),(i=t.call(this,function(e,t){return"".concat(e?"NG0".concat(e,": "):"").concat(t)}(e,r))).code=e,i}return n}(g(Error));function N(e){return"string"==typeof e?e:null==e?"":String(e)}function O(e){return"function"==typeof e?e.name||e.toString():"object"==typeof e&&null!=e&&"function"==typeof e.type?e.type.name||e.type.toString():N(e)}function D(e,t){var n=t?" in ".concat(t):"";throw new A("201","No provider for ".concat(O(e)," found").concat(n))}function P(e){return{token:e.token,providedIn:e.providedIn||null,factory:e.factory,value:void 0}}function L(e){return{providers:e.providers||[],imports:e.imports||[]}}function F(e){return M(e,V)||M(e,B)}function M(e,t){return e.hasOwnProperty(t)?e[t]:null}function U(e){return e&&(e.hasOwnProperty(q)||e.hasOwnProperty(z))?e[q]:null}var j,V=_({"\u0275prov":_}),q=_({"\u0275inj":_}),B=_({ngInjectableDef:_}),z=_({ngInjectorDef:_}),Z=((Z=Z||{})[Z.Default=0]="Default",Z[Z.Host=1]="Host",Z[Z.Self=2]="Self",Z[Z.SkipSelf=4]="SkipSelf",Z[Z.Optional=8]="Optional",Z);function H(e){var t=j;return j=e,t}function G(e,t,n){var r=F(e);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:n&Z.Optional?null:void 0!==t?t:void D(T(e),"Injector")}function K(e){return{toString:e}.toString()}var W=((W=W||{})[W.OnPush=0]="OnPush",W[W.Default=1]="Default",W),Q=((Q=Q||{})[Q.Emulated=0]="Emulated",Q[Q.None=2]="None",Q[Q.ShadowDom=3]="ShadowDom",Q),Y="undefined"!=typeof globalThis&&globalThis,J="undefined"!=typeof window&&window,$="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,X=Y||"undefined"!=typeof global&&global||J||$,ee={},te=[],ne=_({"\u0275cmp":_}),re=_({"\u0275dir":_}),ie=_({"\u0275pipe":_}),ae=_({"\u0275mod":_}),oe=_({"\u0275loc":_}),se=_({"\u0275fac":_}),ue=_({__NG_ELEMENT_ID__:_}),ce=0;function le(e){return K(function(){var t={},n={type:e.type,providersResolver:null,decls:e.decls,vars:e.vars,factory:null,template:e.template||null,consts:e.consts||null,ngContentSelectors:e.ngContentSelectors,hostBindings:e.hostBindings||null,hostVars:e.hostVars||0,hostAttrs:e.hostAttrs||null,contentQueries:e.contentQueries||null,declaredInputs:t,inputs:null,outputs:null,exportAs:e.exportAs||null,onPush:e.changeDetection===W.OnPush,directiveDefs:null,pipeDefs:null,selectors:e.selectors||te,viewQuery:e.viewQuery||null,features:e.features||null,data:e.data||{},encapsulation:e.encapsulation||Q.Emulated,id:"c",styles:e.styles||te,_:null,setInput:null,schemas:e.schemas||null,tView:null},r=e.directives,i=e.features,a=e.pipes;return n.id+=ce++,n.inputs=me(e.inputs,t),n.outputs=me(e.outputs),i&&i.forEach(function(e){return e(n)}),n.directiveDefs=r?function(){return("function"==typeof r?r():r).map(he)}:null,n.pipeDefs=a?function(){return("function"==typeof a?a():a).map(fe)}:null,n})}function he(e){return ke(e)||function(e){return e[re]||null}(e)}function fe(e){return function(e){return e[ie]||null}(e)}var de={};function ve(e){return K(function(){var t={type:e.type,bootstrap:e.bootstrap||te,declarations:e.declarations||te,imports:e.imports||te,exports:e.exports||te,transitiveCompileScopes:null,schemas:e.schemas||null,id:e.id||null};return null!=e.id&&(de[e.id]=e.type),t})}function pe(e,t){return K(function(){var n=we(e,!0);n.declarations=t.declarations||te,n.imports=t.imports||te,n.exports=t.exports||te})}function me(e,t){if(null==e)return ee;var n={};for(var r in e)if(e.hasOwnProperty(r)){var i=e[r],a=i;Array.isArray(i)&&(a=i[1],i=i[0]),n[i]=r,t&&(t[i]=a)}return n}var ge=le;function ye(e){return{type:e.type,name:e.name,factory:null,pure:!1!==e.pure,onDestroy:e.type.prototype.ngOnDestroy||null}}function ke(e){return e[ne]||null}function we(e,t){var n=e[ae]||null;if(!n&&!0===t)throw new Error("Type ".concat(T(e)," does not have '\u0275mod' property."));return n}function be(e){return Array.isArray(e)&&"object"==typeof e[1]}function _e(e){return Array.isArray(e)&&!0===e[1]}function xe(e){return 0!=(8&e.flags)}function Te(e){return 2==(2&e.flags)}function Ie(e){return 1==(1&e.flags)}function Se(e){return null!==e.template}function Ee(e){return 0!=(512&e[2])}function Re(e,t){return e.hasOwnProperty(se)?e[se]:null}var Ce=function(){function e(t,n,r){f(this,e),this.previousValue=t,this.currentValue=n,this.firstChange=r}return h(e,[{key:"isFirstChange",value:function(){return this.firstChange}}]),e}();function Ae(){return Ne}function Ne(e){return e.type.prototype.ngOnChanges&&(e.setInput=De),Oe}function Oe(){var e=Fe(this),t=null==e?void 0:e.current;if(t){var n=e.previous;if(n===ee)e.previous=t;else for(var r in t)n[r]=t[r];e.current=null,this.ngOnChanges(t)}}function De(e,t,n,r){var i=Fe(e)||function(e,t){return e[Le]=t}(e,{previous:ee,current:null}),a=i.current||(i.current={}),o=i.previous,s=this.declaredInputs[n],u=o[s];a[s]=new Ce(u&&u.currentValue,t,o===ee),e[r]=t}Ae.ngInherit=!0;var Pe,Le="__ngSimpleChanges__";function Fe(e){return e[Le]||null}function Me(e){Pe=e}function Ue(){return void 0!==Pe?Pe:"undefined"!=typeof document?document:void 0}function je(e){return!!e.listen}var Ve={createRenderer:function(e,t){return Ue()}};function qe(e){for(;Array.isArray(e);)e=e[0];return e}function Be(e,t){return qe(t[e])}function ze(e,t){return qe(t[e.index])}function Ze(e,t){return e.data[t]}function He(e,t){var n=t[e];return be(n)?n:n[0]}function Ge(e){return 4==(4&e[2])}function Ke(e){return 128==(128&e[2])}function We(e,t){return null==t?null:e[t]}function Qe(e){e[18]=0}function Ye(e,t){e[5]+=t;for(var n=e,r=e[3];null!==r&&(1===t&&1===n[5]||-1===t&&0===n[5]);)r[5]+=t,n=r,r=r[3]}var Je={lFrame:wt(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function $e(){return Je.bindingsEnabled}function Xe(){return Je.lFrame.lView}function et(){return Je.lFrame.tView}function tt(e){return Je.lFrame.contextLView=e,e[8]}function nt(){for(var e=rt();null!==e&&64===e.type;)e=e.parent;return e}function rt(){return Je.lFrame.currentTNode}function it(e,t){var n=Je.lFrame;n.currentTNode=e,n.isParent=t}function at(){return Je.lFrame.isParent}function ot(){Je.lFrame.isParent=!1}function st(){return Je.isInCheckNoChangesMode}function ut(e){Je.isInCheckNoChangesMode=e}function ct(){return Je.lFrame.bindingIndex++}function lt(e){var t=Je.lFrame,n=t.bindingIndex;return t.bindingIndex=t.bindingIndex+e,n}function ht(e,t){var n=Je.lFrame;n.bindingIndex=n.bindingRootIndex=e,ft(t)}function ft(e){Je.lFrame.currentDirectiveIndex=e}function dt(e){var t=Je.lFrame.currentDirectiveIndex;return-1===t?null:e[t]}function vt(){return Je.lFrame.currentQueryIndex}function pt(e){Je.lFrame.currentQueryIndex=e}function mt(e){var t=e[1];return 2===t.type?t.declTNode:1===t.type?e[6]:null}function gt(e,t,n){if(n&Z.SkipSelf){for(var r=t,i=e;!(null!==(r=r.parent)||n&Z.Host||(r=mt(i),null===r||(i=i[15],10&r.type))););if(null===r)return!1;t=r,e=i}var a=Je.lFrame=kt();return a.currentTNode=t,a.lView=e,!0}function yt(e){var t=kt(),n=e[1];Je.lFrame=t,t.currentTNode=n.firstChild,t.lView=e,t.tView=n,t.contextLView=e,t.bindingIndex=n.bindingStartIndex,t.inI18n=!1}function kt(){var e=Je.lFrame,t=null===e?null:e.child;return null===t?wt(e):t}function wt(e){var t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:e,child:null,inI18n:!1};return null!==e&&(e.child=t),t}function bt(){var e=Je.lFrame;return Je.lFrame=e.parent,e.currentTNode=null,e.lView=null,e}var _t=bt;function xt(){var e=bt();e.isParent=!0,e.tView=null,e.selectedIndex=-1,e.contextLView=null,e.elementDepthCount=0,e.currentDirectiveIndex=-1,e.currentNamespace=null,e.bindingRootIndex=-1,e.bindingIndex=-1,e.currentQueryIndex=0}function Tt(){return Je.lFrame.selectedIndex}function It(e){Je.lFrame.selectedIndex=e}function St(){var e=Je.lFrame;return Ze(e.tView,e.selectedIndex)}function Et(e,t){for(var n=t.directiveStart,r=t.directiveEnd;n<r;n++){var i=e.data[n].type.prototype,a=i.ngAfterContentInit,o=i.ngAfterContentChecked,s=i.ngAfterViewInit,u=i.ngAfterViewChecked,c=i.ngOnDestroy;a&&(e.contentHooks||(e.contentHooks=[])).push(-n,a),o&&((e.contentHooks||(e.contentHooks=[])).push(n,o),(e.contentCheckHooks||(e.contentCheckHooks=[])).push(n,o)),s&&(e.viewHooks||(e.viewHooks=[])).push(-n,s),u&&((e.viewHooks||(e.viewHooks=[])).push(n,u),(e.viewCheckHooks||(e.viewCheckHooks=[])).push(n,u)),null!=c&&(e.destroyHooks||(e.destroyHooks=[])).push(n,c)}}function Rt(e,t,n){Nt(e,t,3,n)}function Ct(e,t,n,r){(3&e[2])===n&&Nt(e,t,n,r)}function At(e,t){var n=e[2];(3&n)===t&&(n&=2047,n+=1,e[2]=n)}function Nt(e,t,n,r){for(var i=null!=r?r:-1,a=t.length-1,o=0,s=void 0!==r?65535&e[18]:0;s<a;s++)if("number"==typeof t[s+1]){if(o=t[s],null!=r&&o>=r)break}else t[s]<0&&(e[18]+=65536),(o<i||-1==i)&&(Ot(e,n,t,s),e[18]=(4294901760&e[18])+s+2),s++}function Ot(e,t,n,r){var i=n[r]<0,a=n[r+1],o=e[i?-n[r]:n[r]];if(i){if(e[2]>>11<e[18]>>16&&(3&e[2])===t){e[2]+=2048;try{a.call(o)}finally{}}}else try{a.call(o)}finally{}}var Dt=function e(t,n,r){f(this,e),this.factory=t,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r};function Pt(e,t,n){for(var r=je(e),i=0;i<n.length;){var a=n[i];if("number"==typeof a){if(0!==a)break;i++;var o=n[i++],s=n[i++],u=n[i++];r?e.setAttribute(t,s,u,o):t.setAttributeNS(o,s,u)}else{var c=a,l=n[++i];Ft(c)?r&&e.setProperty(t,c,l):r?e.setAttribute(t,c,l):t.setAttribute(c,l),i++}}return i}function Lt(e){return 3===e||4===e||6===e}function Ft(e){return 64===e.charCodeAt(0)}function Mt(e,t){if(null!==t&&0!==t.length)if(null===e||0===e.length)e=t.slice();else for(var n=-1,r=0;r<t.length;r++){var i=t[r];"number"==typeof i?n=i:0===n||Ut(e,n,i,null,-1===n||2===n?t[++r]:null)}return e}function Ut(e,t,n,r,i){var a=0,o=e.length;if(-1===t)o=-1;else for(;a<e.length;){var s=e[a++];if("number"==typeof s){if(s===t){o=-1;break}if(s>t){o=a-1;break}}}for(;a<e.length;){var u=e[a];if("number"==typeof u)break;if(u===n){if(null===r)return void(null!==i&&(e[a+1]=i));if(r===e[a+1])return void(e[a+2]=i)}a++,null!==r&&a++,null!==i&&a++}-1!==o&&(e.splice(o,0,t),a=o+1),e.splice(a++,0,n),null!==r&&e.splice(a++,0,r),null!==i&&e.splice(a++,0,i)}function jt(e){return-1!==e}function Vt(e){return 32767&e}function qt(e,t){for(var n=function(e){return e>>16}(e),r=t;n>0;)r=r[15],n--;return r}var Bt=!0;function zt(e){var t=Bt;return Bt=e,t}var Zt=0;function Ht(e,t){var n=Kt(e,t);if(-1!==n)return n;var r=t[1];r.firstCreatePass&&(e.injectorIndex=t.length,Gt(r.data,e),Gt(t,null),Gt(r.blueprint,null));var i=Wt(e,t),a=e.injectorIndex;if(jt(i))for(var o=Vt(i),s=qt(i,t),u=s[1].data,c=0;c<8;c++)t[a+c]=s[o+c]|u[o+c];return t[a+8]=i,a}function Gt(e,t){e.push(0,0,0,0,0,0,0,0,t)}function Kt(e,t){return-1===e.injectorIndex||e.parent&&e.parent.injectorIndex===e.injectorIndex||null===t[e.injectorIndex+8]?-1:e.injectorIndex}function Wt(e,t){if(e.parent&&-1!==e.parent.injectorIndex)return e.parent.injectorIndex;for(var n=0,r=null,i=t;null!==i;){var a=i[1],o=a.type;if(null===(r=2===o?a.declTNode:1===o?i[6]:null))return-1;if(n++,i=i[15],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return-1}function Qt(e,t,n){!function(e,t,n){var r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(ue)&&(r=n[ue]),null==r&&(r=n[ue]=Zt++);var i=255&r;t.data[e+(i>>5)]|=1<<i}(e,t,n)}function Yt(e,t,n){if(n&Z.Optional)return e;D(t,"NodeInjector")}function Jt(e,t,n,r){if(n&Z.Optional&&void 0===r&&(r=null),0==(n&(Z.Self|Z.Host))){var i=e[9],a=H(void 0);try{return i?i.get(t,r,n&Z.Optional):G(t,r,n&Z.Optional)}finally{H(a)}}return Yt(r,t,n)}function $t(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Z.Default,i=arguments.length>4?arguments[4]:void 0;if(null!==e){var a=function(e){if("string"==typeof e)return e.charCodeAt(0)||0;var t=e.hasOwnProperty(ue)?e[ue]:void 0;return"number"==typeof t?t>=0?255&t:en:t}(n);if("function"==typeof a){if(!gt(t,e,r))return r&Z.Host?Yt(i,n,r):Jt(t,n,r,i);try{var o=a(r);if(null!=o||r&Z.Optional)return o;D(n)}finally{_t()}}else if("number"==typeof a){var s=null,u=Kt(e,t),c=-1,l=r&Z.Host?t[16][6]:null;for((-1===u||r&Z.SkipSelf)&&(-1!==(c=-1===u?Wt(e,t):t[u+8])&&on(r,!1)?(s=t[1],u=Vt(c),t=qt(c,t)):u=-1);-1!==u;){var h=t[1];if(an(a,u,h.data)){var f=tn(u,t,n,s,r,l);if(f!==Xt)return f}-1!==(c=t[u+8])&&on(r,t[1].data[u+8]===l)&&an(a,u,t)?(s=h,u=Vt(c),t=qt(c,t)):u=-1}}}return Jt(t,n,r,i)}var Xt={};function en(){return new sn(nt(),Xe())}function tn(e,t,n,r,i,a){var o=t[1],s=o.data[e+8],u=nn(s,o,n,null==r?Te(s)&&Bt:r!=o&&0!=(3&s.type),i&Z.Host&&a===s);return null!==u?rn(t,o,u,s):Xt}function nn(e,t,n,r,i){for(var a=e.providerIndexes,o=t.data,s=1048575&a,u=e.directiveStart,c=a>>20,l=i?s+c:e.directiveEnd,h=r?s:s+c;h<l;h++){var f=o[h];if(h<u&&n===f||h>=u&&f.type===n)return h}if(i){var d=o[u];if(d&&Se(d)&&d.type===n)return u}return null}function rn(e,t,n,r){var i=e[n],a=t.data;if(function(e){return e instanceof Dt}(i)){var o=i;o.resolving&&function(e,t){throw new A("200","Circular dependency in DI detected for ".concat(e))}(O(a[n]));var s=zt(o.canSeeViewProviders);o.resolving=!0;var u=o.injectImpl?H(o.injectImpl):null;gt(e,r,Z.Default);try{i=e[n]=o.factory(void 0,a,e,r),t.firstCreatePass&&n>=r.directiveStart&&function(e,t,n){var r=t.type.prototype,i=r.ngOnChanges,a=r.ngOnInit,o=r.ngDoCheck;if(i){var s=Ne(t);(n.preOrderHooks||(n.preOrderHooks=[])).push(e,s),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(e,s)}a&&(n.preOrderHooks||(n.preOrderHooks=[])).push(0-e,a),o&&((n.preOrderHooks||(n.preOrderHooks=[])).push(e,o),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(e,o))}(n,a[n],t)}finally{null!==u&&H(u),zt(s),o.resolving=!1,_t()}}return i}function an(e,t,n){return!!(n[t+(e>>5)]&1<<e)}function on(e,t){return!(e&Z.Self||e&Z.Host&&t)}var sn=function(){function e(t,n){f(this,e),this._tNode=t,this._lView=n}return h(e,[{key:"get",value:function(e,t){return $t(this._tNode,this._lView,e,void 0,t)}}]),e}();function un(e){return K(function(){for(var t=e.prototype.constructor,n=t[se]||cn(t),r=Object.prototype,i=Object.getPrototypeOf(e.prototype).constructor;i&&i!==r;){var a=i[se]||cn(i);if(a&&a!==n)return a;i=Object.getPrototypeOf(i)}return function(e){return new e}})}function cn(e){return C(e)?function(){var t=cn(R(e));return t&&t()}:Re(e)}function ln(e){return function(e,t){if("class"===t)return e.classes;if("style"===t)return e.styles;var n=e.attrs;if(n)for(var r=n.length,i=0;i<r;){var a=n[i];if(Lt(a))break;if(0===a)i+=2;else if("number"==typeof a)for(i++;i<r&&"string"==typeof n[i];)i++;else{if(a===t)return n[i+1];i+=2}}return null}(nt(),e)}var hn="__parameters__";function fn(e,t,n){return K(function(){var r=function(e){return function(){if(e){var t=e.apply(void 0,arguments);for(var n in t)this[n]=t[n]}}}(t);function i(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(this instanceof i)return r.apply(this,t),this;var a=y(i,t);return o.annotation=a,o;function o(e,t,n){for(var r=e.hasOwnProperty(hn)?e[hn]:Object.defineProperty(e,hn,{value:[]})[hn];r.length<=n;)r.push(null);return(r[n]=r[n]||[]).push(a),e}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=e,i.annotationCls=i,i})}var dn=function(){function e(t,n){f(this,e),this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof n?this.__NG_ELEMENT_ID__=n:void 0!==n&&(this.\u0275prov=P({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}return h(e,[{key:"toString",value:function(){return"InjectionToken ".concat(this._desc)}}]),e}(),vn=new dn("AnalyzeForEntryComponents"),pn=Function;function mn(e,t){void 0===t&&(t=e);for(var n=0;n<e.length;n++){var r=e[n];Array.isArray(r)?(t===e&&(t=e.slice(0,n)),mn(r,t)):t!==e&&t.push(r)}return t}function gn(e,t){e.forEach(function(e){return Array.isArray(e)?gn(e,t):t(e)})}function yn(e,t,n){t>=e.length?e.push(n):e.splice(t,0,n)}function kn(e,t){return t>=e.length-1?e.pop():e.splice(t,1)[0]}function wn(e,t,n){var r=_n(e,t);return r>=0?e[1|r]=n:function(e,t,n,r){var i=e.length;if(i==t)e.push(n,r);else if(1===i)e.push(r,e[0]),e[0]=n;else{for(i--,e.push(e[i-1],e[i]);i>t;)e[i]=e[i-2],i--;e[t]=n,e[t+1]=r}}(e,r=~r,t,n),r}function bn(e,t){var n=_n(e,t);if(n>=0)return e[1|n]}function _n(e,t){return function(e,t,n){for(var r=0,i=e.length>>1;i!==r;){var a=r+(i-r>>1),o=e[a<<1];if(t===o)return a<<1;o>t?i=a:r=a+1}return~(i<<1)}(e,t)}var xn,Tn={},In="__NG_DI_FLAG__",Sn="ngTempTokenPath",En=/\n/gm,Rn="__source",Cn=_({provide:String,useValue:_});function An(e){var t=xn;return xn=e,t}function Nn(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Z.Default;if(void 0===xn)throw new Error("inject() must be called from an injection context");return null===xn?G(e,void 0,t):xn.get(e,t&Z.Optional?null:void 0,t)}function On(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Z.Default;return(j||Nn)(R(e),t)}function Dn(e){for(var t=[],n=0;n<e.length;n++){var r=R(e[n]);if(Array.isArray(r)){if(0===r.length)throw new Error("Arguments array must have arguments.");for(var i=void 0,a=Z.Default,o=0;o<r.length;o++){var s=r[o],u=Ln(s);"number"==typeof u?-1===u?i=s.token:a|=u:i=s}t.push(On(i,a))}else t.push(On(r))}return t}function Pn(e,t){return e[In]=t,e.prototype[In]=t,e}function Ln(e){return e[In]}function Fn(e,t,n,r){var i=e[Sn];throw t[Rn]&&i.unshift(t[Rn]),e.message=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;e=e&&"\n"===e.charAt(0)&&"\u0275"==e.charAt(1)?e.substr(2):e;var i=T(t);if(Array.isArray(t))i=t.map(T).join(" -> ");else if("object"==typeof t){var a=[];for(var o in t)if(t.hasOwnProperty(o)){var s=t[o];a.push(o+":"+("string"==typeof s?JSON.stringify(s):T(s)))}i="{".concat(a.join(", "),"}")}return"".concat(n).concat(r?"("+r+")":"","[").concat(i,"]: ").concat(e.replace(En,"\n  "))}("\n"+e.message,i,n,r),e.ngTokenPath=i,e[Sn]=null,e}var Mn,Un,jn=Pn(fn("Inject",function(e){return{token:e}}),-1),Vn=Pn(fn("Optional"),8),qn=Pn(fn("SkipSelf"),4);function Bn(e){var t;return(null===(t=function(){if(void 0===Mn&&(Mn=null,X.trustedTypes))try{Mn=X.trustedTypes.createPolicy("angular",{createHTML:function(e){return e},createScript:function(e){return e},createScriptURL:function(e){return e}})}catch(e){}return Mn}())||void 0===t?void 0:t.createHTML(e))||e}function zn(e){var t;return(null===(t=function(){if(void 0===Un&&(Un=null,X.trustedTypes))try{Un=X.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:function(e){return e},createScript:function(e){return e},createScriptURL:function(e){return e}})}catch(e){}return Un}())||void 0===t?void 0:t.createHTML(e))||e}var Zn=function(){function e(t){f(this,e),this.changingThisBreaksApplicationSecurity=t}return h(e,[{key:"toString",value:function(){return"SafeValue must use [property]=binding: ".concat(this.changingThisBreaksApplicationSecurity," (see https://g.co/ng/security#xss)")}}]),e}(),Hn=function(e){d(n,e);var t=v(n);function n(){return f(this,n),t.apply(this,arguments)}return h(n,[{key:"getTypeName",value:function(){return"HTML"}}]),n}(Zn),Gn=function(e){d(n,e);var t=v(n);function n(){return f(this,n),t.apply(this,arguments)}return h(n,[{key:"getTypeName",value:function(){return"Style"}}]),n}(Zn),Kn=function(e){d(n,e);var t=v(n);function n(){return f(this,n),t.apply(this,arguments)}return h(n,[{key:"getTypeName",value:function(){return"Script"}}]),n}(Zn),Wn=function(e){d(n,e);var t=v(n);function n(){return f(this,n),t.apply(this,arguments)}return h(n,[{key:"getTypeName",value:function(){return"URL"}}]),n}(Zn),Qn=function(e){d(n,e);var t=v(n);function n(){return f(this,n),t.apply(this,arguments)}return h(n,[{key:"getTypeName",value:function(){return"ResourceURL"}}]),n}(Zn);function Yn(e){return e instanceof Zn?e.changingThisBreaksApplicationSecurity:e}function Jn(e,t){var n=$n(e);if(null!=n&&n!==t){if("ResourceURL"===n&&"URL"===t)return!0;throw new Error("Required a safe ".concat(t,", got a ").concat(n," (see https://g.co/ng/security#xss)"))}return n===t}function $n(e){return e instanceof Zn&&e.getTypeName()||null}function Xn(e){return new Hn(e)}function er(e){return new Gn(e)}function tr(e){return new Kn(e)}function nr(e){return new Wn(e)}function rr(e){return new Qn(e)}var ir=function(){function e(t){f(this,e),this.inertDocumentHelper=t}return h(e,[{key:"getInertBodyElement",value:function(e){e="<body><remove></remove>"+e;try{var t=(new window.DOMParser).parseFromString(Bn(e),"text/html").body;return null===t?this.inertDocumentHelper.getInertBodyElement(e):(t.removeChild(t.firstChild),t)}catch(t){return null}}}]),e}(),ar=function(){function e(t){if(f(this,e),this.defaultDoc=t,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){var n=this.inertDocument.createElement("html");this.inertDocument.appendChild(n);var r=this.inertDocument.createElement("body");n.appendChild(r)}}return h(e,[{key:"getInertBodyElement",value:function(e){var t=this.inertDocument.createElement("template");if("content"in t)return t.innerHTML=Bn(e),t;var n=this.inertDocument.createElement("body");return n.innerHTML=Bn(e),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(n),n}},{key:"stripCustomNsAttrs",value:function(e){for(var t=e.attributes,n=t.length-1;0<n;n--){var r=t.item(n).name;("xmlns:ns1"===r||0===r.indexOf("ns1:"))&&e.removeAttribute(r)}for(var i=e.firstChild;i;)i.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(i),i=i.nextSibling}}]),e}(),or=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,sr=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function ur(e){return(e=String(e)).match(or)||e.match(sr)?e:"unsafe:"+e}function cr(e){var t,n={},r=s(e.split(","));try{for(r.s();!(t=r.n()).done;){n[t.value]=!0}}catch(i){r.e(i)}finally{r.f()}return n}function lr(){for(var e={},t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];for(var s in o)o.hasOwnProperty(s)&&(e[s]=!0)}return e}var hr,fr=cr("area,br,col,hr,img,wbr"),dr=cr("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),vr=cr("rp,rt"),pr=lr(fr,lr(dr,cr("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),lr(vr,cr("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),lr(vr,dr)),mr=cr("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),gr=cr("srcset"),yr=lr(mr,gr,cr("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),cr("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),kr=cr("script,style,template"),wr=function(){function e(){f(this,e),this.sanitizedSomething=!1,this.buf=[]}return h(e,[{key:"sanitizeChildren",value:function(e){for(var t=e.firstChild,n=!0;t;)if(t.nodeType===Node.ELEMENT_NODE?n=this.startElement(t):t.nodeType===Node.TEXT_NODE?this.chars(t.nodeValue):this.sanitizedSomething=!0,n&&t.firstChild)t=t.firstChild;else for(;t;){t.nodeType===Node.ELEMENT_NODE&&this.endElement(t);var r=this.checkClobberedElement(t,t.nextSibling);if(r){t=r;break}t=this.checkClobberedElement(t,t.parentNode)}return this.buf.join("")}},{key:"startElement",value:function(e){var t=e.nodeName.toLowerCase();if(!pr.hasOwnProperty(t))return this.sanitizedSomething=!0,!kr.hasOwnProperty(t);this.buf.push("<"),this.buf.push(t);for(var n,r=e.attributes,i=0;i<r.length;i++){var a=r.item(i),o=a.name,s=o.toLowerCase();if(yr.hasOwnProperty(s)){var u=a.value;mr[s]&&(u=ur(u)),gr[s]&&(n=u,u=(n=String(n)).split(",").map(function(e){return ur(e.trim())}).join(", ")),this.buf.push(" ",o,'="',xr(u),'"')}else this.sanitizedSomething=!0}return this.buf.push(">"),!0}},{key:"endElement",value:function(e){var t=e.nodeName.toLowerCase();pr.hasOwnProperty(t)&&!fr.hasOwnProperty(t)&&(this.buf.push("</"),this.buf.push(t),this.buf.push(">"))}},{key:"chars",value:function(e){this.buf.push(xr(e))}},{key:"checkClobberedElement",value:function(e,t){if(t&&(e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error("Failed to sanitize html because the element is clobbered: ".concat(e.outerHTML));return t}}]),e}(),br=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,_r=/([^\#-~ |!])/g;function xr(e){return e.replace(/&/g,"&amp;").replace(br,function(e){return"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";"}).replace(_r,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}function Tr(e,t){var n=null;try{hr=hr||function(e){var t=new ar(e);return function(){try{return!!(new window.DOMParser).parseFromString(Bn(""),"text/html")}catch(e){return!1}}()?new ir(t):t}(e);var r=t?String(t):"";n=hr.getInertBodyElement(r);var i=5,a=r;do{if(0===i)throw new Error("Failed to sanitize html because the input is unstable");i--,r=a,a=n.innerHTML,n=hr.getInertBodyElement(r)}while(r!==a);return Bn((new wr).sanitizeChildren(Ir(n)||n))}finally{if(n)for(var o=Ir(n)||n;o.firstChild;)o.removeChild(o.firstChild)}}function Ir(e){return"content"in e&&function(e){return e.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===e.nodeName}(e)?e.content:null}var Sr=((Sr=Sr||{})[Sr.NONE=0]="NONE",Sr[Sr.HTML=1]="HTML",Sr[Sr.STYLE=2]="STYLE",Sr[Sr.SCRIPT=3]="SCRIPT",Sr[Sr.URL=4]="URL",Sr[Sr.RESOURCE_URL=5]="RESOURCE_URL",Sr);function Er(e){var t=Cr();return t?zn(t.sanitize(Sr.HTML,e)||""):Jn(e,"HTML")?zn(Yn(e)):Tr(Ue(),N(e))}function Rr(e){var t=Cr();return t?t.sanitize(Sr.URL,e)||"":Jn(e,"URL")?Yn(e):ur(N(e))}function Cr(){var e=Xe();return e&&e[12]}var Ar="__ngContext__";function Nr(e,t){e[Ar]=t}function Or(e){var t=function(e){return e[Ar]||null}(e);return t?Array.isArray(t)?t:t.lView:null}function Dr(e){return e.ngOriginalError}function Pr(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];e.error.apply(e,n)}var Lr=function(){function e(){f(this,e),this._console=console}return h(e,[{key:"handleError",value:function(e){var t,n=this._findOriginalError(e),r=this._findContext(e),i=(t=e)&&t.ngErrorLogger||Pr;i(this._console,"ERROR",e),n&&i(this._console,"ORIGINAL ERROR",n),r&&i(this._console,"ERROR CONTEXT",r)}},{key:"_findContext",value:function(e){return e?e.ngDebugContext||this._findContext(Dr(e)):null}},{key:"_findOriginalError",value:function(e){for(var t=e&&Dr(e);t&&Dr(t);)t=Dr(t);return t||null}}]),e}(),Fr=("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(X);function Mr(e){return e instanceof Function?e():e}var Ur=((Ur=Ur||{})[Ur.Important=1]="Important",Ur[Ur.DashCase=2]="DashCase",Ur);function jr(e,t){return(void 0)(e,t)}function Vr(e){var t=e[3];return _e(t)?t[3]:t}function qr(e){return zr(e[13])}function Br(e){return zr(e[4])}function zr(e){for(;null!==e&&!_e(e);)e=e[4];return e}function Zr(e,t,n,r,i){if(null!=r){var a,o=!1;_e(r)?a=r:be(r)&&(o=!0,r=r[0]);var s=qe(r);0===e&&null!==n?null==i?Jr(t,n,s):Yr(t,n,s,i||null,!0):1===e&&null!==n?Yr(t,n,s,i||null,!0):2===e?function(e,t,n){var r=Xr(e,t);r&&function(e,t,n,r){je(e)?e.removeChild(t,n,r):t.removeChild(n)}(e,r,t,n)}(t,s,o):3===e&&t.destroyNode(s),null!=a&&function(e,t,n,r,i){var a=n[7];a!==qe(n)&&Zr(t,e,r,a,i);for(var o=10;o<n.length;o++){var s=n[o];ai(s[1],s,e,t,r,a)}}(t,e,a,n,i)}}function Hr(e,t,n){return je(e)?e.createElement(t,n):null===n?e.createElement(t):e.createElementNS(n,t)}function Gr(e,t){var n=e[9],r=n.indexOf(t),i=t[3];1024&t[2]&&(t[2]&=-1025,Ye(i,-1)),n.splice(r,1)}function Kr(e,t){if(!(e.length<=10)){var n=10+t,r=e[n];if(r){var i=r[17];null!==i&&i!==e&&Gr(i,r),t>0&&(e[n-1][4]=r[4]);var a=kn(e,10+t);!function(e,t){ai(e,t,t[11],2,null,null),t[0]=null,t[6]=null}(r[1],r);var o=a[19];null!==o&&o.detachView(a[1]),r[3]=null,r[4]=null,r[2]&=-129}return r}}function Wr(e,t){if(!(256&t[2])){var n=t[11];je(n)&&n.destroyNode&&ai(e,t,n,3,null,null),function(e){var t=e[13];if(!t)return Qr(e[1],e);for(;t;){var n=null;if(be(t))n=t[13];else{var r=t[10];r&&(n=r)}if(!n){for(;t&&!t[4]&&t!==e;)be(t)&&Qr(t[1],t),t=t[3];null===t&&(t=e),be(t)&&Qr(t[1],t),n=t&&t[4]}t=n}}(t)}}function Qr(e,t){if(!(256&t[2])){t[2]&=-129,t[2]|=256,function(e,t){var n;if(null!=e&&null!=(n=e.destroyHooks))for(var r=0;r<n.length;r+=2){var i=t[n[r]];if(!(i instanceof Dt)){var a=n[r+1];if(Array.isArray(a))for(var o=0;o<a.length;o+=2){var s=i[a[o]],u=a[o+1];try{u.call(s)}finally{}}else try{a.call(i)}finally{}}}}(e,t),function(e,t){var n=e.cleanup,r=t[7],i=-1;if(null!==n)for(var a=0;a<n.length-1;a+=2)if("string"==typeof n[a]){var o=n[a+1],s="function"==typeof o?o(t):qe(t[o]),u=r[i=n[a+2]],c=n[a+3];"boolean"==typeof c?s.removeEventListener(n[a],u,c):c>=0?r[i=c]():r[i=-c].unsubscribe(),a+=2}else{var l=r[i=n[a+1]];n[a].call(l)}if(null!==r){for(var h=i+1;h<r.length;h++)r[h]();t[7]=null}}(e,t),1===t[1].type&&je(t[11])&&t[11].destroy();var n=t[17];if(null!==n&&_e(t[3])){n!==t[3]&&Gr(n,t);var r=t[19];null!==r&&r.detachView(e)}}}function Yr(e,t,n,r,i){je(e)?e.insertBefore(t,n,r,i):t.insertBefore(n,r,i)}function Jr(e,t,n){je(e)?e.appendChild(t,n):t.appendChild(n)}function $r(e,t,n,r,i){null!==r?Yr(e,t,n,r,i):Jr(e,t,n)}function Xr(e,t){return je(e)?e.parentNode(t):t.parentNode}function ei(e,t,n,r){var i=function(e,t,n){return function(e,t,n){for(var r=t;null!==r&&40&r.type;)r=(t=r).parent;if(null===r)return n[0];if(2&r.flags){var i=e.data[r.directiveStart].encapsulation;if(i===Q.None||i===Q.Emulated)return null}return ze(r,n)}(e,t.parent,n)}(e,r,t),a=t[11],o=function(e,t,n){return function(e,t,n){return 40&e.type?ze(e,n):null}(e,0,n)}(r.parent||t[6],0,t);if(null!=i)if(Array.isArray(n))for(var s=0;s<n.length;s++)$r(a,i,n[s],o,!1);else $r(a,i,n,o,!1)}function ti(e,t){if(null!==t){var n=t.type;if(3&n)return ze(t,e);if(4&n)return ri(-1,e[t.index]);if(8&n){var r=t.child;if(null!==r)return ti(e,r);var i=e[t.index];return _e(i)?ri(-1,i):qe(i)}if(32&n)return jr(t,e)()||qe(e[t.index]);var a=ni(e,t);return null!==a?Array.isArray(a)?a[0]:ti(Vr(e[16]),a):ti(e,t.next)}return null}function ni(e,t){return null!==t?e[16][6].projection[t.projection]:null}function ri(e,t){var n=10+e+1;if(n<t.length){var r=t[n],i=r[1].firstChild;if(null!==i)return ti(r,i)}return t[7]}function ii(e,t,n,r,i,a,o){for(;null!=n;){var s=r[n.index],u=n.type;if(o&&0===t&&(s&&Nr(qe(s),r),n.flags|=4),64!=(64&n.flags))if(8&u)ii(e,t,n.child,r,i,a,!1),Zr(t,e,i,s,a);else if(32&u){for(var c=jr(n,r),l=void 0;l=c();)Zr(t,e,i,l,a);Zr(t,e,i,s,a)}else 16&u?oi(e,t,r,n,i,a):Zr(t,e,i,s,a);n=o?n.projectionNext:n.next}}function ai(e,t,n,r,i,a){ii(n,r,e.firstChild,t,i,a,!1)}function oi(e,t,n,r,i,a){var o=n[16],s=o[6].projection[r.projection];if(Array.isArray(s))for(var u=0;u<s.length;u++)Zr(t,e,i,s[u],a);else ii(e,t,s,o[3],i,a,!0)}function si(e,t,n){je(e)?e.setAttribute(t,"style",n):t.style.cssText=n}function ui(e,t,n){je(e)?""===n?e.removeAttribute(t,"class"):e.setAttribute(t,"class",n):t.className=n}function ci(e,t,n){for(var r=e.length;;){var i=e.indexOf(t,n);if(-1===i)return i;if(0===i||e.charCodeAt(i-1)<=32){var a=t.length;if(i+a===r||e.charCodeAt(i+a)<=32)return i}n=i+1}}var li="ng-template";function hi(e,t,n){for(var r=0;r<e.length;){var i=e[r++];if(n&&"class"===i){if(-1!==ci((i=e[r]).toLowerCase(),t,0))return!0}else if(1===i){for(;r<e.length&&"string"==typeof(i=e[r++]);)if(i.toLowerCase()===t)return!0;return!1}}return!1}function fi(e){return 4===e.type&&e.value!==li}function di(e,t,n){return t===(4!==e.type||n?e.value:li)}function vi(e,t,n){for(var r=4,i=e.attrs||[],a=function(e){for(var t=0;t<e.length;t++)if(Lt(e[t]))return t;return e.length}(i),o=!1,s=0;s<t.length;s++){var u=t[s];if("number"!=typeof u){if(!o)if(4&r){if(r=2|1&r,""!==u&&!di(e,u,n)||""===u&&1===t.length){if(pi(r))return!1;o=!0}}else{var c=8&r?u:t[++s];if(8&r&&null!==e.attrs){if(!hi(e.attrs,c,n)){if(pi(r))return!1;o=!0}continue}var l=mi(8&r?"class":u,i,fi(e),n);if(-1===l){if(pi(r))return!1;o=!0;continue}if(""!==c){var h;h=l>a?"":i[l+1].toLowerCase();var f=8&r?h:null;if(f&&-1!==ci(f,c,0)||2&r&&c!==h){if(pi(r))return!1;o=!0}}}}else{if(!o&&!pi(r)&&!pi(u))return!1;if(o&&pi(u))continue;o=!1,r=u|1&r}}return pi(r)||o}function pi(e){return 0==(1&e)}function mi(e,t,n,r){if(null===t)return-1;var i=0;if(r||!n){for(var a=!1;i<t.length;){var o=t[i];if(o===e)return i;if(3===o||6===o)a=!0;else{if(1===o||2===o){for(var s=t[++i];"string"==typeof s;)s=t[++i];continue}if(4===o)break;if(0===o){i+=4;continue}}i+=a?1:2}return-1}return function(e,t){var n=e.indexOf(4);if(n>-1)for(n++;n<e.length;){var r=e[n];if("number"==typeof r)return-1;if(r===t)return n;n++}return-1}(t,e)}function gi(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=0;r<t.length;r++)if(vi(e,t[r],n))return!0;return!1}function yi(e,t){return e?":not("+t.trim()+")":t}function ki(e){for(var t=e[0],n=1,r=2,i="",a=!1;n<e.length;){var o=e[n];if("string"==typeof o)if(2&r){var s=e[++n];i+="["+o+(s.length>0?'="'+s+'"':"")+"]"}else 8&r?i+="."+o:4&r&&(i+=" "+o);else""!==i&&!pi(o)&&(t+=yi(a,i),i=""),r=o,a=a||!pi(r);n++}return""!==i&&(t+=yi(a,i)),t}var wi={};function bi(e){_i(et(),Xe(),Tt()+e,st())}function _i(e,t,n,r){if(!r)if(3==(3&t[2])){var i=e.preOrderCheckHooks;null!==i&&Rt(t,i,n)}else{var a=e.preOrderHooks;null!==a&&Ct(t,a,0,n)}It(n)}function xi(e,t){return e<<17|t<<2}function Ti(e){return e>>17&32767}function Ii(e){return 2|e}function Si(e){return(131068&e)>>2}function Ei(e,t){return-131069&e|t<<2}function Ri(e){return 1|e}function Ci(e,t){var n=e.contentQueries;if(null!==n)for(var r=0;r<n.length;r+=2){var i=n[r],a=n[r+1];if(-1!==a){var o=e.data[a];pt(i),o.contentQueries(2,t[a],a)}}}function Ai(e,t,n,r,i,a,o,s,u,c){var l=t.blueprint.slice();return l[0]=i,l[2]=140|r,Qe(l),l[3]=l[15]=e,l[8]=n,l[10]=o||e&&e[10],l[11]=s||e&&e[11],l[12]=u||e&&e[12]||null,l[9]=c||e&&e[9]||null,l[6]=a,l[16]=2==t.type?e[16]:l,l}function Ni(e,t,n,r,i){var a=e.data[t];if(null===a)a=function(e,t,n,r,i){var a=rt(),o=at(),s=e.data[t]=function(e,t,n,r,i,a){return{type:n,index:r,insertBeforeIndex:null,injectorIndex:t?t.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:i,attrs:a,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?a:a&&a.parent,n,t,r,i);return null===e.firstChild&&(e.firstChild=s),null!==a&&(o?null==a.child&&null!==s.parent&&(a.child=s):null===a.next&&(a.next=s)),s}(e,t,n,r,i),Je.lFrame.inI18n&&(a.flags|=64);else if(64&a.type){a.type=n,a.value=r,a.attrs=i;var o=function(){var e=Je.lFrame,t=e.currentTNode;return e.isParent?t:t.parent}();a.injectorIndex=null===o?-1:o.injectorIndex}return it(a,!0),a}function Oi(e,t,n,r){if(0===n)return-1;for(var i=t.length,a=0;a<n;a++)t.push(r),e.blueprint.push(r),e.data.push(null);return i}function Di(e,t,n){yt(t);try{var r=e.viewQuery;null!==r&&ca(1,r,n);var i=e.template;null!==i&&Fi(e,t,i,1,n),e.firstCreatePass&&(e.firstCreatePass=!1),e.staticContentQueries&&Ci(e,t),e.staticViewQueries&&ca(2,e.viewQuery,n);var a=e.components;null!==a&&function(e,t){for(var n=0;n<t.length;n++)ia(e,t[n])}(t,a)}catch(r){throw e.firstCreatePass&&(e.incompleteFirstPass=!0,e.firstCreatePass=!1),r}finally{t[2]&=-5,xt()}}function Pi(e,t,n,r){var i=t[2];if(256!=(256&i)){yt(t);var a=st();try{Qe(t),function(e){Je.lFrame.bindingIndex=e}(e.bindingStartIndex),null!==n&&Fi(e,t,n,2,r);var o=3==(3&i);if(!a)if(o){var s=e.preOrderCheckHooks;null!==s&&Rt(t,s,null)}else{var u=e.preOrderHooks;null!==u&&Ct(t,u,0,null),At(t,0)}if(function(e){for(var t=qr(e);null!==t;t=Br(t))if(t[2])for(var n=t[9],r=0;r<n.length;r++){var i=n[r],a=i[3];0==(1024&i[2])&&Ye(a,1),i[2]|=1024}}(t),function(e){for(var t=qr(e);null!==t;t=Br(t))for(var n=10;n<t.length;n++){var r=t[n],i=r[1];Ke(r)&&Pi(i,r,i.template,r[8])}}(t),null!==e.contentQueries&&Ci(e,t),!a)if(o){var c=e.contentCheckHooks;null!==c&&Rt(t,c)}else{var l=e.contentHooks;null!==l&&Ct(t,l,1),At(t,1)}!function(e,t){var n=e.hostBindingOpCodes;if(null!==n)try{for(var r=0;r<n.length;r++){var i=n[r];if(i<0)It(~i);else{var a=i,o=n[++r],s=n[++r];ht(o,a),s(2,t[a])}}}finally{It(-1)}}(e,t);var h=e.components;null!==h&&function(e,t){for(var n=0;n<t.length;n++)na(e,t[n])}(t,h);var f=e.viewQuery;if(null!==f&&ca(2,f,r),!a)if(o){var d=e.viewCheckHooks;null!==d&&Rt(t,d)}else{var v=e.viewHooks;null!==v&&Ct(t,v,2),At(t,2)}!0===e.firstUpdatePass&&(e.firstUpdatePass=!1),a||(t[2]&=-73),1024&t[2]&&(t[2]&=-1025,Ye(t[3],-1))}finally{xt()}}}function Li(e,t,n,r){var i=t[10],a=!st(),o=Ge(t);try{a&&!o&&i.begin&&i.begin(),o&&Di(e,t,r),Pi(e,t,n,r)}finally{a&&!o&&i.end&&i.end()}}function Fi(e,t,n,r,i){var a=Tt(),o=2&r;try{It(-1),o&&t.length>20&&_i(e,t,20,st()),n(r,i)}finally{It(a)}}function Mi(e,t,n){if(xe(t))for(var r=t.directiveEnd,i=t.directiveStart;i<r;i++){var a=e.data[i];a.contentQueries&&a.contentQueries(1,n[i],i)}}function Ui(e,t,n){!$e()||(function(e,t,n,r){var i=n.directiveStart,a=n.directiveEnd;e.firstCreatePass||Ht(n,t),Nr(r,t);for(var o=n.initialInputs,s=i;s<a;s++){var u=e.data[s],c=Se(u);c&&$i(t,n,u);var l=rn(t,e,s,n);Nr(l,t),null!==o&&Xi(0,s-i,l,u,0,o),c&&(He(n.index,t)[8]=l)}}(e,t,n,ze(n,t)),128==(128&n.flags)&&function(e,t,n){var r=n.directiveStart,i=n.directiveEnd,a=n.index,o=Je.lFrame.currentDirectiveIndex;try{It(a);for(var s=r;s<i;s++){var u=e.data[s],c=t[s];ft(s),(null!==u.hostBindings||0!==u.hostVars||null!==u.hostAttrs)&&Ki(u,c)}}finally{It(-1),ft(o)}}(e,t,n))}function ji(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ze,r=t.localNames;if(null!==r)for(var i=t.index+1,a=0;a<r.length;a+=2){var o=r[a+1],s=-1===o?n(t,e):e[o];e[i++]=s}}function Vi(e){var t=e.tView;return null===t||t.incompleteFirstPass?e.tView=qi(1,null,e.template,e.decls,e.vars,e.directiveDefs,e.pipeDefs,e.viewQuery,e.schemas,e.consts):t}function qi(e,t,n,r,i,a,o,s,u,c){var l=20+r,h=l+i,f=function(e,t){for(var n=[],r=0;r<t;r++)n.push(r<e?null:wi);return n}(l,h),d="function"==typeof c?c():c;return f[1]={type:e,blueprint:f,template:n,queries:null,viewQuery:s,declTNode:t,data:f.slice().fill(null,l),bindingStartIndex:l,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof a?a():a,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:u,consts:d,incompleteFirstPass:!1}}function Bi(e,t,n,r){var i=ha(t);null===n?i.push(r):(i.push(n),e.firstCreatePass&&fa(e).push(r,i.length-1))}function zi(e,t,n){for(var r in e)if(e.hasOwnProperty(r)){var i=e[r];(n=null===n?{}:n).hasOwnProperty(r)?n[r].push(t,i):n[r]=[t,i]}return n}function Zi(e,t,n,r,i,a,o,s){var u,c=ze(t,n),l=t.inputs;!s&&null!=l&&(u=l[r])?(va(e,n,u,r,i),Te(t)&&function(e,t){var n=He(t,e);16&n[2]||(n[2]|=64)}(n,t.index)):3&t.type&&(r=function(e){return"class"===e?"className":"for"===e?"htmlFor":"formaction"===e?"formAction":"innerHtml"===e?"innerHTML":"readonly"===e?"readOnly":"tabindex"===e?"tabIndex":e}(r),i=null!=o?o(i,t.value||"",r):i,je(a)?a.setProperty(c,r,i):Ft(r)||(c.setProperty?c.setProperty(r,i):c[r]=i))}function Hi(e,t,n,r){var i=!1;if($e()){var a=function(e,t,n){var r=e.directiveRegistry,i=null;if(r)for(var a=0;a<r.length;a++){var o=r[a];gi(n,o.selectors,!1)&&(i||(i=[]),Qt(Ht(n,t),e,o.type),Se(o)?(Wi(e,n),i.unshift(o)):i.push(o))}return i}(e,t,n),o=null===r?null:{"":-1};if(null!==a){i=!0,Yi(n,e.data.length,a.length);for(var s=0;s<a.length;s++){var u=a[s];u.providersResolver&&u.providersResolver(u)}for(var c=!1,l=!1,h=Oi(e,t,a.length,null),f=0;f<a.length;f++){var d=a[f];n.mergedAttrs=Mt(n.mergedAttrs,d.hostAttrs),Ji(e,n,t,h,d),Qi(h,d,o),null!==d.contentQueries&&(n.flags|=8),(null!==d.hostBindings||null!==d.hostAttrs||0!==d.hostVars)&&(n.flags|=128);var v=d.type.prototype;!c&&(v.ngOnChanges||v.ngOnInit||v.ngDoCheck)&&((e.preOrderHooks||(e.preOrderHooks=[])).push(n.index),c=!0),!l&&(v.ngOnChanges||v.ngDoCheck)&&((e.preOrderCheckHooks||(e.preOrderCheckHooks=[])).push(n.index),l=!0),h++}!function(e,t){for(var n=t.directiveEnd,r=e.data,i=t.attrs,a=[],o=null,s=null,u=t.directiveStart;u<n;u++){var c=r[u],l=c.inputs,h=null===i||fi(t)?null:ea(l,i);a.push(h),o=zi(l,u,o),s=zi(c.outputs,u,s)}null!==o&&(o.hasOwnProperty("class")&&(t.flags|=16),o.hasOwnProperty("style")&&(t.flags|=32)),t.initialInputs=a,t.inputs=o,t.outputs=s}(e,n)}o&&function(e,t,n){if(t)for(var r=e.localNames=[],i=0;i<t.length;i+=2){var a=n[t[i+1]];if(null==a)throw new A("301","Export of name '".concat(t[i+1],"' not found!"));r.push(t[i],a)}}(n,r,o)}return n.mergedAttrs=Mt(n.mergedAttrs,n.attrs),i}function Gi(e,t,n,r,i,a){var o=a.hostBindings;if(o){var s=e.hostBindingOpCodes;null===s&&(s=e.hostBindingOpCodes=[]);var u=~t.index;(function(e){for(var t=e.length;t>0;){var n=e[--t];if("number"==typeof n&&n<0)return n}return 0})(s)!=u&&s.push(u),s.push(r,i,o)}}function Ki(e,t){null!==e.hostBindings&&e.hostBindings(1,t)}function Wi(e,t){t.flags|=2,(e.components||(e.components=[])).push(t.index)}function Qi(e,t,n){if(n){if(t.exportAs)for(var r=0;r<t.exportAs.length;r++)n[t.exportAs[r]]=e;Se(t)&&(n[""]=e)}}function Yi(e,t,n){e.flags|=1,e.directiveStart=t,e.directiveEnd=t+n,e.providerIndexes=t}function Ji(e,t,n,r,i){e.data[r]=i;var a=i.factory||(i.factory=Re(i.type)),o=new Dt(a,Se(i),null);e.blueprint[r]=o,n[r]=o,Gi(e,t,0,r,Oi(e,n,i.hostVars,wi),i)}function $i(e,t,n){var r=ze(t,e),i=Vi(n),a=e[10],o=aa(e,Ai(e,i,null,n.onPush?64:16,r,t,a,a.createRenderer(r,n),null,null));e[t.index]=o}function Xi(e,t,n,r,i,a){var o=a[t];if(null!==o)for(var s=r.setInput,u=0;u<o.length;){var c=o[u++],l=o[u++],h=o[u++];null!==s?r.setInput(n,h,c,l):n[l]=h}}function ea(e,t){for(var n=null,r=0;r<t.length;){var i=t[r];if(0!==i)if(5!==i){if("number"==typeof i)break;e.hasOwnProperty(i)&&(null===n&&(n=[]),n.push(i,e[i],t[r+1])),r+=2}else r+=2;else r+=4}return n}function ta(e,t,n,r){return new Array(e,!0,!1,t,null,0,r,n,null,null)}function na(e,t){var n=He(t,e);if(Ke(n)){var r=n[1];80&n[2]?Pi(r,n,r.template,n[8]):n[5]>0&&ra(n)}}function ra(e){for(var t=qr(e);null!==t;t=Br(t))for(var n=10;n<t.length;n++){var r=t[n];if(1024&r[2]){var i=r[1];Pi(i,r,i.template,r[8])}else r[5]>0&&ra(r)}var a=e[1].components;if(null!==a)for(var o=0;o<a.length;o++){var s=He(a[o],e);Ke(s)&&s[5]>0&&ra(s)}}function ia(e,t){var n=He(t,e),r=n[1];(function(e,t){for(var n=t.length;n<e.blueprint.length;n++)t.push(e.blueprint[n])})(r,n),Di(r,n,n[8])}function aa(e,t){return e[13]?e[14][4]=t:e[13]=t,e[14]=t,t}function oa(e){for(;e;){e[2]|=64;var t=Vr(e);if(Ee(e)&&!t)return e;e=t}return null}function sa(e,t,n){var r=t[10];r.begin&&r.begin();try{Pi(e,t,e.template,n)}catch(i){throw da(t,i),i}finally{r.end&&r.end()}}function ua(e){!function(e){for(var t=0;t<e.components.length;t++){var n=e.components[t],r=Or(n),i=r[1];Li(i,r,i.template,n)}}(e[8])}function ca(e,t,n){pt(0),t(e,n)}var la=Promise.resolve(null);function ha(e){return e[7]||(e[7]=[])}function fa(e){return e.cleanup||(e.cleanup=[])}function da(e,t){var n=e[9],r=n?n.get(Lr,null):null;r&&r.handleError(t)}function va(e,t,n,r,i){for(var a=0;a<n.length;){var o=n[a++],s=n[a++],u=t[o],c=e.data[o];null!==c.setInput?c.setInput(u,i,r,s):u[s]=i}}function pa(e,t,n){var r=n?e.styles:null,i=n?e.classes:null,a=0;if(null!==t)for(var o=0;o<t.length;o++){var s=t[o];"number"==typeof s?a=s:1==a?i=I(i,s):2==a&&(r=I(r,s+": "+t[++o]+";"))}n?e.styles=r:e.stylesWithoutHost=r,n?e.classes=i:e.classesWithoutHost=i}var ma,ga=new dn("INJECTOR",-1),ya=function(){function e(){f(this,e)}return h(e,[{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Tn;if(t===Tn){var n=new Error("NullInjectorError: No provider for ".concat(T(e),"!"));throw n.name="NullInjectorError",n}return t}}]),e}(),ka=new dn("Set Injector scope."),wa={},ba={};function _a(){return void 0===ma&&(ma=new ya),ma}function xa(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3?arguments[3]:void 0;return new Ta(e,n,t||_a(),r)}var Ta=function(){function e(t,n,r){var i=this,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;f(this,e),this.parent=r,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;var o=[];n&&gn(n,function(e){return i.processProvider(e,t,n)}),gn([t],function(e){return i.processInjectorType(e,[],o)}),this.records.set(ga,Ea(void 0,this));var s=this.records.get(ka);this.scope=null!=s?s.value:null,this.source=a||("object"==typeof t?null:T(t))}return h(e,[{key:"destroyed",get:function(){return this._destroyed}},{key:"destroy",value:function(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(function(e){return e.ngOnDestroy()})}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Tn,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Z.Default;this.assertNotDestroyed();var r,i=An(this),a=H(void 0);try{if(!(n&Z.SkipSelf)){var o=this.records.get(e);if(void 0===o){var s=("function"==typeof(r=e)||"object"==typeof r&&r instanceof dn)&&F(e);o=s&&this.injectableDefInScope(s)?Ea(Ia(e),wa):null,this.records.set(e,o)}if(null!=o)return this.hydrate(e,o)}return(n&Z.Self?_a():this.parent).get(e,t=n&Z.Optional&&t===Tn?null:t)}catch(u){if("NullInjectorError"===u.name){if((u[Sn]=u[Sn]||[]).unshift(T(e)),i)throw u;return Fn(u,e,"R3InjectorError",this.source)}throw u}finally{H(a),An(i)}}},{key:"_resolveInjectorDefTypes",value:function(){var e=this;this.injectorDefTypes.forEach(function(t){return e.get(t)})}},{key:"toString",value:function(){var e=[];return this.records.forEach(function(t,n){return e.push(T(n))}),"R3Injector[".concat(e.join(", "),"]")}},{key:"assertNotDestroyed",value:function(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}},{key:"processInjectorType",value:function(e,t,n){var r=this;if(!(e=R(e)))return!1;var i=U(e),a=null==i&&e.ngModule||void 0,o=void 0===a?e:a,s=-1!==n.indexOf(o);if(void 0!==a&&(i=U(a)),null==i)return!1;if(null!=i.imports&&!s){var u;n.push(o);try{gn(i.imports,function(e){r.processInjectorType(e,t,n)&&(void 0===u&&(u=[]),u.push(e))})}finally{}if(void 0!==u)for(var c=function(e){var t=u[e],n=t.ngModule,i=t.providers;gn(i,function(e){return r.processProvider(e,n,i||te)})},l=0;l<u.length;l++)c(l)}this.injectorDefTypes.add(o);var h=Re(o)||function(){return new o};this.records.set(o,Ea(h,wa));var f=i.providers;if(null!=f&&!s){var d=e;gn(f,function(e){return r.processProvider(e,d,f)})}return void 0!==a&&void 0!==e.providers}},{key:"processProvider",value:function(e,t,n){var r,i=Ca(e=R(e))?e:R(e&&e.provide),a=Ra(r=e)?Ea(void 0,r.useValue):Ea(Sa(r),wa);if(Ca(e)||!0!==e.multi)this.records.get(i);else{var o=this.records.get(i);o||((o=Ea(void 0,wa,!0)).factory=function(){return Dn(o.multi)},this.records.set(i,o)),i=e,o.multi.push(e)}this.records.set(i,a)}},{key:"hydrate",value:function(e,t){return t.value===wa&&(t.value=ba,t.value=t.factory()),"object"==typeof t.value&&t.value&&null!==(n=t.value)&&"object"==typeof n&&"function"==typeof n.ngOnDestroy&&this.onDestroy.add(t.value),t.value;var n}},{key:"injectableDefInScope",value:function(e){if(!e.providedIn)return!1;var t=R(e.providedIn);return"string"==typeof t?"any"===t||t===this.scope:this.injectorDefTypes.has(t)}}]),e}();function Ia(e){var t=F(e),n=null!==t?t.factory:Re(e);if(null!==n)return n;if(e instanceof dn)throw new Error("Token ".concat(T(e)," is missing a \u0275prov definition."));if(e instanceof Function)return function(e){var t=e.length;if(t>0){var n=function(e,t){for(var n=[],r=0;r<e;r++)n.push("?");return n}(t);throw new Error("Can't resolve all parameters for ".concat(T(e),": (").concat(n.join(", "),")."))}var r=function(e){var t=e&&(e[V]||e[B]);if(t){var n=function(e){if(e.hasOwnProperty("name"))return e.name;var t=(""+e).match(/^function\s*([^\s(]+)/);return null===t?"":t[1]}(e);return console.warn('DEPRECATED: DI is instantiating a token "'.concat(n,'" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "').concat(n,'" class.')),t}return null}(e);return null!==r?function(){return r.factory(e)}:function(){return new e}}(e);throw new Error("unreachable")}function Sa(e,t,n){var r;if(Ca(e)){var i=R(e);return Re(i)||Ia(i)}if(Ra(e))r=function(){return R(e.useValue)};else if(function(e){return!(!e||!e.useFactory)}(e))r=function(){return e.useFactory.apply(e,a(Dn(e.deps||[])))};else if(function(e){return!(!e||!e.useExisting)}(e))r=function(){return On(R(e.useExisting))};else{var o=R(e&&(e.useClass||e.provide));if(!function(e){return!!e.deps}(e))return Re(o)||Ia(o);r=function(){return y(o,a(Dn(e.deps)))}}return r}function Ea(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return{factory:e,value:t,multi:n?[]:void 0}}function Ra(e){return null!==e&&"object"==typeof e&&Cn in e}function Ca(e){return"function"==typeof e}var Aa,Na=function(e,t,n){return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3?arguments[3]:void 0,i=xa(e,t,n,r);return i._resolveInjectorDefTypes(),i}({name:n},t,e,n)},Oa=((Aa=function(){function e(){f(this,e)}return h(e,null,[{key:"create",value:function(e,t){return Array.isArray(e)?Na(e,t,""):Na(e.providers,e.parent,e.name||"")}}]),e}()).THROW_IF_NOT_FOUND=Tn,Aa.NULL=new ya,Aa.\u0275prov=P({token:Aa,providedIn:"any",factory:function(){return On(ga)}}),Aa.__NG_ELEMENT_ID__=-1,Aa);function Da(e,t){Et(Or(e)[1],nt())}function Pa(e){for(var t=function(e){return Object.getPrototypeOf(e.prototype).constructor}(e.type),n=!0,r=[e];t;){var i=void 0;if(Se(e))i=t.\u0275cmp||t.\u0275dir;else{if(t.\u0275cmp)throw new Error("Directives cannot inherit Components");i=t.\u0275dir}if(i){if(n){r.push(i);var a=e;a.inputs=La(e.inputs),a.declaredInputs=La(e.declaredInputs),a.outputs=La(e.outputs);var o=i.hostBindings;o&&Ua(e,o);var s=i.viewQuery,u=i.contentQueries;if(s&&Fa(e,s),u&&Ma(e,u),x(e.inputs,i.inputs),x(e.declaredInputs,i.declaredInputs),x(e.outputs,i.outputs),Se(i)&&i.data.animation){var c=e.data;c.animation=(c.animation||[]).concat(i.data.animation)}}var l=i.features;if(l)for(var h=0;h<l.length;h++){var f=l[h];f&&f.ngInherit&&f(e),f===Pa&&(n=!1)}}t=Object.getPrototypeOf(t)}!function(e){for(var t=0,n=null,r=e.length-1;r>=0;r--){var i=e[r];i.hostVars=t+=i.hostVars,i.hostAttrs=Mt(i.hostAttrs,n=Mt(n,i.hostAttrs))}}(r)}function La(e){return e===ee?{}:e===te?[]:e}function Fa(e,t){var n=e.viewQuery;e.viewQuery=n?function(e,r){t(e,r),n(e,r)}:t}function Ma(e,t){var n=e.contentQueries;e.contentQueries=n?function(e,r,i){t(e,r,i),n(e,r,i)}:t}function Ua(e,t){var n=e.hostBindings;e.hostBindings=n?function(e,r){t(e,r),n(e,r)}:t}var ja=null;function Va(){if(!ja){var e=X.Symbol;if(e&&e.iterator)ja=e.iterator;else for(var t=Object.getOwnPropertyNames(Map.prototype),n=0;n<t.length;++n){var r=t[n];"entries"!==r&&"size"!==r&&Map.prototype[r]===Map.prototype.entries&&(ja=r)}}return ja}function qa(e){return!!Ba(e)&&(Array.isArray(e)||!(e instanceof Map)&&Va()in e)}function Ba(e){return null!==e&&("function"==typeof e||"object"==typeof e)}function za(e,t,n){return!Object.is(e[t],n)&&(e[t]=n,!0)}function Za(e,t,n,r){var i=Xe();return za(i,ct(),t)&&(et(),function(e,t,n,r,i,a){var o=ze(e,t);!function(e,t,n,r,i,a,o){if(null==a)je(e)?e.removeAttribute(t,i,n):t.removeAttribute(i);else{var s=null==o?N(a):o(a,r||"",i);je(e)?e.setAttribute(t,i,s,n):n?t.setAttributeNS(n,i,s):t.setAttribute(i,s)}}(t[11],o,a,e.value,n,r,i)}(St(),i,e,t,n,r)),Za}function Ha(e,t,n,r,i,a,o,s){var u=Xe(),c=et(),l=e+20,h=c.firstCreatePass?function(e,t,n,r,i,a,o,s,u){var c=t.consts,l=Ni(t,e,4,o||null,We(c,s));Hi(t,n,l,We(c,u)),Et(t,l);var h=l.tViews=qi(2,l,r,i,a,t.directiveRegistry,t.pipeRegistry,null,t.schemas,c);return null!==t.queries&&(t.queries.template(t,l),h.queries=t.queries.embeddedTView(l)),l}(l,c,u,t,n,r,i,a,o):c.data[l];it(h,!1);var f=u[11].createComment("");ei(c,u,f,h),Nr(f,u),aa(u,u[l]=ta(f,u,f,h)),Ie(h)&&Ui(c,u,h),null!=o&&ji(u,h,s)}function Ga(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Z.Default,n=Xe();return null===n?On(e,t):$t(nt(),n,R(e),t)}function Ka(e,t,n){var r=Xe();return za(r,ct(),t)&&Zi(et(),St(),r,e,t,r[11],n,!1),Ka}function Wa(e,t,n,r,i){var a=i?"class":"style";va(e,n,t.inputs[a],a,r)}function Qa(e,t,n,r){var i=Xe(),a=et(),o=20+e,s=i[11],u=i[o]=Hr(s,t,Je.lFrame.currentNamespace),c=a.firstCreatePass?function(e,t,n,r,i,a,o){var s=t.consts,u=Ni(t,e,2,i,We(s,a));return Hi(t,n,u,We(s,o)),null!==u.attrs&&pa(u,u.attrs,!1),null!==u.mergedAttrs&&pa(u,u.mergedAttrs,!0),null!==t.queries&&t.queries.elementStart(t,u),u}(o,a,i,0,t,n,r):a.data[o];it(c,!0);var l=c.mergedAttrs;null!==l&&Pt(s,u,l);var h=c.classes;null!==h&&ui(s,u,h);var f=c.styles;null!==f&&si(s,u,f),64!=(64&c.flags)&&ei(a,i,u,c),0===Je.lFrame.elementDepthCount&&Nr(u,i),Je.lFrame.elementDepthCount++,Ie(c)&&(Ui(a,i,c),Mi(a,c,i)),null!==r&&ji(i,c)}function Ya(){var e=nt();at()?ot():it(e=e.parent,!1);var t=e;Je.lFrame.elementDepthCount--;var n=et();n.firstCreatePass&&(Et(n,e),xe(e)&&n.queries.elementEnd(e)),null!=t.classesWithoutHost&&function(e){return 0!=(16&e.flags)}(t)&&Wa(n,t,Xe(),t.classesWithoutHost,!0),null!=t.stylesWithoutHost&&function(e){return 0!=(32&e.flags)}(t)&&Wa(n,t,Xe(),t.stylesWithoutHost,!1)}function Ja(e,t,n,r){Qa(e,t,n,r),Ya()}function $a(e,t,n){var r=Xe(),i=et(),a=e+20,o=i.firstCreatePass?function(e,t,n,r,i){var a=t.consts,o=We(a,r),s=Ni(t,e,8,"ng-container",o);return null!==o&&pa(s,o,!0),Hi(t,n,s,We(a,i)),null!==t.queries&&t.queries.elementStart(t,s),s}(a,i,r,t,n):i.data[a];it(o,!0);var s=r[a]=r[11].createComment("");ei(i,r,s,o),Nr(s,r),Ie(o)&&(Ui(i,r,o),Mi(i,o,r)),null!=n&&ji(r,o)}function Xa(){var e=nt(),t=et();at()?ot():it(e=e.parent,!1),t.firstCreatePass&&(Et(t,e),xe(e)&&t.queries.elementEnd(e))}function eo(){return Xe()}function to(e){return!!e&&"function"==typeof e.then}function no(e){return!!e&&"function"==typeof e.subscribe}var ro=no;function io(e,t,n,r){var i=Xe(),a=et(),o=nt();return function(e,t,n,r,i,a,o,s){var u=Ie(r),c=e.firstCreatePass&&fa(e),l=t[8],h=ha(t),f=!0;if(3&r.type||s){var d=ze(r,t),v=s?s(d):d,p=h.length,m=s?function(e){return s(qe(e[r.index]))}:r.index;if(je(n)){var g=null;if(!s&&u&&(g=function(e,t,n,r){var i=e.cleanup;if(null!=i)for(var a=0;a<i.length-1;a+=2){var o=i[a];if(o===n&&i[a+1]===r){var s=t[7],u=i[a+2];return s.length>u?s[u]:null}"string"==typeof o&&(a+=2)}return null}(e,t,i,r.index)),null!==g)(g.__ngLastListenerFn__||g).__ngNextListenerFn__=a,g.__ngLastListenerFn__=a,f=!1;else{a=oo(r,t,l,a,!1);var y=n.listen(v,i,a);h.push(a,y),c&&c.push(i,m,p,p+1)}}else a=oo(r,t,l,a,!0),v.addEventListener(i,a,o),h.push(a),c&&c.push(i,m,p,o)}else a=oo(r,t,l,a,!1);var k,w=r.outputs;if(f&&null!==w&&(k=w[i])){var b=k.length;if(b)for(var _=0;_<b;_+=2){var x=t[k[_]][k[_+1]].subscribe(a),T=h.length;h.push(a,x),c&&c.push(i,r.index,T,-(T+1))}}}(a,i,i[11],o,e,t,!!n,r),io}function ao(e,t,n,r){try{return!1!==n(r)}catch(i){return da(e,i),!1}}function oo(e,t,n,r,i){return function n(a){if(a===Function)return r;var o=2&e.flags?He(e.index,t):t;0==(32&t[2])&&oa(o);for(var s=ao(t,0,r,a),u=n.__ngNextListenerFn__;u;)s=ao(t,0,u,a)&&s,u=u.__ngNextListenerFn__;return i&&!1===s&&(a.preventDefault(),a.returnValue=!1),s}}function so(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return function(e){return(Je.lFrame.contextLView=function(e,t){for(;e>0;)t=t[15],e--;return t}(e,Je.lFrame.contextLView))[8]}(e)}function uo(e,t,n,r,i){for(var a=e[n+1],o=null===t,s=r?Ti(a):Si(a),u=!1;0!==s&&(!1===u||o);){var c=e[s+1];co(e[s],t)&&(u=!0,e[s+1]=r?Ri(c):Ii(c)),s=r?Ti(c):Si(c)}u&&(e[n+1]=r?Ii(a):Ri(a))}function co(e,t){return null===e||null==t||(Array.isArray(e)?e[1]:e)===t||!(!Array.isArray(e)||"string"!=typeof t)&&_n(e,t)>=0}var lo={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function ho(e){return e.substring(lo.key,lo.keyEnd)}function fo(e,t){var n=lo.textEnd;return n===t?-1:(t=lo.keyEnd=function(e,t,n){for(;t<n&&e.charCodeAt(t)>32;)t++;return t}(e,lo.key=t,n),vo(e,t,n))}function vo(e,t,n){for(;t<n&&e.charCodeAt(t)<=32;)t++;return t}function po(e,t,n){return ko(e,t,n,!1),po}function mo(e,t){return ko(e,t,null,!0),mo}function go(e){!function(e,t,n,r){var i=et(),a=lt(2);i.firstUpdatePass&&bo(i,null,a,r);var o=Xe();if(n!==wi&&za(o,a,n)){var s=i.data[Tt()];if(Eo(s,r)&&!wo(i,a)){var u=s.classesWithoutHost;null!==u&&(n=I(u,n||"")),Wa(i,s,o,n,r)}else!function(e,t,n,r,i,a,o,s){i===wi&&(i=te);for(var u=0,c=0,l=0<i.length?i[0]:null,h=0<a.length?a[0]:null;null!==l||null!==h;){var f=u<i.length?i[u+1]:void 0,d=c<a.length?a[c+1]:void 0,v=void 0,p=null;l===h?(u+=2,c+=2,f!==d&&(p=h,v=d)):null===h||null!==l&&l<h?(u+=2,p=l):(c+=2,p=h,v=d),null!==p&&To(e,t,n,r,p,v,true,s),l=u<i.length?i[u]:null,h=c<a.length?a[c]:null}}(i,s,o,o[11],o[a+1],o[a+1]=function(e,t,n){if(null==n||""===n)return te;var r=[],i=Yn(n);if(Array.isArray(i))for(var a=0;a<i.length;a++)e(r,i[a],!0);else if("object"==typeof i)for(var o in i)i.hasOwnProperty(o)&&e(r,o,i[o]);else"string"==typeof i&&t(r,i);return r}(e,t,n),0,a)}}(wn,yo,e,!0)}function yo(e,t){for(var n=function(e){return function(e){lo.key=0,lo.keyEnd=0,lo.value=0,lo.valueEnd=0,lo.textEnd=e.length}(e),fo(e,vo(e,0,lo.textEnd))}(t);n>=0;n=fo(t,n))wn(e,ho(t),!0)}function ko(e,t,n,r){var i=Xe(),a=et(),o=lt(2);a.firstUpdatePass&&bo(a,e,o,r),t!==wi&&za(i,o,t)&&To(a,a.data[Tt()],i,i[11],e,i[o+1]=function(e,t){return null==e||("string"==typeof t?e+=t:"object"==typeof e&&(e=T(Yn(e)))),e}(t,n),r,o)}function wo(e,t){return t>=e.expandoStartIndex}function bo(e,t,n,r){var i=e.data;if(null===i[n+1]){var a=i[Tt()],o=wo(e,n);Eo(a,r)&&null===t&&!o&&(t=!1),t=function(e,t,n,r){var i=dt(e),a=r?t.residualClasses:t.residualStyles;if(null===i)0===(r?t.classBindings:t.styleBindings)&&(n=xo(n=_o(null,e,t,n,r),t.attrs,r),a=null);else{var o=t.directiveStylingLast;if(-1===o||e[o]!==i)if(n=_o(i,e,t,n,r),null===a){var s=function(e,t,n){var r=n?t.classBindings:t.styleBindings;if(0!==Si(r))return e[Ti(r)]}(e,t,r);void 0!==s&&Array.isArray(s)&&function(e,t,n,r){e[Ti(n?t.classBindings:t.styleBindings)]=r}(e,t,r,s=xo(s=_o(null,e,t,s[1],r),t.attrs,r))}else a=function(e,t,n){for(var r,i=t.directiveEnd,a=1+t.directiveStylingLast;a<i;a++)r=xo(r,e[a].hostAttrs,n);return xo(r,t.attrs,n)}(e,t,r)}return void 0!==a&&(r?t.residualClasses=a:t.residualStyles=a),n}(i,a,t,r),function(e,t,n,r,i,a){var o=a?t.classBindings:t.styleBindings,s=Ti(o),u=Si(o);e[r]=n;var c,l=!1;if(Array.isArray(n)){var h=n;(null===(c=h[1])||_n(h,c)>0)&&(l=!0)}else c=n;if(i)if(0!==u){var f=Ti(e[s+1]);e[r+1]=xi(f,s),0!==f&&(e[f+1]=Ei(e[f+1],r)),e[s+1]=function(e,t){return 131071&e|t<<17}(e[s+1],r)}else e[r+1]=xi(s,0),0!==s&&(e[s+1]=Ei(e[s+1],r)),s=r;else e[r+1]=xi(u,0),0===s?s=r:e[u+1]=Ei(e[u+1],r),u=r;l&&(e[r+1]=Ii(e[r+1])),uo(e,c,r,!0),uo(e,c,r,!1),function(e,t,n,r,i){var a=i?e.residualClasses:e.residualStyles;null!=a&&"string"==typeof t&&_n(a,t)>=0&&(n[r+1]=Ri(n[r+1]))}(t,c,e,r,a),o=xi(s,u),a?t.classBindings=o:t.styleBindings=o}(i,a,t,n,o,r)}}function _o(e,t,n,r,i){var a=null,o=n.directiveEnd,s=n.directiveStylingLast;for(-1===s?s=n.directiveStart:s++;s<o&&(r=xo(r,(a=t[s]).hostAttrs,i),a!==e);)s++;return null!==e&&(n.directiveStylingLast=s),r}function xo(e,t,n){var r=n?1:2,i=-1;if(null!==t)for(var a=0;a<t.length;a++){var o=t[a];"number"==typeof o?i=o:i===r&&(Array.isArray(e)||(e=void 0===e?[]:["",e]),wn(e,o,!!n||t[++a]))}return void 0===e?null:e}function To(e,t,n,r,i,a,o,s){if(3&t.type){var u=e.data,c=u[s+1];So(function(e){return 1==(1&e)}(c)?Io(u,t,n,i,Si(c),o):void 0)||(So(a)||function(e){return 2==(2&e)}(c)&&(a=Io(u,null,n,i,s,o)),function(e,t,n,r,i){var a=je(e);if(t)i?a?e.addClass(n,r):n.classList.add(r):a?e.removeClass(n,r):n.classList.remove(r);else{var o=-1===r.indexOf("-")?void 0:Ur.DashCase;if(null==i)a?e.removeStyle(n,r,o):n.style.removeProperty(r);else{var s="string"==typeof i&&i.endsWith("!important");s&&(i=i.slice(0,-10),o|=Ur.Important),a?e.setStyle(n,r,i,o):n.style.setProperty(r,i,s?"important":"")}}}(r,o,Be(Tt(),n),i,a))}}function Io(e,t,n,r,i,a){for(var o,s=null===t;i>0;){var u=e[i],c=Array.isArray(u),l=c?u[1]:u,h=null===l,f=n[i+1];f===wi&&(f=h?te:void 0);var d=h?bn(f,r):l===r?f:void 0;if(c&&!So(d)&&(d=bn(u,r)),So(d)&&(o=d,s))return o;var v=e[i+1];i=s?Ti(v):Si(v)}if(null!==t){var p=a?t.residualClasses:t.residualStyles;null!=p&&(o=bn(p,r))}return o}function So(e){return void 0!==e}function Eo(e,t){return 0!=(e.flags&(t?16:32))}function Ro(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=Xe(),r=et(),i=e+20,a=r.firstCreatePass?Ni(r,i,1,t,null):r.data[i],o=n[i]=function(e,t){return je(e)?e.createText(t):e.createTextNode(t)}(n[11],t);ei(r,n,o,a),it(a,!1)}function Co(e){return Ao("",e,""),Co}function Ao(e,t,n){var r=Xe(),i=function(e,t,n,r){return za(e,ct(),n)?t+N(n)+r:wi}(r,e,t,n);return i!==wi&&function(e,t,n){var r=Be(t,e);!function(e,t,n){je(e)?e.setValue(t,n):t.textContent=n}(e[11],r,n)}(r,Tt(),i),Ao}function No(e,t,n){var r=Xe();return za(r,ct(),t)&&Zi(et(),St(),r,e,t,r[11],n,!0),No}function Oo(e,t,n){var r=Xe();if(za(r,ct(),t)){var i=et(),a=St();Zi(i,a,r,e,t,function(e,t,n){return(null===e||Se(e))&&(n=function(e){for(;Array.isArray(e);){if("object"==typeof e[1])return e;e=e[0]}return null}(n[t.index])),n[11]}(dt(i.data),a,r),n,!0)}return Oo}var Do=void 0,Po=["en",[["a","p"],["AM","PM"],Do],[["AM","PM"],Do,Do],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Do,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Do,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Do,"{1} 'at' {0}",Do],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(e){var t=Math.floor(Math.abs(e)),n=e.toString().replace(/^[^.]*\.?/,"").length;return 1===t&&0===n?1:5}],Lo={};function Fo(e){var t=function(e){return e.toLowerCase().replace(/_/g,"-")}(e),n=Uo(t);if(n)return n;var r=t.split("-")[0];if(n=Uo(r))return n;if("en"===r)return Po;throw new Error('Missing locale data for the locale "'.concat(e,'".'))}function Mo(e){return Fo(e)[jo.PluralCase]}function Uo(e){return e in Lo||(Lo[e]=X.ng&&X.ng.common&&X.ng.common.locales&&X.ng.common.locales[e]),Lo[e]}var jo=((jo=jo||{})[jo.LocaleId=0]="LocaleId",jo[jo.DayPeriodsFormat=1]="DayPeriodsFormat",jo[jo.DayPeriodsStandalone=2]="DayPeriodsStandalone",jo[jo.DaysFormat=3]="DaysFormat",jo[jo.DaysStandalone=4]="DaysStandalone",jo[jo.MonthsFormat=5]="MonthsFormat",jo[jo.MonthsStandalone=6]="MonthsStandalone",jo[jo.Eras=7]="Eras",jo[jo.FirstDayOfWeek=8]="FirstDayOfWeek",jo[jo.WeekendRange=9]="WeekendRange",jo[jo.DateFormat=10]="DateFormat",jo[jo.TimeFormat=11]="TimeFormat",jo[jo.DateTimeFormat=12]="DateTimeFormat",jo[jo.NumberSymbols=13]="NumberSymbols",jo[jo.NumberFormats=14]="NumberFormats",jo[jo.CurrencyCode=15]="CurrencyCode",jo[jo.CurrencySymbol=16]="CurrencySymbol",jo[jo.CurrencyName=17]="CurrencyName",jo[jo.Currencies=18]="Currencies",jo[jo.Directionality=19]="Directionality",jo[jo.PluralCase=20]="PluralCase",jo[jo.ExtraData=21]="ExtraData",jo),Vo="en-US";function qo(e){(function(e,t){null==e&&function(e,t,n,r){throw new Error("ASSERTION ERROR: ".concat(e)+" [Expected=> ".concat(null," ").concat("!="," ").concat(t," <=Actual]"))}(t,e)})(e,"Expected localeId to be defined"),"string"==typeof e&&e.toLowerCase().replace(/_/g,"-")}function Bo(e,t,n,r,i){if(e=R(e),Array.isArray(e))for(var a=0;a<e.length;a++)Bo(e[a],t,n,r,i);else{var o=et(),s=Xe(),u=Ca(e)?e:R(e.provide),c=Sa(e),l=nt(),h=1048575&l.providerIndexes,f=l.directiveStart,d=l.providerIndexes>>20;if(Ca(e)||!e.multi){var v=new Dt(c,i,Ga),p=Ho(u,t,i?h:h+d,f);-1===p?(Qt(Ht(l,s),o,u),zo(o,e,t.length),t.push(u),l.directiveStart++,l.directiveEnd++,i&&(l.providerIndexes+=1048576),n.push(v),s.push(v)):(n[p]=v,s[p]=v)}else{var m=Ho(u,t,h+d,f),g=Ho(u,t,h,h+d),y=m>=0&&n[m],k=g>=0&&n[g];if(i&&!k||!i&&!y){Qt(Ht(l,s),o,u);var w=function(e,t,n,r,i){var a=new Dt(e,n,Ga);return a.multi=[],a.index=t,a.componentProviders=0,Zo(a,i,r&&!n),a}(i?Ko:Go,n.length,i,r,c);!i&&k&&(n[g].providerFactory=w),zo(o,e,t.length,0),t.push(u),l.directiveStart++,l.directiveEnd++,i&&(l.providerIndexes+=1048576),n.push(w),s.push(w)}else zo(o,e,m>-1?m:g,Zo(n[i?g:m],c,!i&&r));!i&&r&&k&&n[g].componentProviders++}}}function zo(e,t,n,r){var i=Ca(t);if(i||function(e){return!!e.useClass}(t)){var a=(t.useClass||t).prototype.ngOnDestroy;if(a){var o=e.destroyHooks||(e.destroyHooks=[]);if(!i&&t.multi){var s=o.indexOf(n);-1===s?o.push(n,[r,a]):o[s+1].push(r,a)}else o.push(n,a)}}}function Zo(e,t,n){return n&&e.componentProviders++,e.multi.push(t)-1}function Ho(e,t,n,r){for(var i=n;i<r;i++)if(t[i]===e)return i;return-1}function Go(e,t,n,r){return Wo(this.multi,[])}function Ko(e,t,n,r){var i,a=this.multi;if(this.providerFactory){var o=this.providerFactory.componentProviders,s=rn(n,n[1],this.providerFactory.index,r);Wo(a,i=s.slice(0,o));for(var u=o;u<s.length;u++)i.push(s[u])}else Wo(a,i=[]);return i}function Wo(e,t){for(var n=0;n<e.length;n++)t.push((0,e[n])());return t}function Qo(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return function(n){n.providersResolver=function(n,r){return function(e,t,n){var r=et();if(r.firstCreatePass){var i=Se(e);Bo(n,r.data,r.blueprint,i,!0),Bo(t,r.data,r.blueprint,i,!1)}}(n,r?r(e):e,t)}}}var Yo=function e(){f(this,e)},Jo=function(){function e(){f(this,e)}return h(e,[{key:"resolveComponentFactory",value:function(e){throw function(e){var t=Error("No component factory found for ".concat(T(e),". Did you add it to @NgModule.entryComponents?"));return t.ngComponent=e,t}(e)}}]),e}(),$o=function(){var e=function e(){f(this,e)};return e.NULL=new Jo,e}();function Xo(){}function es(e,t){return new ns(ze(e,t))}var ts=function(){return es(nt(),Xe())},ns=function(){var e=function e(t){f(this,e),this.nativeElement=t};return e.__NG_ELEMENT_ID__=ts,e}();function rs(e){return e instanceof ns?e.nativeElement:e}var is=function e(){f(this,e)},as=function(){var e=function e(){f(this,e)};return e.__NG_ELEMENT_ID__=function(){return os()},e}(),os=function(){var e=Xe(),t=He(nt().index,e);return function(e){return e[11]}(be(t)?t:e)},ss=function(){var e=function e(){f(this,e)};return e.\u0275prov=P({token:e,providedIn:"root",factory:function(){return null}}),e}(),us=function e(t){f(this,e),this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")},cs=new us("12.2.11"),ls=function(){function e(){f(this,e)}return h(e,[{key:"supports",value:function(e){return qa(e)}},{key:"create",value:function(e){return new fs(e)}}]),e}(),hs=function(e,t){return t},fs=function(){function e(t){f(this,e),this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||hs}return h(e,[{key:"forEachItem",value:function(e){var t;for(t=this._itHead;null!==t;t=t._next)e(t)}},{key:"forEachOperation",value:function(e){for(var t=this._itHead,n=this._removalsHead,r=0,i=null;t||n;){var a=!n||t&&t.currentIndex<ms(n,r,i)?t:n,o=ms(a,r,i),s=a.currentIndex;if(a===n)r--,n=n._nextRemoved;else if(t=t._next,null==a.previousIndex)r++;else{i||(i=[]);var u=o-r,c=s-r;if(u!=c){for(var l=0;l<u;l++){var h=l<i.length?i[l]:i[l]=0,f=h+l;c<=f&&f<u&&(i[l]=h+1)}i[a.previousIndex]=c-u}}o!==s&&e(a,o,s)}}},{key:"forEachPreviousItem",value:function(e){var t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)e(t)}},{key:"forEachAddedItem",value:function(e){var t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}},{key:"forEachMovedItem",value:function(e){var t;for(t=this._movesHead;null!==t;t=t._nextMoved)e(t)}},{key:"forEachRemovedItem",value:function(e){var t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}},{key:"forEachIdentityChange",value:function(e){var t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)e(t)}},{key:"diff",value:function(e){if(null==e&&(e=[]),!qa(e))throw new Error("Error trying to diff '".concat(T(e),"'. Only arrays and iterables are allowed"));return this.check(e)?this:null}},{key:"onDestroy",value:function(){}},{key:"check",value:function(e){var t=this;this._reset();var n,r,i,a=this._itHead,o=!1;if(Array.isArray(e)){this.length=e.length;for(var s=0;s<this.length;s++)r=e[s],i=this._trackByFn(s,r),null!==a&&Object.is(a.trackById,i)?(o&&(a=this._verifyReinsertion(a,r,i,s)),Object.is(a.item,r)||this._addIdentityChange(a,r)):(a=this._mismatch(a,r,i,s),o=!0),a=a._next}else n=0,function(e,t){if(Array.isArray(e))for(var n=0;n<e.length;n++)t(e[n]);else for(var r,i=e[Va()]();!(r=i.next()).done;)t(r.value)}(e,function(e){i=t._trackByFn(n,e),null!==a&&Object.is(a.trackById,i)?(o&&(a=t._verifyReinsertion(a,e,i,n)),Object.is(a.item,e)||t._addIdentityChange(a,e)):(a=t._mismatch(a,e,i,n),o=!0),a=a._next,n++}),this.length=n;return this._truncate(a),this.collection=e,this.isDirty}},{key:"isDirty",get:function(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}},{key:"_reset",value:function(){if(this.isDirty){var e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}},{key:"_mismatch",value:function(e,t,n,r){var i;return null===e?i=this._itTail:(i=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,i,r)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(n,r))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,i,r)):e=this._addAfter(new ds(t,n),i,r),e}},{key:"_verifyReinsertion",value:function(e,t,n,r){var i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==i?e=this._reinsertAfter(i,e._prev,r):e.currentIndex!=r&&(e.currentIndex=r,this._addToMoves(e,r)),e}},{key:"_truncate",value:function(e){for(;null!==e;){var t=e._next;this._addToRemovals(this._unlink(e)),e=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}},{key:"_reinsertAfter",value:function(e,t,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);var r=e._prevRemoved,i=e._nextRemoved;return null===r?this._removalsHead=i:r._nextRemoved=i,null===i?this._removalsTail=r:i._prevRemoved=r,this._insertAfter(e,t,n),this._addToMoves(e,n),e}},{key:"_moveAfter",value:function(e,t,n){return this._unlink(e),this._insertAfter(e,t,n),this._addToMoves(e,n),e}},{key:"_addAfter",value:function(e,t,n){return this._insertAfter(e,t,n),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}},{key:"_insertAfter",value:function(e,t,n){var r=null===t?this._itHead:t._next;return e._next=r,e._prev=t,null===r?this._itTail=e:r._prev=e,null===t?this._itHead=e:t._next=e,null===this._linkedRecords&&(this._linkedRecords=new ps),this._linkedRecords.put(e),e.currentIndex=n,e}},{key:"_remove",value:function(e){return this._addToRemovals(this._unlink(e))}},{key:"_unlink",value:function(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);var t=e._prev,n=e._next;return null===t?this._itHead=n:t._next=n,null===n?this._itTail=t:n._prev=t,e}},{key:"_addToMoves",value:function(e,t){return e.previousIndex===t||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}},{key:"_addToRemovals",value:function(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new ps),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}},{key:"_addIdentityChange",value:function(e,t){return e.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}]),e}(),ds=function e(t,n){f(this,e),this.item=t,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null},vs=function(){function e(){f(this,e),this._head=null,this._tail=null}return h(e,[{key:"add",value:function(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}},{key:"get",value:function(e,t){var n;for(n=this._head;null!==n;n=n._nextDup)if((null===t||t<=n.currentIndex)&&Object.is(n.trackById,e))return n;return null}},{key:"remove",value:function(e){var t=e._prevDup,n=e._nextDup;return null===t?this._head=n:t._nextDup=n,null===n?this._tail=t:n._prevDup=t,null===this._head}}]),e}(),ps=function(){function e(){f(this,e),this.map=new Map}return h(e,[{key:"put",value:function(e){var t=e.trackById,n=this.map.get(t);n||(n=new vs,this.map.set(t,n)),n.add(e)}},{key:"get",value:function(e,t){var n=this.map.get(e);return n?n.get(e,t):null}},{key:"remove",value:function(e){var t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}},{key:"isEmpty",get:function(){return 0===this.map.size}},{key:"clear",value:function(){this.map.clear()}}]),e}();function ms(e,t,n){var r=e.previousIndex;if(null===r)return r;var i=0;return n&&r<n.length&&(i=n[r]),r+t+i}var gs=function(){function e(){f(this,e)}return h(e,[{key:"supports",value:function(e){return e instanceof Map||Ba(e)}},{key:"create",value:function(){return new ys}}]),e}(),ys=function(){function e(){f(this,e),this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}return h(e,[{key:"isDirty",get:function(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}},{key:"forEachItem",value:function(e){var t;for(t=this._mapHead;null!==t;t=t._next)e(t)}},{key:"forEachPreviousItem",value:function(e){var t;for(t=this._previousMapHead;null!==t;t=t._nextPrevious)e(t)}},{key:"forEachChangedItem",value:function(e){var t;for(t=this._changesHead;null!==t;t=t._nextChanged)e(t)}},{key:"forEachAddedItem",value:function(e){var t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}},{key:"forEachRemovedItem",value:function(e){var t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}},{key:"diff",value:function(e){if(e){if(!(e instanceof Map||Ba(e)))throw new Error("Error trying to diff '".concat(T(e),"'. Only maps and objects are allowed"))}else e=new Map;return this.check(e)?this:null}},{key:"onDestroy",value:function(){}},{key:"check",value:function(e){var t=this;this._reset();var n=this._mapHead;if(this._appendAfter=null,this._forEach(e,function(e,r){if(n&&n.key===r)t._maybeAddToChanges(n,e),t._appendAfter=n,n=n._next;else{var i=t._getOrCreateRecordForKey(r,e);n=t._insertBeforeOrAppend(n,i)}}),n){n._prev&&(n._prev._next=null),this._removalsHead=n;for(var r=n;null!==r;r=r._nextRemoved)r===this._mapHead&&(this._mapHead=null),this._records.delete(r.key),r._nextRemoved=r._next,r.previousValue=r.currentValue,r.currentValue=null,r._prev=null,r._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}},{key:"_insertBeforeOrAppend",value:function(e,t){if(e){var n=e._prev;return t._next=e,t._prev=n,e._prev=t,n&&(n._next=t),e===this._mapHead&&(this._mapHead=t),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null}},{key:"_getOrCreateRecordForKey",value:function(e,t){if(this._records.has(e)){var n=this._records.get(e);this._maybeAddToChanges(n,t);var r=n._prev,i=n._next;return r&&(r._next=i),i&&(i._prev=r),n._next=null,n._prev=null,n}var a=new ks(e);return this._records.set(e,a),a.currentValue=t,this._addToAdditions(a),a}},{key:"_reset",value:function(){if(this.isDirty){var e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;null!==e;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;null!=e;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}},{key:"_maybeAddToChanges",value:function(e,t){Object.is(t,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=t,this._addToChanges(e))}},{key:"_addToAdditions",value:function(e){null===this._additionsHead?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}},{key:"_addToChanges",value:function(e){null===this._changesHead?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}},{key:"_forEach",value:function(e,t){e instanceof Map?e.forEach(t):Object.keys(e).forEach(function(n){return t(e[n],n)})}}]),e}(),ks=function e(t){f(this,e),this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null};function ws(){return new bs([new ls])}var bs=function(){var e=function(){function e(t){f(this,e),this.factories=t}return h(e,[{key:"find",value:function(e){var t=this.factories.find(function(t){return t.supports(e)});if(null!=t)return t;throw new Error("Cannot find a differ supporting object '".concat(e,"' of type '").concat(function(e){return e.name||typeof e}(e),"'"))}}],[{key:"create",value:function(t,n){if(null!=n){var r=n.factories.slice();t=t.concat(r)}return new e(t)}},{key:"extend",value:function(t){return{provide:e,useFactory:function(n){return e.create(t,n||ws())},deps:[[e,new qn,new Vn]]}}}]),e}();return e.\u0275prov=P({token:e,providedIn:"root",factory:ws}),e}();function _s(){return new xs([new gs])}var xs=function(){var e=function(){function e(t){f(this,e),this.factories=t}return h(e,[{key:"find",value:function(e){var t=this.factories.find(function(t){return t.supports(e)});if(t)return t;throw new Error("Cannot find a differ supporting object '".concat(e,"'"))}}],[{key:"create",value:function(t,n){if(n){var r=n.factories.slice();t=t.concat(r)}return new e(t)}},{key:"extend",value:function(t){return{provide:e,useFactory:function(n){return e.create(t,n||_s())},deps:[[e,new qn,new Vn]]}}}]),e}();return e.\u0275prov=P({token:e,providedIn:"root",factory:_s}),e}();function Ts(e,t,n,r){for(var i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];null!==n;){var o=t[n.index];if(null!==o&&r.push(qe(o)),_e(o))for(var s=10;s<o.length;s++){var u=o[s],c=u[1].firstChild;null!==c&&Ts(u[1],u,c,r)}var l=n.type;if(8&l)Ts(e,t,n.child,r);else if(32&l)for(var h=jr(n,t),f=void 0;f=h();)r.push(f);else if(16&l){var d=ni(t,n);if(Array.isArray(d))r.push.apply(r,a(d));else{var v=Vr(t[16]);Ts(v[1],v,d,r,!0)}}n=i?n.projectionNext:n.next}return r}var Is=function(){function e(t,n){f(this,e),this._lView=t,this._cdRefInjectingView=n,this._appRef=null,this._attachedToViewContainer=!1}return h(e,[{key:"rootNodes",get:function(){var e=this._lView,t=e[1];return Ts(t,e,t.firstChild,[])}},{key:"context",get:function(){return this._lView[8]},set:function(e){this._lView[8]=e}},{key:"destroyed",get:function(){return 256==(256&this._lView[2])}},{key:"destroy",value:function(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){var e=this._lView[3];if(_e(e)){var t=e[8],n=t?t.indexOf(this):-1;n>-1&&(Kr(e,n),kn(t,n))}this._attachedToViewContainer=!1}Wr(this._lView[1],this._lView)}},{key:"onDestroy",value:function(e){Bi(this._lView[1],this._lView,null,e)}},{key:"markForCheck",value:function(){oa(this._cdRefInjectingView||this._lView)}},{key:"detach",value:function(){this._lView[2]&=-129}},{key:"reattach",value:function(){this._lView[2]|=128}},{key:"detectChanges",value:function(){sa(this._lView[1],this._lView,this.context)}},{key:"checkNoChanges",value:function(){!function(e,t,n){ut(!0);try{sa(e,t,n)}finally{ut(!1)}}(this._lView[1],this._lView,this.context)}},{key:"attachToViewContainerRef",value:function(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}},{key:"detachFromAppRef",value:function(){var e;this._appRef=null,ai(this._lView[1],e=this._lView,e[11],2,null,null)}},{key:"attachToAppRef",value:function(e){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=e}}]),e}(),Ss=function(e){d(n,e);var t=v(n);function n(e){var r;return f(this,n),(r=t.call(this,e))._view=e,r}return h(n,[{key:"detectChanges",value:function(){ua(this._view)}},{key:"checkNoChanges",value:function(){!function(e){ut(!0);try{ua(e)}finally{ut(!1)}}(this._view)}},{key:"context",get:function(){return null}}]),n}(Is),Es=function(e){return function(e,t,n){if(Te(e)&&!n){var r=He(e.index,t);return new Is(r,r)}return 47&e.type?new Is(t[16],t):null}(nt(),Xe(),16==(16&e))},Rs=function(){var e=function e(){f(this,e)};return e.__NG_ELEMENT_ID__=Es,e}(),Cs=[new gs],As=new bs([new ls]),Ns=new xs(Cs),Os=function(){return Ls(nt(),Xe())},Ds=function(){var e=function e(){f(this,e)};return e.__NG_ELEMENT_ID__=Os,e}(),Ps=function(e){d(n,e);var t=v(n);function n(e,r,i){var a;return f(this,n),(a=t.call(this))._declarationLView=e,a._declarationTContainer=r,a.elementRef=i,a}return h(n,[{key:"createEmbeddedView",value:function(e){var t=this._declarationTContainer.tViews,n=Ai(this._declarationLView,t,e,16,null,t.declTNode,null,null,null,null);n[17]=this._declarationLView[this._declarationTContainer.index];var r=this._declarationLView[19];return null!==r&&(n[19]=r.createEmbeddedView(t)),Di(t,n,e),new Is(n)}}]),n}(Ds);function Ls(e,t){return 4&e.type?new Ps(t,e,es(e,t)):null}var Fs=function e(){f(this,e)},Ms=function e(){f(this,e)},Us=function(){return zs(nt(),Xe())},js=function(){var e=function e(){f(this,e)};return e.__NG_ELEMENT_ID__=Us,e}(),Vs=function(e){d(n,e);var t=v(n);function n(e,r,i){var a;return f(this,n),(a=t.call(this))._lContainer=e,a._hostTNode=r,a._hostLView=i,a}return h(n,[{key:"element",get:function(){return es(this._hostTNode,this._hostLView)}},{key:"injector",get:function(){return new sn(this._hostTNode,this._hostLView)}},{key:"parentInjector",get:function(){var e=Wt(this._hostTNode,this._hostLView);if(jt(e)){var t=qt(e,this._hostLView),n=Vt(e);return new sn(t[1].data[n+8],t)}return new sn(null,this._hostLView)}},{key:"clear",value:function(){for(;this.length>0;)this.remove(this.length-1)}},{key:"get",value:function(e){var t=qs(this._lContainer);return null!==t&&t[e]||null}},{key:"length",get:function(){return this._lContainer.length-10}},{key:"createEmbeddedView",value:function(e,t,n){var r=e.createEmbeddedView(t||{});return this.insert(r,n),r}},{key:"createComponent",value:function(e,t,n,r,i){var a=n||this.parentInjector;if(!i&&null==e.ngModule&&a){var o=a.get(Fs,null);o&&(i=o)}var s=e.create(a,r,void 0,i);return this.insert(s.hostView,t),s}},{key:"insert",value:function(e,t){var r=e._lView,i=r[1];if(_e(r[3])){var a=this.indexOf(e);if(-1!==a)this.detach(a);else{var o=r[3],s=new n(o,o[6],o[3]);s.detach(s.indexOf(e))}}var u=this._adjustIndex(t),c=this._lContainer;!function(e,t,n,r){var i=10+r,a=n.length;r>0&&(n[i-1][4]=t),r<a-10?(t[4]=n[i],yn(n,10+r,t)):(n.push(t),t[4]=null),t[3]=n;var o=t[17];null!==o&&n!==o&&function(e,t){var n=e[9];t[16]!==t[3][3][16]&&(e[2]=!0),null===n?e[9]=[t]:n.push(t)}(o,t);var s=t[19];null!==s&&s.insertView(e),t[2]|=128}(i,r,c,u);var l=ri(u,c),h=r[11],f=Xr(h,c[7]);return null!==f&&function(e,t,n,r,i,a){r[0]=i,r[6]=t,ai(e,r,n,1,i,a)}(i,c[6],h,r,f,l),e.attachToViewContainerRef(),yn(Bs(c),u,e),e}},{key:"move",value:function(e,t){return this.insert(e,t)}},{key:"indexOf",value:function(e){var t=qs(this._lContainer);return null!==t?t.indexOf(e):-1}},{key:"remove",value:function(e){var t=this._adjustIndex(e,-1),n=Kr(this._lContainer,t);n&&(kn(Bs(this._lContainer),t),Wr(n[1],n))}},{key:"detach",value:function(e){var t=this._adjustIndex(e,-1),n=Kr(this._lContainer,t);return n&&null!=kn(Bs(this._lContainer),t)?new Is(n):null}},{key:"_adjustIndex",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return null==e?this.length+t:e}}]),n}(js);function qs(e){return e[8]}function Bs(e){return e[8]||(e[8]=[])}function zs(e,t){var n,r=t[e.index];if(_e(r))n=r;else{var i;if(8&e.type)i=qe(r);else{var a=t[11];i=a.createComment("");var o=ze(e,t);Yr(a,Xr(a,o),i,function(e,t){return je(e)?e.nextSibling(t):t.nextSibling}(a,o),!1)}t[e.index]=n=ta(r,t,i,e),aa(t,n)}return new Vs(n,e,t)}var Zs={},Hs=function(e){d(n,e);var t=v(n);function n(e){var r;return f(this,n),(r=t.call(this)).ngModule=e,r}return h(n,[{key:"resolveComponentFactory",value:function(e){var t=ke(e);return new Ws(t,this.ngModule)}}]),n}($o);function Gs(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push({propName:e[n],templateName:n});return t}var Ks=new dn("SCHEDULER_TOKEN",{providedIn:"root",factory:function(){return Fr}}),Ws=function(e){d(n,e);var t=v(n);function n(e,r){var i;return f(this,n),(i=t.call(this)).componentDef=e,i.ngModule=r,i.componentType=e.type,i.selector=e.selectors.map(ki).join(","),i.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],i.isBoundToModule=!!r,i}return h(n,[{key:"inputs",get:function(){return Gs(this.componentDef.inputs)}},{key:"outputs",get:function(){return Gs(this.componentDef.outputs)}},{key:"create",value:function(e,t,n,r){var i,a,o=(r=r||this.ngModule)?function(e,t){return{get:function(n,r,i){var a=e.get(n,Zs,i);return a!==Zs||r===Zs?a:t.get(n,r,i)}}}(e,r.injector):e,s=o.get(is,Ve),u=o.get(ss,null),c=s.createRenderer(null,this.componentDef),l=this.componentDef.selectors[0][0]||"div",h=n?function(e,t,n){if(je(e))return e.selectRootElement(t,n===Q.ShadowDom);var r="string"==typeof t?e.querySelector(t):t;return r.textContent="",r}(c,n,this.componentDef.encapsulation):Hr(s.createRenderer(null,this.componentDef),l,function(e){var t=e.toLowerCase();return"svg"===t?"http://www.w3.org/2000/svg":"math"===t?"http://www.w3.org/1998/MathML/":null}(l)),f=this.componentDef.onPush?576:528,d={components:[],scheduler:Fr,clean:la,playerHandler:null,flags:0},v=qi(0,null,null,1,0,null,null,null,null,null),p=Ai(null,v,d,f,null,null,s,c,u,o);yt(p);try{var m=function(e,t,n,r,i,a){var o=n[1];n[20]=e;var s=Ni(o,20,2,"#host",null),u=s.mergedAttrs=t.hostAttrs;null!==u&&(pa(s,u,!0),null!==e&&(Pt(i,e,u),null!==s.classes&&ui(i,e,s.classes),null!==s.styles&&si(i,e,s.styles)));var c=r.createRenderer(e,t),l=Ai(n,Vi(t),null,t.onPush?64:16,n[20],s,r,c,null,null);return o.firstCreatePass&&(Qt(Ht(s,n),o,t.type),Wi(o,s),Yi(s,n.length,1)),aa(n,l),n[20]=l}(h,this.componentDef,p,s,c);if(h)if(n)Pt(c,h,["ng-version",cs.full]);else{var g=function(e){for(var t=[],n=[],r=1,i=2;r<e.length;){var a=e[r];if("string"==typeof a)2===i?""!==a&&t.push(a,e[++r]):8===i&&n.push(a);else{if(!pi(i))break;i=a}r++}return{attrs:t,classes:n}}(this.componentDef.selectors[0]),y=g.attrs,k=g.classes;y&&Pt(c,h,y),k&&k.length>0&&ui(c,h,k.join(" "))}if(a=Ze(v,20),void 0!==t)for(var w=a.projection=[],b=0;b<this.ngContentSelectors.length;b++){var _=t[b];w.push(null!=_?Array.from(_):null)}i=function(e,t,n,r,i){var a=n[1],o=function(e,t,n){var r=nt();e.firstCreatePass&&(n.providersResolver&&n.providersResolver(n),Ji(e,r,t,Oi(e,t,1,null),n));var i=rn(t,e,r.directiveStart,r);Nr(i,t);var a=ze(r,t);return a&&Nr(a,t),i}(a,n,t);if(r.components.push(o),e[8]=o,i&&i.forEach(function(e){return e(o,t)}),t.contentQueries){var s=nt();t.contentQueries(1,o,s.directiveStart)}var u=nt();return!a.firstCreatePass||null===t.hostBindings&&null===t.hostAttrs||(It(u.index),Gi(n[1],u,0,u.directiveStart,u.directiveEnd,t),Ki(t,o)),o}(m,this.componentDef,p,d,[Da]),Di(v,p,null)}finally{xt()}return new Qs(this.componentType,i,es(a,p),p,a)}}]),n}(Yo),Qs=function(e){d(n,e);var t=v(n);function n(e,r,i,a,o){var s;return f(this,n),(s=t.call(this)).location=i,s._rootLView=a,s._tNode=o,s.instance=r,s.hostView=s.changeDetectorRef=new Ss(a),s.componentType=e,s}return h(n,[{key:"injector",get:function(){return new sn(this._tNode,this._rootLView)}},{key:"destroy",value:function(){this.hostView.destroy()}},{key:"onDestroy",value:function(e){this.hostView.onDestroy(e)}}]),n}(function(){return function e(){f(this,e)}}()),Ys=new Map,Js=function(e){d(n,e);var t=v(n);function n(e,r){var i;f(this,n),(i=t.call(this))._parent=r,i._bootstrapComponents=[],i.injector=m(i),i.destroyCbs=[],i.componentFactoryResolver=new Hs(m(i));var a=we(e),o=e[oe]||null;return o&&qo(o),i._bootstrapComponents=Mr(a.bootstrap),i._r3Injector=xa(e,r,[{provide:Fs,useValue:m(i)},{provide:$o,useValue:i.componentFactoryResolver}],T(e)),i._r3Injector._resolveInjectorDefTypes(),i.instance=i.get(e),i}return h(n,[{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Oa.THROW_IF_NOT_FOUND,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Z.Default;return e===Oa||e===Fs||e===ga?this:this._r3Injector.get(e,t,n)}},{key:"destroy",value:function(){var e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(function(e){return e()}),this.destroyCbs=null}},{key:"onDestroy",value:function(e){this.destroyCbs.push(e)}}]),n}(Fs),$s=function(e){d(n,e);var t=v(n);function n(e){var r;return f(this,n),(r=t.call(this)).moduleType=e,null!==we(e)&&function(e){var t=new Set;!function e(n){var r=we(n,!0),i=r.id;null!==i&&(function(e,t,n){if(t&&t!==n)throw new Error("Duplicate module registered for ".concat(e," - ").concat(T(t)," vs ").concat(T(t.name)))}(i,Ys.get(i),n),Ys.set(i,n));var a,o=s(Mr(r.imports));try{for(o.s();!(a=o.n()).done;){var u=a.value;t.has(u)||(t.add(u),e(u))}}catch(c){o.e(c)}finally{o.f()}}(e)}(e),r}return h(n,[{key:"create",value:function(e){return new Js(this.moduleType,e)}}]),n}(Ms);function Xs(e){return function(t){setTimeout(e,void 0,t)}}var eu=function(e){d(n,e);var t=v(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return f(this,n),(e=t.call(this)).__isAsync=r,e}return h(n,[{key:"emit",value:function(e){i(b(n.prototype),"next",this).call(this,e)}},{key:"subscribe",value:function(e,t,r){var a,o,s,c=e,l=t||function(){return null},h=r;if(e&&"object"==typeof e){var f=e;c=null===(a=f.next)||void 0===a?void 0:a.bind(f),l=null===(o=f.error)||void 0===o?void 0:o.bind(f),h=null===(s=f.complete)||void 0===s?void 0:s.bind(f)}this.__isAsync&&(l=Xs(l),c&&(c=Xs(c)),h&&(h=Xs(h)));var d=i(b(n.prototype),"subscribe",this).call(this,{next:c,error:l,complete:h});return e instanceof u.w&&e.add(d),d}}]),n}(o.xQ);function tu(){return this._results[Va()]()}var nu=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];f(this,e),this._emitDistinctChangesOnly=t,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;var n=Va(),r=e.prototype;r[n]||(r[n]=tu)}return h(e,[{key:"changes",get:function(){return this._changes||(this._changes=new eu)}},{key:"get",value:function(e){return this._results[e]}},{key:"map",value:function(e){return this._results.map(e)}},{key:"filter",value:function(e){return this._results.filter(e)}},{key:"find",value:function(e){return this._results.find(e)}},{key:"reduce",value:function(e,t){return this._results.reduce(e,t)}},{key:"forEach",value:function(e){this._results.forEach(e)}},{key:"some",value:function(e){return this._results.some(e)}},{key:"toArray",value:function(){return this._results.slice()}},{key:"toString",value:function(){return this._results.toString()}},{key:"reset",value:function(e,t){var n=this;n.dirty=!1;var r=mn(e);(this._changesDetected=!function(e,t,n){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++){var i=e[r],a=t[r];if(n&&(i=n(i),a=n(a)),a!==i)return!1}return!0}(n._results,r,t))&&(n._results=r,n.length=r.length,n.last=r[this.length-1],n.first=r[0])}},{key:"notifyOnChanges",value:function(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}},{key:"setDirty",value:function(){this.dirty=!0}},{key:"destroy",value:function(){this.changes.complete(),this.changes.unsubscribe()}}]),e}();Symbol;var ru=function(){function e(t){f(this,e),this.queryList=t,this.matches=null}return h(e,[{key:"clone",value:function(){return new e(this.queryList)}},{key:"setDirty",value:function(){this.queryList.setDirty()}}]),e}(),iu=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];f(this,e),this.queries=t}return h(e,[{key:"createEmbeddedView",value:function(t){var n=t.queries;if(null!==n){for(var r=null!==t.contentQueries?t.contentQueries[0]:n.length,i=[],a=0;a<r;a++){var o=n.getByIndex(a);i.push(this.queries[o.indexInDeclarationView].clone())}return new e(i)}return null}},{key:"insertView",value:function(e){this.dirtyQueriesWithMatches(e)}},{key:"detachView",value:function(e){this.dirtyQueriesWithMatches(e)}},{key:"dirtyQueriesWithMatches",value:function(e){for(var t=0;t<this.queries.length;t++)null!==pu(e,t).matches&&this.queries[t].setDirty()}}]),e}(),au=function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;f(this,e),this.predicate=t,this.flags=n,this.read=r},ou=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];f(this,e),this.queries=t}return h(e,[{key:"elementStart",value:function(e,t){for(var n=0;n<this.queries.length;n++)this.queries[n].elementStart(e,t)}},{key:"elementEnd",value:function(e){for(var t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}},{key:"embeddedTView",value:function(t){for(var n=null,r=0;r<this.length;r++){var i=null!==n?n.length:0,a=this.getByIndex(r).embeddedTView(t,i);a&&(a.indexInDeclarationView=r,null!==n?n.push(a):n=[a])}return null!==n?new e(n):null}},{key:"template",value:function(e,t){for(var n=0;n<this.queries.length;n++)this.queries[n].template(e,t)}},{key:"getByIndex",value:function(e){return this.queries[e]}},{key:"length",get:function(){return this.queries.length}},{key:"track",value:function(e){this.queries.push(e)}}]),e}(),su=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;f(this,e),this.metadata=t,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=n}return h(e,[{key:"elementStart",value:function(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}},{key:"elementEnd",value:function(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}},{key:"template",value:function(e,t){this.elementStart(e,t)}},{key:"embeddedTView",value:function(t,n){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,n),new e(this.metadata)):null}},{key:"isApplyingToNode",value:function(e){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){for(var t=this._declarationNodeIndex,n=e.parent;null!==n&&8&n.type&&n.index!==t;)n=n.parent;return t===(null!==n?n.index:-1)}return this._appliesToNextNode}},{key:"matchTNode",value:function(e,t){var n=this.metadata.predicate;if(Array.isArray(n))for(var r=0;r<n.length;r++){var i=n[r];this.matchTNodeWithReadOption(e,t,uu(t,i)),this.matchTNodeWithReadOption(e,t,nn(t,e,i,!1,!1))}else n===Ds?4&t.type&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,nn(t,e,n,!1,!1))}},{key:"matchTNodeWithReadOption",value:function(e,t,n){if(null!==n){var r=this.metadata.read;if(null!==r)if(r===ns||r===js||r===Ds&&4&t.type)this.addMatch(t.index,-2);else{var i=nn(t,e,r,!1,!1);null!==i&&this.addMatch(t.index,i)}else this.addMatch(t.index,n)}}},{key:"addMatch",value:function(e,t){null===this.matches?this.matches=[e,t]:this.matches.push(e,t)}}]),e}();function uu(e,t){var n=e.localNames;if(null!==n)for(var r=0;r<n.length;r+=2)if(n[r]===t)return n[r+1];return null}function cu(e,t,n,r){return-1===n?function(e,t){return 11&e.type?es(e,t):4&e.type?Ls(e,t):null}(t,e):-2===n?function(e,t,n){return n===ns?es(t,e):n===Ds?Ls(t,e):n===js?zs(t,e):void 0}(e,t,r):rn(e,e[1],n,t)}function lu(e,t,n,r){var i=t[19].queries[r];if(null===i.matches){for(var a=e.data,o=n.matches,s=[],u=0;u<o.length;u+=2){var c=o[u];s.push(c<0?null:cu(t,a[c],o[u+1],n.metadata.read))}i.matches=s}return i.matches}function hu(e,t,n,r){var i=e.queries.getByIndex(n),a=i.matches;if(null!==a)for(var o=lu(e,t,i,n),s=0;s<a.length;s+=2){var u=a[s];if(u>0)r.push(o[s/2]);else{for(var c=a[s+1],l=t[-u],h=10;h<l.length;h++){var f=l[h];f[17]===f[3]&&hu(f[1],f,c,r)}if(null!==l[9])for(var d=l[9],v=0;v<d.length;v++){var p=d[v];hu(p[1],p,c,r)}}}return r}function fu(e){var t=Xe(),n=et(),r=vt();pt(r+1);var i=pu(n,r);if(e.dirty&&Ge(t)===(2==(2&i.metadata.flags))){if(null===i.matches)e.reset([]);else{var a=i.crossesNgTemplate?hu(n,t,r,[]):lu(n,t,i,r);e.reset(a,rs),e.notifyOnChanges()}return!0}return!1}function du(e,t,n,r){var i=et();if(i.firstCreatePass){var a=nt();(function(e,t,n){null===e.queries&&(e.queries=new ou),e.queries.track(new su(t,n))})(i,new au(t,n,r),a.index),function(e,t){var n=e.contentQueries||(e.contentQueries=[]);t!==(n.length?n[n.length-1]:-1)&&n.push(e.queries.length-1,t)}(i,e),2==(2&n)&&(i.staticContentQueries=!0)}!function(e,t,n){var r=new nu(4==(4&n));Bi(e,t,r,r.destroy),null===t[19]&&(t[19]=new iu),t[19].queries.push(new ru(r))}(i,Xe(),n)}function vu(){return e=Xe(),t=vt(),e[19].queries[t].queryList;var e,t}function pu(e,t){return e.queries.getByIndex(t)}var mu=new dn("Application Initializer"),gu=function(){var e=function(){function e(t){var n=this;f(this,e),this.appInits=t,this.resolve=Xo,this.reject=Xo,this.initialized=!1,this.done=!1,this.donePromise=new Promise(function(e,t){n.resolve=e,n.reject=t})}return h(e,[{key:"runInitializers",value:function(){var e=this;if(!this.initialized){var t=[],n=function(){e.done=!0,e.resolve()};if(this.appInits)for(var r=function(n){var r=e.appInits[n]();if(to(r))t.push(r);else if(ro(r)){var i=new Promise(function(e,t){r.subscribe({complete:e,error:t})});t.push(i)}},i=0;i<this.appInits.length;i++)r(i);Promise.all(t).then(function(){n()}).catch(function(t){e.reject(t)}),0===t.length&&n(),this.initialized=!0}}}]),e}();return e.\u0275fac=function(t){return new(t||e)(On(mu,8))},e.\u0275prov=P({token:e,factory:e.\u0275fac}),e}(),yu=new dn("AppId"),ku={provide:yu,useFactory:function(){return"".concat(wu()).concat(wu()).concat(wu())},deps:[]};function wu(){return String.fromCharCode(97+Math.floor(25*Math.random()))}var bu=new dn("Platform Initializer"),_u=new dn("Platform ID"),xu=new dn("appBootstrapListener"),Tu=function(){var e=function(){function e(){f(this,e)}return h(e,[{key:"log",value:function(e){console.log(e)}},{key:"warn",value:function(e){console.warn(e)}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=P({token:e,factory:e.\u0275fac}),e}(),Iu=new dn("LocaleId"),Su=new dn("DefaultCurrencyCode"),Eu=function e(t,n){f(this,e),this.ngModuleFactory=t,this.componentFactories=n},Ru=function(e){return new $s(e)},Cu=Ru,Au=function(e){return Promise.resolve(Ru(e))},Nu=function(e){var t=Ru(e),n=Mr(we(e).declarations).reduce(function(e,t){var n=ke(t);return n&&e.push(new Ws(n)),e},[]);return new Eu(t,n)},Ou=Nu,Du=function(e){return Promise.resolve(Nu(e))},Pu=function(){var e=function(){function e(){f(this,e),this.compileModuleSync=Cu,this.compileModuleAsync=Au,this.compileModuleAndAllComponentsSync=Ou,this.compileModuleAndAllComponentsAsync=Du}return h(e,[{key:"clearCache",value:function(){}},{key:"clearCacheFor",value:function(e){}},{key:"getModuleId",value:function(e){}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=P({token:e,factory:e.\u0275fac}),e}(),Lu=Promise.resolve(0);function Fu(e){"undefined"==typeof Zone?Lu.then(function(){e&&e.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",e)}var Mu=function(){function e(t){var n=t.enableLongStackTrace,r=void 0!==n&&n,i=t.shouldCoalesceEventChangeDetection,a=void 0!==i&&i,o=t.shouldCoalesceRunChangeDetection,s=void 0!==o&&o;if(f(this,e),this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new eu(!1),this.onMicrotaskEmpty=new eu(!1),this.onStable=new eu(!1),this.onError=new eu(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();var u=this;u._nesting=0,u._outer=u._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(u._inner=u._inner.fork(new Zone.TaskTrackingZoneSpec)),r&&Zone.longStackTraceZoneSpec&&(u._inner=u._inner.fork(Zone.longStackTraceZoneSpec)),u.shouldCoalesceEventChangeDetection=!s&&a,u.shouldCoalesceRunChangeDetection=s,u.lastRequestAnimationFrameId=-1,u.nativeRequestAnimationFrame=function(){var e=X.requestAnimationFrame,t=X.cancelAnimationFrame;if("undefined"!=typeof Zone&&e&&t){var n=e[Zone.__symbol__("OriginalDelegate")];n&&(e=n);var r=t[Zone.__symbol__("OriginalDelegate")];r&&(t=r)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:t}}().nativeRequestAnimationFrame,function(e){var t=function(){!function(e){e.isCheckStableRunning||-1!==e.lastRequestAnimationFrameId||(e.lastRequestAnimationFrameId=e.nativeRequestAnimationFrame.call(X,function(){e.fakeTopEventTask||(e.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",function(){e.lastRequestAnimationFrameId=-1,Vu(e),e.isCheckStableRunning=!0,ju(e),e.isCheckStableRunning=!1},void 0,function(){},function(){})),e.fakeTopEventTask.invoke()}),Vu(e))}(e)};e._inner=e._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:function(n,r,i,a,o,s){try{return qu(e),n.invokeTask(i,a,o,s)}finally{(e.shouldCoalesceEventChangeDetection&&"eventTask"===a.type||e.shouldCoalesceRunChangeDetection)&&t(),Bu(e)}},onInvoke:function(n,r,i,a,o,s,u){try{return qu(e),n.invoke(i,a,o,s,u)}finally{e.shouldCoalesceRunChangeDetection&&t(),Bu(e)}},onHasTask:function(t,n,r,i){t.hasTask(r,i),n===r&&("microTask"==i.change?(e._hasPendingMicrotasks=i.microTask,Vu(e),ju(e)):"macroTask"==i.change&&(e.hasPendingMacrotasks=i.macroTask))},onHandleError:function(t,n,r,i){return t.handleError(r,i),e.runOutsideAngular(function(){return e.onError.emit(i)}),!1}})}(u)}return h(e,[{key:"run",value:function(e,t,n){return this._inner.run(e,t,n)}},{key:"runTask",value:function(e,t,n,r){var i=this._inner,a=i.scheduleEventTask("NgZoneEvent: "+r,e,Uu,Xo,Xo);try{return i.runTask(a,t,n)}finally{i.cancelTask(a)}}},{key:"runGuarded",value:function(e,t,n){return this._inner.runGuarded(e,t,n)}},{key:"runOutsideAngular",value:function(e){return this._outer.run(e)}}],[{key:"isInAngularZone",value:function(){return!0===Zone.current.get("isAngularZone")}},{key:"assertInAngularZone",value:function(){if(!e.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}},{key:"assertNotInAngularZone",value:function(){if(e.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}}]),e}(),Uu={};function ju(e){if(0==e._nesting&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular(function(){return e.onStable.emit(null)})}finally{e.isStable=!0}}}function Vu(e){e.hasPendingMicrotasks=!!(e._hasPendingMicrotasks||(e.shouldCoalesceEventChangeDetection||e.shouldCoalesceRunChangeDetection)&&-1!==e.lastRequestAnimationFrameId)}function qu(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function Bu(e){e._nesting--,ju(e)}var zu=function(){function e(){f(this,e),this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new eu,this.onMicrotaskEmpty=new eu,this.onStable=new eu,this.onError=new eu}return h(e,[{key:"run",value:function(e,t,n){return e.apply(t,n)}},{key:"runGuarded",value:function(e,t,n){return e.apply(t,n)}},{key:"runOutsideAngular",value:function(e){return e()}},{key:"runTask",value:function(e,t,n,r){return e.apply(t,n)}}]),e}(),Zu=function(){var e=function(){function e(t){var n=this;f(this,e),this._ngZone=t,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),t.run(function(){n.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}return h(e,[{key:"_watchAngularEvents",value:function(){var e=this;this._ngZone.onUnstable.subscribe({next:function(){e._didWork=!0,e._isZoneStable=!1}}),this._ngZone.runOutsideAngular(function(){e._ngZone.onStable.subscribe({next:function(){Mu.assertNotInAngularZone(),Fu(function(){e._isZoneStable=!0,e._runCallbacksIfReady()})}})})}},{key:"increasePendingRequestCount",value:function(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}},{key:"decreasePendingRequestCount",value:function(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}},{key:"isStable",value:function(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}},{key:"_runCallbacksIfReady",value:function(){var e=this;if(this.isStable())Fu(function(){for(;0!==e._callbacks.length;){var t=e._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(e._didWork)}e._didWork=!1});else{var t=this.getPendingTasks();this._callbacks=this._callbacks.filter(function(e){return!e.updateCb||!e.updateCb(t)||(clearTimeout(e.timeoutId),!1)}),this._didWork=!0}}},{key:"getPendingTasks",value:function(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(function(e){return{source:e.source,creationLocation:e.creationLocation,data:e.data}}):[]}},{key:"addCallback",value:function(e,t,n){var r=this,i=-1;t&&t>0&&(i=setTimeout(function(){r._callbacks=r._callbacks.filter(function(e){return e.timeoutId!==i}),e(r._didWork,r.getPendingTasks())},t)),this._callbacks.push({doneCb:e,timeoutId:i,updateCb:n})}},{key:"whenStable",value:function(e,t,n){if(n&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(e,t,n),this._runCallbacksIfReady()}},{key:"getPendingRequestCount",value:function(){return this._pendingCount}},{key:"findProviders",value:function(e,t,n){return[]}}]),e}();return e.\u0275fac=function(t){return new(t||e)(On(Mu))},e.\u0275prov=P({token:e,factory:e.\u0275fac}),e}(),Hu=function(){var e=function(){function e(){f(this,e),this._applications=new Map,Wu.addToWindow(this)}return h(e,[{key:"registerApplication",value:function(e,t){this._applications.set(e,t)}},{key:"unregisterApplication",value:function(e){this._applications.delete(e)}},{key:"unregisterAllApplications",value:function(){this._applications.clear()}},{key:"getTestability",value:function(e){return this._applications.get(e)||null}},{key:"getAllTestabilities",value:function(){return Array.from(this._applications.values())}},{key:"getAllRootElements",value:function(){return Array.from(this._applications.keys())}},{key:"findTestabilityInTree",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return Wu.findTestabilityInTree(this,e,t)}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=P({token:e,factory:e.\u0275fac}),e}();function Gu(e){Wu=e}var Ku,Wu=new(function(){function e(){f(this,e)}return h(e,[{key:"addToWindow",value:function(e){}},{key:"findTestabilityInTree",value:function(e,t,n){return null}}]),e}()),Qu=!0,Yu=!1;function Ju(){return Yu=!0,Qu}function $u(){if(Yu)throw new Error("Cannot enable prod mode after platform setup.");Qu=!1}var Xu=new dn("AllowMultipleToken"),ec=function e(t,n){f(this,e),this.name=t,this.token=n};function tc(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r="Platform: ".concat(t),i=new dn(r);return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],a=nc();if(!a||a.injector.get(Xu,!1))if(e)e(n.concat(t).concat({provide:i,useValue:!0}));else{var o=n.concat(t).concat({provide:i,useValue:!0},{provide:ka,useValue:"platform"});!function(e){if(Ku&&!Ku.destroyed&&!Ku.injector.get(Xu,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");Ku=e.get(rc);var t=e.get(bu,null);t&&t.forEach(function(e){return e()})}(Oa.create({providers:o,name:r}))}return function(e){var t=nc();if(!t)throw new Error("No platform exists!");if(!t.injector.get(e,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return t}(i)}}function nc(){return Ku&&!Ku.destroyed?Ku:null}var rc=function(){var e=function(){function e(t){f(this,e),this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}return h(e,[{key:"bootstrapModuleFactory",value:function(e,t){var n=this,r=function(e,t){return"noop"===e?new zu:("zone.js"===e?void 0:e)||new Mu({enableLongStackTrace:Ju(),shouldCoalesceEventChangeDetection:!!(null==t?void 0:t.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==t?void 0:t.ngZoneRunCoalescing)})}(t?t.ngZone:void 0,{ngZoneEventCoalescing:t&&t.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:t&&t.ngZoneRunCoalescing||!1}),i=[{provide:Mu,useValue:r}];return r.run(function(){var a=Oa.create({providers:i,parent:n.injector,name:e.moduleType.name}),o=e.create(a),s=o.injector.get(Lr,null);if(!s)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return r.runOutsideAngular(function(){var e=r.onError.subscribe({next:function(e){s.handleError(e)}});o.onDestroy(function(){oc(n._modules,o),e.unsubscribe()})}),function(e,r,i){try{var a=((s=o.injector.get(gu)).runInitializers(),s.donePromise.then(function(){return qo(o.injector.get(Iu,Vo)||Vo),n._moduleDoBootstrap(o),o}));return to(a)?a.catch(function(t){throw r.runOutsideAngular(function(){return e.handleError(t)}),t}):a}catch(t){throw r.runOutsideAngular(function(){return e.handleError(t)}),t}var s}(s,r)})}},{key:"bootstrapModule",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=ic({},n);return function(e,t,n){var r=new $s(n);return Promise.resolve(r)}(0,0,e).then(function(e){return t.bootstrapModuleFactory(e,r)})}},{key:"_moduleDoBootstrap",value:function(e){var t=e.injector.get(ac);if(e._bootstrapComponents.length>0)e._bootstrapComponents.forEach(function(e){return t.bootstrap(e)});else{if(!e.instance.ngDoBootstrap)throw new Error("The module ".concat(T(e.instance.constructor),' was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.'));e.instance.ngDoBootstrap(t)}this._modules.push(e)}},{key:"onDestroy",value:function(e){this._destroyListeners.push(e)}},{key:"injector",get:function(){return this._injector}},{key:"destroy",value:function(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(function(e){return e.destroy()}),this._destroyListeners.forEach(function(e){return e()}),this._destroyed=!0}},{key:"destroyed",get:function(){return this._destroyed}}]),e}();return e.\u0275fac=function(t){return new(t||e)(On(Oa))},e.\u0275prov=P({token:e,factory:e.\u0275fac}),e}();function ic(e,t){return Array.isArray(t)?t.reduce(ic,e):Object.assign(Object.assign({},e),t)}var ac=function(){var e=function(){function e(t,n,r,i,a){var o=this;f(this,e),this._zone=t,this._injector=n,this._exceptionHandler=r,this._componentFactoryResolver=i,this._initStatus=a,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:function(){o._zone.run(function(){o.tick()})}});var s=new c.y(function(e){o._stable=o._zone.isStable&&!o._zone.hasPendingMacrotasks&&!o._zone.hasPendingMicrotasks,o._zone.runOutsideAngular(function(){e.next(o._stable),e.complete()})}),u=new c.y(function(e){var t;o._zone.runOutsideAngular(function(){t=o._zone.onStable.subscribe(function(){Mu.assertNotInAngularZone(),Fu(function(){!o._stable&&!o._zone.hasPendingMacrotasks&&!o._zone.hasPendingMicrotasks&&(o._stable=!0,e.next(!0))})})});var n=o._zone.onUnstable.subscribe(function(){Mu.assertInAngularZone(),o._stable&&(o._stable=!1,o._zone.runOutsideAngular(function(){e.next(!1)}))});return function(){t.unsubscribe(),n.unsubscribe()}});this.isStable=(0,l.T)(s,u.pipe(function(e){return(0,k.x)()(function(e,t){return function(t){var n;n="function"==typeof e?e:function(){return e};var r=Object.create(t,p.N);return r.source=t,r.subjectFactory=n,r}}(w)(e))}))}return h(e,[{key:"bootstrap",value:function(e,t){var n,r=this;if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");n=e instanceof Yo?e:this._componentFactoryResolver.resolveComponentFactory(e),this.componentTypes.push(n.componentType);var i=function(e){return e.isBoundToModule}(n)?void 0:this._injector.get(Fs),a=n.create(Oa.NULL,[],t||n.selector,i),o=a.location.nativeElement,s=a.injector.get(Zu,null),u=s&&a.injector.get(Hu);return s&&u&&u.registerApplication(o,s),a.onDestroy(function(){r.detachView(a.hostView),oc(r.components,a),u&&u.unregisterApplication(o)}),this._loadComponent(a),a}},{key:"tick",value:function(){var e=this;if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;var t,n=s(this._views);try{for(n.s();!(t=n.n()).done;){var r;t.value.detectChanges()}}catch(i){n.e(i)}finally{n.f()}}catch(r){this._zone.runOutsideAngular(function(){return e._exceptionHandler.handleError(r)})}finally{this._runningTick=!1}}},{key:"attachView",value:function(e){var t=e;this._views.push(t),t.attachToAppRef(this)}},{key:"detachView",value:function(e){var t=e;oc(this._views,t),t.detachFromAppRef()}},{key:"_loadComponent",value:function(e){this.attachView(e.hostView),this.tick(),this.components.push(e),this._injector.get(xu,[]).concat(this._bootstrapListeners).forEach(function(t){return t(e)})}},{key:"ngOnDestroy",value:function(){this._views.slice().forEach(function(e){return e.destroy()}),this._onMicrotaskEmptySubscription.unsubscribe()}},{key:"viewCount",get:function(){return this._views.length}}]),e}();return e.\u0275fac=function(t){return new(t||e)(On(Mu),On(Oa),On(Lr),On($o),On(gu))},e.\u0275prov=P({token:e,factory:e.\u0275fac}),e}();function oc(e,t){var n=e.indexOf(t);n>-1&&e.splice(n,1)}var sc=function e(){f(this,e)},uc=function e(){f(this,e)},cc={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"},lc=function(){var e=function(){function e(t,n){f(this,e),this._compiler=t,this._config=n||cc}return h(e,[{key:"load",value:function(e){return this.loadAndCompile(e)}},{key:"loadAndCompile",value:function(e){var n=this,i=t(e.split("#"),2),a=i[0],o=i[1];return void 0===o&&(o="default"),r(8255)(a).then(function(e){return e[o]}).then(function(e){return hc(e,a,o)}).then(function(e){return n._compiler.compileModuleAsync(e)})}},{key:"loadFactory",value:function(e){var n=t(e.split("#"),2),i=n[0],a=n[1],o="NgFactory";return void 0===a&&(a="default",o=""),r(8255)(this._config.factoryPathPrefix+i+this._config.factoryPathSuffix).then(function(e){return e[a+o]}).then(function(e){return hc(e,i,a)})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(On(Pu),On(uc,8))},e.\u0275prov=P({token:e,factory:e.\u0275fac}),e}();function hc(e,t,n){if(!e)throw new Error("Cannot find '".concat(n,"' in '").concat(t,"'"));return e}var fc=function(e){return null},dc=tc(null,"core",[{provide:_u,useValue:"unknown"},{provide:rc,deps:[Oa]},{provide:Hu,deps:[]},{provide:Tu,deps:[]}]),vc=[{provide:ac,useClass:ac,deps:[Mu,Oa,Lr,$o,gu]},{provide:Ks,deps:[Mu],useFactory:function(e){var t=[];return e.onStable.subscribe(function(){for(;t.length;)t.pop()()}),function(e){t.push(e)}}},{provide:gu,useClass:gu,deps:[[new Vn,mu]]},{provide:Pu,useClass:Pu,deps:[]},ku,{provide:bs,useFactory:function(){return As},deps:[]},{provide:xs,useFactory:function(){return Ns},deps:[]},{provide:Iu,useFactory:function(e){return qo(e=e||"undefined"!=typeof $localize&&$localize.locale||Vo),e},deps:[[new jn(Iu),new Vn,new qn]]},{provide:Su,useValue:"USD"}],pc=function(){var e=function e(t){f(this,e)};return e.\u0275fac=function(t){return new(t||e)(On(ac))},e.\u0275mod=ve({type:e}),e.\u0275inj=L({providers:vc}),e}()},8939:function(e,n,r){"use strict";r.d(n,{hO:function(){return w},xv:function(){return p},Dh:function(){return v},GT:function(){return l},cc:function(){return b},on:function(){return m},pX:function(){return c}});var i=r(3018),o=r(7841),s=r(6643);e=r.hmd(e);var u=["ngOnDestroy"],c=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return new Proxy(e,{get:function(i,o){return n.runOutsideAngular(function(){var i;if(e[o])return(null===(i=null==r?void 0:r.spy)||void 0===i?void 0:i.get)&&r.spy.get(o,e[o]),e[o];if(u.indexOf(o)>-1)return function(){};var s=t.toPromise().then(function(e){var t=e&&e[o];return"function"==typeof t?t.bind(e):t&&t.then?t.then(function(e){return n.run(function(){return e})}):n.run(function(){return t})});return new Proxy(function(){},{get:function(e,t){return s[t]},apply:function(e,t,n){return s.then(function(e){var t,i=e&&e.apply(void 0,a(n));return(null===(t=null==r?void 0:r.spy)||void 0===t?void 0:t.apply)&&r.spy.apply(o,n,i),i})}})})}})},l=function(e,t){t.forEach(function(t){Object.getOwnPropertyNames(t.prototype||t).forEach(function(n){Object.defineProperty(e.prototype,n,Object.getOwnPropertyDescriptor(t.prototype||t,n))})})},d=function e(t){return f(this,e),t},v=new i.OlP("angularfire2.app.options"),p=new i.OlP("angularfire2.app.name");function m(t,n,r){var i="object"==typeof r&&r||{};i.name=i.name||"string"==typeof r&&r||"[DEFAULT]";var a=o.Z.apps.filter(function(e){return e&&e.name===i.name})[0]||n.runOutsideAngular(function(){return o.Z.initializeApp(t,i)});try{JSON.stringify(t)!==JSON.stringify(a.options)&&y("error","".concat(a.name," Firebase App already initialized with different options").concat(e.hot?", you may need to reload as Firebase is not HMR aware.":"."))}catch(s){}return new d(a)}var g,y=function(e){for(var t,n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];(0,i.X6Q)()&&"undefined"!=typeof console&&(t=console)[e].apply(t,r)},k={provide:d,useFactory:m,deps:[v,i.R0b,[new i.FiY,p]]},w=((g=function(){function e(t){f(this,e),o.Z.registerVersion("angularfire",s.q4.full,"core"),o.Z.registerVersion("angularfire",s.q4.full,"app-compat"),o.Z.registerVersion("angular",i.q4F.full,t.toString())}return h(e,null,[{key:"initializeApp",value:function(t,n){return{ngModule:e,providers:[{provide:v,useValue:t},{provide:p,useValue:n}]}}}]),e}()).\u0275fac=function(e){return new(e||g)(i.LFG(i.Lbi))},g.\u0275mod=i.oAB({type:g}),g.\u0275inj=i.cJS({providers:[k]}),g);function b(e,n,r,i,a){var o=t(globalThis.\u0275AngularfireInstanceCache.find(function(t){return t[0]===e})||[],3),s=o[1],u=o[2];if(s)return function(e,t){try{return e.toString()===t.toString()}catch(r){return e===t}}(a,u)||(x("error","".concat(n," was already initialized on the ").concat(r," Firebase App with different settings.").concat(_?" You may need to reload as Firebase is not HMR aware.":"")),x("warn",{is:a,was:u})),s;var c=i();return globalThis.\u0275AngularfireInstanceCache.push([e,c,a]),c}var _=!!e.hot,x=function(e){for(var t,n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];(0,i.X6Q)()&&"undefined"!=typeof console&&(t=console)[e].apply(t,r)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},6643:function(e,n,r){"use strict";r.d(n,{q4:function(){return jn},iC:function(){return Yn},HU:function(){return Wn},vb:function(){return Zn},JM:function(){return zn}});var i=r(3018),o=r(2329),u=r(8239),c=r(5452),l=r(3854),d=r(6034),v=r(5601),p=r(6676),m="@firebase/installations",g="0.5.2",y="w:".concat(g),k="FIS_v2",w=new l.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function b(e){return e instanceof l.ZR&&e.code.includes("request-failed")}function _(e){var t=e.projectId;return"https://firebaseinstallations.googleapis.com/v1/projects/".concat(t,"/installations")}function x(e){return{token:e.token,requestStatus:2,expiresIn:A(e.expiresIn),creationTime:Date.now()}}function T(e,t){return I.apply(this,arguments)}function I(){return(I=(0,u.Z)(regeneratorRuntime.mark(function e(t,n){var r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.json();case 2:return r=e.sent.error,e.abrupt("return",w.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status}));case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function S(e){var t=e.apiKey;return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function E(e,t){var n=t.refreshToken,r=S(e);return r.append("Authorization",function(e){return"".concat(k," ").concat(e)}(n)),r}function R(e){return C.apply(this,arguments)}function C(){return(C=(0,u.Z)(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t();case 2:return n=e.sent,e.abrupt("return",n.status>=500&&n.status<600?t():n);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function A(e){return Number(e.replace("s","000"))}function N(e,t){return O.apply(this,arguments)}function O(){return(O=(0,u.Z)(regeneratorRuntime.mark(function e(t,n){var r,i,a,o,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.fid,i=_(t),a={method:"POST",headers:S(t),body:JSON.stringify({fid:r,authVersion:k,appId:t.appId,sdkVersion:y})},e.next=5,R(function(){return fetch(i,a)});case 5:if(!(o=e.sent).ok){e.next=11;break}return e.next=9,o.json();case 9:return s=e.sent,e.abrupt("return",{fid:s.fid||r,registrationStatus:2,refreshToken:s.refreshToken,authToken:x(s.authToken)});case 11:return e.next=13,T("Create Installation",o);case 13:throw e.sent;case 14:case"end":return e.stop()}},e)}))).apply(this,arguments)}function D(e){return new Promise(function(t){setTimeout(t,e)})}var P=/^[cdef][\w-]{21}$/;function L(){try{var e=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(e),e[0]=112+e[0]%16;var t=function(e){return function(e){return btoa(String.fromCharCode.apply(String,a(e))).replace(/\+/g,"-").replace(/\//g,"_")}(e).substr(0,22)}(e);return P.test(t)?t:""}catch(e){return""}}function F(e){return"".concat(e.appName,"!").concat(e.appId)}var M=new Map;function U(e,t){var n=F(e);j(n,t),function(e,t){var n=(!V&&"BroadcastChannel"in self&&((V=new BroadcastChannel("[Firebase] FID Change")).onmessage=function(e){j(e.data.key,e.data.fid)}),V);n&&n.postMessage({key:e,fid:t}),0===M.size&&V&&(V.close(),V=null)}(n,t)}function j(e,t){var n=M.get(e);if(n){var r,i=s(n);try{for(i.s();!(r=i.n()).done;){(0,r.value)(t)}}catch(a){i.e(a)}finally{i.f()}}}var V=null,q="firebase-installations-store",B=null;function z(){return B||(B=(0,p.openDb)("firebase-installations-database",1,function(e){switch(e.oldVersion){case 0:e.createObjectStore(q)}})),B}function Z(e,t){return H.apply(this,arguments)}function H(){return(H=(0,u.Z)(regeneratorRuntime.mark(function e(t,n){var r,i,a,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=F(t),e.next=3,z();case 3:return i=e.sent.transaction(q,"readwrite"),a=i.objectStore(q),e.next=7,a.get(r);case 7:return o=e.sent,e.next=10,a.put(n,r);case 10:return e.next=12,i.complete;case 12:return(!o||o.fid!==n.fid)&&U(t,n.fid),e.abrupt("return",n);case 14:case"end":return e.stop()}},e)}))).apply(this,arguments)}function G(e){return K.apply(this,arguments)}function K(){return(K=(0,u.Z)(regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=F(t),e.next=3,z();case 3:return r=e.sent.transaction(q,"readwrite"),e.next=6,r.objectStore(q).delete(n);case 6:return e.next=8,r.complete;case 8:case"end":return e.stop()}},e)}))).apply(this,arguments)}function W(e,t){return Q.apply(this,arguments)}function Q(){return(Q=(0,u.Z)(regeneratorRuntime.mark(function e(t,n){var r,i,a,o,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=F(t),e.next=3,z();case 3:return i=e.sent.transaction(q,"readwrite"),a=i.objectStore(q),e.next=7,a.get(r);case 7:if(o=e.sent,void 0!==(s=n(o))){e.next=14;break}return e.next=12,a.delete(r);case 12:e.next=16;break;case 14:return e.next=16,a.put(s,r);case 16:return e.next=18,i.complete;case 18:return s&&(!o||o.fid!==s.fid)&&U(t,s.fid),e.abrupt("return",s);case 20:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Y(e){return J.apply(this,arguments)}function J(){return(J=(0,u.Z)(regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W(t,function(e){var r=$(e),i=X(t,r);return n=i.registrationPromise,i.installationEntry});case 2:if(""!==(r=e.sent).fid){e.next=10;break}return e.next=6,n;case 6:e.t1=e.sent,e.t0={installationEntry:e.t1},e.next=11;break;case 10:e.t0={installationEntry:r,registrationPromise:n};case 11:return e.abrupt("return",e.t0);case 12:case"end":return e.stop()}},e)}))).apply(this,arguments)}function $(e){return ie(e||{fid:L(),registrationStatus:0})}function X(e,t){if(0===t.registrationStatus){if(!navigator.onLine)return{installationEntry:t,registrationPromise:Promise.reject(w.create("app-offline"))};var n={fid:t.fid,registrationStatus:1,registrationTime:Date.now()};return{installationEntry:n,registrationPromise:function(e,t){return ee.apply(this,arguments)}(e,n)}}return 1===t.registrationStatus?{installationEntry:t,registrationPromise:te(e)}:{installationEntry:t}}function ee(){return(ee=(0,u.Z)(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.t0=Z,e.t1=t,e.next=5,N(t,n);case 5:return e.t2=e.sent,e.abrupt("return",(0,e.t0)(e.t1,e.t2));case 9:if(e.prev=9,e.t3=e.catch(0),!b(e.t3)||409!==e.t3.customData.serverCode){e.next=16;break}return e.next=14,G(t);case 14:e.next=18;break;case 16:return e.next=18,Z(t,{fid:n.fid,registrationStatus:0});case 18:throw e.t3;case 19:case"end":return e.stop()}},e,null,[[0,9]])}))).apply(this,arguments)}function te(e){return ne.apply(this,arguments)}function ne(){return(ne=(0,u.Z)(regeneratorRuntime.mark(function e(t){var n,r,i,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,re(t);case 2:n=e.sent;case 3:if(1!==n.registrationStatus){e.next=11;break}return e.next=6,D(100);case 6:return e.next=8,re(t);case 8:n=e.sent;case 9:e.next=3;break;case 11:if(0!==n.registrationStatus){e.next=18;break}return e.next=14,Y(t);case 14:return r=e.sent,i=r.installationEntry,a=r.registrationPromise,e.abrupt("return",a||i);case 18:return e.abrupt("return",n);case 19:case"end":return e.stop()}},e)}))).apply(this,arguments)}function re(e){return W(e,function(e){if(!e)throw w.create("installation-not-found");return ie(e)})}function ie(e){return function(e){return 1===e.registrationStatus&&e.registrationTime+1e4<Date.now()}(e)?{fid:e.fid,registrationStatus:0}:e}function ae(e,t){return oe.apply(this,arguments)}function oe(){return(oe=(0,u.Z)(regeneratorRuntime.mark(function e(t,n){var r,i,a,o,s,u,c;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.appConfig,i=t.platformLoggerProvider,a=se(r,n),o=E(r,n),(s=i.getImmediate({optional:!0}))&&o.append("x-firebase-client",s.getPlatformInfoString()),u={method:"POST",headers:o,body:JSON.stringify({installation:{sdkVersion:y}})},e.next=6,R(function(){return fetch(a,u)});case 6:if(!(c=e.sent).ok){e.next=13;break}return e.t0=x,e.next=11,c.json();case 11:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1));case 13:return e.next=15,T("Generate Auth Token",c);case 15:throw e.sent;case 16:case"end":return e.stop()}},e)}))).apply(this,arguments)}function se(e,t){var n=t.fid;return"".concat(_(e),"/").concat(n,"/authTokens:generate")}function ue(e){return ce.apply(this,arguments)}function ce(){return(ce=(0,u.Z)(regeneratorRuntime.mark(function e(t){var n,r,i,a=arguments;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.length>1&&void 0!==a[1]&&a[1],e.next=3,W(t.appConfig,function(e){if(!pe(e))throw w.create("not-registered");var i=e.authToken;if(!n&&me(i))return e;if(1===i.requestStatus)return r=le(t,n),e;if(!navigator.onLine)throw w.create("app-offline");var a=ge(e);return r=de(t,a),a});case 3:if(i=e.sent,!r){e.next=10;break}return e.next=7,r;case 7:e.t0=e.sent,e.next=11;break;case 10:e.t0=i.authToken;case 11:return e.abrupt("return",e.t0);case 12:case"end":return e.stop()}},e)}))).apply(this,arguments)}function le(e,t){return he.apply(this,arguments)}function he(){return(he=(0,u.Z)(regeneratorRuntime.mark(function e(t,n){var r,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fe(t.appConfig);case 2:r=e.sent;case 3:if(1!==r.authToken.requestStatus){e.next=11;break}return e.next=6,D(100);case 6:return e.next=8,fe(t.appConfig);case 8:r=e.sent;case 9:e.next=3;break;case 11:return i=r.authToken,e.abrupt("return",0===i.requestStatus?ue(t,n):i);case 13:case"end":return e.stop()}},e)}))).apply(this,arguments)}function fe(e){return W(e,function(e){if(!pe(e))throw w.create("not-registered");return function(e){return 1===e.requestStatus&&e.requestTime+1e4<Date.now()}(e.authToken)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}function de(e,t){return ve.apply(this,arguments)}function ve(){return(ve=(0,u.Z)(regeneratorRuntime.mark(function e(t,n){var r,i,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ae(t,n);case 3:return r=e.sent,i=Object.assign(Object.assign({},n),{authToken:r}),e.next=7,Z(t.appConfig,i);case 7:return e.abrupt("return",r);case 10:if(e.prev=10,e.t0=e.catch(0),b(e.t0)&&(401===e.t0.customData.serverCode||404===e.t0.customData.serverCode)){e.next=18;break}return a=Object.assign(Object.assign({},n),{authToken:{requestStatus:0}}),e.next=16,Z(t.appConfig,a);case 16:e.next=20;break;case 18:return e.next=20,G(t.appConfig);case 20:throw e.t0;case 21:case"end":return e.stop()}},e,null,[[0,10]])}))).apply(this,arguments)}function pe(e){return void 0!==e&&2===e.registrationStatus}function me(e){return 2===e.requestStatus&&!function(e){var t=Date.now();return t<e.creationTime||e.creationTime+e.expiresIn<t+36e5}(e)}function ge(e){var t={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},e),{authToken:t})}function ye(){return(ye=(0,u.Z)(regeneratorRuntime.mark(function e(t){var n,r,i,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t,e.next=3,Y(n.appConfig);case 3:return r=e.sent,i=r.installationEntry,a=r.registrationPromise,e.abrupt("return",(a?a.catch(console.error):ue(n).catch(console.error),i.fid));case 7:case"end":return e.stop()}},e)}))).apply(this,arguments)}function ke(){return(ke=(0,u.Z)(regeneratorRuntime.mark(function e(t){var n,r,i=arguments;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=i.length>1&&void 0!==i[1]&&i[1],r=t,e.next=4,we(r.appConfig);case 4:return e.next=6,ue(r,n);case 6:return e.abrupt("return",e.sent.token);case 7:case"end":return e.stop()}},e)}))).apply(this,arguments)}function we(e){return be.apply(this,arguments)}function be(){return(be=(0,u.Z)(regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Y(t);case 2:if(n=e.sent,r=n.registrationPromise,e.t0=r,!e.t0){e.next=8;break}return e.next=8,r;case 8:case"end":return e.stop()}},e)}))).apply(this,arguments)}function _e(e){return w.create("missing-app-config-values",{valueName:e})}var xe="installations";(0,c._registerComponent)(new d.wA(xe,function(e){var t=e.getProvider("app").getImmediate();return{app:t,appConfig:function(e){if(!e||!e.options)throw _e("App Configuration");if(!e.name)throw _e("App Name");for(var t=0,n=["projectId","apiKey","appId"];t<n.length;t++){var r=n[t];if(!e.options[r])throw _e(r)}return{appName:e.name,projectId:e.options.projectId,apiKey:e.options.apiKey,appId:e.options.appId}}(t),platformLoggerProvider:(0,c._getProvider)(t,"platform-logger"),_delete:function(){return Promise.resolve()}}},"PUBLIC")),(0,c._registerComponent)(new d.wA("installations-internal",function(e){var t=e.getProvider("app").getImmediate(),n=(0,c._getProvider)(t,xe).getImmediate();return{getId:function(){return function(e){return ye.apply(this,arguments)}(n)},getToken:function(e){return function(e){return ke.apply(this,arguments)}(n,e)}}},"PRIVATE")),(0,c.registerVersion)(m,g),(0,c.registerVersion)(m,g,"esm2017");var Te="@firebase/remote-config",Ie=new l.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"}),Se=function(){function e(t,n,r,i){f(this,e),this.client=t,this.storage=n,this.storageCache=r,this.logger=i}return h(e,[{key:"isCachedDataFresh",value:function(e,t){if(!t)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;var n=Date.now()-t,r=n<=e;return this.logger.debug("Config fetch cache check. Cache age millis: ".concat(n,". Cache max age millis (minimumFetchIntervalMillis setting): ").concat(e,". Is cache hit: ").concat(r,".")),r}},{key:"fetch",value:function(e){var n=this;return(0,u.Z)(regeneratorRuntime.mark(function r(){var i,a,o,s,u,c;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Promise.all([n.storage.getLastSuccessfulFetchTimestampMillis(),n.storage.getLastSuccessfulFetchResponse()]);case 2:if(i=r.sent,a=t(i,2),o=a[0],!(s=a[1])||!n.isCachedDataFresh(e.cacheMaxAgeMillis,o)){r.next=8;break}return r.abrupt("return",s);case 8:return e.eTag=s&&s.eTag,r.next=11,n.client.fetch(e);case 11:return u=r.sent,c=[n.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())],200===u.status&&c.push(n.storage.setLastSuccessfulFetchResponse(u)),r.next=16,Promise.all(c);case 16:return r.abrupt("return",u);case 17:case"end":return r.stop()}},r)}))()}}]),e}();function Ee(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:navigator;return e.languages&&e.languages[0]||e.language}var Re=function(){function e(t,n,r,i,a,o){f(this,e),this.firebaseInstallations=t,this.sdkVersion=n,this.namespace=r,this.projectId=i,this.apiKey=a,this.appId=o}return h(e,[{key:"fetch",value:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e){var n=this;return(0,u.Z)(regeneratorRuntime.mark(function r(){var i,a,o,s,u,c,l,h,f,d,v,p,m,g,y,k,w;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Promise.all([n.firebaseInstallations.getId(),n.firebaseInstallations.getToken()]);case 2:return i=r.sent,a=t(i,2),o=a[0],s=a[1],u="".concat(window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com","/v1/projects/").concat(n.projectId,"/namespaces/").concat(n.namespace,":fetch?key=").concat(n.apiKey),c={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":e.eTag||"*"},l={sdk_version:n.sdkVersion,app_instance_id:o,app_instance_id_token:s,app_id:n.appId,language_code:Ee()},h={method:"POST",headers:c,body:JSON.stringify(l)},f=fetch(u,h),d=new Promise(function(t,n){e.signal.addEventListener(function(){var e=new Error("The operation was aborted.");e.name="AbortError",n(e)})}),r.prev=12,r.next=15,Promise.race([f,d]);case 15:return r.next=17,f;case 17:v=r.sent,r.next=24;break;case 20:throw r.prev=20,r.t0=r.catch(12),p="fetch-client-network","AbortError"===r.t0.name&&(p="fetch-timeout"),Ie.create(p,{originalErrorMessage:r.t0.message});case 24:if(m=v.status,g=v.headers.get("ETag")||void 0,200!==v.status){r.next=37;break}return r.prev=27,r.next=30,v.json();case 30:w=r.sent,r.next=36;break;case 33:throw r.prev=33,r.t1=r.catch(27),Ie.create("fetch-client-parse",{originalErrorMessage:r.t1.message});case 36:y=w.entries,k=w.state;case 37:if("INSTANCE_STATE_UNSPECIFIED"===k?m=500:"NO_CHANGE"===k?m=304:("NO_TEMPLATE"===k||"EMPTY_CONFIG"===k)&&(y={}),304===m||200===m){r.next=39;break}throw Ie.create("fetch-status",{httpStatus:m});case 39:return r.abrupt("return",{status:m,eTag:g,config:y});case 40:case"end":return r.stop()}},r,null,[[12,20],[27,33]])}))()})}]),e}(),Ce=function(){function e(t,n){f(this,e),this.client=t,this.storage=n}return h(e,[{key:"fetch",value:function(e){var t=this;return(0,u.Z)(regeneratorRuntime.mark(function n(){var r;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.storage.getThrottleMetadata();case 2:if(n.t0=n.sent,n.t0){n.next=5;break}n.t0={backoffCount:0,throttleEndTimeMillis:Date.now()};case 5:return r=n.t0,n.abrupt("return",t.attemptFetch(e,r));case 7:case"end":return n.stop()}},n)}))()}},{key:"attemptFetch",value:function(e,t){var n=t.throttleEndTimeMillis,r=t.backoffCount,i=this;return(0,u.Z)(regeneratorRuntime.mark(function t(){var a,o;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,function(e,t){return new Promise(function(n,r){var i=Math.max(t-Date.now(),0),a=setTimeout(n,i);e.addEventListener(function(){clearTimeout(a),r(Ie.create("fetch-throttle",{throttleEndTimeMillis:t}))})})}(e.signal,n);case 2:return t.prev=2,t.next=5,i.client.fetch(e);case 5:return a=t.sent,t.next=8,i.storage.deleteThrottleMetadata();case 8:return t.abrupt("return",a);case 11:if(t.prev=11,t.t0=t.catch(2),function(e){if(!(e instanceof l.ZR&&e.customData))return!1;var t=Number(e.customData.httpStatus);return 429===t||500===t||503===t||504===t}(t.t0)){t.next=15;break}throw t.t0;case 15:return o={throttleEndTimeMillis:Date.now()+(0,l.$s)(r),backoffCount:r+1},t.next=18,i.storage.setThrottleMetadata(o);case 18:return t.abrupt("return",i.attemptFetch(e,o));case 19:case"end":return t.stop()}},t,null,[[2,11]])}))()}}]),e}(),Ae=function(){function e(t,n,r,i,a){f(this,e),this.app=t,this._client=n,this._storageCache=r,this._storage=i,this._logger=a,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}return h(e,[{key:"fetchTimeMillis",get:function(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}},{key:"lastFetchStatus",get:function(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}]),e}();function Ne(e,t){var n=e.target.error||void 0;return Ie.create(t,{originalErrorMessage:n&&n.message})}var Oe="app_namespace_store",De=function(){function e(t,n,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new Promise(function(e,t){try{var r=indexedDB.open("firebase_remote_config",1);r.onerror=function(e){t(Ne(e,"storage-open"))},r.onsuccess=function(t){e(t.target.result)},r.onupgradeneeded=function(e){var t=e.target.result;switch(e.oldVersion){case 0:t.createObjectStore(Oe,{keyPath:"compositeKey"})}}}catch(n){t(Ie.create("storage-open",{originalErrorMessage:n}))}});f(this,e),this.appId=t,this.appName=n,this.namespace=r,this.openDbPromise=i}return h(e,[{key:"getLastFetchStatus",value:function(){return this.get("last_fetch_status")}},{key:"setLastFetchStatus",value:function(e){return this.set("last_fetch_status",e)}},{key:"getLastSuccessfulFetchTimestampMillis",value:function(){return this.get("last_successful_fetch_timestamp_millis")}},{key:"setLastSuccessfulFetchTimestampMillis",value:function(e){return this.set("last_successful_fetch_timestamp_millis",e)}},{key:"getLastSuccessfulFetchResponse",value:function(){return this.get("last_successful_fetch_response")}},{key:"setLastSuccessfulFetchResponse",value:function(e){return this.set("last_successful_fetch_response",e)}},{key:"getActiveConfig",value:function(){return this.get("active_config")}},{key:"setActiveConfig",value:function(e){return this.set("active_config",e)}},{key:"getActiveConfigEtag",value:function(){return this.get("active_config_etag")}},{key:"setActiveConfigEtag",value:function(e){return this.set("active_config_etag",e)}},{key:"getThrottleMetadata",value:function(){return this.get("throttle_metadata")}},{key:"setThrottleMetadata",value:function(e){return this.set("throttle_metadata",e)}},{key:"deleteThrottleMetadata",value:function(){return this.delete("throttle_metadata")}},{key:"get",value:function(e){var t=this;return(0,u.Z)(regeneratorRuntime.mark(function n(){var r;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.openDbPromise;case 2:return r=n.sent,n.abrupt("return",new Promise(function(n,i){var a=r.transaction([Oe],"readonly").objectStore(Oe),o=t.createCompositeKey(e);try{var s=a.get(o);s.onerror=function(e){i(Ne(e,"storage-get"))},s.onsuccess=function(e){var t=e.target.result;n(t?t.value:void 0)}}catch(s){i(Ie.create("storage-get",{originalErrorMessage:s&&s.message}))}}));case 4:case"end":return n.stop()}},n)}))()}},{key:"set",value:function(e,t){var n=this;return(0,u.Z)(regeneratorRuntime.mark(function r(){var i;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,n.openDbPromise;case 2:return i=r.sent,r.abrupt("return",new Promise(function(r,a){var o=i.transaction([Oe],"readwrite").objectStore(Oe),s=n.createCompositeKey(e);try{var u=o.put({compositeKey:s,value:t});u.onerror=function(e){a(Ne(e,"storage-set"))},u.onsuccess=function(){r()}}catch(u){a(Ie.create("storage-set",{originalErrorMessage:u&&u.message}))}}));case 4:case"end":return r.stop()}},r)}))()}},{key:"delete",value:function(e){var t=this;return(0,u.Z)(regeneratorRuntime.mark(function n(){var r;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.openDbPromise;case 2:return r=n.sent,n.abrupt("return",new Promise(function(n,i){var a=r.transaction([Oe],"readwrite").objectStore(Oe),o=t.createCompositeKey(e);try{var s=a.delete(o);s.onerror=function(e){i(Ne(e,"storage-delete"))},s.onsuccess=function(){n()}}catch(s){i(Ie.create("storage-delete",{originalErrorMessage:s&&s.message}))}}));case 4:case"end":return n.stop()}},n)}))()}},{key:"createCompositeKey",value:function(e){return[this.appId,this.appName,this.namespace,e].join()}}]),e}(),Pe=function(){function e(t){f(this,e),this.storage=t}return h(e,[{key:"getLastFetchStatus",value:function(){return this.lastFetchStatus}},{key:"getLastSuccessfulFetchTimestampMillis",value:function(){return this.lastSuccessfulFetchTimestampMillis}},{key:"getActiveConfig",value:function(){return this.activeConfig}},{key:"loadFromStorage",value:function(){var e=this;return(0,u.Z)(regeneratorRuntime.mark(function t(){var n,r,i,a,o,s;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.storage.getLastFetchStatus(),r=e.storage.getLastSuccessfulFetchTimestampMillis(),i=e.storage.getActiveConfig(),t.next=5,n;case 5:return(a=t.sent)&&(e.lastFetchStatus=a),t.next=9,r;case 9:return(o=t.sent)&&(e.lastSuccessfulFetchTimestampMillis=o),t.next=13,i;case 13:(s=t.sent)&&(e.activeConfig=s);case 15:case"end":return t.stop()}},t)}))()}},{key:"setLastFetchStatus",value:function(e){return this.lastFetchStatus=e,this.storage.setLastFetchStatus(e)}},{key:"setLastSuccessfulFetchTimestampMillis",value:function(e){return this.lastSuccessfulFetchTimestampMillis=e,this.storage.setLastSuccessfulFetchTimestampMillis(e)}},{key:"setActiveConfig",value:function(e){return this.activeConfig=e,this.storage.setActiveConfig(e)}}]),e}();function Le(){return(Le=(0,u.Z)(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if((0,l.hl)()){e.next=2;break}return e.abrupt("return",!1);case 2:return e.prev=2,e.next=5,(0,l.eu)();case 5:return e.abrupt("return",e.sent);case 8:return e.prev=8,e.t0=e.catch(2),e.abrupt("return",!1);case 11:case"end":return e.stop()}},e,null,[[2,8]])}))).apply(this,arguments)}(0,c._registerComponent)(new d.wA("remote-config",function(e,t){var n=t.instanceIdentifier,r=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw Ie.create("registration-window");if(!(0,l.hl)())throw Ie.create("indexed-db-unavailable");var a=r.options,o=a.projectId,s=a.apiKey,u=a.appId;if(!o)throw Ie.create("registration-project-id");if(!s)throw Ie.create("registration-api-key");if(!u)throw Ie.create("registration-app-id");var h=new De(u,r.name,n=n||"firebase"),f=new Pe(h),d=new v.Yd(Te);d.logLevel=v.in.ERROR;var p=new Re(i,c.SDK_VERSION,n,o,s,u),m=new Ce(p,h),g=new Se(m,h,f,d),y=new Ae(r,g,f,h,d);return function(e){var t=(0,l.m9)(e);t._initializePromise||(t._initializePromise=t._storageCache.loadFromStorage().then(function(){t._isInitializationComplete=!0}))}(y),y},"PUBLIC").setMultipleInstances(!0)),(0,c.registerVersion)(Te,"0.3.1"),(0,c.registerVersion)(Te,"0.3.1","esm2017");var Fe,Me="/firebase-messaging-sw.js",Ue="/firebase-cloud-messaging-push-scope",je="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Ve="google.c.a.c_id",qe="google.c.a.c_l",Be="google.c.a.ts",ze="google.c.a.e",Ze=((Fe=Ze||(Ze={})).PUSH_RECEIVED="push-received",Fe.NOTIFICATION_CLICKED="notification-clicked",Ze);function He(e){var t=new Uint8Array(e);return btoa(String.fromCharCode.apply(String,a(t))).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Ge(e){for(var t=(e+"=".repeat((4-e.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),n=atob(t),r=new Uint8Array(n.length),i=0;i<n.length;++i)r[i]=n.charCodeAt(i);return r}var Ke="fcm_token_details_db",We="fcm_token_object_Store";function Qe(e){return Ye.apply(this,arguments)}function Ye(){return(Ye=(0,u.Z)(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0="databases"in indexedDB,!e.t0){e.next=5;break}return e.next=4,indexedDB.databases();case 4:e.t0=!e.sent.map(function(e){return e.name}).includes(Ke);case 5:if(!e.t0){e.next=7;break}return e.abrupt("return",null);case 7:return n=null,e.next=10,(0,p.openDb)(Ke,5,function(){var e=(0,u.Z)(regeneratorRuntime.mark(function e(r){var i,a,o,s,u,c;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r.oldVersion<2)&&r.objectStoreNames.contains(We)){e.next=2;break}return e.abrupt("return");case 2:return a=r.transaction.objectStore(We),e.next=5,a.index("fcmSenderId").get(t);case 5:return o=e.sent,e.next=8,a.clear();case 8:if(!o){e.next=17;break}if(2!==r.oldVersion){e.next=16;break}if((s=o).auth&&s.p256dh&&s.endpoint){e.next=13;break}return e.abrupt("return");case 13:n={token:s.fcmToken,createTime:null!==(i=s.createTime)&&void 0!==i?i:Date.now(),subscriptionOptions:{auth:s.auth,p256dh:s.p256dh,endpoint:s.endpoint,swScope:s.swScope,vapidKey:"string"==typeof s.vapidKey?s.vapidKey:He(s.vapidKey)}},e.next=17;break;case 16:3===r.oldVersion?n={token:(u=o).fcmToken,createTime:u.createTime,subscriptionOptions:{auth:He(u.auth),p256dh:He(u.p256dh),endpoint:u.endpoint,swScope:u.swScope,vapidKey:He(u.vapidKey)}}:4===r.oldVersion&&(n={token:(c=o).fcmToken,createTime:c.createTime,subscriptionOptions:{auth:He(c.auth),p256dh:He(c.p256dh),endpoint:c.endpoint,swScope:c.swScope,vapidKey:He(c.vapidKey)}});case 17:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}());case 10:return e.sent.close(),e.next=13,(0,p.deleteDb)(Ke);case 13:return e.next=15,(0,p.deleteDb)("fcm_vapid_details_db");case 15:return e.next=17,(0,p.deleteDb)("undefined");case 17:return e.abrupt("return",Je(n)?n:null);case 18:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Je(e){if(!e||!e.subscriptionOptions)return!1;var t=e.subscriptionOptions;return"number"==typeof e.createTime&&e.createTime>0&&"string"==typeof e.token&&e.token.length>0&&"string"==typeof t.auth&&t.auth.length>0&&"string"==typeof t.p256dh&&t.p256dh.length>0&&"string"==typeof t.endpoint&&t.endpoint.length>0&&"string"==typeof t.swScope&&t.swScope.length>0&&"string"==typeof t.vapidKey&&t.vapidKey.length>0}var $e="firebase-messaging-store",Xe=null;function et(){return Xe||(Xe=(0,p.openDb)("firebase-messaging-database",1,function(e){switch(e.oldVersion){case 0:e.createObjectStore($e)}})),Xe}function tt(e){return nt.apply(this,arguments)}function nt(){return(nt=(0,u.Z)(regeneratorRuntime.mark(function e(t){var n,r,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=st(t),e.next=3,et();case 3:return e.next=5,e.sent.transaction($e).objectStore($e).get(n);case 5:if(!(r=e.sent)){e.next=8;break}return e.abrupt("return",r);case 8:return e.next=10,Qe(t.appConfig.senderId);case 10:if(!(i=e.sent)){e.next=15;break}return e.next=14,rt(t,i);case 14:return e.abrupt("return",i);case 15:case"end":return e.stop()}},e)}))).apply(this,arguments)}function rt(e,t){return it.apply(this,arguments)}function it(){return(it=(0,u.Z)(regeneratorRuntime.mark(function e(t,n){var r,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=st(t),e.next=3,et();case 3:return i=e.sent.transaction($e,"readwrite"),e.next=6,i.objectStore($e).put(n,r);case 6:return e.next=8,i.complete;case 8:return e.abrupt("return",n);case 9:case"end":return e.stop()}},e)}))).apply(this,arguments)}function at(e){return ot.apply(this,arguments)}function ot(){return(ot=(0,u.Z)(regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=st(t),e.next=3,et();case 3:return r=e.sent.transaction($e,"readwrite"),e.next=6,r.objectStore($e).delete(n);case 6:return e.next=8,r.complete;case 8:case"end":return e.stop()}},e)}))).apply(this,arguments)}function st(e){return e.appConfig.appId}var ut=new l.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function ct(e,t){return lt.apply(this,arguments)}function lt(){return(lt=(0,u.Z)(regeneratorRuntime.mark(function e(t,n){var r,i,a,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,mt(t);case 2:return r=e.sent,i=yt(n),a={method:"POST",headers:r,body:JSON.stringify(i)},e.prev=5,e.next=8,fetch(pt(t.appConfig),a);case 8:return e.next=10,e.sent.json();case 10:o=e.sent,e.next=16;break;case 13:throw e.prev=13,e.t0=e.catch(5),ut.create("token-subscribe-failed",{errorInfo:e.t0});case 16:if(!o.error){e.next=18;break}throw ut.create("token-subscribe-failed",{errorInfo:o.error.message});case 18:if(o.token){e.next=20;break}throw ut.create("token-subscribe-no-token");case 20:return e.abrupt("return",o.token);case 21:case"end":return e.stop()}},e,null,[[5,13]])}))).apply(this,arguments)}function ht(e,t){return ft.apply(this,arguments)}function ft(){return(ft=(0,u.Z)(regeneratorRuntime.mark(function e(t,n){var r,i,a,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,mt(t);case 2:return r=e.sent,i=yt(n.subscriptionOptions),a={method:"PATCH",headers:r,body:JSON.stringify(i)},e.prev=5,e.next=8,fetch("".concat(pt(t.appConfig),"/").concat(n.token),a);case 8:return e.next=10,e.sent.json();case 10:o=e.sent,e.next=16;break;case 13:throw e.prev=13,e.t0=e.catch(5),ut.create("token-update-failed",{errorInfo:e.t0});case 16:if(!o.error){e.next=18;break}throw ut.create("token-update-failed",{errorInfo:o.error.message});case 18:if(o.token){e.next=20;break}throw ut.create("token-update-no-token");case 20:return e.abrupt("return",o.token);case 21:case"end":return e.stop()}},e,null,[[5,13]])}))).apply(this,arguments)}function dt(e,t){return vt.apply(this,arguments)}function vt(){return(vt=(0,u.Z)(regeneratorRuntime.mark(function e(t,n){var r,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,mt(t);case 2:return e.t0=e.sent,r={method:"DELETE",headers:e.t0},e.prev=4,e.next=7,fetch("".concat(pt(t.appConfig),"/").concat(n),r);case 7:return e.next=9,e.sent.json();case 9:if(!(i=e.sent).error){e.next=12;break}throw ut.create("token-unsubscribe-failed",{errorInfo:i.error.message});case 12:e.next=17;break;case 14:throw e.prev=14,e.t1=e.catch(4),ut.create("token-unsubscribe-failed",{errorInfo:e.t1});case 17:case"end":return e.stop()}},e,null,[[4,14]])}))).apply(this,arguments)}function pt(e){var t=e.projectId;return"https://fcmregistrations.googleapis.com/v1/projects/".concat(t,"/registrations")}function mt(e){return gt.apply(this,arguments)}function gt(){return(gt=(0,u.Z)(regeneratorRuntime.mark(function e(t){var n,r,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.appConfig,r=t.installations,e.next=3,r.getToken();case 3:return i=e.sent,e.abrupt("return",new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n.apiKey,"x-goog-firebase-installations-auth":"FIS ".concat(i)}));case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}function yt(e){var t=e.p256dh,n=e.auth,r=e.endpoint,i=e.vapidKey,a={web:{endpoint:r,auth:n,p256dh:t}};return i!==je&&(a.web.applicationPubKey=i),a}var kt=6048e5;function wt(e){return bt.apply(this,arguments)}function bt(){return(bt=(0,u.Z)(regeneratorRuntime.mark(function e(t){var n,r,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Rt(t.swRegistration,t.vapidKey);case 2:return n=e.sent,r={vapidKey:t.vapidKey,swScope:t.swRegistration.scope,endpoint:n.endpoint,auth:He(n.getKey("auth")),p256dh:He(n.getKey("p256dh"))},e.next=6,tt(t.firebaseDependencies);case 6:if(!(i=e.sent)){e.next=19;break}if(!At(i.subscriptionOptions,r)){e.next=10;break}return e.abrupt("return",Date.now()>=i.createTime+kt?Tt(t,{token:i.token,createTime:Date.now(),subscriptionOptions:r}):i.token);case 10:return e.prev=10,e.next=13,dt(t.firebaseDependencies,i.token);case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(10),console.warn(e.t0);case 18:case 19:return e.abrupt("return",St(t.firebaseDependencies,r));case 20:case"end":return e.stop()}},e,null,[[10,15]])}))).apply(this,arguments)}function _t(e){return xt.apply(this,arguments)}function xt(){return(xt=(0,u.Z)(regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,tt(t.firebaseDependencies);case 2:if(n=e.sent,e.t0=n,!e.t0){e.next=9;break}return e.next=7,dt(t.firebaseDependencies,n.token);case 7:return e.next=9,at(t.firebaseDependencies);case 9:return e.next=11,t.swRegistration.pushManager.getSubscription();case 11:return r=e.sent,e.abrupt("return",!r||r.unsubscribe());case 13:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Tt(e,t){return It.apply(this,arguments)}function It(){return(It=(0,u.Z)(regeneratorRuntime.mark(function e(t,n){var r,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ht(t.firebaseDependencies,n);case 3:return r=e.sent,i=Object.assign(Object.assign({},n),{token:r,createTime:Date.now()}),e.next=7,rt(t.firebaseDependencies,i);case 7:return e.abrupt("return",r);case 10:return e.prev=10,e.t0=e.catch(0),e.next=14,_t(t);case 14:throw e.t0;case 15:case"end":return e.stop()}},e,null,[[0,10]])}))).apply(this,arguments)}function St(e,t){return Et.apply(this,arguments)}function Et(){return(Et=(0,u.Z)(regeneratorRuntime.mark(function e(t,n){var r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ct(t,n);case 2:return e.t0=e.sent,e.t1=Date.now(),e.t2=n,r={token:e.t0,createTime:e.t1,subscriptionOptions:e.t2},e.next=8,rt(t,r);case 8:return e.abrupt("return",r.token);case 9:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Rt(e,t){return Ct.apply(this,arguments)}function Ct(){return(Ct=(0,u.Z)(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.pushManager.getSubscription();case 2:if(e.t0=e.sent,e.t0){e.next=5;break}e.t0=t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Ge(n)});case 5:return e.abrupt("return",e.t0);case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}function At(e,t){return t.vapidKey===e.vapidKey&&t.endpoint===e.endpoint&&t.auth===e.auth&&t.p256dh===e.p256dh}function Nt(e){var t={from:e.from,collapseKey:e.collapse_key,messageId:e.fcm_message_id};return function(e,t){if(t.notification){e.notification={};var n=t.notification.title;n&&(e.notification.title=n);var r=t.notification.body;r&&(e.notification.body=r);var i=t.notification.image;i&&(e.notification.image=i)}}(t,e),function(e,t){!t.data||(e.data=t.data)}(t,e),function(e,t){if(t.fcmOptions){e.fcmOptions={};var n=t.fcmOptions.link;n&&(e.fcmOptions.link=n);var r=t.fcmOptions.analytics_label;r&&(e.fcmOptions.analyticsLabel=r)}}(t,e),t}function Ot(e){return"object"==typeof e&&!!e&&Ve in e}function Dt(e,t){for(var n=[],r=0;r<e.length;r++)n.push(e.charAt(r)),r<t.length&&n.push(t.charAt(r));return n.join("")}function Pt(e){return ut.create("missing-app-config-values",{valueName:e})}Dt("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Dt("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");var Lt=function(){function e(t,n,r){f(this,e),this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;var i=function(e){if(!e||!e.options)throw Pt("App Configuration Object");if(!e.name)throw Pt("App Name");for(var t=e.options,n=0,r=["projectId","apiKey","appId","messagingSenderId"];n<r.length;n++){var i=r[n];if(!t[i])throw Pt(i)}return{appName:e.name,projectId:t.projectId,apiKey:t.apiKey,appId:t.appId,senderId:t.messagingSenderId}}(t);this.firebaseDependencies={app:t,appConfig:i,installations:n,analyticsProvider:r}}return h(e,[{key:"_delete",value:function(){return Promise.resolve()}}]),e}();function Ft(e){return Mt.apply(this,arguments)}function Mt(){return(Mt=(0,u.Z)(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,navigator.serviceWorker.register(Me,{scope:Ue});case 3:t.swRegistration=e.sent,t.swRegistration.update().catch(function(){}),e.next=10;break;case 7:throw e.prev=7,e.t0=e.catch(0),ut.create("failed-service-worker-registration",{browserErrorMessage:e.t0.message});case 10:case"end":return e.stop()}},e,null,[[0,7]])}))).apply(this,arguments)}function Ut(e,t){return jt.apply(this,arguments)}function jt(){return(jt=(0,u.Z)(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=!n&&!t.swRegistration,!e.t0){e.next=4;break}return e.next=4,Ft(t);case 4:if(!n&&t.swRegistration){e.next=8;break}if(n instanceof ServiceWorkerRegistration){e.next=7;break}throw ut.create("invalid-sw-registration");case 7:t.swRegistration=n;case 8:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Vt(e,t){return qt.apply(this,arguments)}function qt(){return(qt=(0,u.Z)(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n?t.vapidKey=n:t.vapidKey||(t.vapidKey=je);case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Bt(){return(Bt=(0,u.Z)(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(navigator){e.next=2;break}throw ut.create("only-available-in-window");case 2:if(e.t0="default"===Notification.permission,!e.t0){e.next=6;break}return e.next=6,Notification.requestPermission();case 6:if("granted"===Notification.permission){e.next=8;break}throw ut.create("permission-blocked");case 8:return e.next=10,Vt(t,null==n?void 0:n.vapidKey);case 10:return e.next=12,Ut(t,null==n?void 0:n.serviceWorkerRegistration);case 12:return e.abrupt("return",wt(t));case 13:case"end":return e.stop()}},e)}))).apply(this,arguments)}function zt(e,t,n){return Zt.apply(this,arguments)}function Zt(){return(Zt=(0,u.Z)(regeneratorRuntime.mark(function e(t,n,r){var i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=Ht(n),e.next=3,t.firebaseDependencies.analyticsProvider.get();case 3:e.sent.logEvent(i,{message_id:r[Ve],message_name:r[qe],message_time:r[Be],message_device_time:Math.floor(Date.now()/1e3)});case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Ht(e){switch(e){case Ze.NOTIFICATION_CLICKED:return"notification_open";case Ze.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function Gt(){return(Gt=(0,u.Z)(regeneratorRuntime.mark(function e(t,n){var r,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if((r=n.data).isFirebaseMessaging){e.next=3;break}return e.abrupt("return");case 3:if(t.onMessageHandler&&r.messageType===Ze.PUSH_RECEIVED&&("function"==typeof t.onMessageHandler?t.onMessageHandler(Nt(r)):t.onMessageHandler.next(Nt(r))),i=r.data,e.t0=Ot(i)&&"1"===i[ze],!e.t0){e.next=9;break}return e.next=9,zt(t,r.messageType,i);case 9:case"end":return e.stop()}},e)}))).apply(this,arguments)}var Kt="@firebase/messaging";function Wt(){return(Wt=(0,u.Z)(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t7="undefined"!=typeof window&&(0,l.hl)(),!e.t7){e.next=5;break}return e.next=4,(0,l.eu)();case 4:e.t7=e.sent;case 5:if(e.t6=e.t7,!e.t6){e.next=8;break}e.t6=(0,l.zI)();case 8:if(e.t5=e.t6,!e.t5){e.next=11;break}e.t5="serviceWorker"in navigator;case 11:if(e.t4=e.t5,!e.t4){e.next=14;break}e.t4="PushManager"in window;case 14:if(e.t3=e.t4,!e.t3){e.next=17;break}e.t3="Notification"in window;case 17:if(e.t2=e.t3,!e.t2){e.next=20;break}e.t2="fetch"in window;case 20:if(e.t1=e.t2,!e.t1){e.next=23;break}e.t1=ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification");case 23:if(e.t0=e.t1,!e.t0){e.next=26;break}e.t0=PushSubscription.prototype.hasOwnProperty("getKey");case 26:return e.abrupt("return",e.t0);case 27:case"end":return e.stop()}},e)}))).apply(this,arguments)}(0,c._registerComponent)(new d.wA("messaging",function(e){var t=new Lt(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),e.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",function(e){return function(e,t){return Gt.apply(this,arguments)}(t,e)}),t},"PUBLIC")),(0,c._registerComponent)(new d.wA("messaging-internal",function(e){var t=e.getProvider("messaging").getImmediate();return{getToken:function(e){return function(e,t){return Bt.apply(this,arguments)}(t,e)}}},"PRIVATE")),(0,c.registerVersion)(Kt,"0.9.2"),(0,c.registerVersion)(Kt,"0.9.2","esm2017");var Qt="analytics",Yt="firebase_id",Jt="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",$t="https://www.googletagmanager.com/gtag/js",Xt=new v.Yd("@firebase/analytics");function en(e){return Promise.all(e.map(function(e){return e.catch(function(e){return e})}))}function tn(e,t){var n=document.createElement("script");n.src="".concat($t,"?l=").concat(e,"&id=").concat(t),n.async=!0,document.head.appendChild(n)}function nn(e,t,n,r,i,a){return rn.apply(this,arguments)}function rn(){return(rn=(0,u.Z)(regeneratorRuntime.mark(function e(t,n,r,i,a,o){var s,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(s=i[a],e.prev=1,!s){e.next=7;break}return e.next=5,n[s];case 5:e.next=14;break;case 7:return e.next=9,en(r);case 9:if(u=e.sent.find(function(e){return e.measurementId===a}),e.t0=u,!e.t0){e.next=14;break}return e.next=14,n[u.appId];case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(1),Xt.error(e.t1);case 19:t("config",a,o);case 20:case"end":return e.stop()}},e,null,[[1,16]])}))).apply(this,arguments)}function an(e,t,n,r,i){return on.apply(this,arguments)}function on(){return(on=(0,u.Z)(regeneratorRuntime.mark(function e(t,n,r,i,a){var o,u,c,l,h,f;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,o=[],!a||!a.send_to){e.next=26;break}return u=a.send_to,Array.isArray(u)||(u=[u]),e.next=7,en(r);case 7:c=e.sent,l=s(u),e.prev=9,f=function(){var e=h.value,t=c.find(function(t){return t.measurementId===e}),r=t&&n[t.appId];if(!r)return o=[],"break";o.push(r)},l.s();case 12:if((h=l.n()).done){e.next=18;break}if("break"!==f()){e.next=16;break}return e.abrupt("break",18);case 16:e.next=12;break;case 18:e.next=23;break;case 20:e.prev=20,e.t0=e.catch(9),l.e(e.t0);case 23:return e.prev=23,l.f(),e.finish(23);case 26:return 0===o.length&&(o=Object.values(n)),e.next=29,Promise.all(o);case 29:t("event",i,a||{}),e.next=35;break;case 32:e.prev=32,e.t1=e.catch(0),Xt.error(e.t1);case 35:case"end":return e.stop()}},e,null,[[0,32],[9,20,23,26]])}))).apply(this,arguments)}function sn(){for(var e=window.document.getElementsByTagName("script"),t=0,n=Object.values(e);t<n.length;t++){var r=n[t];if(r.src&&r.src.includes($t))return r}return null}var un=new l.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),cn=new(function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;f(this,e),this.throttleMetadata=t,this.intervalMillis=n}return h(e,[{key:"getThrottleMetadata",value:function(e){return this.throttleMetadata[e]}},{key:"setThrottleMetadata",value:function(e,t){this.throttleMetadata[e]=t}},{key:"deleteThrottleMetadata",value:function(e){delete this.throttleMetadata[e]}}]),e}());function ln(e){return new Headers({Accept:"application/json","x-goog-api-key":e})}function hn(e){return fn.apply(this,arguments)}function fn(){return(fn=(0,u.Z)(regeneratorRuntime.mark(function e(t){var n,r,i,a,o,s,u,c;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.appId,i=t.apiKey,a={method:"GET",headers:ln(i)},o=Jt.replace("{app-id}",r),e.next=6,fetch(o,a);case 6:if(200===(s=e.sent).status||304===s.status){e.next=19;break}return u="",e.prev=9,e.next=12,s.json();case 12:c=e.sent,(null===(n=c.error)||void 0===n?void 0:n.message)&&(u=c.error.message),e.next=18;break;case 16:e.prev=16,e.t0=e.catch(9);case 18:throw un.create("config-fetch-failed",{httpStatus:s.status,responseMessage:u});case 19:return e.abrupt("return",s.json());case 20:case"end":return e.stop()}},e,null,[[9,16]])}))).apply(this,arguments)}function dn(e){return vn.apply(this,arguments)}function vn(){return(vn=(0,u.Z)(regeneratorRuntime.mark(function e(t){var n,r,i,a,o,s,c,l,h=arguments;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=h.length>1&&void 0!==h[1]?h[1]:cn,r=h.length>2?h[2]:void 0,i=t.options,a=i.appId,o=i.apiKey,s=i.measurementId,a){e.next=5;break}throw un.create("no-app-id");case 5:if(o){e.next=9;break}if(!s){e.next=8;break}return e.abrupt("return",{measurementId:s,appId:a});case 8:throw un.create("no-api-key");case 9:return c=n.getThrottleMetadata(a)||{backoffCount:0,throttleEndTimeMillis:Date.now()},l=new kn,e.abrupt("return",(setTimeout((0,u.Z)(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:l.abort();case 1:case"end":return e.stop()}},e)})),void 0!==r?r:6e4),pn({appId:a,apiKey:o,measurementId:s},c,l,n)));case 11:case"end":return e.stop()}},e)}))).apply(this,arguments)}function pn(e,t,n){return mn.apply(this,arguments)}function mn(){return(mn=(0,u.Z)(regeneratorRuntime.mark(function e(t,n,r){var i,a,o,s,u,c,h,f,d=arguments;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=n.throttleEndTimeMillis,a=n.backoffCount,o=d.length>3&&void 0!==d[3]?d[3]:cn,s=t.appId,u=t.measurementId,e.prev=3,e.next=6,gn(r,i);case 6:e.next=13;break;case 8:if(e.prev=8,e.t0=e.catch(3),!u){e.next=12;break}return e.abrupt("return",(Xt.warn("Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ".concat(u,' provided in the "measurementId" field in the local Firebase config. [').concat(e.t0.message,"]")),{appId:s,measurementId:u}));case 12:throw e.t0;case 13:return e.prev=13,e.next=16,hn(t);case 16:return c=e.sent,e.abrupt("return",(o.deleteThrottleMetadata(s),c));case 20:if(e.prev=20,e.t1=e.catch(13),yn(e.t1)){e.next=26;break}if(o.deleteThrottleMetadata(s),!u){e.next=25;break}return e.abrupt("return",(Xt.warn("Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ".concat(u,' provided in the "measurementId" field in the local Firebase config. [').concat(e.t1.message,"]")),{appId:s,measurementId:u}));case 25:throw e.t1;case 26:return h=503===Number(e.t1.customData.httpStatus)?(0,l.$s)(a,o.intervalMillis,30):(0,l.$s)(a,o.intervalMillis),f={throttleEndTimeMillis:Date.now()+h,backoffCount:a+1},e.abrupt("return",(o.setThrottleMetadata(s,f),Xt.debug("Calling attemptFetch again in ".concat(h," millis")),pn(t,f,r,o)));case 28:case"end":return e.stop()}},e,null,[[3,8],[13,20]])}))).apply(this,arguments)}function gn(e,t){return new Promise(function(n,r){var i=Math.max(t-Date.now(),0),a=setTimeout(n,i);e.addEventListener(function(){clearTimeout(a),r(un.create("fetch-throttle",{throttleEndTimeMillis:t}))})})}function yn(e){if(!(e instanceof l.ZR&&e.customData))return!1;var t=Number(e.customData.httpStatus);return 429===t||500===t||503===t||504===t}var kn=function(){function e(){f(this,e),this.listeners=[]}return h(e,[{key:"addEventListener",value:function(e){this.listeners.push(e)}},{key:"abort",value:function(){this.listeners.forEach(function(e){return e()})}}]),e}();function wn(){return bn.apply(this,arguments)}function bn(){return(bn=(0,u.Z)(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if((0,l.hl)()){e.next=2;break}return e.abrupt("return",(Xt.warn(un.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1));case 2:return e.prev=2,e.next=5,(0,l.eu)();case 5:e.next=10;break;case 7:return e.prev=7,e.t0=e.catch(2),e.abrupt("return",(Xt.warn(un.create("indexeddb-unavailable",{errorInfo:e.t0}).message),!1));case 10:return e.abrupt("return",!0);case 11:case"end":return e.stop()}},e,null,[[2,7]])}))).apply(this,arguments)}function _n(){return(_n=(0,u.Z)(regeneratorRuntime.mark(function e(n,r,i,a,o,s,u){var c,l,h,f,d,v,p,m;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(l=dn(n)).then(function(e){i[e.measurementId]=e.appId,n.options.measurementId&&e.measurementId!==n.options.measurementId&&Xt.warn("The measurement ID in the local Firebase config (".concat(n.options.measurementId,") does not match the measurement ID fetched from the server (").concat(e.measurementId,"). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config."))}).catch(function(e){return Xt.error(e)}),r.push(l),h=wn().then(function(e){if(e)return a.getId()}),e.next=5,Promise.all([l,h]);case 5:return f=e.sent,d=t(f,2),v=d[0],p=d[1],sn()||tn(s,v.measurementId),o("js",new Date),m=null!==(c=null==u?void 0:u.config)&&void 0!==c?c:{},e.abrupt("return",(m.origin="firebase",m.update=!0,null!=p&&(m[Yt]=p),o("config",v.measurementId,m),v.measurementId));case 12:case"end":return e.stop()}},e)}))).apply(this,arguments)}var xn,Tn,In=function(){function e(t){f(this,e),this.app=t}return h(e,[{key:"_delete",value:function(){return delete Sn[this.app.options.appId],Promise.resolve()}}]),e}(),Sn={},En=[],Rn={},Cn="dataLayer",An=!1;function Nn(){return(Nn=(0,u.Z)(regeneratorRuntime.mark(function e(t,n,r,i,a){var o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!a||!a.global){e.next=4;break}t("event",r,i),e.next=8;break;case 4:return e.next=6,n;case 6:o=e.sent,t("event",r,Object.assign(Object.assign({},i),{send_to:o}));case 8:case"end":return e.stop()}},e)}))).apply(this,arguments)}function On(){return(On=(0,u.Z)(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(0,l.ru)()&&(0,l.zI)()&&(0,l.hl)()){e.next=2;break}return e.abrupt("return",!1);case 2:return e.prev=2,e.next=5,(0,l.eu)();case 5:return e.abrupt("return",e.sent);case 8:return e.prev=8,e.t0=e.catch(2),e.abrupt("return",!1);case 11:case"end":return e.stop()}},e,null,[[2,8]])}))).apply(this,arguments)}var Dn="@firebase/analytics";(0,c._registerComponent)(new d.wA(Qt,function(e,t){var n=t.options;return function(e,t,n){!function(){var e=[];if((0,l.ru)()&&e.push("This is a browser extension environment."),(0,l.zI)()||e.push("Cookies are not available."),e.length>0){var t=e.map(function(e,t){return"(".concat(t+1,") ").concat(e)}).join(" "),n=un.create("invalid-analytics-context",{errorInfo:t});Xt.warn(n.message)}}();var r=e.options.appId;if(!r)throw un.create("no-app-id");if(!e.options.apiKey){if(!e.options.measurementId)throw un.create("no-api-key");Xt.warn('The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID '.concat(e.options.measurementId,' provided in the "measurementId" field in the local Firebase config.'))}if(null!=Sn[r])throw un.create("already-exists",{id:r});if(!An){!function(e){var t=[];Array.isArray(window[e])?t=window[e]:window[e]=t}(Cn);var i=function(e,t,n,r,i){var a=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];window[r].push(arguments)};return window[i]&&"function"==typeof window[i]&&(a=window[i]),window[i]=function(e,t,n,r){function i(){return(i=(0,u.Z)(regeneratorRuntime.mark(function i(a,o,s){return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(i.prev=0,"event"!==a){i.next=6;break}return i.next=4,an(e,t,n,o,s);case 4:i.next=12;break;case 6:if("config"!==a){i.next=11;break}return i.next=9,nn(e,t,n,r,o,s);case 9:i.next=12;break;case 11:e("set",o);case 12:i.next=17;break;case 14:i.prev=14,i.t0=i.catch(0),Xt.error(i.t0);case 17:case"end":return i.stop()}},i,null,[[0,14]])}))).apply(this,arguments)}return function(e,t,n){return i.apply(this,arguments)}}(a,e,t,n),{gtagCore:a,wrappedGtag:window[i]}}(Sn,En,Rn,Cn,"gtag"),a=i.wrappedGtag,o=i.gtagCore;Tn=a,xn=o,An=!0}return Sn[r]=function(e,t,n,r,i,a,o){return _n.apply(this,arguments)}(e,En,Rn,t,xn,Cn,n),new In(e)}(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),n)},"PUBLIC")),(0,c._registerComponent)(new d.wA("analytics-internal",function(e){try{var t=e.getProvider(Qt).getImmediate();return{logEvent:function(e,n,r){return function(e,t,n,r){e=(0,l.m9)(e),function(e,t,n,r,i){return Nn.apply(this,arguments)}(Tn,Sn[e.app.options.appId],t,n,r).catch(function(e){return Xt.error(e)})}(t,e,n,r)}}}catch(t){throw un.create("interop-component-reg-failed",{reason:t})}},"PRIVATE")),(0,c.registerVersion)(Dn,"0.7.2"),(0,c.registerVersion)(Dn,"0.7.2","esm2017");var Pn=r(7771),Ln=r(3637),Fn=r(3342),Mn=r(3101),Un=r(309),jn=new i.GfV("7.1.1"),Vn="__angularfire_symbol__analyticsIsSupported",qn="__angularfire_symbol__remoteConfigIsSupported",Bn="__angularfire_symbol__messagingIsSupported";function zn(e,t,n){if(t){if(1===t.length)return t[0];var r=t.filter(function(e){return e.app===n});if(1===r.length)return r[0]}return n.container.getProvider(e).getImmediate({optional:!0})}globalThis[Vn]||(globalThis[Vn]=function(){return On.apply(this,arguments)}().then(function(e){return globalThis.__angularfire_symbol__analyticsIsSupportedValue=e})),globalThis[Bn]||(globalThis[Bn]=function(){return Wt.apply(this,arguments)}().then(function(e){return globalThis.__angularfire_symbol__messagingIsSupportedValue=e})),globalThis[qn]||(globalThis[qn]=function(){return Le.apply(this,arguments)}().then(function(e){return globalThis.__angularfire_symbol__remoteConfigIsSupportedValue=e}));var Zn=function(e,t){var n=t?[t]:(0,o.C6)(),r=[];return n.forEach(function(t){t.container.getProvider(e).instances.forEach(function(e){r.includes(e)||r.push(e)})}),r};function Hn(){}var Gn=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Pn.N;f(this,e),this.zone=t,this.delegate=n}return h(e,[{key:"now",value:function(){return this.delegate.now()}},{key:"schedule",value:function(e,t,n){var r=this.zone;return this.delegate.schedule(function(t){var n=this;r.runGuarded(function(){e.apply(n,[t])})},t,n)}}]),e}(),Kn=function(){function e(t){f(this,e),this.zone=t,this.task=null}return h(e,[{key:"call",value:function(e,t){var n=this.unscheduleTask.bind(this);return this.task=this.zone.run(function(){return Zone.current.scheduleMacroTask("firebaseZoneBlock",Hn,{},Hn,Hn)}),t.pipe((0,Fn.b)({next:n,complete:n,error:n})).subscribe(e).add(n)}},{key:"unscheduleTask",value:function(){var e=this;setTimeout(function(){null!=e.task&&"scheduled"===e.task.state&&(e.task.invoke(),e.task=null)},10)}}]),e}(),Wn=function(){var e=function e(t){f(this,e),this.ngZone=t,this.outsideAngular=t.runOutsideAngular(function(){return new Gn(Zone.current)}),this.insideAngular=t.run(function(){return new Gn(Zone.current,Ln.z)}),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)};return e.\u0275fac=function(t){return new(t||e)(i.LFG(i.R0b))},e.\u0275prov=i.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e}();function Qn(){var e=globalThis.\u0275AngularFireScheduler;if(!e)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return e}function Yn(e){return Qn(),function(e){return function(t){return(t=t.lift(new Kn(e.ngZone))).pipe((0,Mn.R)(e.outsideAngular),(0,Un.QV)(e.insideAngular))}}(Qn())(e)}},4486:function(e,t,n){"use strict";n.d(t,{Z:function(){return v}});var r=n(3854),i=n(6034),a=n(5452),o=n(5601),s=function(){function e(t,n){var r=this;f(this,e),this._delegate=t,this.firebase=n,(0,a._addComponent)(t,new i.wA("app-compat",function(){return r},"PUBLIC")),this.container=t.container}return h(e,[{key:"automaticDataCollectionEnabled",get:function(){return this._delegate.automaticDataCollectionEnabled},set:function(e){this._delegate.automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this._delegate.name}},{key:"options",get:function(){return this._delegate.options}},{key:"delete",value:function(){var e=this;return new Promise(function(t){e._delegate.checkDestroyed(),t()}).then(function(){return e.firebase.INTERNAL.removeApp(e.name),(0,a.deleteApp)(e._delegate)})}},{key:"_getService",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a._DEFAULT_ENTRY_NAME;this._delegate.checkDestroyed();var r=this._delegate.container.getProvider(e);return!r.isInitialized()&&"EXPLICIT"===(null===(t=r.getComponent())||void 0===t?void 0:t.instantiationMode)&&r.initialize(),r.getImmediate({identifier:n})}},{key:"_removeServiceInstance",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a._DEFAULT_ENTRY_NAME;this._delegate.container.getProvider(e).clearInstance(t)}},{key:"_addComponent",value:function(e){(0,a._addComponent)(this._delegate,e)}},{key:"_addOrOverwriteComponent",value:function(e){(0,a._addOrOverwriteComponent)(this._delegate,e)}},{key:"toJSON",value:function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}]),e}(),u=new r.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),c=function e(){var t=function(e){var t={},n={__esModule:!0,initializeApp:function(i){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=a.initializeApp(i,o);if((0,r.r3)(t,s.name))return t[s.name];var u=new e(s,n);return t[s.name]=u,u},app:i,registerVersion:a.registerVersion,setLogLevel:a.setLogLevel,onLog:a.onLog,apps:null,SDK_VERSION:a.SDK_VERSION,INTERNAL:{registerComponent:function(t){var o=t.name,s=o.replace("-compat","");if(a._registerComponent(t)&&"PUBLIC"===t.type){var c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i();if("function"!=typeof e[s])throw u.create("invalid-app-argument",{appName:o});return e[s]()};void 0!==t.serviceProps&&(0,r.ZB)(c,t.serviceProps),n[s]=c,e.prototype[s]=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return this._getService.bind(this,o).apply(this,t.multipleInstances?n:[])}}return"PUBLIC"===t.type?n[s]:null},removeApp:function(e){delete t[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:a}};function i(e){if(!(0,r.r3)(t,e=e||a._DEFAULT_ENTRY_NAME))throw u.create("no-app",{appName:e});return t[e]}return n.default=n,Object.defineProperty(n,"apps",{get:function(){return Object.keys(t).map(function(e){return t[e]})}}),i.App=e,n}(s);return t.INTERNAL=Object.assign(Object.assign({},t.INTERNAL),{createFirebaseNamespace:e,extendNamespace:function(e){(0,r.ZB)(t,e)},createSubscribe:r.ne,ErrorFactory:r.LL,deepExtend:r.ZB}),t}(),l=new o.Yd("@firebase/app-compat");if((0,r.jU)()&&void 0!==self.firebase){l.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var d=self.firebase.SDK_VERSION;d&&d.indexOf("LITE")>=0&&l.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var v=c;(0,a.registerVersion)("@firebase/app-compat","0.1.5",void 0)},5452:function(t,n,r){"use strict";var i;r.r(n),r.d(n,{FirebaseError:function(){return c.ZR},SDK_VERSION:function(){return E},_DEFAULT_ENTRY_NAME:function(){return p},_addComponent:function(){return k},_addOrOverwriteComponent:function(){return w},_apps:function(){return g},_clearComponents:function(){return T},_components:function(){return y},_getProvider:function(){return _},_registerComponent:function(){return b},_removeServiceInstance:function(){return x},deleteApp:function(){return N},getApp:function(){return C},getApps:function(){return A},initializeApp:function(){return R},onLog:function(){return P},registerVersion:function(){return D},setLogLevel:function(){return L}});var a=r(8239),o=r(6034),u=r(5601),c=r(3854),l=function(){function e(t){f(this,e),this.container=t}return h(e,[{key:"getPlatformInfoString",value:function(){return this.container.getProviders().map(function(e){if("VERSION"===(null==(n=e.getComponent())?void 0:n.type)){var t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}var n;return null}).filter(function(e){return e}).join(" ")}}]),e}(),d="@firebase/app",v=new u.Yd("@firebase/app"),p="[DEFAULT]",m=(e(i={},d,"fire-core"),e(i,"@firebase/app-compat","fire-core-compat"),e(i,"@firebase/analytics","fire-analytics"),e(i,"@firebase/analytics-compat","fire-analytics-compat"),e(i,"@firebase/app-check","fire-app-check"),e(i,"@firebase/app-check-compat","fire-app-check-compat"),e(i,"@firebase/auth","fire-auth"),e(i,"@firebase/auth-compat","fire-auth-compat"),e(i,"@firebase/database","fire-rtdb"),e(i,"@firebase/database-compat","fire-rtdb-compat"),e(i,"@firebase/functions","fire-fn"),e(i,"@firebase/functions-compat","fire-fn-compat"),e(i,"@firebase/installations","fire-iid"),e(i,"@firebase/installations-compat","fire-iid-compat"),e(i,"@firebase/messaging","fire-fcm"),e(i,"@firebase/messaging-compat","fire-fcm-compat"),e(i,"@firebase/performance","fire-perf"),e(i,"@firebase/performance-compat","fire-perf-compat"),e(i,"@firebase/remote-config","fire-rc"),e(i,"@firebase/remote-config-compat","fire-rc-compat"),e(i,"@firebase/storage","fire-gcs"),e(i,"@firebase/storage-compat","fire-gcs-compat"),e(i,"@firebase/firestore","fire-fst"),e(i,"@firebase/firestore-compat","fire-fst-compat"),e(i,"fire-js","fire-js"),e(i,"firebase","fire-js-all"),i),g=new Map,y=new Map;function k(e,t){try{e.container.addComponent(t)}catch(n){v.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function w(e,t){e.container.addOrOverwriteComponent(t)}function b(e){var t=e.name;if(y.has(t))return v.debug("There were multiple attempts to register component ".concat(t,".")),!1;y.set(t,e);var n,r=s(g.values());try{for(r.s();!(n=r.n()).done;){k(n.value,e)}}catch(i){r.e(i)}finally{r.f()}return!0}function _(e,t){return e.container.getProvider(t)}function x(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:p;_(e,t).clearInstance(n)}function T(){y.clear()}var I=new c.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function."}),S=function(){function e(t,n,r){var i=this;f(this,e),this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new o.wA("app",function(){return i},"PUBLIC"))}return h(e,[{key:"automaticDataCollectionEnabled",get:function(){return this.checkDestroyed(),this._automaticDataCollectionEnabled},set:function(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this.checkDestroyed(),this._name}},{key:"options",get:function(){return this.checkDestroyed(),this._options}},{key:"config",get:function(){return this.checkDestroyed(),this._config}},{key:"container",get:function(){return this._container}},{key:"isDeleted",get:function(){return this._isDeleted},set:function(e){this._isDeleted=e}},{key:"checkDestroyed",value:function(){if(this.isDeleted)throw I.create("app-deleted",{appName:this._name})}}]),e}(),E="9.1.3";function R(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};"object"!=typeof t&&(t={name:t});var n=Object.assign({name:p,automaticDataCollectionEnabled:!1},t),r=n.name;if("string"!=typeof r||!r)throw I.create("bad-app-name",{appName:String(r)});var i=g.get(r);if(i){if((0,c.vZ)(e,i.options)&&(0,c.vZ)(n,i.config))return i;throw I.create("duplicate-app",{appName:r})}var a,u=new o.H0(r),l=s(y.values());try{for(l.s();!(a=l.n()).done;){var h=a.value;u.addComponent(h)}}catch(d){l.e(d)}finally{l.f()}var f=new S(e,n,u);return g.set(r,f),f}function C(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,t=g.get(e);if(!t)throw I.create("no-app",{appName:e});return t}function A(){return Array.from(g.values())}function N(e){return O.apply(this,arguments)}function O(){return(O=(0,a.Z)(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.name,e.t0=g.has(n),!e.t0){e.next=7;break}return g.delete(n),e.next=6,Promise.all(t.container.getProviders().map(function(e){return e.delete()}));case 6:t.isDeleted=!0;case 7:case"end":return e.stop()}},e)}))).apply(this,arguments)}function D(e,t,n){var r,i=null!==(r=m[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));var a=i.match(/\s|\//),s=t.match(/\s|\//);if(a||s){var u=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return a&&u.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),a&&s&&u.push("and"),s&&u.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void v.warn(u.join(" "))}b(new o.wA("".concat(i,"-version"),function(){return{library:i,version:t}},"VERSION"))}function P(e,t){if(null!==e&&"function"!=typeof e)throw I.create("invalid-log-argument");(0,u.Am)(e,t)}function L(e){(0,u.Ub)(e)}b(new o.wA("platform-logger",function(e){return new l(e)},"PRIVATE")),D(d,"0.7.4",""),D(d,"0.7.4","esm2017"),D("fire-js","")},6034:function(e,t,n){"use strict";n.d(t,{wA:function(){return a},H0:function(){return c}});var r=n(4762),i=n(3854),a=function(){function e(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return e.prototype.setInstantiationMode=function(e){return this.instantiationMode=e,this},e.prototype.setMultipleInstances=function(e){return this.multipleInstances=e,this},e.prototype.setServiceProps=function(e){return this.serviceProps=e,this},e.prototype.setInstanceCreatedCallback=function(e){return this.onInstanceCreated=e,this},e}(),o="[DEFAULT]",s=function(){function e(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return e.prototype.get=function(e){var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new i.BH;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch(a){}}return this.instancesDeferred.get(t).promise},e.prototype.getImmediate=function(e){var t,n=this.normalizeInstanceIdentifier(null==e?void 0:e.identifier),r=null!==(t=null==e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service "+this.name+" is not available")}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}},e.prototype.getComponent=function(){return this.component},e.prototype.setComponent=function(e){var t,n;if(e.name!==this.name)throw Error("Mismatching Component "+e.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:o})}catch(h){}try{for(var i=(0,r.XA)(this.instancesDeferred.entries()),a=i.next();!a.done;a=i.next()){var s=(0,r.CR)(a.value,2),u=s[1],c=this.normalizeInstanceIdentifier(s[0]);try{var l=this.getOrInitializeService({instanceIdentifier:c});u.resolve(l)}catch(h){}}}catch(h){t={error:h}}finally{try{a&&!a.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}}},e.prototype.clearInstance=function(e){void 0===e&&(e=o),this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)},e.prototype.delete=function(){return(0,r.mG)(this,void 0,void 0,function(){var e;return(0,r.Jh)(this,function(t){switch(t.label){case 0:return e=Array.from(this.instances.values()),[4,Promise.all((0,r.ev)((0,r.ev)([],(0,r.CR)(e.filter(function(e){return"INTERNAL"in e}).map(function(e){return e.INTERNAL.delete()}))),(0,r.CR)(e.filter(function(e){return"_delete"in e}).map(function(e){return e._delete()}))))];case 1:return t.sent(),[2]}})})},e.prototype.isComponentSet=function(){return null!=this.component},e.prototype.isInitialized=function(e){return void 0===e&&(e=o),this.instances.has(e)},e.prototype.getOptions=function(e){return void 0===e&&(e=o),this.instancesOptions.get(e)||{}},e.prototype.initialize=function(e){var t,n;void 0===e&&(e={});var i=e.options,a=void 0===i?{}:i,o=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(o))throw Error(this.name+"("+o+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");var s=this.getOrInitializeService({instanceIdentifier:o,options:a});try{for(var u=(0,r.XA)(this.instancesDeferred.entries()),c=u.next();!c.done;c=u.next()){var l=(0,r.CR)(c.value,2),h=l[1];o===this.normalizeInstanceIdentifier(l[0])&&h.resolve(s)}}catch(f){t={error:f}}finally{try{c&&!c.done&&(n=u.return)&&n.call(u)}finally{if(t)throw t.error}}return s},e.prototype.onInit=function(e,t){var n,r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);var a=this.instances.get(r);return a&&e(a,r),function(){i.delete(e)}},e.prototype.invokeOnInitCallbacks=function(e,t){var n,i,a=this.onInitCallbacks.get(t);if(a)try{for(var o=(0,r.XA)(a),s=o.next();!s.done;s=o.next()){var u=s.value;try{u(e,t)}catch(c){}}}catch(c){n={error:c}}finally{try{s&&!s.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}},e.prototype.getOrInitializeService=function(e){var t=e.instanceIdentifier,n=e.options,r=void 0===n?{}:n,i=this.instances.get(t);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:u(t),options:r}),this.instances.set(t,i),this.instancesOptions.set(t,r),this.invokeOnInitCallbacks(i,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,i)}catch(a){}return i||null},e.prototype.normalizeInstanceIdentifier=function(e){return void 0===e&&(e=o),this.component?this.component.multipleInstances?e:o:e},e.prototype.shouldAutoInitialize=function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode},e}();function u(e){return e===o?void 0:e}var c=function(){function e(e){this.name=e,this.providers=new Map}return e.prototype.addComponent=function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component "+e.name+" has already been registered with "+this.name);t.setComponent(e)},e.prototype.addOrOverwriteComponent=function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)},e.prototype.getProvider=function(e){if(this.providers.has(e))return this.providers.get(e);var t=new s(e,this);return this.providers.set(e,t),t},e.prototype.getProviders=function(){return Array.from(this.providers.values())},e}()},5601:function(t,n,r){"use strict";var i;r.d(n,{in:function(){return u},Yd:function(){return p},Ub:function(){return m},Am:function(){return g}});var a,o=[],u=((a=u||(u={}))[a.DEBUG=0]="DEBUG",a[a.VERBOSE=1]="VERBOSE",a[a.INFO=2]="INFO",a[a.WARN=3]="WARN",a[a.ERROR=4]="ERROR",a[a.SILENT=5]="SILENT",u),c={debug:u.DEBUG,verbose:u.VERBOSE,info:u.INFO,warn:u.WARN,error:u.ERROR,silent:u.SILENT},l=u.INFO,d=(e(i={},u.DEBUG,"log"),e(i,u.VERBOSE,"log"),e(i,u.INFO,"info"),e(i,u.WARN,"warn"),e(i,u.ERROR,"error"),i),v=function(e,t){var n;if(!(t<e.logLevel)){var r=(new Date).toISOString(),i=d[t];if(!i)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var a=arguments.length,o=new Array(a>2?a-2:0),s=2;s<a;s++)o[s-2]=arguments[s];(n=console)[i].apply(n,["[".concat(r,"]  ").concat(e.name,":")].concat(o))}},p=function(){function e(t){f(this,e),this.name=t,this._logLevel=l,this._logHandler=v,this._userLogHandler=null,o.push(this)}return h(e,[{key:"logLevel",get:function(){return this._logLevel},set:function(e){if(!(e in u))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}},{key:"setLogLevel",value:function(e){this._logLevel="string"==typeof e?c[e]:e}},{key:"logHandler",get:function(){return this._logHandler},set:function(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}},{key:"userLogHandler",get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e}},{key:"debug",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,u.DEBUG].concat(t)),this._logHandler.apply(this,[this,u.DEBUG].concat(t))}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,u.VERBOSE].concat(t)),this._logHandler.apply(this,[this,u.VERBOSE].concat(t))}},{key:"info",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,u.INFO].concat(t)),this._logHandler.apply(this,[this,u.INFO].concat(t))}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,u.WARN].concat(t)),this._logHandler.apply(this,[this,u.WARN].concat(t))}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,u.ERROR].concat(t)),this._logHandler.apply(this,[this,u.ERROR].concat(t))}}]),e}();function m(e){o.forEach(function(t){t.setLogLevel(e)})}function g(e,t){var n,r=s(o);try{var i=function(){var r=n.value,i=null;t&&t.level&&(i=c[t.level]),r.userLogHandler=null===e?null:function(t,n){for(var r=arguments.length,a=new Array(r>2?r-2:0),o=2;o<r;o++)a[o-2]=arguments[o];var s=a.map(function(e){if(null==e)return null;if("string"==typeof e)return e;if("number"==typeof e||"boolean"==typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}}).filter(function(e){return e}).join(" ");n>=(null!=i?i:t.logLevel)&&e({level:u[n].toLowerCase(),message:s,args:a,type:t.name})}};for(r.s();!(n=r.n()).done;)i()}catch(a){r.e(a)}finally{r.f()}}},3854:function(e,n,r){"use strict";r.d(n,{BH:function(){return l},LL:function(){return O},ZR:function(){return N},zI:function(){return A},US:function(){return a},tV:function(){return s},$s:function(){return Z},r3:function(){return P},Sg:function(){return p},ne:function(){return q},vZ:function(){return F},ZB:function(){return u},pd:function(){return V},m9:function(){return H},z$:function(){return y},jU:function(){return b},ru:function(){return _},d:function(){return T},xb:function(){return L},w1:function(){return I},hl:function(){return R},uI:function(){return k},UG:function(){return w},b$:function(){return x},G6:function(){return E},Mn:function(){return S},xO:function(){return U},zd:function(){return j},eu:function(){return C}});var i=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296==(64512&i)&&r+1<e.length&&56320==(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},a={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var a=e[i],o=i+1<e.length,s=o?e[i+1]:0,u=i+2<e.length,c=u?e[i+2]:0,l=(15&s)<<2|c>>6,h=63&c;u||(h=64,o||(l=64)),r.push(n[a>>2],n[(3&a)<<4|s>>4],n[l],n[h])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(i(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var a=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&a)}else if(i>239&&i<365){var o=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{var s=e[n++],u=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&u)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var a=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0,s=++i<e.length?n[e.charAt(i)]:64,u=++i<e.length?n[e.charAt(i)]:64;if(++i,null==a||null==o||null==s||null==u)throw Error();r.push(a<<2|o>>4),64!==s&&(r.push(o<<4&240|s>>2),64!==u&&r.push(s<<6&192|u))}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},o=function(e){return function(e){var t=i(e);return a.encodeByteArray(t,!0)}(e).replace(/\./g,"")},s=function(e){try{return a.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function u(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)!t.hasOwnProperty(n)||!c(n)||(e[n]=u(e[n],t[n]));return e}function c(e){return"__proto__"!==e}var l=function(){function e(){var t=this;f(this,e),this.reject=function(){},this.resolve=function(){},this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})}return h(e,[{key:"wrapCallback",value:function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"==typeof e&&(t.promise.catch(function(){}),1===e.length?e(n):e(n,r))}}}]),e}();function p(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var a=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[o(JSON.stringify({alg:"none",type:"JWT"})),o(JSON.stringify(a)),""].join(".")}function y(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function k(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(y())}function w(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(e){return!1}}function b(){return"object"==typeof self&&self.self===self}function _(){var e="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof e&&void 0!==e.id}function x(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function T(){return y().indexOf("Electron/")>=0}function I(){var e=y();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function S(){return y().indexOf("MSAppHost/")>=0}function E(){return!w()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function R(){return"object"==typeof indexedDB}function C(){return new Promise(function(e,t){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(n){t(n)}})}function A(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}var N=function(e){d(n,e);var t=v(n);function n(e,r,i){var a;return f(this,n),(a=t.call(this,r)).code=e,a.customData=i,a.name="FirebaseError",Object.setPrototypeOf(m(a),n.prototype),Error.captureStackTrace&&Error.captureStackTrace(m(a),O.prototype.create),a}return n}(g(Error)),O=function(){function e(t,n,r){f(this,e),this.service=t,this.serviceName=n,this.errors=r}return h(e,[{key:"create",value:function(e){var t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?function(e,t){return e.replace(D,function(e,n){var r=t[n];return null!=r?String(r):"<".concat(n,"?>")})}(r,t):"Error";return new N(n,"".concat(this.serviceName,": ").concat(i," (").concat(n,")."),t)}}]),e}(),D=/\{\$([^}]+)}/g;function P(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function L(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function F(e,t){if(e===t)return!0;for(var n=Object.keys(e),r=Object.keys(t),i=0,a=n;i<a.length;i++){var o=a[i];if(!r.includes(o))return!1;var s=e[o],u=t[o];if(M(s)&&M(u)){if(!F(s,u))return!1}else if(s!==u)return!1}for(var c=0,l=r;c<l.length;c++){var h=l[c];if(!n.includes(h))return!1}return!0}function M(e){return null!==e&&"object"==typeof e}function U(e){for(var n=[],r=function(){var e=t(a[i],2),r=e[0],o=e[1];Array.isArray(o)?o.forEach(function(e){n.push(encodeURIComponent(r)+"="+encodeURIComponent(e))}):n.push(encodeURIComponent(r)+"="+encodeURIComponent(o))},i=0,a=Object.entries(e);i<a.length;i++)r();return n.length?"&"+n.join("&"):""}function j(e){var n={};return e.replace(/^\?/,"").split("&").forEach(function(e){if(e){var r=t(e.split("="),2),i=r[0],a=r[1];n[decodeURIComponent(i)]=decodeURIComponent(a)}}),n}function V(e){var t=e.indexOf("?");if(!t)return"";var n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}function q(e,t){var n=new B(e,t);return n.subscribe.bind(n)}var B=function(){function e(t,n){var r=this;f(this,e),this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(function(){t(r)}).catch(function(e){r.error(e)})}return h(e,[{key:"next",value:function(e){this.forEachObserver(function(t){t.next(e)})}},{key:"error",value:function(e){this.forEachObserver(function(t){t.error(e)}),this.close(e)}},{key:"complete",value:function(){this.forEachObserver(function(e){e.complete()}),this.close()}},{key:"subscribe",value:function(e,t,n){var r,i=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(e,t){if("object"!=typeof e||null===e)return!1;for(var n=0,r=["next","error","complete"];n<r.length;n++){var i=r[n];if(i in e&&"function"==typeof e[i])return!0}return!1}(e)?e:{next:e,error:t,complete:n}).next&&(r.next=z),void 0===r.error&&(r.error=z),void 0===r.complete&&(r.complete=z);var a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(e){}}),this.observers.push(r),a}},{key:"unsubscribeOne",value:function(e){void 0===this.observers||void 0===this.observers[e]||(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}},{key:"forEachObserver",value:function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)}},{key:"sendOne",value:function(e,t){var n=this;this.task.then(function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(r){"undefined"!=typeof console&&console.error&&console.error(r)}})}},{key:"close",value:function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(function(){t.observers=void 0,t.onNoObservers=void 0}))}}]),e}();function z(){}function Z(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2,r=t*Math.pow(n,e),i=Math.round(.5*r*(Math.random()-.5)*2);return Math.min(144e5,r+i)}function H(e){return e&&e._delegate?e._delegate:e}},2329:function(e,t,n){"use strict";n.d(t,{Mq:function(){return r.getApp},C6:function(){return r.getApps}});var r=n(5452);(0,r.registerVersion)("firebase","9.1.3","app")},7841:function(e,t,n){"use strict";n.d(t,{Z:function(){return r.Z}});var r=n(4486);r.Z.registerVersion("firebase","9.1.3","app-compat")},4671:function(c,l,p){"use strict";p.r(l);var g=p(8239),y=p(4486),k=p(3854),w=p(5452),_=p(4762),x=p(5601),T=p(6034),I=function(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},S=new k.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),E=new x.Yd("@firebase/auth");function R(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];E.logLevel<=x.in.ERROR&&E.error.apply(E,["Auth (".concat(w.SDK_VERSION,"): ").concat(e)].concat(n))}function C(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw D.apply(void 0,[e].concat(n))}function A(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return D.apply(void 0,[e].concat(n))}function N(t,n,r){var i=Object.assign(Object.assign({},{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),e({},n,r));return new k.LL("auth","Firebase",i).create(n,{appName:t.name})}function O(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&C(e,"argument-error"),N(e,"argument-error","Type of ".concat(t.constructor.name," does not match expected instance.Did you pass a reference from a different Auth SDK?"))}function D(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!=typeof e){var i,o=n[0],s=a(n.slice(1));return s[0]&&(s[0].appName=e.name),(i=e._errorFactory).create.apply(i,[o].concat(a(s)))}return S.create.apply(S,[e].concat(n))}function P(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(!e)throw D.apply(void 0,[t].concat(r))}function L(e){var t="INTERNAL ASSERTION FAILED: "+e;throw R(t),new Error(t)}function F(e,t){e||L(t)}var M=new Map;function U(e){F(e instanceof Function,"Expected a class definition");var t=M.get(e);return t?(F(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,M.set(e,t),t)}function j(){var e;return"undefined"!=typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function V(){return"http:"===q()||"https:"===q()}function q(){var e;return"undefined"!=typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}var B=function(){function e(t,n){f(this,e),this.shortDelay=t,this.longDelay=n,F(n>t,"Short delay should be less than long delay!"),this.isMobile=(0,k.uI)()||(0,k.b$)()}return h(e,[{key:"get",value:function(){return"undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(V()||(0,k.ru)()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}]),e}();function z(e,t){F(e.emulator,"Emulator should always be set here");var n=e.emulator.url;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}var Z=function(){function e(){f(this,e)}return h(e,null,[{key:"initialize",value:function(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}},{key:"fetch",value:function(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void L("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"headers",value:function(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void L("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"response",value:function(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void L("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}]),e}(),H={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},G=new B(3e4,6e4);function K(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}function W(e,t,n,r){return Q.apply(this,arguments)}function Q(){return(Q=(0,g.Z)(regeneratorRuntime.mark(function e(t,n,r,i){var a,o=arguments;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.length>4&&void 0!==o[4]?o[4]:{},e.abrupt("return",Y(t,a,function(){var e={},a={};i&&("GET"===n?a=i:e={body:JSON.stringify(i)});var o=(0,k.xO)(Object.assign({key:t.config.apiKey},a)).slice(1),s=new(Z.headers());return s.set("Content-Type","application/json"),s.set("X-Client-Version",t._getSdkClientVersion()),t.languageCode&&s.set("X-Firebase-Locale",t.languageCode),Z.fetch()(ee(t,t.config.apiHost,r,o),Object.assign({method:n,headers:s,referrerPolicy:"no-referrer"},e))}));case 2:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Y(e,t,n){return J.apply(this,arguments)}function J(){return(J=(0,g.Z)(regeneratorRuntime.mark(function e(n,r,i){var a,o,s,u,c,l,h,f,d,v;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n._canInitEmulator=!1,a=Object.assign(Object.assign({},H),r),e.prev=2,o=new te(n),e.next=6,Promise.race([i(),o.promise]);case 6:return s=e.sent,o.clearNetworkTimeout(),e.next=10,s.json();case 10:if(!("needConfirmation"in(u=e.sent))){e.next=13;break}throw ne(n,"account-exists-with-different-credential",u);case 13:if(!s.ok||"errorMessage"in u){e.next=15;break}return e.abrupt("return",u);case 15:if(c=s.ok?u.errorMessage:u.error.message,l=c.split(" : "),h=t(l,2),f=h[0],d=h[1],"FEDERATED_USER_ID_ALREADY_LINKED"!==f){e.next=18;break}throw ne(n,"credential-already-in-use",u);case 18:if("EMAIL_EXISTS"!==f){e.next=20;break}throw ne(n,"email-already-in-use",u);case 20:if(v=a[f]||f.toLowerCase().replace(/[_\s]+/g,"-"),!d){e.next=23;break}throw N(n,v,d);case 23:C(n,v),e.next=31;break;case 26:if(e.prev=26,e.t0=e.catch(2),!(e.t0 instanceof k.ZR)){e.next=30;break}throw e.t0;case 30:C(n,"network-request-failed");case 31:case"end":return e.stop()}},e,null,[[2,26]])}))).apply(this,arguments)}function $(e,t,n,r){return X.apply(this,arguments)}function X(){return(X=(0,g.Z)(regeneratorRuntime.mark(function e(t,n,r,i){var a,o,s=arguments;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=s.length>4&&void 0!==s[4]?s[4]:{},e.next=3,W(t,n,r,i,a);case 3:return o=e.sent,e.abrupt("return",("mfaPendingCredential"in o&&C(t,"multi-factor-auth-required",{serverResponse:o}),o));case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}function ee(e,t,n,r){var i="".concat(t).concat(n,"?").concat(r);return e.config.emulator?z(e.config,i):"".concat(e.config.apiScheme,"://").concat(i)}var te=function(){function e(t){var n=this;f(this,e),this.auth=t,this.timer=null,this.promise=new Promise(function(e,t){n.timer=setTimeout(function(){return t(A(n.auth,"timeout"))},G.get())})}return h(e,[{key:"clearNetworkTimeout",value:function(){clearTimeout(this.timer)}}]),e}();function ne(e,t,n){var r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);var i=A(e,t,r);return i.customData._tokenResponse=n,i}function re(){return(re=(0,g.Z)(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",W(t,"POST","/v1/accounts:delete",n));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function ie(e,t){return ae.apply(this,arguments)}function ae(){return(ae=(0,g.Z)(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",W(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function oe(e,t){return se.apply(this,arguments)}function se(){return(se=(0,g.Z)(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",W(t,"POST","/v1/accounts:lookup",n));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function ue(e){if(e)try{var t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(t){}}function ce(){return(ce=(0,g.Z)(regeneratorRuntime.mark(function e(t){var n,r,i,a,o,s,u=arguments;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=u.length>1&&void 0!==u[1]&&u[1],r=(0,k.m9)(t),e.next=4,r.getIdToken(n);case 4:return i=e.sent,P((a=he(i))&&a.exp&&a.auth_time&&a.iat,r.auth,"internal-error"),o="object"==typeof a.firebase?a.firebase:void 0,s=null==o?void 0:o.sign_in_provider,e.abrupt("return",{claims:a,token:i,authTime:ue(le(a.auth_time)),issuedAtTime:ue(le(a.iat)),expirationTime:ue(le(a.exp)),signInProvider:s||null,signInSecondFactor:(null==o?void 0:o.sign_in_second_factor)||null});case 9:case"end":return e.stop()}},e)}))).apply(this,arguments)}function le(e){return 1e3*Number(e)}function he(e){var n=t(e.split("."),3),r=n[0],i=n[1],a=n[2];if(void 0===r||void 0===i||void 0===a)return R("JWT malformed, contained fewer than 3 sections"),null;try{var o=(0,k.tV)(i);return o?JSON.parse(o):(R("Failed to decode base64 JWT payload"),null)}catch(o){return R("Caught error parsing JWT payload as JSON",o),null}}function fe(e,t){return de.apply(this,arguments)}function de(){return(de=(0,g.Z)(regeneratorRuntime.mark(function e(t,n){var r=arguments;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r.length>2&&void 0!==r[2]&&r[2])){e.next=3;break}return e.abrupt("return",n);case 3:return e.prev=3,e.next=6,n;case 6:return e.abrupt("return",e.sent);case 9:if(e.prev=9,e.t0=e.catch(3),e.t1=e.t0 instanceof k.ZR&&ve(e.t0)&&t.auth.currentUser===t,!e.t1){e.next=15;break}return e.next=15,t.auth.signOut();case 15:throw e.t0;case 16:case"end":return e.stop()}},e,null,[[3,9]])}))).apply(this,arguments)}function ve(e){var t=e.code;return"auth/user-disabled"===t||"auth/user-token-expired"===t}var pe=function(){function e(t){f(this,e),this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}return h(e,[{key:"_start",value:function(){this.isRunning||(this.isRunning=!0,this.schedule())}},{key:"_stop",value:function(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}},{key:"getInterval",value:function(e){var t;if(e){var n=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),n}this.errorBackoff=3e4;var r=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,r)}},{key:"schedule",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this;if(this.isRunning){var n=this.getInterval(e);this.timerId=setTimeout((0,g.Z)(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.iteration();case 2:case"end":return e.stop()}},e)})),n)}}},{key:"iteration",value:function(){var e=this;return(0,g.Z)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.user.getIdToken(!0);case 3:t.next=8;break;case 5:return t.prev=5,t.t0=t.catch(0),t.abrupt("return",void("auth/network-request-failed"===t.t0.code&&e.schedule(!0)));case 8:e.schedule();case 9:case"end":return t.stop()}},t,null,[[0,5]])}))()}}]),e}(),me=function(){function e(t,n){f(this,e),this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}return h(e,[{key:"_initializeTime",value:function(){this.lastSignInTime=ue(this.lastLoginAt),this.creationTime=ue(this.createdAt)}},{key:"_copy",value:function(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}},{key:"toJSON",value:function(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}]),e}();function ge(e){return ye.apply(this,arguments)}function ye(){return(ye=(0,g.Z)(regeneratorRuntime.mark(function e(t){var n,r,i,a,o,s,u,c,l;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.auth,e.next=3,t.getIdToken();case 3:return i=e.sent,e.next=6,fe(t,oe(r,{idToken:i}));case 6:P(null==(a=e.sent)?void 0:a.users.length,r,"internal-error"),o=a.users[0],t._notifyReloadListener(o),s=(null===(n=o.providerUserInfo)||void 0===n?void 0:n.length)?be(o.providerUserInfo):[],u=we(t.providerData,s),c=!!t.isAnonymous&&!(t.email&&o.passwordHash||(null==u?void 0:u.length)),l={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new me(o.createdAt,o.lastLoginAt),isAnonymous:c},Object.assign(t,l);case 12:case"end":return e.stop()}},e)}))).apply(this,arguments)}function ke(){return(ke=(0,g.Z)(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,k.m9)(t),e.next=3,ge(n);case 3:return e.next=5,n.auth._persistUserIfCurrent(n);case 5:n.auth._notifyListenersIfCurrent(n);case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}function we(e,t){return[].concat(a(e.filter(function(e){return!t.some(function(t){return t.providerId===e.providerId})})),a(t))}function be(e){return e.map(function(e){var t=e.providerId,n=(0,_._T)(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}function _e(){return(_e=(0,g.Z)(regeneratorRuntime.mark(function e(t,n){var r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Y(t,{},function(){var e=(0,k.xO)({grant_type:"refresh_token",refresh_token:n}).slice(1),r=t.config,i=r.tokenApiHost,a=r.apiKey,o=ee(t,i,"/v1/token","key=".concat(a));return Z.fetch()(o,{method:"POST",headers:{"X-Client-Version":t._getSdkClientVersion(),"Content-Type":"application/x-www-form-urlencoded"},body:e})});case 2:return r=e.sent,e.abrupt("return",{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token});case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}var xe=function(){function e(){f(this,e),this.refreshToken=null,this.accessToken=null,this.expirationTime=null}return h(e,[{key:"isExpired",get:function(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}},{key:"updateFromServerResponse",value:function(e){P(e.idToken,"internal-error"),P(void 0!==e.idToken,"internal-error"),P(void 0!==e.refreshToken,"internal-error");var t="expiresIn"in e&&void 0!==e.expiresIn?Number(e.expiresIn):function(e){var t=he(e);return P(t,"internal-error"),P(void 0!==t.exp,"internal-error"),P(void 0!==t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}},{key:"getToken",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this;return(0,g.Z)(regeneratorRuntime.mark(function r(){return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(P(!n.accessToken||n.refreshToken,e,"user-token-expired"),!t&&n.accessToken&&!n.isExpired){r.next=12;break}if(!n.refreshToken){r.next=8;break}return r.next=5,n.refresh(e,n.refreshToken);case 5:r.t1=n.accessToken,r.next=9;break;case 8:r.t1=null;case 9:r.t0=r.t1,r.next=13;break;case 12:r.t0=n.accessToken;case 13:return r.abrupt("return",r.t0);case 14:case"end":return r.stop()}},r)}))()}},{key:"clearRefreshToken",value:function(){this.refreshToken=null}},{key:"refresh",value:function(e,t){var n=this;return(0,g.Z)(regeneratorRuntime.mark(function r(){var i,a,o,s;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,function(e,t){return _e.apply(this,arguments)}(e,t);case 2:i=r.sent,a=i.accessToken,o=i.refreshToken,s=i.expiresIn,n.updateTokensAndExpiration(a,o,Number(s));case 7:case"end":return r.stop()}},r)}))()}},{key:"updateTokensAndExpiration",value:function(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}},{key:"toJSON",value:function(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}},{key:"_assign",value:function(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}},{key:"_clone",value:function(){return Object.assign(new e,this.toJSON())}},{key:"_performRefresh",value:function(){return L("not implemented")}}],[{key:"fromJSON",value:function(t,n){var r=n.refreshToken,i=n.accessToken,a=n.expirationTime,o=new e;return r&&(P("string"==typeof r,"internal-error",{appName:t}),o.refreshToken=r),i&&(P("string"==typeof i,"internal-error",{appName:t}),o.accessToken=i),a&&(P("number"==typeof a,"internal-error",{appName:t}),o.expirationTime=a),o}}]),e}();function Te(e,t){P("string"==typeof e||void 0===e,"internal-error",{appName:t})}var Ie=function(){function e(t){f(this,e);var n=t.uid,r=t.auth,i=t.stsTokenManager,a=(0,_._T)(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.emailVerified=!1,this.isAnonymous=!1,this.tenantId=null,this.providerData=[],this.proactiveRefresh=new pe(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.metadata=new me(a.createdAt||void 0,a.lastLoginAt||void 0)}return h(e,[{key:"getIdToken",value:function(e){var t=this;return(0,g.Z)(regeneratorRuntime.mark(function n(){var r;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,fe(t,t.stsTokenManager.getToken(t.auth,e));case 2:if(P(r=n.sent,t.auth,"internal-error"),n.t0=t.accessToken!==r,!n.t0){n.next=10;break}return t.accessToken=r,n.next=9,t.auth._persistUserIfCurrent(t);case 9:t.auth._notifyListenersIfCurrent(t);case 10:return n.abrupt("return",r);case 11:case"end":return n.stop()}},n)}))()}},{key:"getIdTokenResult",value:function(e){return function(e){return ce.apply(this,arguments)}(this,e)}},{key:"reload",value:function(){return function(e){return ke.apply(this,arguments)}(this)}},{key:"_assign",value:function(e){this!==e&&(P(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(function(e){return Object.assign({},e)}),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}},{key:"_clone",value:function(t){return new e(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}))}},{key:"_onReload",value:function(e){P(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}},{key:"_notifyReloadListener",value:function(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}},{key:"_startProactiveRefresh",value:function(){this.proactiveRefresh._start()}},{key:"_stopProactiveRefresh",value:function(){this.proactiveRefresh._stop()}},{key:"_updateTokensIfNecessary",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this;return(0,g.Z)(regeneratorRuntime.mark(function r(){var i;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(i=!1,e.idToken&&e.idToken!==n.stsTokenManager.accessToken&&(n.stsTokenManager.updateFromServerResponse(e),i=!0),r.t0=t,!r.t0){r.next=6;break}return r.next=6,ge(n);case 6:return r.next=8,n.auth._persistUserIfCurrent(n);case 8:i&&n.auth._notifyListenersIfCurrent(n);case 9:case"end":return r.stop()}},r)}))()}},{key:"delete",value:function(){var e=this;return(0,g.Z)(regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getIdToken();case 2:return n=t.sent,t.next=5,fe(e,function(e,t){return re.apply(this,arguments)}(e.auth,{idToken:n}));case 5:return e.stsTokenManager.clearRefreshToken(),t.abrupt("return",e.auth.signOut());case 7:case"end":return t.stop()}},t)}))()}},{key:"toJSON",value:function(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(function(e){return Object.assign({},e)}),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}},{key:"refreshToken",get:function(){return this.stsTokenManager.refreshToken||""}}],[{key:"_fromJSON",value:function(t,n){var r,i,a,o,s,u,c,l,h=null!==(r=n.displayName)&&void 0!==r?r:void 0,f=null!==(i=n.email)&&void 0!==i?i:void 0,d=null!==(a=n.phoneNumber)&&void 0!==a?a:void 0,v=null!==(o=n.photoURL)&&void 0!==o?o:void 0,p=null!==(s=n.tenantId)&&void 0!==s?s:void 0,m=null!==(u=n._redirectEventId)&&void 0!==u?u:void 0,g=null!==(c=n.createdAt)&&void 0!==c?c:void 0,y=null!==(l=n.lastLoginAt)&&void 0!==l?l:void 0,k=n.uid,w=n.emailVerified,b=n.isAnonymous,_=n.providerData,x=n.stsTokenManager;P(k&&x,t,"internal-error");var T=xe.fromJSON(this.name,x);P("string"==typeof k,t,"internal-error"),Te(h,t.name),Te(f,t.name),P("boolean"==typeof w,t,"internal-error"),P("boolean"==typeof b,t,"internal-error"),Te(d,t.name),Te(v,t.name),Te(p,t.name),Te(m,t.name),Te(g,t.name),Te(y,t.name);var I=new e({uid:k,auth:t,email:f,emailVerified:w,displayName:h,isAnonymous:b,photoURL:v,phoneNumber:d,tenantId:p,stsTokenManager:T,createdAt:g,lastLoginAt:y});return _&&Array.isArray(_)&&(I.providerData=_.map(function(e){return Object.assign({},e)})),m&&(I._redirectEventId=m),I}},{key:"_fromIdTokenResponse",value:function(t,n){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return(0,g.Z)(regeneratorRuntime.mark(function i(){var a,o;return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return(a=new xe).updateFromServerResponse(n),o=new e({uid:n.localId,auth:t,stsTokenManager:a,isAnonymous:r}),i.next=5,ge(o);case 5:return i.abrupt("return",o);case 6:case"end":return i.stop()}},i)}))()}}]),e}(),Se=function(){var e=function(){function e(){f(this,e),this.type="NONE",this.storage={}}return h(e,[{key:"_isAvailable",value:function(){return(0,g.Z)(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}},e)}))()}},{key:"_set",value:function(e,t){var n=this;return(0,g.Z)(regeneratorRuntime.mark(function r(){return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:n.storage[e]=t;case 1:case"end":return r.stop()}},r)}))()}},{key:"_get",value:function(e){var t=this;return(0,g.Z)(regeneratorRuntime.mark(function n(){var r;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return r=t.storage[e],n.abrupt("return",void 0===r?null:r);case 2:case"end":return n.stop()}},n)}))()}},{key:"_remove",value:function(e){var t=this;return(0,g.Z)(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:delete t.storage[e];case 1:case"end":return n.stop()}},n)}))()}},{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),e}();return e.type="NONE",e}();function Ee(e,t,n){return"firebase:".concat(e,":").concat(t,":").concat(n)}var Re=function(){function e(t,n,r){f(this,e),this.persistence=t,this.auth=n,this.userKey=r;var i=this.auth,a=i.config,o=i.name;this.fullUserKey=Ee(this.userKey,a.apiKey,o),this.fullPersistenceKey=Ee("persistence",a.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}return h(e,[{key:"setCurrentUser",value:function(e){return this.persistence._set(this.fullUserKey,e.toJSON())}},{key:"getCurrentUser",value:function(){var e=this;return(0,g.Z)(regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.persistence._get(e.fullUserKey);case 2:return n=t.sent,t.abrupt("return",n?Ie._fromJSON(e.auth,n):null);case 4:case"end":return t.stop()}},t)}))()}},{key:"removeCurrentUser",value:function(){return this.persistence._remove(this.fullUserKey)}},{key:"savePersistenceForRedirect",value:function(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}},{key:"setPersistence",value:function(e){var t=this;return(0,g.Z)(regeneratorRuntime.mark(function n(){var r;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(t.persistence!==e){n.next=2;break}return n.abrupt("return");case 2:return n.next=4,t.getCurrentUser();case 4:return r=n.sent,n.next=7,t.removeCurrentUser();case 7:return t.persistence=e,n.abrupt("return",r?t.setCurrentUser(r):void 0);case 9:case"end":return n.stop()}},n)}))()}},{key:"delete",value:function(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}}],[{key:"create",value:function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"authUser";return(0,g.Z)(regeneratorRuntime.mark(function i(){var a,o,u,c,l,h,f,d,v,p;return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(n.length){i.next=2;break}return i.abrupt("return",new e(U(Se),t,r));case 2:return i.next=4,Promise.all(n.map(function(){var e=(0,g.Z)(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._isAvailable();case 2:if(!e.sent){e.next=4;break}return e.abrupt("return",t);case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()));case 4:a=i.sent.filter(function(e){return e}),o=a[0]||U(Se),u=Ee(r,t.config.apiKey,t.name),c=null,l=s(n),i.prev=9,l.s();case 11:if((h=l.n()).done){i.next=27;break}return f=h.value,i.prev=13,i.next=16,f._get(u);case 16:if(!(d=i.sent)){i.next=21;break}return v=Ie._fromJSON(t,d),f!==o&&(c=v),o=f,i.abrupt("break",27);case 21:i.next=25;break;case 23:i.prev=23,i.t0=i.catch(13);case 25:i.next=11;break;case 27:i.next=32;break;case 29:i.prev=29,i.t1=i.catch(9),l.e(i.t1);case 32:return i.prev=32,l.f(),i.finish(32);case 35:if(p=a.filter(function(e){return e._shouldAllowMigration}),!o._shouldAllowMigration||!p.length){i.next=47;break}if(o=p[0],i.t3=c,!i.t3){i.next=42;break}return i.next=42,o._set(u,c.toJSON());case 42:return i.next=44,Promise.all(n.map(function(){var e=(0,g.Z)(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t===o){e.next=8;break}return e.prev=1,e.next=4,t._remove(u);case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(1);case 8:case"end":return e.stop()}},e,null,[[1,6]])}));return function(t){return e.apply(this,arguments)}}()));case 44:i.t2=new e(o,t,r),i.next=48;break;case 47:i.t2=new e(o,t,r);case 48:return i.abrupt("return",i.t2);case 49:case"end":return i.stop()}},i,null,[[9,29,32,35],[13,23]])}))()}}]),e}();function Ce(e){var t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(De(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Ae(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(Le(t))return"Blackberry";if(Fe(t))return"Webos";if(Ne(t))return"Safari";if((t.includes("chrome/")||Oe(t))&&!t.includes("edge/"))return"Chrome";if(Pe(t))return"Android";var n=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);return 2===(null==n?void 0:n.length)?n[1]:"Other"}function Ae(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,k.z$)();return/firefox\//i.test(e)}function Ne(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,k.z$)(),t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function Oe(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,k.z$)();return/crios\//i.test(e)}function De(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,k.z$)();return/iemobile/i.test(e)}function Pe(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,k.z$)();return/android/i.test(e)}function Le(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,k.z$)();return/blackberry/i.test(e)}function Fe(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,k.z$)();return/webos/i.test(e)}function Me(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,k.z$)();return/iphone|ipad|ipod/i.test(e)}function Ue(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,k.z$)();return Me(e)||Pe(e)||Fe(e)||Le(e)||/windows phone/i.test(e)||De(e)}function je(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=Ce((0,k.z$)());break;case"Worker":t="".concat(Ce((0,k.z$)()),"-").concat(e);break;default:t=e}var r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/JsCore/").concat(w.SDK_VERSION,"/").concat(r)}var Ve=function(){function e(t,n){f(this,e),this.app=t,this.config=n,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Be(this),this.idTokenSubscription=new Be(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=S,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=n.sdkClientVersion}return h(e,[{key:"_initializeWithPersistence",value:function(e,t){var n=this;return t&&(this._popupRedirectResolver=U(t)),this._initializationPromise=this.queue((0,g.Z)(regeneratorRuntime.mark(function r(){var i;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(r.t0=n._deleted,r.t0){r.next=14;break}return r.next=4,Re.create(n,e);case 4:if(n.persistenceManager=r.sent,r.t1=!n._deleted,!r.t1){r.next=14;break}if(r.t2=null===(i=n._popupRedirectResolver)||void 0===i?void 0:i._shouldInitProactively,!r.t2){r.next=11;break}return r.next=11,n._popupRedirectResolver._initialize(n);case 11:return r.next=13,n.initializeCurrentUser(t);case 13:!n._deleted&&(n._isInitialized=!0);case 14:case"end":return r.stop()}},r)}))),this._initializationPromise}},{key:"_onStorageEvent",value:function(){var e=this;return(0,g.Z)(regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!e._deleted){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,e.assertedPersistence.getCurrentUser();case 4:if(n=t.sent,!e.currentUser&&!n){t.next=13;break}if(!e.currentUser||!n||e.currentUser.uid!==n.uid){t.next=11;break}return e._currentUser._assign(n),t.next=10,e.currentUser.getIdToken();case 10:return t.abrupt("return",void t.sent);case 11:return t.next=13,e._updateCurrentUser(n);case 13:case"end":return t.stop()}},t)}))()}},{key:"initializeCurrentUser",value:function(e){var t=this;return(0,g.Z)(regeneratorRuntime.mark(function n(){var r,i,a,o,s;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.assertedPersistence.getCurrentUser();case 2:if(i=n.sent,!e||!t.config.authDomain){n.next=12;break}return n.next=6,t.getOrInitRedirectPersistenceManager();case 6:return a=null===(r=t.redirectUser)||void 0===r?void 0:r._redirectEventId,o=null==i?void 0:i._redirectEventId,n.next=10,t.tryRedirectSignIn(e);case 10:s=n.sent,(!a||a===o)&&(null==s?void 0:s.user)&&(i=s.user);case 12:if(!i){n.next=24;break}if(!i._redirectEventId){n.next=20;break}return P(t._popupRedirectResolver,t,"argument-error"),n.next=17,t.getOrInitRedirectPersistenceManager();case 17:n.t1=t.redirectUser&&t.redirectUser._redirectEventId===i._redirectEventId?t.directlySetCurrentUser(i):t.reloadAndSetCurrentUserOrClear(i),n.next=21;break;case 20:n.t1=t.reloadAndSetCurrentUserOrClear(i);case 21:n.t0=n.t1,n.next=25;break;case 24:n.t0=t.directlySetCurrentUser(null);case 25:return n.abrupt("return",n.t0);case 26:case"end":return n.stop()}},n)}))()}},{key:"tryRedirectSignIn",value:function(e){var t=this;return(0,g.Z)(regeneratorRuntime.mark(function n(){var r;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return r=null,n.prev=1,n.next=4,t._popupRedirectResolver._completeRedirectFn(t,e,!0);case 4:r=n.sent,n.next=11;break;case 7:return n.prev=7,n.t0=n.catch(1),n.next=11,t._setRedirectUser(null);case 11:return n.abrupt("return",r);case 12:case"end":return n.stop()}},n,null,[[1,7]])}))()}},{key:"reloadAndSetCurrentUserOrClear",value:function(e){var t=this;return(0,g.Z)(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,ge(e);case 3:n.next=9;break;case 5:if(n.prev=5,n.t0=n.catch(0),"auth/network-request-failed"===n.t0.code){n.next=9;break}return n.abrupt("return",t.directlySetCurrentUser(null));case 9:return n.abrupt("return",t.directlySetCurrentUser(e));case 10:case"end":return n.stop()}},n,null,[[0,5]])}))()}},{key:"useDeviceLanguage",value:function(){this.languageCode=function(){if("undefined"==typeof navigator)return null;var e=navigator;return e.languages&&e.languages[0]||e.language||null}()}},{key:"_delete",value:function(){var e=this;return(0,g.Z)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e._deleted=!0;case 1:case"end":return t.stop()}},t)}))()}},{key:"updateCurrentUser",value:function(e){var t=this;return(0,g.Z)(regeneratorRuntime.mark(function n(){var r;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return r=e?(0,k.m9)(e):null,n.abrupt("return",(r&&P(r.auth.config.apiKey===t.config.apiKey,t,"invalid-user-token"),t._updateCurrentUser(r&&r._clone(t))));case 2:case"end":return n.stop()}},n)}))()}},{key:"_updateCurrentUser",value:function(e){var t=this;return(0,g.Z)(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(t._deleted){n.next=2;break}return n.abrupt("return",(e&&P(t.tenantId===e.tenantId,t,"tenant-id-mismatch"),t.queue((0,g.Z)(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.directlySetCurrentUser(e);case 2:t.notifyAuthListeners();case 3:case"end":return n.stop()}},n)})))));case 2:case"end":return n.stop()}},n)}))()}},{key:"signOut",value:function(){var e=this;return(0,g.Z)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=e.redirectPersistenceManager||e._popupRedirectResolver,!t.t0){t.next=4;break}return t.next=4,e._setRedirectUser(null);case 4:return t.abrupt("return",e._updateCurrentUser(null));case 5:case"end":return t.stop()}},t)}))()}},{key:"setPersistence",value:function(e){var t=this;return this.queue((0,g.Z)(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.assertedPersistence.setPersistence(U(e));case 2:case"end":return n.stop()}},n)})))}},{key:"_getPersistence",value:function(){return this.assertedPersistence.persistence.type}},{key:"_updateErrorMap",value:function(e){this._errorFactory=new k.LL("auth","Firebase",e())}},{key:"onAuthStateChanged",value:function(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}},{key:"onIdTokenChanged",value:function(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}},{key:"toJSON",value:function(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}},{key:"_setRedirectUser",value:function(e,t){var n=this;return(0,g.Z)(regeneratorRuntime.mark(function r(){var i;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,n.getOrInitRedirectPersistenceManager(t);case 2:return i=r.sent,r.abrupt("return",null===e?i.removeCurrentUser():i.setCurrentUser(e));case 4:case"end":return r.stop()}},r)}))()}},{key:"getOrInitRedirectPersistenceManager",value:function(e){var t=this;return(0,g.Z)(regeneratorRuntime.mark(function n(){var r;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(t.redirectPersistenceManager){n.next=9;break}return P(r=e&&U(e)||t._popupRedirectResolver,t,"argument-error"),n.next=5,Re.create(t,[U(r._redirectPersistence)],"redirectUser");case 5:return t.redirectPersistenceManager=n.sent,n.next=8,t.redirectPersistenceManager.getCurrentUser();case 8:t.redirectUser=n.sent;case 9:return n.abrupt("return",t.redirectPersistenceManager);case 10:case"end":return n.stop()}},n)}))()}},{key:"_redirectUserForId",value:function(e){var t=this;return(0,g.Z)(regeneratorRuntime.mark(function n(){var r,i;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(n.t0=t._isInitialized,!n.t0){n.next=4;break}return n.next=4,t.queue((0,g.Z)(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e)})));case 4:return n.abrupt("return",(null===(r=t._currentUser)||void 0===r?void 0:r._redirectEventId)===e?t._currentUser:(null===(i=t.redirectUser)||void 0===i?void 0:i._redirectEventId)===e?t.redirectUser:null);case 5:case"end":return n.stop()}},n)}))()}},{key:"_persistUserIfCurrent",value:function(e){var t=this;return(0,g.Z)(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(e!==t.currentUser){n.next=2;break}return n.abrupt("return",t.queue((0,g.Z)(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",t.directlySetCurrentUser(e));case 1:case"end":return n.stop()}},n)}))));case 2:case"end":return n.stop()}},n)}))()}},{key:"_notifyListenersIfCurrent",value:function(e){e===this.currentUser&&this.notifyAuthListeners()}},{key:"_key",value:function(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}},{key:"_startProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}},{key:"_stopProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}},{key:"_currentUser",get:function(){return this.currentUser}},{key:"notifyAuthListeners",value:function(){var e,t;if(this._isInitialized){this.idTokenSubscription.next(this.currentUser);var n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}}},{key:"registerStateListener",value:function(e,t,n,r){var i=this;if(this._deleted)return function(){};var a="function"==typeof t?t:t.next.bind(t),o=this._isInitialized?Promise.resolve():this._initializationPromise;return P(o,this,"internal-error"),o.then(function(){return a(i.currentUser)}),"function"==typeof t?e.addObserver(t,n,r):e.addObserver(t)}},{key:"directlySetCurrentUser",value:function(e){var t=this;return(0,g.Z)(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(t.currentUser&&t.currentUser!==e&&(t._currentUser._stopProactiveRefresh(),e&&t.isProactiveRefreshEnabled&&e._startProactiveRefresh()),t.currentUser=e,!e){n.next=7;break}return n.next=5,t.assertedPersistence.setCurrentUser(e);case 5:n.next=9;break;case 7:return n.next=9,t.assertedPersistence.removeCurrentUser();case 9:case"end":return n.stop()}},n)}))()}},{key:"queue",value:function(e){return this.operations=this.operations.then(e,e),this.operations}},{key:"assertedPersistence",get:function(){return P(this.persistenceManager,this,"internal-error"),this.persistenceManager}},{key:"_logFramework",value:function(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=je(this.config.clientPlatform,this._getFrameworks()))}},{key:"_getFrameworks",value:function(){return this.frameworks}},{key:"_getSdkClientVersion",value:function(){return this.clientVersion}}]),e}();function qe(e){return(0,k.m9)(e)}var Be=function(){function e(t){var n=this;f(this,e),this.auth=t,this.observer=null,this.addObserver=(0,k.ne)(function(e){return n.observer=e})}return h(e,[{key:"next",get:function(){return P(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}]),e}();function ze(e){var t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function Ze(e){if(!e)return null;var t=Number(e);return isNaN(t)?null:t}var He=function(){function e(t,n){f(this,e),this.providerId=t,this.signInMethod=n}return h(e,[{key:"toJSON",value:function(){return L("not implemented")}},{key:"_getIdTokenResponse",value:function(e){return L("not implemented")}},{key:"_linkToIdToken",value:function(e,t){return L("not implemented")}},{key:"_getReauthenticationResolver",value:function(e){return L("not implemented")}}]),e}();function Ge(e,t){return Ke.apply(this,arguments)}function Ke(){return(Ke=(0,g.Z)(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",W(t,"POST","/v1/accounts:resetPassword",K(t,n)));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function We(e,t){return Qe.apply(this,arguments)}function Qe(){return(Qe=(0,g.Z)(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",W(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Ye(e,t){return Je.apply(this,arguments)}function Je(){return(Je=(0,g.Z)(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",W(t,"POST","/v1/accounts:update",K(t,n)));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function $e(){return($e=(0,g.Z)(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",$(t,"POST","/v1/accounts:signInWithPassword",K(t,n)));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Xe(e,t){return et.apply(this,arguments)}function et(){return(et=(0,g.Z)(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",W(t,"POST","/v1/accounts:sendOobCode",K(t,n)));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function tt(e,t){return nt.apply(this,arguments)}function nt(){return(nt=(0,g.Z)(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Xe(t,n));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function rt(e,t){return it.apply(this,arguments)}function it(){return(it=(0,g.Z)(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Xe(t,n));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function at(e,t){return ot.apply(this,arguments)}function ot(){return(ot=(0,g.Z)(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Xe(t,n));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function st(e,t){return ut.apply(this,arguments)}function ut(){return(ut=(0,g.Z)(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Xe(t,n));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function ct(){return(ct=(0,g.Z)(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",$(t,"POST","/v1/accounts:signInWithEmailLink",K(t,n)));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function lt(){return(lt=(0,g.Z)(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",$(t,"POST","/v1/accounts:signInWithEmailLink",K(t,n)));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}var ht=function(e){d(n,e);var t=v(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return f(this,n),(a=t.call(this,"password",i))._email=e,a._password=r,a._tenantId=o,a}return h(n,[{key:"toJSON",value:function(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}},{key:"_getIdTokenResponse",value:function(e){var t=this;return(0,g.Z)(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:n.t0=t.signInMethod,n.next="password"===n.t0?3:"emailLink"===n.t0?4:5;break;case 3:return n.abrupt("return",function(e,t){return $e.apply(this,arguments)}(e,{returnSecureToken:!0,email:t._email,password:t._password}));case 4:return n.abrupt("return",function(e,t){return ct.apply(this,arguments)}(e,{email:t._email,oobCode:t._password}));case 5:C(e,"internal-error");case 6:case"end":return n.stop()}},n)}))()}},{key:"_linkToIdToken",value:function(e,t){var n=this;return(0,g.Z)(regeneratorRuntime.mark(function r(){return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:r.t0=n.signInMethod,r.next="password"===r.t0?3:"emailLink"===r.t0?4:5;break;case 3:return r.abrupt("return",We(e,{idToken:t,returnSecureToken:!0,email:n._email,password:n._password}));case 4:return r.abrupt("return",function(e,t){return lt.apply(this,arguments)}(e,{idToken:t,email:n._email,oobCode:n._password}));case 5:C(e,"internal-error");case 6:case"end":return r.stop()}},r)}))()}},{key:"_getReauthenticationResolver",value:function(e){return this._getIdTokenResponse(e)}}],[{key:"_fromEmailAndPassword",value:function(e,t){return new n(e,t,"password")}},{key:"_fromEmailAndCode",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return new n(e,t,"emailLink",r)}},{key:"fromJSON",value:function(e){var t="string"==typeof e?JSON.parse(e):e;if((null==t?void 0:t.email)&&(null==t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}}]),n}(He);function ft(e,t){return dt.apply(this,arguments)}function dt(){return(dt=(0,g.Z)(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",$(t,"POST","/v1/accounts:signInWithIdp",K(t,n)));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}var vt=function(e){d(n,e);var t=v(n);function n(){var e;return f(this,n),(e=t.apply(this,arguments)).pendingToken=null,e}return h(n,[{key:"toJSON",value:function(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}},{key:"_getIdTokenResponse",value:function(e){return ft(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,ft(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,ft(e,t)}},{key:"buildRequest",value:function(){var e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{var t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=(0,k.xO)(t)}return e}}],[{key:"_fromParams",value:function(e){var t=new n(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):C("argument-error"),t}},{key:"fromJSON",value:function(e){var t="string"==typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=(0,_._T)(t,["providerId","signInMethod"]);if(!r||!i)return null;var o=new n(r,i);return o.idToken=a.idToken||void 0,o.accessToken=a.accessToken||void 0,o.secret=a.secret,o.nonce=a.nonce,o.pendingToken=a.pendingToken||null,o}}]),n}(He);function pt(e,t){return mt.apply(this,arguments)}function mt(){return(mt=(0,g.Z)(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",W(t,"POST","/v1/accounts:sendVerificationCode",K(t,n)));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function gt(){return(gt=(0,g.Z)(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",$(t,"POST","/v1/accounts:signInWithPhoneNumber",K(t,n)));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function yt(){return(yt=(0,g.Z)(regeneratorRuntime.mark(function e(t,n){var r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$(t,"POST","/v1/accounts:signInWithPhoneNumber",K(t,n));case 2:if(!(r=e.sent).temporaryProof){e.next=5;break}throw ne(t,"account-exists-with-different-credential",r);case 5:return e.abrupt("return",r);case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}var kt={USER_NOT_FOUND:"user-not-found"};function wt(){return(wt=(0,g.Z)(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",$(t,"POST","/v1/accounts:signInWithPhoneNumber",K(t,Object.assign(Object.assign({},n),{operation:"REAUTH"})),kt));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}var bt=function(e){d(n,e);var t=v(n);function n(e){var r;return f(this,n),(r=t.call(this,"phone","phone")).params=e,r}return h(n,[{key:"_getIdTokenResponse",value:function(e){return function(e,t){return gt.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_linkToIdToken",value:function(e,t){return function(e,t){return yt.apply(this,arguments)}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}},{key:"_getReauthenticationResolver",value:function(e){return function(e,t){return wt.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_makeVerificationRequest",value:function(){var e=this.params,t=e.temporaryProof,n=e.phoneNumber,r=e.verificationId,i=e.verificationCode;return t&&n?{temporaryProof:t,phoneNumber:n}:{sessionInfo:r,code:i}}},{key:"toJSON",value:function(){var e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}}],[{key:"_fromVerification",value:function(e,t){return new n({verificationId:e,verificationCode:t})}},{key:"_fromTokenResponse",value:function(e,t){return new n({phoneNumber:e,temporaryProof:t})}},{key:"fromJSON",value:function(e){"string"==typeof e&&(e=JSON.parse(e));var t=e,r=t.verificationId,i=t.verificationCode,a=t.phoneNumber,o=t.temporaryProof;return i||r||a||o?new n({verificationId:r,verificationCode:i,phoneNumber:a,temporaryProof:o}):null}}]),n}(He),_t=function(){function e(t){var n,r,i,a,o,s;f(this,e);var u=(0,k.zd)((0,k.pd)(t)),c=null!==(n=u.apiKey)&&void 0!==n?n:null,l=null!==(r=u.oobCode)&&void 0!==r?r:null,h=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(i=u.mode)&&void 0!==i?i:null);P(c&&l&&h,"argument-error"),this.apiKey=c,this.operation=h,this.code=l,this.continueUrl=null!==(a=u.continueUrl)&&void 0!==a?a:null,this.languageCode=null!==(o=u.languageCode)&&void 0!==o?o:null,this.tenantId=null!==(s=u.tenantId)&&void 0!==s?s:null}return h(e,null,[{key:"parseLink",value:function(t){var n=function(e){var t=(0,k.zd)((0,k.pd)(e)).link,n=t?(0,k.zd)((0,k.pd)(t)).deep_link_id:null,r=(0,k.zd)((0,k.pd)(e)).deep_link_id;return(r?(0,k.zd)((0,k.pd)(r)).link:null)||r||n||t||e}(t);try{return new e(n)}catch(r){return null}}}]),e}(),xt=function(){var e=function(){function e(){f(this,e),this.providerId=e.PROVIDER_ID}return h(e,null,[{key:"credential",value:function(e,t){return ht._fromEmailAndPassword(e,t)}},{key:"credentialWithLink",value:function(e,t){var n=_t.parseLink(t);return P(n,"argument-error"),ht._fromEmailAndCode(e,n.code,n.tenantId)}}]),e}();return e.PROVIDER_ID="password",e.EMAIL_PASSWORD_SIGN_IN_METHOD="password",e.EMAIL_LINK_SIGN_IN_METHOD="emailLink",e}(),Tt=function(){function e(t){f(this,e),this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}return h(e,[{key:"setDefaultLanguage",value:function(e){this.defaultLanguageCode=e}},{key:"setCustomParameters",value:function(e){return this.customParameters=e,this}},{key:"getCustomParameters",value:function(){return this.customParameters}}]),e}(),It=function(e){d(n,e);var t=v(n);function n(){var e;return f(this,n),(e=t.apply(this,arguments)).scopes=[],e}return h(n,[{key:"addScope",value:function(e){return this.scopes.includes(e)||this.scopes.push(e),this}},{key:"getScopes",value:function(){return a(this.scopes)}}]),n}(Tt),St=function(e){d(n,e);var t=v(n);function n(){return f(this,n),t.apply(this,arguments)}return h(n,[{key:"credential",value:function(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}},{key:"_credential",value:function(e){return P(e.idToken||e.accessToken,"argument-error"),vt._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}}],[{key:"credentialFromJSON",value:function(e){var t="string"==typeof e?JSON.parse(e):e;return P("providerId"in t&&"signInMethod"in t,"argument-error"),vt._fromParams(t)}},{key:"credentialFromResult",value:function(e){return n.oauthCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.oauthCredentialFromTaggedObject(e.customData||{})}},{key:"oauthCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken,a=t.oauthTokenSecret,o=t.pendingToken,s=t.nonce,u=t.providerId;if(!i&&!a&&!r&&!o||!u)return null;try{return new n(u)._credential({idToken:r,accessToken:i,nonce:s,pendingToken:o})}catch(c){return null}}}]),n}(It),Et=function(){var e=function(e){d(n,e);var t=v(n);function n(){return f(this,n),t.call(this,"facebook.com")}return h(n,null,[{key:"credential",value:function(e){return vt._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(r){return null}}}]),n}(It);return e.FACEBOOK_SIGN_IN_METHOD="facebook.com",e.PROVIDER_ID="facebook.com",e}(),Rt=function(){var e=function(e){d(n,e);var t=v(n);function n(){var e;return f(this,n),(e=t.call(this,"google.com")).addScope("profile"),e}return h(n,null,[{key:"credential",value:function(e,t){return vt._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken;if(!r&&!i)return null;try{return n.credential(r,i)}catch(a){return null}}}]),n}(It);return e.GOOGLE_SIGN_IN_METHOD="google.com",e.PROVIDER_ID="google.com",e}(),Ct=function(){var e=function(e){d(n,e);var t=v(n);function n(){return f(this,n),t.call(this,"github.com")}return h(n,null,[{key:"credential",value:function(e){return vt._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GITHUB_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(r){return null}}}]),n}(It);return e.GITHUB_SIGN_IN_METHOD="github.com",e.PROVIDER_ID="github.com",e}(),At=function(e){d(n,e);var t=v(n);function n(e,r){var i;return f(this,n),(i=t.call(this,e,e)).pendingToken=r,i}return h(n,[{key:"_getIdTokenResponse",value:function(e){return ft(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,ft(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,ft(e,t)}},{key:"toJSON",value:function(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}},{key:"buildRequest",value:function(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}],[{key:"fromJSON",value:function(e){var t="string"==typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=t.pendingToken;return r&&i&&a&&r===i?new n(r,a):null}},{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(He),Nt=function(){var e=function(e){d(n,e);var t=v(n);function n(){return f(this,n),t.call(this,"twitter.com")}return h(n,null,[{key:"credential",value:function(e,t){return vt._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthAccessToken,i=t.oauthTokenSecret;if(!r||!i)return null;try{return n.credential(r,i)}catch(a){return null}}}]),n}(It);return e.TWITTER_SIGN_IN_METHOD="twitter.com",e.PROVIDER_ID="twitter.com",e}();function Ot(e,t){return Dt.apply(this,arguments)}function Dt(){return(Dt=(0,g.Z)(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",$(t,"POST","/v1/accounts:signUp",K(t,n)));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}var Pt=function(){function e(t){f(this,e),this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}return h(e,null,[{key:"_fromIdTokenResponse",value:function(t,n,r){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return(0,g.Z)(regeneratorRuntime.mark(function a(){var o,s;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Ie._fromIdTokenResponse(t,r,i);case 2:return o=a.sent,s=Lt(r),a.abrupt("return",new e({user:o,providerId:s,_tokenResponse:r,operationType:n}));case 5:case"end":return a.stop()}},a)}))()}},{key:"_forOperation",value:function(t,n,r){return(0,g.Z)(regeneratorRuntime.mark(function i(){var a;return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,t._updateTokensIfNecessary(r,!0);case 2:return a=Lt(r),i.abrupt("return",new e({user:t,providerId:a,_tokenResponse:r,operationType:n}));case 4:case"end":return i.stop()}},i)}))()}}]),e}();function Lt(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}function Ft(){return(Ft=(0,g.Z)(regeneratorRuntime.mark(function e(t){var n,r,i,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=qe(t),e.next=3,r._initializationPromise;case 3:if(!(null===(n=r.currentUser)||void 0===n?void 0:n.isAnonymous)){e.next=5;break}return e.abrupt("return",new Pt({user:r.currentUser,providerId:null,operationType:"signIn"}));case 5:return e.next=7,Ot(r,{returnSecureToken:!0});case 7:return i=e.sent,e.next=10,Pt._fromIdTokenResponse(r,"signIn",i,!0);case 10:return a=e.sent,e.next=13,r._updateCurrentUser(a.user);case 13:return e.abrupt("return",a);case 14:case"end":return e.stop()}},e)}))).apply(this,arguments)}var Mt=function(e){d(n,e);var t=v(n);function n(e,r,i,a){var o,s;return f(this,n),(o=t.call(this,r.code,r.message)).operationType=i,o.user=a,o.name="FirebaseError",Object.setPrototypeOf(m(o),n.prototype),o.appName=e.name,o.code=r.code,o.tenantId=null!==(s=e.tenantId)&&void 0!==s?s:void 0,o.serverResponse=r.customData.serverResponse,o}return h(n,null,[{key:"_fromErrorAndOperation",value:function(e,t,r,i){return new n(e,t,r,i)}}]),n}(k.ZR);function Ut(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(function(n){throw"auth/multi-factor-auth-required"===n.code?Mt._fromErrorAndOperation(e,n,t,r):n})}function jt(e){return new Set(e.map(function(e){return e.providerId}).filter(function(e){return!!e}))}function Vt(){return(Vt=(0,g.Z)(regeneratorRuntime.mark(function e(t,n){var r,i,a,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=(0,k.m9)(t),e.next=3,zt(!0,r,n);case 3:return e.t0=ie,e.t1=r.auth,e.next=7,r.getIdToken();case 7:return e.t2=e.sent,e.t3=[n],e.t4={idToken:e.t2,deleteProvider:e.t3},e.next=12,(0,e.t0)(e.t1,e.t4);case 12:return i=e.sent,a=i.providerUserInfo,o=jt(a||[]),r.providerData=r.providerData.filter(function(e){return o.has(e.providerId)}),o.has("phone")||(r.phoneNumber=null),e.next=19,r.auth._persistUserIfCurrent(r);case 19:return e.abrupt("return",r);case 20:case"end":return e.stop()}},e)}))).apply(this,arguments)}function qt(e,t){return Bt.apply(this,arguments)}function Bt(){return(Bt=(0,g.Z)(regeneratorRuntime.mark(function e(t,n){var r,i,a=arguments;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>2&&void 0!==a[2]&&a[2],e.t0=fe,e.t1=t,e.t2=n,e.t3=t.auth,e.next=7,t.getIdToken();case 7:return e.t4=e.sent,e.t5=e.t2._linkToIdToken.call(e.t2,e.t3,e.t4),e.t6=r,e.next=12,(0,e.t0)(e.t1,e.t5,e.t6);case 12:return i=e.sent,e.abrupt("return",Pt._forOperation(t,"link",i));case 14:case"end":return e.stop()}},e)}))).apply(this,arguments)}function zt(e,t,n){return Zt.apply(this,arguments)}function Zt(){return(Zt=(0,g.Z)(regeneratorRuntime.mark(function e(t,n,r){var i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ge(n);case 2:i=!1===t?"provider-already-linked":"no-such-provider",P(jt(n.providerData).has(r)===t,n.auth,i);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Ht(e,t){return Gt.apply(this,arguments)}function Gt(){return(Gt=(0,g.Z)(regeneratorRuntime.mark(function e(t,n){var r,i,a,o,s,u,c=arguments;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>2&&void 0!==c[2]&&c[2],i=t.auth,a="reauthenticate",e.prev=2,e.next=5,fe(t,Ut(i,a,n,t),r);case 5:return P((o=e.sent).idToken,i,"internal-error"),P(s=he(o.idToken),i,"internal-error"),u=s.sub,e.abrupt("return",(P(t.uid===u,i,"user-mismatch"),Pt._forOperation(t,a,o)));case 13:throw e.prev=13,e.t0=e.catch(2),"auth/user-not-found"===(null==e.t0?void 0:e.t0.code)&&C(i,"user-mismatch"),e.t0;case 16:case"end":return e.stop()}},e,null,[[2,13]])}))).apply(this,arguments)}function Kt(e,t){return Wt.apply(this,arguments)}function Wt(){return(Wt=(0,g.Z)(regeneratorRuntime.mark(function e(t,n){var r,i,a,o,s=arguments;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>2&&void 0!==s[2]&&s[2],i="signIn",e.next=4,Ut(t,i,n);case 4:return a=e.sent,e.next=7,Pt._fromIdTokenResponse(t,i,a);case 7:if(o=e.sent,e.t0=r,e.t0){e.next=12;break}return e.next=12,t._updateCurrentUser(o.user);case 12:return e.abrupt("return",o);case 13:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Qt(e,t){return Yt.apply(this,arguments)}function Yt(){return(Yt=(0,g.Z)(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Kt(qe(t),n));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Jt(e,t){return $t.apply(this,arguments)}function $t(){return($t=(0,g.Z)(regeneratorRuntime.mark(function e(t,n){var r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=(0,k.m9)(t),e.next=3,zt(!1,r,n.providerId);case 3:return e.abrupt("return",qt(r,n));case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Xt(e,t){return en.apply(this,arguments)}function en(){return(en=(0,g.Z)(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ht((0,k.m9)(t),n));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function tn(e,t){return nn.apply(this,arguments)}function nn(){return(nn=(0,g.Z)(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",$(t,"POST","/v1/accounts:signInWithCustomToken",K(t,n)));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function rn(){return(rn=(0,g.Z)(regeneratorRuntime.mark(function e(t,n){var r,i,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=qe(t),e.next=3,tn(r,{token:n,returnSecureToken:!0});case 3:return i=e.sent,e.next=6,Pt._fromIdTokenResponse(r,"signIn",i);case 6:return a=e.sent,e.next=9,r._updateCurrentUser(a.user);case 9:return e.abrupt("return",a);case 10:case"end":return e.stop()}},e)}))).apply(this,arguments)}var an=function(){function e(t,n){f(this,e),this.factorId=t,this.uid=n.mfaEnrollmentId,this.enrollmentTime=new Date(n.enrolledAt).toUTCString(),this.displayName=n.displayName}return h(e,null,[{key:"_fromServerResponse",value:function(e,t){return"phoneInfo"in t?on._fromServerResponse(e,t):C(e,"internal-error")}}]),e}(),on=function(e){d(n,e);var t=v(n);function n(e){var r;return f(this,n),(r=t.call(this,"phone",e)).phoneNumber=e.phoneInfo,r}return h(n,null,[{key:"_fromServerResponse",value:function(e,t){return new n(t)}}]),n}(an);function sn(e,t,n){var r;P((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),P(void 0===n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(P(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(P(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}function un(){return(un=(0,g.Z)(regeneratorRuntime.mark(function e(t,n,r){var i,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=(0,k.m9)(t),a={requestType:"PASSWORD_RESET",email:n},r&&sn(i,a,r),e.next=4,rt(i,a);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function cn(){return(cn=(0,g.Z)(regeneratorRuntime.mark(function e(t,n,r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ge((0,k.m9)(t),{oobCode:n,newPassword:r});case 2:case"end":return e.stop()}},e)}))).apply(this,arguments)}function ln(){return(ln=(0,g.Z)(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ye((0,k.m9)(t),{oobCode:n});case 2:case"end":return e.stop()}},e)}))).apply(this,arguments)}function hn(e,t){return fn.apply(this,arguments)}function fn(){return(fn=(0,g.Z)(regeneratorRuntime.mark(function e(t,n){var r,i,a,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=(0,k.m9)(t),e.next=3,Ge(r,{oobCode:n});case 3:i=e.sent,a=i.requestType,e.t0=(P(a,r,"internal-error"),a),e.next="EMAIL_SIGNIN"===e.t0?8:"VERIFY_AND_CHANGE_EMAIL"===e.t0?9:"REVERT_SECOND_FACTOR_ADDITION"===e.t0?11:12;break;case 8:return e.abrupt("break",13);case 9:return P(i.newEmail,r,"internal-error"),e.abrupt("break",13);case 11:P(i.mfaInfo,r,"internal-error");case 12:P(i.email,r,"internal-error");case 13:return o=null,e.abrupt("return",(i.mfaInfo&&(o=an._fromServerResponse(qe(r),i.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.newEmail:i.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.email:i.newEmail)||null,multiFactorInfo:o},operation:a}));case 15:case"end":return e.stop()}},e)}))).apply(this,arguments)}function dn(){return(dn=(0,g.Z)(regeneratorRuntime.mark(function e(t,n){var r,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,hn((0,k.m9)(t),n);case 2:return r=e.sent,i=r.data,e.abrupt("return",i.email);case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}function vn(){return(vn=(0,g.Z)(regeneratorRuntime.mark(function e(t,n,r){var i,a,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=qe(t),e.next=3,Ot(i,{returnSecureToken:!0,email:n,password:r});case 3:return a=e.sent,e.next=6,Pt._fromIdTokenResponse(i,"signIn",a);case 6:return o=e.sent,e.next=9,i._updateCurrentUser(o.user);case 9:return e.abrupt("return",o);case 10:case"end":return e.stop()}},e)}))).apply(this,arguments)}function pn(){return(pn=(0,g.Z)(regeneratorRuntime.mark(function e(t,n,r){var i,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=(0,k.m9)(t),a={requestType:"EMAIL_SIGNIN",email:n},P(r.handleCodeInApp,i,"argument-error"),r&&sn(i,a,r),e.next=5,at(i,a);case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}function mn(){return(mn=(0,g.Z)(regeneratorRuntime.mark(function e(t,n,r){var i,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=(0,k.m9)(t),a=xt.credentialWithLink(n,r||j()),e.abrupt("return",(P(a._tenantId===(i.tenantId||null),i,"tenant-id-mismatch"),Qt(i,a)));case 2:case"end":return e.stop()}},e)}))).apply(this,arguments)}function gn(e,t){return yn.apply(this,arguments)}function yn(){return(yn=(0,g.Z)(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",W(t,"POST","/v1/accounts:createAuthUri",K(t,n)));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function kn(){return(kn=(0,g.Z)(regeneratorRuntime.mark(function e(t,n){var r,i,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r={identifier:n,continueUri:V()?j():"http://localhost"},e.next=3,gn((0,k.m9)(t),r);case 3:return i=e.sent,a=i.signinMethods,e.abrupt("return",a||[]);case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}function wn(){return(wn=(0,g.Z)(regeneratorRuntime.mark(function e(t,n){var r,i,a,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=(0,k.m9)(t),e.next=3,t.getIdToken();case 3:return e.t0=e.sent,i={requestType:"VERIFY_EMAIL",idToken:e.t0},n&&sn(r.auth,i,n),e.next=8,tt(r.auth,i);case 8:if(a=e.sent,o=a.email,e.t1=o!==t.email,!e.t1){e.next=14;break}return e.next=14,t.reload();case 14:case"end":return e.stop()}},e)}))).apply(this,arguments)}function bn(){return(bn=(0,g.Z)(regeneratorRuntime.mark(function e(t,n,r){var i,a,o,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=(0,k.m9)(t),e.next=3,t.getIdToken();case 3:return e.t0=e.sent,e.t1=n,a={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:e.t0,newEmail:e.t1},r&&sn(i.auth,a,r),e.next=9,st(i.auth,a);case 9:if(o=e.sent,s=o.email,e.t2=s!==t.email,!e.t2){e.next=15;break}return e.next=15,t.reload();case 15:case"end":return e.stop()}},e)}))).apply(this,arguments)}function _n(e,t){return xn.apply(this,arguments)}function xn(){return(xn=(0,g.Z)(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",W(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Tn(){return(Tn=(0,g.Z)(regeneratorRuntime.mark(function e(t,n){var r,i,a,o,s,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.displayName,i=n.photoURL,void 0!==r||void 0!==i){e.next=3;break}return e.abrupt("return");case 3:return a=(0,k.m9)(t),e.next=6,a.getIdToken();case 6:return e.t0=e.sent,e.t1=r,e.t2=i,e.t3=!0,o={idToken:e.t0,displayName:e.t1,photoUrl:e.t2,returnSecureToken:e.t3},e.next=13,fe(a,_n(a.auth,o));case 13:return s=e.sent,a.displayName=s.displayName||null,a.photoURL=s.photoUrl||null,(u=a.providerData.find(function(e){return"password"===e.providerId}))&&(u.displayName=a.displayName,u.photoURL=a.photoURL),e.next=19,a._updateTokensIfNecessary(s);case 19:case"end":return e.stop()}},e)}))).apply(this,arguments)}function In(e,t,n){return Sn.apply(this,arguments)}function Sn(){return(Sn=(0,g.Z)(regeneratorRuntime.mark(function e(t,n,r){var i,a,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.auth,e.next=3,t.getIdToken();case 3:return e.t0=e.sent,e.t1=!0,a={idToken:e.t0,returnSecureToken:e.t1},n&&(a.email=n),r&&(a.password=r),e.next=9,fe(t,We(i,a));case 9:return o=e.sent,e.next=12,t._updateTokensIfNecessary(o,!0);case 12:case"end":return e.stop()}},e)}))).apply(this,arguments)}var En=function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};f(this,e),this.isNewUser=t,this.providerId=n,this.profile=r},Rn=function(e){d(n,e);var t=v(n);function n(e,r,i,a){var o;return f(this,n),(o=t.call(this,e,r,i)).username=a,o}return n}(En),Cn=function(e){d(n,e);var t=v(n);function n(e,r){return f(this,n),t.call(this,e,"facebook.com",r)}return n}(En),An=function(e){d(n,e);var t=v(n);function n(e,r){return f(this,n),t.call(this,e,"github.com",r,"string"==typeof(null==r?void 0:r.login)?null==r?void 0:r.login:null)}return n}(Rn),Nn=function(e){d(n,e);var t=v(n);function n(e,r){return f(this,n),t.call(this,e,"google.com",r)}return n}(En),On=function(e){d(n,e);var t=v(n);function n(e,r,i){return f(this,n),t.call(this,e,"twitter.com",r,i)}return n}(Rn);function Dn(e){var t=e.user,n=e._tokenResponse;return t.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:function(e){var t,n;if(!e)return null;var r=e.providerId,i=e.rawUserInfo?JSON.parse(e.rawUserInfo):{},a=e.isNewUser||"identitytoolkit#SignupNewUserResponse"===e.kind;if(!r&&(null==e?void 0:e.idToken)){var o=null===(n=null===(t=he(e.idToken))||void 0===t?void 0:t.firebase)||void 0===n?void 0:n.sign_in_provider;if(o)return new En(a,"anonymous"!==o&&"custom"!==o?o:null)}if(!r)return null;switch(r){case"facebook.com":return new Cn(a,i);case"github.com":return new An(a,i);case"google.com":return new Nn(a,i);case"twitter.com":return new On(a,i,e.screenName||null);case"custom":case"anonymous":return new En(a,null);default:return new En(a,r,i)}}(n)}var Pn=function(){function t(e,n){f(this,t),this.type=e,this.credential=n}return h(t,[{key:"toJSON",value:function(){return{multiFactorSession:e({},"enroll"===this.type?"idToken":"pendingCredential",this.credential)}}}],[{key:"_fromIdtoken",value:function(e){return new t("enroll",e)}},{key:"_fromMfaPendingCredential",value:function(e){return new t("signin",e)}},{key:"fromJSON",value:function(e){var n,r;if(null==e?void 0:e.multiFactorSession){if(null===(n=e.multiFactorSession)||void 0===n?void 0:n.pendingCredential)return t._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if(null===(r=e.multiFactorSession)||void 0===r?void 0:r.idToken)return t._fromIdtoken(e.multiFactorSession.idToken)}return null}}]),t}(),Ln=function(){function e(t,n,r){f(this,e),this.session=t,this.hints=n,this.signInResolver=r}return h(e,[{key:"resolveSignIn",value:function(e){var t=this;return(0,g.Z)(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",t.signInResolver(e));case 1:case"end":return n.stop()}},n)}))()}}],[{key:"_fromError",value:function(t,n){var r=qe(t),i=(n.serverResponse.mfaInfo||[]).map(function(e){return an._fromServerResponse(r,e)});P(n.serverResponse.mfaPendingCredential,r,"internal-error");var a,o=Pn._fromMfaPendingCredential(n.serverResponse.mfaPendingCredential);return new e(o,i,(a=(0,g.Z)(regeneratorRuntime.mark(function e(t){var i,a,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._process(r,o);case 2:i=e.sent,delete n.serverResponse.mfaInfo,delete n.serverResponse.mfaPendingCredential,a=Object.assign(Object.assign({},n.serverResponse),{idToken:i.idToken,refreshToken:i.refreshToken}),e.t0=n.operationType,e.next="signIn"===e.t0?8:"reauthenticate"===e.t0?14:15;break;case 8:return e.next=10,Pt._fromIdTokenResponse(r,n.operationType,a);case 10:return s=e.sent,e.next=13,r._updateCurrentUser(s.user);case 13:return e.abrupt("return",s);case 14:return e.abrupt("return",(P(n.user,r,"internal-error"),Pt._forOperation(n.user,n.operationType,a)));case 15:C(r,"internal-error");case 16:case"end":return e.stop()}},e)})),function(e){return a.apply(this,arguments)}))}}]),e}();function Fn(e,t){return W(e,"POST","/v2/accounts/mfaEnrollment:start",K(e,t))}var Mn=function(){function e(t){var n=this;f(this,e),this.user=t,this.enrolledFactors=[],t._onReload(function(e){e.mfaInfo&&(n.enrolledFactors=e.mfaInfo.map(function(e){return an._fromServerResponse(t.auth,e)}))})}return h(e,[{key:"getSession",value:function(){var e=this;return(0,g.Z)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=Pn,t.next=3,e.user.getIdToken();case 3:return t.t1=t.sent,t.abrupt("return",t.t0._fromIdtoken.call(t.t0,t.t1));case 5:case"end":return t.stop()}},t)}))()}},{key:"enroll",value:function(e,t){var n=this;return(0,g.Z)(regeneratorRuntime.mark(function r(){var i,a,o;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return i=e,r.next=3,n.getSession();case 3:return a=r.sent,r.next=6,fe(n.user,i._process(n.user.auth,a,t));case 6:return o=r.sent,r.next=9,n.user._updateTokensIfNecessary(o);case 9:return r.abrupt("return",n.user.reload());case 10:case"end":return r.stop()}},r)}))()}},{key:"unenroll",value:function(e){var t=this;return(0,g.Z)(regeneratorRuntime.mark(function n(){var r,i,a;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return r="string"==typeof e?e:e.uid,n.next=3,t.user.getIdToken();case 3:return i=n.sent,n.next=6,fe(t.user,function(e,t){return W(e,"POST","/v2/accounts/mfaEnrollment:withdraw",K(e,t))}(t.user.auth,{idToken:i,mfaEnrollmentId:r}));case 6:return a=n.sent,t.enrolledFactors=t.enrolledFactors.filter(function(e){return e.uid!==r}),n.next=10,t.user._updateTokensIfNecessary(a);case 10:return n.prev=10,n.next=13,t.user.reload();case 13:n.next=19;break;case 15:if(n.prev=15,n.t0=n.catch(10),"auth/user-token-expired"===n.t0.code){n.next=19;break}throw n.t0;case 19:case"end":return n.stop()}},n,null,[[10,15]])}))()}}],[{key:"_fromUser",value:function(t){return new e(t)}}]),e}(),Un=new WeakMap,jn="__sak",Vn=function(){function e(t,n){f(this,e),this.storage=t,this.type=n}return h(e,[{key:"_isAvailable",value:function(){try{return this.storage?(this.storage.setItem(jn,"1"),this.storage.removeItem(jn),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}},{key:"_set",value:function(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}},{key:"_get",value:function(e){var t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}},{key:"_remove",value:function(e){return this.storage.removeItem(e),Promise.resolve()}}]),e}(),qn=function(){var e=function(e){d(n,e);var t=v(n);function n(){var e;return f(this,n),(e=t.call(this,window.localStorage,"LOCAL")).boundEventHandler=function(t,n){return e.onStorageEvent(t,n)},e.listeners={},e.localCache={},e.pollTimer=null,e.safariLocalStorageNotSynced=function(){var e=(0,k.z$)();return Ne(e)||Me(e)}()&&function(){try{return!(!window||window===window.top)}catch(n){return!1}}(),e.fallbackToPolling=Ue(),e._shouldAllowMigration=!0,e}return h(n,[{key:"forAllChangedKeys",value:function(e){for(var t=0,n=Object.keys(this.listeners);t<n.length;t++){var r=n[t],i=this.storage.getItem(r),a=this.localCache[r];i!==a&&e(r,a,i)}}},{key:"onStorageEvent",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.key){var r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){var i=this.storage.getItem(r);if(e.newValue!==i)null!==e.newValue?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}var a=function(){var e=t.storage.getItem(r);!n&&t.localCache[r]===e||t.notifyListeners(r,e)},o=this.storage.getItem(r);(0,k.w1)()&&10===document.documentMode&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,10):a()}else this.forAllChangedKeys(function(e,n,r){t.notifyListeners(e,r)})}},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t&&JSON.parse(t))}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval(function(){e.forAllChangedKeys(function(t,n,r){e.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:r}),!0)})},1e3)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"attachListener",value:function(){window.addEventListener("storage",this.boundEventHandler)}},{key:"detachListener",value:function(){window.removeEventListener("storage",this.boundEventHandler)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}},{key:"_set",value:function(e,t){var r=this,a=this;return(0,g.Z)(regeneratorRuntime.mark(function o(){return regeneratorRuntime.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,i(b(n.prototype),"_set",r).call(a,e,t);case 2:a.localCache[e]=JSON.stringify(t);case 3:case"end":return o.stop()}},o)}))()}},{key:"_get",value:function(e){var t=this,r=this;return(0,g.Z)(regeneratorRuntime.mark(function a(){var o;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,i(b(n.prototype),"_get",t).call(r,e);case 2:return o=a.sent,a.abrupt("return",(r.localCache[e]=JSON.stringify(o),o));case 4:case"end":return a.stop()}},a)}))()}},{key:"_remove",value:function(e){var t=this,r=this;return(0,g.Z)(regeneratorRuntime.mark(function a(){return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,i(b(n.prototype),"_remove",t).call(r,e);case 2:delete r.localCache[e];case 3:case"end":return a.stop()}},a)}))()}}]),n}(Vn);return e.type="LOCAL",e}(),Bn=function(){var e=function(e){d(n,e);var t=v(n);function n(){return f(this,n),t.call(this,window.sessionStorage,"SESSION")}return h(n,[{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),n}(Vn);return e.type="SESSION",e}(),zn=function(){var e=function(){function e(t){f(this,e),this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}return h(e,[{key:"isListeningto",value:function(e){return this.eventTarget===e}},{key:"handleEvent",value:function(e){var t=this;return(0,g.Z)(regeneratorRuntime.mark(function n(){var r,i,a,o,s,u,c,l;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(i=(r=e).data,a=i.eventId,o=i.eventType,s=i.data,null==(u=t.handlersMap[o])?void 0:u.size){n.next=3;break}return n.abrupt("return");case 3:return r.ports[0].postMessage({status:"ack",eventId:a,eventType:o}),c=Array.from(u).map(function(){var e=(0,g.Z)(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t(r.origin,s));case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()),n.next=7,function(e){return Promise.all(e.map((t=(0,g.Z)(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.t0=!0,e.next=4,t;case 4:return e.t1=e.sent,e.abrupt("return",{fulfilled:e.t0,value:e.t1});case 8:return e.prev=8,e.t2=e.catch(0),e.abrupt("return",{fulfilled:!1,reason:e.t2});case 11:case"end":return e.stop()}},e,null,[[0,8]])})),function(e){return t.apply(this,arguments)})));var t}(c);case 7:l=n.sent,r.ports[0].postMessage({status:"done",eventId:a,eventType:o,response:l});case 9:case"end":return n.stop()}},n)}))()}},{key:"_subscribe",value:function(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}},{key:"_unsubscribe",value:function(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||0===this.handlersMap[e].size)&&delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}],[{key:"_getInstance",value:function(t){var n=this.receivers.find(function(e){return e.isListeningto(t)});if(n)return n;var r=new e(t);return this.receivers.push(r),r}}]),e}();return e.receivers=[],e}();function Zn(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="",r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}var Hn=function(){function e(t){f(this,e),this.target=t,this.handlers=new Set}return h(e,[{key:"removeMessageHandler",value:function(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}},{key:"_send",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50,r=this;return(0,g.Z)(regeneratorRuntime.mark(function i(){var a,o,s;return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(a="undefined"!=typeof MessageChannel?new MessageChannel:null){i.next=3;break}throw new Error("connection_unavailable");case 3:return i.abrupt("return",new Promise(function(i,u){var c=Zn("",20);a.port1.start();var l=setTimeout(function(){u(new Error("unsupported_event"))},n);s={messageChannel:a,onMessage:function(e){var t=e;if(t.data.eventId===c)switch(t.data.status){case"ack":clearTimeout(l),o=setTimeout(function(){u(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),i(t.data.response);break;default:clearTimeout(l),clearTimeout(o),u(new Error("invalid_response"))}}},r.handlers.add(s),a.port1.addEventListener("message",s.onMessage),r.target.postMessage({eventType:e,eventId:c,data:t},[a.port2])}).finally(function(){s&&r.removeMessageHandler(s)}));case 4:case"end":return i.stop()}},i)}))()}}]),e}();function Gn(){return window}function Kn(){return void 0!==Gn().WorkerGlobalScope&&"function"==typeof Gn().importScripts}function Wn(){return(Wn=(0,g.Z)(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null==navigator?void 0:navigator.serviceWorker){e.next=2;break}return e.abrupt("return",null);case 2:return e.prev=2,e.next=5,navigator.serviceWorker.ready;case 5:return e.abrupt("return",e.sent.active);case 8:return e.prev=8,e.t0=e.catch(2),e.abrupt("return",null);case 11:case"end":return e.stop()}},e,null,[[2,8]])}))).apply(this,arguments)}var Qn="firebaseLocalStorageDb",Yn="firebaseLocalStorage",Jn="fbase_key",$n=function(){function e(t){f(this,e),this.request=t}return h(e,[{key:"toPromise",value:function(){var e=this;return new Promise(function(t,n){e.request.addEventListener("success",function(){t(e.request.result)}),e.request.addEventListener("error",function(){n(e.request.error)})})}}]),e}();function Xn(e,t){return e.transaction([Yn],t?"readwrite":"readonly").objectStore(Yn)}function er(){var e=indexedDB.open(Qn,1);return new Promise(function(t,n){e.addEventListener("error",function(){n(e.error)}),e.addEventListener("upgradeneeded",function(){var t=e.result;try{t.createObjectStore(Yn,{keyPath:Jn})}catch(r){n(r)}}),e.addEventListener("success",(0,g.Z)(regeneratorRuntime.mark(function n(){var r;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(!(r=e.result).objectStoreNames.contains(Yn)){n.next=5;break}t(r),n.next=13;break;case 5:return r.close(),n.next=8,function(){var e=indexedDB.deleteDatabase(Qn);return new $n(e).toPromise()}();case 8:return n.t0=t,n.next=11,er();case 11:n.t1=n.sent,(0,n.t0)(n.t1);case 13:case"end":return n.stop()}},n)})))})}function tr(e,t,n){return nr.apply(this,arguments)}function nr(){return(nr=(0,g.Z)(regeneratorRuntime.mark(function t(n,r,i){var a,o;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return o=Xn(n,!0).put((e(a={},Jn,r),e(a,"value",i),a)),t.abrupt("return",new $n(o).toPromise());case 2:case"end":return t.stop()}},t)}))).apply(this,arguments)}function rr(){return(rr=(0,g.Z)(regeneratorRuntime.mark(function e(t,n){var r,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=Xn(t,!1).get(n),e.next=3,new $n(r).toPromise();case 3:return i=e.sent,e.abrupt("return",void 0===i?null:i.value);case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}function ir(e,t){var n=Xn(e,!0).delete(t);return new $n(n).toPromise()}var ar=function(){var e=function(){function e(){f(this,e),this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(function(){},function(){})}return h(e,[{key:"_openDb",value:function(){var e=this;return(0,g.Z)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=e.db,t.t0){t.next=5;break}return t.next=4,er();case 4:e.db=t.sent;case 5:return t.abrupt("return",e.db);case 6:case"end":return t.stop()}},t)}))()}},{key:"_withRetries",value:function(e){var t=this;return(0,g.Z)(regeneratorRuntime.mark(function n(){var r,i;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:r=0;case 1:return n.prev=1,n.next=4,t._openDb();case 4:return i=n.sent,n.next=7,e(i);case 7:return n.abrupt("return",n.sent);case 10:if(n.prev=10,n.t0=n.catch(1),!(r++>3)){n.next=14;break}throw n.t0;case 14:t.db&&(t.db.close(),t.db=void 0);case 15:n.next=1;break;case 17:case"end":return n.stop()}},n,null,[[1,10]])}))()}},{key:"initializeServiceWorkerMessaging",value:function(){var e=this;return(0,g.Z)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",Kn()?e.initializeReceiver():e.initializeSender());case 1:case"end":return t.stop()}},t)}))()}},{key:"initializeReceiver",value:function(){var e=this;return(0,g.Z)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e.receiver=zn._getInstance(Kn()?self:null),e.receiver._subscribe("keyChanged",function(){var t=(0,g.Z)(regeneratorRuntime.mark(function t(n,r){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e._poll();case 2:return t.t0=t.sent.includes(r.key),t.abrupt("return",{keyProcessed:t.t0});case 4:case"end":return t.stop()}},t)}));return function(e,n){return t.apply(this,arguments)}}()),e.receiver._subscribe("ping",function(){var e=(0,g.Z)(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",["keyChanged"]);case 1:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}());case 1:case"end":return t.stop()}},t)}))()}},{key:"initializeSender",value:function(){var e=this;return(0,g.Z)(regeneratorRuntime.mark(function t(){var n,r,i;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,function(){return Wn.apply(this,arguments)}();case 2:if(e.activeServiceWorker=t.sent,e.activeServiceWorker){t.next=5;break}return t.abrupt("return");case 5:return e.sender=new Hn(e.activeServiceWorker),t.next=8,e.sender._send("ping",{},800);case 8:!(i=t.sent)||(null===(n=i[0])||void 0===n?void 0:n.fulfilled)&&(null===(r=i[0])||void 0===r?void 0:r.value.includes("keyChanged"))&&(e.serviceWorkerReceiverAvailable=!0);case 10:case"end":return t.stop()}},t)}))()}},{key:"notifyServiceWorker",value:function(e){var t=this;return(0,g.Z)(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(!t.sender||!t.activeServiceWorker||function(){var e;return(null===(e=null==navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}()!==t.activeServiceWorker){n.next=8;break}return n.prev=1,n.next=4,t.sender._send("keyChanged",{key:e},t.serviceWorkerReceiverAvailable?800:50);case 4:n.next=8;break;case 6:n.prev=6,n.t0=n.catch(1);case 8:case"end":return n.stop()}},n,null,[[1,6]])}))()}},{key:"_isAvailable",value:function(){return(0,g.Z)(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,indexedDB){e.next=3;break}return e.abrupt("return",!1);case 3:return e.next=5,er();case 5:return t=e.sent,e.next=8,tr(t,jn,"1");case 8:return e.next=10,ir(t,jn);case 10:return e.abrupt("return",!0);case 13:e.prev=13,e.t0=e.catch(0);case 15:return e.abrupt("return",!1);case 16:case"end":return e.stop()}},e,null,[[0,13]])}))()}},{key:"_withPendingWrite",value:function(e){var t=this;return(0,g.Z)(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return t.pendingWrites++,n.prev=1,n.next=4,e();case 4:return n.prev=4,t.pendingWrites--,n.finish(4);case 7:case"end":return n.stop()}},n,null,[[1,,4,7]])}))()}},{key:"_set",value:function(e,t){var n=this;return(0,g.Z)(regeneratorRuntime.mark(function r(){return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",n._withPendingWrite((0,g.Z)(regeneratorRuntime.mark(function r(){return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,n._withRetries(function(n){return tr(n,e,t)});case 2:return n.localCache[e]=t,r.abrupt("return",n.notifyServiceWorker(e));case 4:case"end":return r.stop()}},r)}))));case 1:case"end":return r.stop()}},r)}))()}},{key:"_get",value:function(e){var t=this;return(0,g.Z)(regeneratorRuntime.mark(function n(){var r;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t._withRetries(function(t){return function(e,t){return rr.apply(this,arguments)}(t,e)});case 2:return r=n.sent,n.abrupt("return",(t.localCache[e]=r,r));case 4:case"end":return n.stop()}},n)}))()}},{key:"_remove",value:function(e){var t=this;return(0,g.Z)(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",t._withPendingWrite((0,g.Z)(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t._withRetries(function(t){return ir(t,e)});case 2:return delete t.localCache[e],n.abrupt("return",t.notifyServiceWorker(e));case 4:case"end":return n.stop()}},n)}))));case 1:case"end":return n.stop()}},n)}))()}},{key:"_poll",value:function(){var e=this;return(0,g.Z)(regeneratorRuntime.mark(function t(){var n,r,i,a,o,u,c,l,h,f,d;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e._withRetries(function(e){var t=Xn(e,!1).getAll();return new $n(t).toPromise()});case 2:if(n=t.sent){t.next=5;break}return t.abrupt("return",[]);case 5:if(0===e.pendingWrites){t.next=7;break}return t.abrupt("return",[]);case 7:r=[],i=new Set,a=s(n);try{for(a.s();!(o=a.n()).done;)u=o.value,c=u.fbase_key,l=u.value,i.add(c),JSON.stringify(e.localCache[c])!==JSON.stringify(l)&&(e.notifyListeners(c,l),r.push(c))}catch(v){a.e(v)}finally{a.f()}for(h=0,f=Object.keys(e.localCache);h<f.length;h++)d=f[h],e.localCache[d]&&!i.has(d)&&(e.notifyListeners(d,null),r.push(d));return t.abrupt("return",r);case 12:case"end":return t.stop()}},t)}))()}},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval((0,g.Z)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e._poll());case 1:case"end":return t.stop()}},t)})),800)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}]),e}();return e.type="LOCAL",e}();function or(e,t){return W(e,"POST","/v2/accounts/mfaSignIn:start",K(e,t))}function sr(){return(sr=(0,g.Z)(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W(t,"GET","/v1/recaptchaParams");case 2:if(e.t0=e.sent.recaptchaSiteKey,e.t0){e.next=5;break}e.t0="";case 5:return e.abrupt("return",e.t0);case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}function ur(e){return new Promise(function(t,n){var r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=function(e){var t=A("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)})}function cr(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}var lr=1e12,hr=function(){function e(t){f(this,e),this.auth=t,this.counter=lr,this._widgets=new Map}return h(e,[{key:"render",value:function(e,t){var n=this.counter;return this._widgets.set(n,new fr(e,this.auth.name,t||{})),this.counter++,n}},{key:"reset",value:function(e){var t,n=e||lr;null===(t=this._widgets.get(n))||void 0===t||t.delete(),this._widgets.delete(n)}},{key:"getResponse",value:function(e){var t;return(null===(t=this._widgets.get(e||lr))||void 0===t?void 0:t.getResponse())||""}},{key:"execute",value:function(e){var t=this;return(0,g.Z)(regeneratorRuntime.mark(function n(){var r;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(null===(r=t._widgets.get(e||lr))||void 0===r||r.execute(),""));case 1:case"end":return n.stop()}},n)}))()}}]),e}(),fr=function(){function e(t,n,r){var i=this;f(this,e),this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=function(){i.execute()};var a="string"==typeof t?document.getElementById(t):t;P(a,"argument-error",{appName:n}),this.container=a,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}return h(e,[{key:"getResponse",value:function(){return this.checkIfDeleted(),this.responseToken}},{key:"delete",value:function(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}},{key:"execute",value:function(){var e=this;this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(function(){e.responseToken=function(e){for(var t=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",r=0;r<50;r++)t.push(n.charAt(Math.floor(Math.random()*n.length)));return t.join("")}();var t=e.params,n=t.callback,r=t["expired-callback"];if(n)try{n(e.responseToken)}catch(i){}e.timerId=window.setTimeout(function(){if(e.timerId=null,e.responseToken=null,r)try{r()}catch(i){}e.isVisible&&e.execute()},6e4)},500))}},{key:"checkIfDeleted",value:function(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}]),e}(),dr=cr("rcb"),vr=new B(3e4,6e4),pr=function(){function e(){f(this,e),this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!Gn().grecaptcha}return h(e,[{key:"load",value:function(e){var t,n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return P((t=r).length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(t),e,"argument-error"),this.shouldResolveImmediately(r)?Promise.resolve(Gn().grecaptcha):new Promise(function(t,i){var a=Gn().setTimeout(function(){i(A(e,"network-request-failed"))},vr.get());Gn()[dr]=function(){Gn().clearTimeout(a),delete Gn()[dr];var o=Gn().grecaptcha;if(o){var s=o.render;o.render=function(e,t){var r=s(e,t);return n.counter++,r},n.hostLanguage=r,t(o)}else i(A(e,"internal-error"))},ur("https://www.google.com/recaptcha/api.js??".concat((0,k.xO)({onload:dr,render:"explicit",hl:r}))).catch(function(){clearTimeout(a),i(A(e,"internal-error"))})})}},{key:"clearedOneInstance",value:function(){this.counter--}},{key:"shouldResolveImmediately",value:function(e){return!!Gn().grecaptcha&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}]),e}(),mr=function(){function e(){f(this,e)}return h(e,[{key:"load",value:function(e){return(0,g.Z)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new hr(e));case 1:case"end":return t.stop()}},t)}))()}},{key:"clearedOneInstance",value:function(){}}]),e}(),gr="recaptcha",yr={theme:"light",type:"image"},kr=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object.assign({},yr),r=arguments.length>2?arguments[2]:void 0;f(this,e),this.parameters=n,this.type=gr,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=qe(r),this.isInvisible="invisible"===this.parameters.size,P("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");var i="string"==typeof t?document.getElementById(t):t;P(i,this.auth,"argument-error"),this.container=i,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new mr:new pr,this.validateStartingState()}return h(e,[{key:"verify",value:function(){var e=this;return(0,g.Z)(regeneratorRuntime.mark(function t(){var n,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.assertNotDestroyed(),t.next=3,e.render();case 3:return n=t.sent,r=e.getAssertedRecaptcha(),t.abrupt("return",r.getResponse(n)||new Promise(function(t){e.tokenChangeListeners.add(function n(r){!r||(e.tokenChangeListeners.delete(n),t(r))}),e.isInvisible&&r.execute(n)}));case 6:case"end":return t.stop()}},t)}))()}},{key:"render",value:function(){var e=this;try{this.assertNotDestroyed()}catch(t){return Promise.reject(t)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(function(t){throw e.renderPromise=null,t})),this.renderPromise}},{key:"_reset",value:function(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}},{key:"clear",value:function(){var e=this;this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(function(t){e.container.removeChild(t)})}},{key:"validateStartingState",value:function(){P(!this.parameters.sitekey,this.auth,"argument-error"),P(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),P("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}},{key:"makeTokenCallback",value:function(e){var t=this;return function(n){if(t.tokenChangeListeners.forEach(function(e){return e(n)}),"function"==typeof e)e(n);else if("string"==typeof e){var r=Gn()[e];"function"==typeof r&&r(n)}}}},{key:"assertNotDestroyed",value:function(){P(!this.destroyed,this.auth,"internal-error")}},{key:"makeRenderPromise",value:function(){var e=this;return(0,g.Z)(regeneratorRuntime.mark(function t(){var n,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.init();case 2:if(e.widgetId){t.next=6;break}n=e.container,e.isInvisible||(r=document.createElement("div"),n.appendChild(r),n=r),e.widgetId=e.getAssertedRecaptcha().render(n,e.parameters);case 6:return t.abrupt("return",e.widgetId);case 7:case"end":return t.stop()}},t)}))()}},{key:"init",value:function(){var e=this;return(0,g.Z)(regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return P(V()&&!Kn(),e.auth,"internal-error"),t.next=3,function(){var e=null;return new Promise(function(t){"complete"!==document.readyState?(e=function(){return t()},window.addEventListener("load",e)):t()}).catch(function(t){throw e&&window.removeEventListener("load",e),t})}();case 3:return t.next=5,e._recaptchaLoader.load(e.auth,e.auth.languageCode||void 0);case 5:return e.recaptcha=t.sent,t.next=8,function(e){return sr.apply(this,arguments)}(e.auth);case 8:P(n=t.sent,e.auth,"internal-error"),e.parameters.sitekey=n;case 10:case"end":return t.stop()}},t)}))()}},{key:"getAssertedRecaptcha",value:function(){return P(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}]),e}(),wr=function(){function e(t,n){f(this,e),this.verificationId=t,this.onConfirmation=n}return h(e,[{key:"confirm",value:function(e){var t=bt._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}]),e}();function br(){return(br=(0,g.Z)(regeneratorRuntime.mark(function e(t,n,r){var i,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=qe(t),e.next=3,Tr(i,n,(0,k.m9)(r));case 3:return a=e.sent,e.abrupt("return",new wr(a,function(e){return Qt(i,e)}));case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}function _r(){return(_r=(0,g.Z)(regeneratorRuntime.mark(function e(t,n,r){var i,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=(0,k.m9)(t),e.next=3,zt(!1,i,"phone");case 3:return e.next=5,Tr(i.auth,n,(0,k.m9)(r));case 5:return a=e.sent,e.abrupt("return",new wr(a,function(e){return Jt(i,e)}));case 7:case"end":return e.stop()}},e)}))).apply(this,arguments)}function xr(){return(xr=(0,g.Z)(regeneratorRuntime.mark(function e(t,n,r){var i,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=(0,k.m9)(t),e.next=3,Tr(i.auth,n,(0,k.m9)(r));case 3:return a=e.sent,e.abrupt("return",new wr(a,function(e){return Xt(i,e)}));case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Tr(e,t,n){return Ir.apply(this,arguments)}function Ir(){return(Ir=(0,g.Z)(regeneratorRuntime.mark(function e(t,n,r){var i,a,o,s,u,c,l;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.verify();case 2:if(a=e.sent,e.prev=3,P("string"==typeof a,t,"argument-error"),P(r.type===gr,t,"argument-error"),!("session"in(o="string"==typeof n?{phoneNumber:n}:n))){e.next=17;break}if(s=o.session,!("phoneNumber"in o)){e.next=11;break}return P("enroll"===s.type,t,"internal-error"),e.next=10,Fn(t,{idToken:s.credential,phoneEnrollmentInfo:{phoneNumber:o.phoneNumber,recaptchaToken:a}});case 10:return e.abrupt("return",e.sent.phoneSessionInfo.sessionInfo);case 11:return P("signin"===s.type,t,"internal-error"),P(u=(null===(i=o.multiFactorHint)||void 0===i?void 0:i.uid)||o.multiFactorUid,t,"missing-multi-factor-info"),e.next=16,or(t,{mfaPendingCredential:s.credential,mfaEnrollmentId:u,phoneSignInInfo:{recaptchaToken:a}});case 16:return e.abrupt("return",e.sent.phoneResponseInfo.sessionInfo);case 17:return e.next=19,pt(t,{phoneNumber:o.phoneNumber,recaptchaToken:a});case 19:return c=e.sent,l=c.sessionInfo,e.abrupt("return",l);case 22:return e.prev=22,r._reset(),e.finish(22);case 25:case"end":return e.stop()}},e,null,[[3,,22,25]])}))).apply(this,arguments)}function Sr(){return(Sr=(0,g.Z)(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,qt((0,k.m9)(t),n);case 2:case"end":return e.stop()}},e)}))).apply(this,arguments)}var Er=function(){var e=function(){function e(t){f(this,e),this.providerId=e.PROVIDER_ID,this.auth=qe(t)}return h(e,[{key:"verifyPhoneNumber",value:function(e,t){return Tr(this.auth,e,(0,k.m9)(t))}}],[{key:"credential",value:function(e,t){return bt._fromVerification(e,t)}},{key:"credentialFromResult",value:function(t){return e.credentialFromTaggedObject(t)}},{key:"credentialFromError",value:function(t){return e.credentialFromTaggedObject(t.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.phoneNumber,r=t.temporaryProof;return n&&r?bt._fromTokenResponse(n,r):null}}]),e}();return e.PROVIDER_ID="phone",e.PHONE_SIGN_IN_METHOD="phone",e}();function Rr(e,t){return t?U(t):(P(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}var Cr=function(e){d(n,e);var t=v(n);function n(e){var r;return f(this,n),(r=t.call(this,"custom","custom")).params=e,r}return h(n,[{key:"_getIdTokenResponse",value:function(e){return ft(e,this._buildIdpRequest())}},{key:"_linkToIdToken",value:function(e,t){return ft(e,this._buildIdpRequest(t))}},{key:"_getReauthenticationResolver",value:function(e){return ft(e,this._buildIdpRequest())}},{key:"_buildIdpRequest",value:function(e){var t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}]),n}(He);function Ar(e){return Kt(e.auth,new Cr(e),e.bypassAuthState)}function Nr(e){var t=e.auth,n=e.user;return P(n,t,"internal-error"),Ht(n,new Cr(e),e.bypassAuthState)}function Or(e){return Dr.apply(this,arguments)}function Dr(){return(Dr=(0,g.Z)(regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.auth,r=t.user,e.abrupt("return",(P(r,n,"internal-error"),qt(r,new Cr(t),t.bypassAuthState)));case 2:case"end":return e.stop()}},e)}))).apply(this,arguments)}var Pr=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];f(this,e),this.auth=t,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}return h(e,[{key:"execute",value:function(){var e,t=this;return new Promise((e=(0,g.Z)(regeneratorRuntime.mark(function e(n,r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.pendingPromise={resolve:n,reject:r},e.prev=1,e.next=4,t.resolver._initialize(t.auth);case 4:return t.eventManager=e.sent,e.next=7,t.onExecution();case 7:t.eventManager.registerConsumer(t),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),t.reject(e.t0);case 13:case"end":return e.stop()}},e,null,[[1,10]])})),function(t,n){return e.apply(this,arguments)}))}},{key:"onAuthEvent",value:function(e){var t=this;return(0,g.Z)(regeneratorRuntime.mark(function n(){var r,i,a,o,s,u,c;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(r=e.urlResponse,i=e.sessionId,a=e.postBody,o=e.tenantId,s=e.error,u=e.type,!s){n.next=3;break}return n.abrupt("return",void t.reject(s));case 3:return c={auth:t.auth,requestUri:r,sessionId:i,tenantId:o||void 0,postBody:a||void 0,user:t.user,bypassAuthState:t.bypassAuthState},n.prev=4,n.t0=t,n.next=8,t.getIdpTask(u)(c);case 8:n.t1=n.sent,n.t0.resolve.call(n.t0,n.t1),n.next=15;break;case 12:n.prev=12,n.t2=n.catch(4),t.reject(n.t2);case 15:case"end":return n.stop()}},n,null,[[4,12]])}))()}},{key:"onError",value:function(e){this.reject(e)}},{key:"getIdpTask",value:function(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Ar;case"linkViaPopup":case"linkViaRedirect":return Or;case"reauthViaPopup":case"reauthViaRedirect":return Nr;default:C(this.auth,"internal-error")}}},{key:"resolve",value:function(e){F(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}},{key:"reject",value:function(e){F(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}},{key:"unregisterAndCleanUp",value:function(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}]),e}(),Lr=new B(2e3,1e4);function Fr(){return(Fr=(0,g.Z)(regeneratorRuntime.mark(function e(t,n,r){var i,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=qe(t),O(t,n,Tt),a=Rr(i,r),e.abrupt("return",new jr(i,"signInViaPopup",n,a).executeNotNull());case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Mr(){return(Mr=(0,g.Z)(regeneratorRuntime.mark(function e(t,n,r){var i,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return O((i=(0,k.m9)(t)).auth,n,Tt),a=Rr(i.auth,r),e.abrupt("return",new jr(i.auth,"reauthViaPopup",n,a,i).executeNotNull());case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Ur(){return(Ur=(0,g.Z)(regeneratorRuntime.mark(function e(t,n,r){var i,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return O((i=(0,k.m9)(t)).auth,n,Tt),a=Rr(i.auth,r),e.abrupt("return",new jr(i.auth,"linkViaPopup",n,a,i).executeNotNull());case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}var jr=function(){var e=function(e){d(n,e);var t=v(n);function n(e,r,i,a,o){var s;return f(this,n),(s=t.call(this,e,r,a,o)).provider=i,s.authWindow=null,s.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=m(s),s}return h(n,[{key:"executeNotNull",value:function(){var e=this;return(0,g.Z)(regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.execute();case 2:return n=t.sent,t.abrupt("return",(P(n,e.auth,"internal-error"),n));case 4:case"end":return t.stop()}},t)}))()}},{key:"onExecution",value:function(){var e=this;return(0,g.Z)(regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return F(1===e.filter.length,"Popup operations only handle one event"),n=Zn(),t.next=4,e.resolver._openPopup(e.auth,e.provider,e.filter[0],n);case 4:e.authWindow=t.sent,e.authWindow.associatedEvent=n,e.resolver._originValidation(e.auth).catch(function(t){e.reject(t)}),e.resolver._isIframeWebStorageSupported(e.auth,function(t){t||e.reject(A(e.auth,"web-storage-unsupported"))}),e.pollUserCancellation();case 9:case"end":return t.stop()}},t)}))()}},{key:"eventId",get:function(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}},{key:"cancel",value:function(){this.reject(A(this.auth,"cancelled-popup-request"))}},{key:"cleanUp",value:function(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}},{key:"pollUserCancellation",value:function(){var e=this;!function t(){var n,r;e.pollId=(null===(r=null===(n=e.authWindow)||void 0===n?void 0:n.window)||void 0===r?void 0:r.closed)?window.setTimeout(function(){e.pollId=null,e.reject(A(e.auth,"popup-closed-by-user"))},2e3):window.setTimeout(t,Lr.get())}()}}]),n}(Pr);return e.currentPopupAction=null,e}(),Vr=new Map,qr=function(e){d(n,e);var t=v(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return f(this,n),(i=t.call(this,e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,a)).eventId=null,i}return h(n,[{key:"execute",value:function(){var e=this,t=this;return(0,g.Z)(regeneratorRuntime.mark(function r(){var a,o;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(a=Vr.get(t.auth._key())){r.next=20;break}return r.prev=2,r.next=5,function(e,t){return Br.apply(this,arguments)}(t.resolver,t.auth);case 5:if(!r.sent){r.next=11;break}return r.next=8,i(b(n.prototype),"execute",e).call(t);case 8:r.t0=r.sent,r.next=12;break;case 11:r.t0=null;case 12:o=r.t0,a=function(){return Promise.resolve(o)},r.next=19;break;case 16:r.prev=16,r.t1=r.catch(2),a=function(){return Promise.reject(r.t1)};case 19:Vr.set(t.auth._key(),a);case 20:return r.abrupt("return",a());case 21:case"end":return r.stop()}},r,null,[[2,16]])}))()}},{key:"onAuthEvent",value:function(e){var t=this,r=function(){return i(b(n.prototype),"onAuthEvent",t)},a=this;return(0,g.Z)(regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if("signInViaRedirect"!==e.type){t.next=2;break}return t.abrupt("return",r().call(a,e));case 2:if("unknown"===e.type){t.next=12;break}if(!e.eventId){t.next=10;break}return t.next=6,a.auth._redirectUserForId(e.eventId);case 6:if(!(n=t.sent)){t.next=9;break}return t.abrupt("return",(a.user=n,r().call(a,e)));case 9:a.resolve(null);case 10:t.next=13;break;case 12:a.resolve(null);case 13:case"end":return t.stop()}},t)}))()}},{key:"onExecution",value:function(){return(0,g.Z)(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e)}))()}},{key:"cleanUp",value:function(){}}]),n}(Pr);function Br(){return(Br=(0,g.Z)(regeneratorRuntime.mark(function e(t,n){var r,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=Gr(n),e.next=3,Hr(t)._get(r);case 3:return e.t0=e.sent,i="true"===e.t0,e.next=7,Hr(t)._remove(r);case 7:return e.abrupt("return",i);case 8:case"end":return e.stop()}},e)}))).apply(this,arguments)}function zr(e,t){return Zr.apply(this,arguments)}function Zr(){return(Zr=(0,g.Z)(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Hr(t)._set(Gr(n),"true"));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Hr(e){return U(e._redirectPersistence)}function Gr(e){return Ee("pendingRedirect",e.config.apiKey,e.name)}function Kr(){return(Kr=(0,g.Z)(regeneratorRuntime.mark(function e(t,n,r){var i,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=qe(t),O(t,n,Tt),a=Rr(i,r),e.next=5,zr(a,i);case 5:return e.abrupt("return",a._openRedirect(i,n,"signInViaRedirect"));case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Wr(){return(Wr=(0,g.Z)(regeneratorRuntime.mark(function e(t,n,r){var i,a,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return O((i=(0,k.m9)(t)).auth,n,Tt),a=Rr(i.auth,r),e.next=5,zr(a,i.auth);case 5:return e.next=7,Xr(i);case 7:return o=e.sent,e.abrupt("return",a._openRedirect(i.auth,n,"reauthViaRedirect",o));case 9:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Qr(){return(Qr=(0,g.Z)(regeneratorRuntime.mark(function e(t,n,r){var i,a,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return O((i=(0,k.m9)(t)).auth,n,Tt),a=Rr(i.auth,r),e.next=5,zt(!1,i,n.providerId);case 5:return e.next=7,zr(a,i.auth);case 7:return e.next=9,Xr(i);case 9:return o=e.sent,e.abrupt("return",a._openRedirect(i.auth,n,"linkViaRedirect",o));case 11:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Yr(){return(Yr=(0,g.Z)(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,qe(t)._initializationPromise;case 2:return e.abrupt("return",Jr(t,n,!1));case 3:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Jr(e,t){return $r.apply(this,arguments)}function $r(){return($r=(0,g.Z)(regeneratorRuntime.mark(function e(t,n){var r,i,a,o,s=arguments;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>2&&void 0!==s[2]&&s[2],i=qe(t),a=Rr(i,n),e.next=5,new qr(i,a,r).execute();case 5:if(o=e.sent,e.t0=o&&!r,!e.t0){e.next=13;break}return delete o.user._redirectEventId,e.next=11,i._persistUserIfCurrent(o.user);case 11:return e.next=13,i._setRedirectUser(null,n);case 13:return e.abrupt("return",o);case 14:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Xr(e){return ei.apply(this,arguments)}function ei(){return(ei=(0,g.Z)(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=Zn("".concat(t.uid,":::")),t._redirectEventId=n,e.next=4,t.auth._setRedirectUser(t);case 4:return e.next=6,t.auth._persistUserIfCurrent(t);case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}},e)}))).apply(this,arguments)}var ti=function(){function e(t){f(this,e),this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}return h(e,[{key:"registerConsumer",value:function(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}},{key:"unregisterConsumer",value:function(e){this.consumers.delete(e)}},{key:"onEvent",value:function(e){var t=this;if(this.hasEventBeenHandled(e))return!1;var n=!1;return this.consumers.forEach(function(r){t.isEventForConsumer(e,r)&&(n=!0,t.sendToConsumer(e,r),t.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return ri(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}},{key:"sendToConsumer",value:function(e,t){var n;if(e.error&&!ri(e)){var r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(A(this.auth,r))}else t.onAuthEvent(e)}},{key:"isEventForConsumer",value:function(e,t){var n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}},{key:"hasEventBeenHandled",value:function(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(ni(e))}},{key:"saveEventToCache",value:function(e){this.cachedEventUids.add(ni(e)),this.lastProcessedEventTime=Date.now()}}]),e}();function ni(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(function(e){return e}).join("-")}function ri(e){var t=e.type,n=e.error;return"unknown"===t&&"auth/no-auth-event"===(null==n?void 0:n.code)}function ii(e){return ai.apply(this,arguments)}function ai(){return(ai=(0,g.Z)(regeneratorRuntime.mark(function e(t){var n,r=arguments;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},e.abrupt("return",W(t,"GET","/v1/projects",n));case 2:case"end":return e.stop()}},e)}))).apply(this,arguments)}var oi=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,si=/^https?/;function ui(){return(ui=(0,g.Z)(regeneratorRuntime.mark(function e(t){var n,r,i,a,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.config.emulator){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,ii(t);case 4:n=e.sent,r=n.authorizedDomains,i=s(r),e.prev=7,i.s();case 9:if((a=i.n()).done){e.next=20;break}if(o=a.value,e.prev=11,!ci(o)){e.next=14;break}return e.abrupt("return");case 14:e.next=18;break;case 16:e.prev=16,e.t0=e.catch(11);case 18:e.next=9;break;case 20:e.next=25;break;case 22:e.prev=22,e.t1=e.catch(7),i.e(e.t1);case 25:return e.prev=25,i.f(),e.finish(25);case 28:C(t,"unauthorized-domain");case 29:case"end":return e.stop()}},e,null,[[7,22,25,28],[11,16]])}))).apply(this,arguments)}function ci(e){var t=j(),n=new URL(t),r=n.protocol,i=n.hostname;if(e.startsWith("chrome-extension://")){var a=new URL(e);return""===a.hostname&&""===i?"chrome-extension:"===r&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===r&&a.hostname===i}if(!si.test(r))return!1;if(oi.test(e))return i===e;var o=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}var li=new B(3e4,6e4);function hi(){var e=Gn().___jsl;if(null==e?void 0:e.H)for(var t=0,n=Object.keys(e.H);t<n.length;t++){var r=n[t];if(e.H[r].r=e.H[r].r||[],e.H[r].L=e.H[r].L||[],e.H[r].r=a(e.H[r].L),e.CP)for(var i=0;i<e.CP.length;i++)e.CP[i]=null}}var fi=null;function di(e){return fi=fi||function(e){return new Promise(function(t,n){var r,i,a;function o(){hi(),gapi.load("gapi.iframes",{callback:function(){t(gapi.iframes.getContext())},ontimeout:function(){hi(),n(A(e,"network-request-failed"))},timeout:li.get()})}if(null===(i=null===(r=Gn().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(a=Gn().gapi)||void 0===a?void 0:a.load)){var s=cr("iframefcb");return Gn()[s]=function(){gapi.load?o():n(A(e,"network-request-failed"))},ur("https://apis.google.com/js/api.js?onload=".concat(s))}o()}}).catch(function(e){throw fi=null,e})}(e)}var vi=new B(5e3,15e3),pi={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},mi=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function gi(e){var t=e.config;P(t.authDomain,e,"auth-domain-config-required");var n=t.emulator?z(t,"emulator/auth/iframe"):"https://".concat(e.config.authDomain,"/__/auth/iframe"),r={apiKey:t.apiKey,appName:e.name,v:w.SDK_VERSION},i=mi.get(e.config.apiHost);i&&(r.eid=i);var a=e._getFrameworks();return a.length&&(r.fw=a.join(",")),"".concat(n,"?").concat((0,k.xO)(r).slice(1))}function yi(){return(yi=(0,g.Z)(regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,di(t);case 2:return n=e.sent,r=Gn().gapi,e.abrupt("return",(P(r,t,"internal-error"),n.open({where:document.body,url:gi(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:pi,dontclear:!0},function(e){return new Promise((n=(0,g.Z)(regeneratorRuntime.mark(function n(r,i){var a,o,s;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return s=function(){Gn().clearTimeout(o),r(e)},n.next=3,e.restyle({setHideOnLeave:!1});case 3:a=A(t,"network-request-failed"),o=Gn().setTimeout(function(){i(a)},vi.get()),e.ping(s).then(s,function(){i(a)});case 5:case"end":return n.stop()}},n)})),function(e,t){return n.apply(this,arguments)}));var n})));case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}var ki={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},wi=function(){function e(t){f(this,e),this.window=t,this.associatedEvent=null}return h(e,[{key:"close",value:function(){if(this.window)try{this.window.close()}catch(e){}}}]),e}();function bi(e,n,r,i,a,o){P(e.config.authDomain,e,"auth-domain-config-required"),P(e.config.apiKey,e,"invalid-api-key");var s={apiKey:e.config.apiKey,appName:e.name,authType:r,redirectUrl:i,v:w.SDK_VERSION,eventId:a};if(n instanceof Tt){n.setDefaultLanguage(e.languageCode),s.providerId=n.providerId||"",(0,k.xb)(n.getCustomParameters())||(s.customParameters=JSON.stringify(n.getCustomParameters()));for(var u=0,c=Object.entries(o||{});u<c.length;u++){var l=t(c[u],2),h=l[0],f=l[1];s[h]=f}}if(n instanceof It){var d=n.getScopes().filter(function(e){return""!==e});d.length>0&&(s.scopes=d.join(","))}e.tenantId&&(s.tid=e.tenantId);for(var v=s,p=0,m=Object.keys(v);p<m.length;p++){var g=m[p];void 0===v[g]&&delete v[g]}return"".concat(function(e){var t=e.config;return t.emulator?z(t,"emulator/auth/handler"):"https://".concat(t.authDomain,"/__/auth/handler")}(e),"?").concat((0,k.xO)(v).slice(1))}var _i,xi="webStorageSupport",Ti=function(e){d(n,e);var t=v(n);function n(e){var r;return f(this,n),(r=t.call(this,"phone")).credential=e,r}return h(n,[{key:"_finalizeEnroll",value:function(e,t,n){return function(e,t){return W(e,"POST","/v2/accounts/mfaEnrollment:finalize",K(e,t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}},{key:"_finalizeSignIn",value:function(e,t){return function(e,t){return W(e,"POST","/v2/accounts/mfaSignIn:finalize",K(e,t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}],[{key:"_fromCredential",value:function(e){return new n(e)}}]),n}(function(){function e(t){f(this,e),this.factorId=t}return h(e,[{key:"_process",value:function(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return L("unexpected MultiFactorSessionType")}}}]),e}()),Ii=function(){var e=function(){function e(){f(this,e)}return h(e,null,[{key:"assertion",value:function(e){return Ti._fromCredential(e)}}]),e}();return e.FACTOR_ID="phone",e}(),Si="@firebase/auth",Ei=function(){function e(t){f(this,e),this.auth=t,this.internalListeners=new Map}return h(e,[{key:"getUid",value:function(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}},{key:"getToken",value:function(e){var t=this;return(0,g.Z)(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return t.assertAuthConfigured(),n.next=3,t.auth._initializationPromise;case 3:if(!t.auth.currentUser){n.next=10;break}return n.next=6,t.auth.currentUser.getIdToken(e);case 6:n.t1=n.sent,n.t0={accessToken:n.t1},n.next=11;break;case 10:n.t0=null;case 11:return n.abrupt("return",n.t0);case 12:case"end":return n.stop()}},n)}))()}},{key:"addAuthTokenListener",value:function(e){if(this.assertAuthConfigured(),!this.internalListeners.has(e)){var t=this.auth.onIdTokenChanged(function(t){var n;e((null===(n=t)||void 0===n?void 0:n.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}}},{key:"removeAuthTokenListener",value:function(e){this.assertAuthConfigured();var t=this.internalListeners.get(e);!t||(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}},{key:"assertAuthConfigured",value:function(){P(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}},{key:"updateProactiveRefresh",value:function(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}]),e}();function Ri(){return window}function Ci(){return(Ci=(0,g.Z)(regeneratorRuntime.mark(function e(t,n,r){var i,a,o,s,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=Ri(),o=a.BuildInfo,F(n.sessionId,"AuthEvent did not contain a session ID"),e.next=4,Oi(n.sessionId);case 4:return s=e.sent,u={},e.abrupt("return",(Me()?u.ibi=o.packageName:Pe()?u.apn=o.packageName:C(t,"operation-not-supported-in-this-environment"),o.displayName&&(u.appDisplayName=o.displayName),u.sessionId=s,bi(t,r,n.type,void 0,null!==(i=n.eventId)&&void 0!==i?i:void 0,u)));case 7:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Ai(){return(Ai=(0,g.Z)(regeneratorRuntime.mark(function e(t){var n,r,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=Ri(),r=n.BuildInfo,i={},Me()?i.iosBundleId=r.packageName:Pe()?i.androidPackageName=r.packageName:C(t,"operation-not-supported-in-this-environment"),e.next=4,ii(t,i);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Ni(){return(Ni=(0,g.Z)(regeneratorRuntime.mark(function e(t,n,r){var i,a,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=Ri(),a=i.cordova,o=function(){},e.prev=2,e.next=5,new Promise(function(e,i){var s=null;function u(){var t;e();var n=null===(t=a.plugins.browsertab)||void 0===t?void 0:t.close;"function"==typeof n&&n(),"function"==typeof(null==r?void 0:r.close)&&r.close()}function c(){s||(s=window.setTimeout(function(){i(A(t,"redirect-cancelled-by-user"))},2e3))}function l(){"visible"===(null==document?void 0:document.visibilityState)&&c()}n.addPassiveListener(u),document.addEventListener("resume",c,!1),Pe()&&document.addEventListener("visibilitychange",l,!1),o=function(){n.removePassiveListener(u),document.removeEventListener("resume",c,!1),document.removeEventListener("visibilitychange",l,!1),s&&window.clearTimeout(s)}});case 5:return e.prev=5,o(),e.finish(5);case 8:case"end":return e.stop()}},e,null,[[2,,5,8]])}))).apply(this,arguments)}function Oi(e){return Di.apply(this,arguments)}function Di(){return(Di=(0,g.Z)(regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=Pi(t),e.next=3,crypto.subtle.digest("SHA-256",n);case 3:return r=e.sent,e.abrupt("return",Array.from(new Uint8Array(r)).map(function(e){return e.toString(16).padStart(2,"0")}).join(""));case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Pi(e){if(F(/[0-9a-zA-Z]+/.test(e),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(e);for(var t=new ArrayBuffer(e.length),n=new Uint8Array(t),r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}_i="Browser",(0,w._registerComponent)(new T.wA("auth",function(e,t){var n=t.options,r=e.getProvider("app").getImmediate(),i=r.options,a=i.apiKey,o=i.authDomain;return function(e){P(a&&!a.includes(":"),"invalid-api-key",{appName:e.name}),P(!(null==o?void 0:o.includes(":")),"argument-error",{appName:e.name});var t={apiKey:a,authDomain:o,clientPlatform:_i,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:je(_i)},r=new Ve(e,t);return function(e,t){var n=(null==t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(U);(null==t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null==t?void 0:t.popupRedirectResolver)}(r,n),r}(r)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(function(e,t,n){e.getProvider("auth-internal").initialize()})),(0,w._registerComponent)(new T.wA("auth-internal",function(e){var t=qe(e.getProvider("auth").getImmediate());return new Ei(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,w.registerVersion)(Si,"0.18.3",void 0),(0,w.registerVersion)(Si,"0.18.3","esm2017");var Li=function(e){d(n,e);var t=v(n);function n(){var e;return f(this,n),(e=t.apply(this,arguments)).passiveListeners=new Set,e.initPromise=new Promise(function(t){e.resolveInialized=t}),e}return h(n,[{key:"addPassiveListener",value:function(e){this.passiveListeners.add(e)}},{key:"removePassiveListener",value:function(e){this.passiveListeners.delete(e)}},{key:"resetRedirect",value:function(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}},{key:"onEvent",value:function(e){return this.resolveInialized(),this.passiveListeners.forEach(function(t){return t(e)}),i(b(n.prototype),"onEvent",this).call(this,e)}},{key:"initialized",value:function(){var e=this;return(0,g.Z)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.initPromise;case 2:case"end":return t.stop()}},t)}))()}}]),n}(ti);function Fi(e){return Mi.apply(this,arguments)}function Mi(){return(Mi=(0,g.Z)(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ji()._get(Vi(t));case 2:if(n=e.sent,e.t0=n,!e.t0){e.next=7;break}return e.next=7,ji()._remove(Vi(t));case 7:return e.abrupt("return",n);case 8:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Ui(){for(var e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",n=0;n<20;n++){var r=Math.floor(Math.random()*t.length);e.push(t.charAt(r))}return e.join("")}function ji(){return U(qn)}function Vi(e){return Ee("authEvent",e.config.apiKey,e.name)}function qi(e){if(!(null==e?void 0:e.includes("?")))return{};var t,i=e.split("?"),a=r(t=i)||o(t)||u(t)||n(),s=(a[0],a.slice(1));return(0,k.zd)(s.join("?"))}function Bi(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:A("no-auth-event")}}function zi(){var e;return(null===(e=null==self?void 0:self.location)||void 0===e?void 0:e.protocol)||null}function Zi(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,k.z$)();return!("file:"!==zi()&&"ionic:"!==zi()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function Hi(){try{var e=self.localStorage,t=Zn();if(e)return e.setItem(t,"1"),e.removeItem(t),!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,k.z$)();return(0,k.w1)()&&11===(null==document?void 0:document.documentMode)||function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,k.z$)();return/Edge\/\d+/.test(e)}(e)}()||(0,k.hl)()}catch(_i){return Gi()&&(0,k.hl)()}return!1}function Gi(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function Ki(){return("http:"===zi()||"https:"===zi()||(0,k.ru)()||Zi())&&!((0,k.b$)()||(0,k.UG)())&&Hi()&&!Gi()}function Wi(){return Zi()&&"undefined"!=typeof document}function Qi(){return(Qi=(0,g.Z)(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!!Wi()&&new Promise(function(e){var t=setTimeout(function(){e(!1)},1e3);document.addEventListener("deviceready",function(){clearTimeout(t),e(!0)})}));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}var Yi={LOCAL:"local",NONE:"none",SESSION:"session"},Ji=P,$i="persistence";function Xi(e){return ea.apply(this,arguments)}function ea(){return(ea=(0,g.Z)(regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._initializationPromise;case 2:n=ta(),r=Ee($i,t.config.apiKey,t.name),(null==n?void 0:n.sessionStorage)&&n.sessionStorage.setItem(r,t._getPersistence());case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function ta(){return"undefined"!=typeof window?window:null}var na=P,ra=function(){function e(){f(this,e),this.browserResolver=U(function(){function e(){f(this,e),this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Bn,this._completeRedirectFn=Jr}return h(e,[{key:"_openPopup",value:function(e,n,r,i){var a=this;return(0,g.Z)(regeneratorRuntime.mark(function o(){var s,u;return regeneratorRuntime.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return F(null===(s=a.eventManagers[e._key()])||void 0===s?void 0:s.manager,"_initialize() not called before _openPopup()"),u=bi(e,n,r,j(),i),o.abrupt("return",function(e,n,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600,o=Math.max((window.screen.availHeight-a)/2,0).toString(),s=Math.max((window.screen.availWidth-i)/2,0).toString(),u="",c=Object.assign(Object.assign({},ki),{width:i.toString(),height:a.toString(),top:o,left:s}),l=(0,k.z$)().toLowerCase();r&&(u=Oe(l)?"_blank":r),Ae(l)&&(n=n||"http://localhost",c.scrollbars="yes");var h=Object.entries(c).reduce(function(e,n){var r=t(n,2),i=r[0],a=r[1];return"".concat(e).concat(i,"=").concat(a,",")},"");if(function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,k.z$)();return Me(t)&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(l)&&"_self"!==u)return function(e,t){var n=document.createElement("a");n.href=e,n.target=t;var r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(n||"",u),new wi(null);var f=window.open(n||"",u,h);P(f,e,"popup-blocked");try{f.focus()}catch(d){}return new wi(f)}(e,u,Zn()));case 3:case"end":return o.stop()}},o)}))()}},{key:"_openRedirect",value:function(e,t,n,r){var i=this;return(0,g.Z)(regeneratorRuntime.mark(function a(){var o;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,i._originValidation(e);case 2:return o=bi(e,t,n,j(),r),Gn().location.href=o,a.abrupt("return",new Promise(function(){}));case 5:case"end":return a.stop()}},a)}))()}},{key:"_initialize",value:function(e){var t=e._key();if(this.eventManagers[t]){var n=this.eventManagers[t],r=n.manager,i=n.promise;return r?Promise.resolve(r):(F(i,"If manager is not set, promise should be"),i)}var a=this.initAndGetManager(e);return this.eventManagers[t]={promise:a},a}},{key:"initAndGetManager",value:function(e){var t=this;return(0,g.Z)(regeneratorRuntime.mark(function n(){var r,i;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,function(e){return yi.apply(this,arguments)}(e);case 2:return r=n.sent,i=new ti(e),n.abrupt("return",(r.register("authEvent",function(t){return P(null==t?void 0:t.authEvent,e,"invalid-auth-event"),{status:i.onEvent(t.authEvent)?"ACK":"ERROR"}},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),t.eventManagers[e._key()]={manager:i},t.iframes[e._key()]=r,i));case 5:case"end":return n.stop()}},n)}))()}},{key:"_isIframeWebStorageSupported",value:function(e,t){this.iframes[e._key()].send(xi,{type:xi},function(n){var r,i=null===(r=null==n?void 0:n[0])||void 0===r?void 0:r[xi];void 0!==i&&t(!!i),C(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return ui.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"_shouldInitProactively",get:function(){return Ue()||Ne()||Me()}}]),e}()),this.cordovaResolver=U(function(){function e(){f(this,e),this._redirectPersistence=Bn,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Jr}return h(e,[{key:"_initialize",value:function(e){var t=this;return(0,g.Z)(regeneratorRuntime.mark(function n(){var r,i;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return r=e._key(),i=t.eventManagers.get(r),n.abrupt("return",(i||(i=new Li(e),t.eventManagers.set(r,i),t.attachCallbackListeners(e,i)),i));case 3:case"end":return n.stop()}},n)}))()}},{key:"_openPopup",value:function(e){C(e,"operation-not-supported-in-this-environment")}},{key:"_openRedirect",value:function(e,t,n,r){var i=this;return(0,g.Z)(regeneratorRuntime.mark(function a(){var o,s,u,c;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return function(e){var t,n,r,i,a,o,s,u,c,l,h=Ri();P("function"==typeof(null===(t=null==h?void 0:h.universalLinks)||void 0===t?void 0:t.subscribe),e,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),P(void 0!==(null===(n=null==h?void 0:h.BuildInfo)||void 0===n?void 0:n.packageName),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),P("function"==typeof(null===(a=null===(i=null===(r=null==h?void 0:h.cordova)||void 0===r?void 0:r.plugins)||void 0===i?void 0:i.browsertab)||void 0===a?void 0:a.openUrl),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),P("function"==typeof(null===(u=null===(s=null===(o=null==h?void 0:h.cordova)||void 0===o?void 0:o.plugins)||void 0===s?void 0:s.browsertab)||void 0===u?void 0:u.isAvailable),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),P("function"==typeof(null===(l=null===(c=null==h?void 0:h.cordova)||void 0===c?void 0:c.InAppBrowser)||void 0===l?void 0:l.open),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(e),a.next=3,i._initialize(e);case 3:return o=a.sent,a.next=6,o.initialized();case 6:return o.resetRedirect(),Vr.clear(),a.next=10,i._originValidation(e);case 10:return s=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return{type:t,eventId:n,urlResponse:null,sessionId:Ui(),postBody:null,tenantId:e.tenantId,error:A(e,"no-auth-event")}}(e,n,r),a.next=13,function(e,t){return ji()._set(Vi(e),t)}(e,s);case 13:return a.next=15,function(e,t,n){return Ci.apply(this,arguments)}(e,s,t);case 15:return u=a.sent,a.next=18,function(e){var t=Ri().cordova;return new Promise(function(n){t.plugins.browsertab.isAvailable(function(r){var i=null;r?t.plugins.browsertab.openUrl(e):i=t.InAppBrowser.open(e,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,k.z$)();return/(iPad|iPhone|iPod).*OS 7_\d/i.test(e)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(e)}()?"_blank":"_system","location=yes"),n(i)})})}(u);case 18:return c=a.sent,a.abrupt("return",function(e,t,n){return Ni.apply(this,arguments)}(e,o,c));case 20:case"end":return a.stop()}},a)}))()}},{key:"_isIframeWebStorageSupported",value:function(e,t){throw new Error("Method not implemented.")}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return Ai.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"attachCallbackListeners",value:function(e,t){var n,r=Ri(),i=r.universalLinks,a=r.handleOpenURL,o=r.BuildInfo,s=setTimeout((0,g.Z)(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Fi(e);case 2:t.onEvent(Bi());case 3:case"end":return n.stop()}},n)})),500),u=(n=(0,g.Z)(regeneratorRuntime.mark(function n(r){var i,a;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return clearTimeout(s),n.next=3,Fi(e);case 3:i=n.sent,a=null,i&&(null==r?void 0:r.url)&&(a=function(e,t){var n,r,i=function(e){var t=qi(e),n=t.link?decodeURIComponent(t.link):void 0,r=qi(n).link,i=t.deep_link_id?decodeURIComponent(t.deep_link_id):void 0;return qi(i).link||i||r||n||e}(t);if(i.includes("/__/auth/callback")){var a=qi(i),o=a.firebaseError?function(e){try{return JSON.parse(e)}catch(t){return null}}(decodeURIComponent(a.firebaseError)):null,s=null===(r=null===(n=null==o?void 0:o.code)||void 0===n?void 0:n.split("auth/"))||void 0===r?void 0:r[1],u=s?A(s):null;return u?{type:e.type,eventId:e.eventId,tenantId:e.tenantId,error:u,urlResponse:null,sessionId:null,postBody:null}:{type:e.type,eventId:e.eventId,tenantId:e.tenantId,sessionId:e.sessionId,urlResponse:i,postBody:null}}return null}(i,r.url)),t.onEvent(a||Bi());case 6:case"end":return n.stop()}},n)})),function(e){return n.apply(this,arguments)});void 0!==i&&"function"==typeof i.subscribe&&i.subscribe(null,u);var c=a,l="".concat(o.packageName.toLowerCase(),"://");Ri().handleOpenURL=function(){var e=(0,g.Z)(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.toLowerCase().startsWith(l)&&u({url:t}),"function"==typeof c)try{c(t)}catch(n){console.error(n)}case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()}}]),e}()),this.underlyingResolver=null,this._redirectPersistence=Bn,this._completeRedirectFn=Jr}return h(e,[{key:"_initialize",value:function(e){var t=this;return(0,g.Z)(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.selectUnderlyingResolver();case 2:return n.abrupt("return",t.assertedUnderlyingResolver._initialize(e));case 3:case"end":return n.stop()}},n)}))()}},{key:"_openPopup",value:function(e,t,n,r){var i=this;return(0,g.Z)(regeneratorRuntime.mark(function a(){return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,i.selectUnderlyingResolver();case 2:return a.abrupt("return",i.assertedUnderlyingResolver._openPopup(e,t,n,r));case 3:case"end":return a.stop()}},a)}))()}},{key:"_openRedirect",value:function(e,t,n,r){var i=this;return(0,g.Z)(regeneratorRuntime.mark(function a(){return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,i.selectUnderlyingResolver();case 2:return a.abrupt("return",i.assertedUnderlyingResolver._openRedirect(e,t,n,r));case 3:case"end":return a.stop()}},a)}))()}},{key:"_isIframeWebStorageSupported",value:function(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}},{key:"_originValidation",value:function(e){return this.assertedUnderlyingResolver._originValidation(e)}},{key:"_shouldInitProactively",get:function(){return Wi()||this.browserResolver._shouldInitProactively}},{key:"assertedUnderlyingResolver",get:function(){return na(this.underlyingResolver,"internal-error"),this.underlyingResolver}},{key:"selectUnderlyingResolver",value:function(){var e=this;return(0,g.Z)(regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.underlyingResolver){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,function(){return Qi.apply(this,arguments)}();case 4:n=t.sent,e.underlyingResolver=n?e.cordovaResolver:e.browserResolver;case 6:case"end":return t.stop()}},t)}))()}}]),e}();function ia(e){return e.unwrap()}function aa(e){return oa(e)}function oa(e){var t=(e instanceof k.ZR?e.customData:e)._tokenResponse;if(!t)return null;if(!(e instanceof k.ZR)&&"temporaryProof"in t&&"phoneNumber"in t)return Er.credentialFromResult(e);var n,r=t.providerId;if(!r||"password"===r)return null;switch(r){case"google.com":n=Rt;break;case"facebook.com":n=Et;break;case"github.com":n=Ct;break;case"twitter.com":n=Nt;break;default:var i=t.oauthIdToken,a=t.oauthAccessToken,o=t.oauthTokenSecret,s=t.pendingToken,u=t.nonce;return a||o||i||s?s?r.startsWith("saml.")?At._create(r,s):vt._fromParams({providerId:r,signInMethod:r,pendingToken:s,idToken:i,accessToken:a}):new St(r).credential({idToken:i,accessToken:a,rawNonce:u}):null}return e instanceof k.ZR?n.credentialFromError(e):n.credentialFromResult(e)}function sa(e,t){return t.catch(function(t){throw t instanceof k.ZR&&function(e,t){var n,r=null===(n=t.customData)||void 0===n?void 0:n._tokenResponse;if("auth/multi-factor-auth-required"===t.code)t.resolver=new la(e,function(e,t){var n,r=(0,k.m9)(e),i=t;return P(t.operationType,r,"argument-error"),P(null===(n=i.serverResponse)||void 0===n?void 0:n.mfaPendingCredential,r,"argument-error"),Ln._fromError(r,i)}(e,t));else if(r){var i=oa(t),a=t;i&&(a.credential=i,a.tenantId=r.tenantId||void 0,a.email=r.email||void 0,a.phoneNumber=r.phoneNumber||void 0)}}(e,t),t}).then(function(e){var t=e.user;return{operationType:e.operationType,credential:aa(e),additionalUserInfo:Dn(e),user:ha.getOrCreate(t)}})}function ua(e,t){return ca.apply(this,arguments)}function ca(){return(ca=(0,g.Z)(regeneratorRuntime.mark(function e(t,n){var r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n;case 2:return r=e.sent,e.abrupt("return",{verificationId:r.verificationId,confirm:function(e){return sa(t,r.confirm(e))}});case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}var la=function(){function e(t,n){f(this,e),this.resolver=n,this.auth=function(e){return e.wrapped()}(t)}return h(e,[{key:"session",get:function(){return this.resolver.session}},{key:"hints",get:function(){return this.resolver.hints}},{key:"resolveSignIn",value:function(e){return sa(ia(this.auth),this.resolver.resolveSignIn(e))}}]),e}(),ha=function(){function e(t){f(this,e),this._delegate=t,this.multiFactor=function(e){var t=(0,k.m9)(e);return Un.has(t)||Un.set(t,Mn._fromUser(t)),Un.get(t)}(t)}return h(e,[{key:"delete",value:function(){return this._delegate.delete()}},{key:"reload",value:function(){return this._delegate.reload()}},{key:"toJSON",value:function(){return this._delegate.toJSON()}},{key:"getIdTokenResult",value:function(e){return this._delegate.getIdTokenResult(e)}},{key:"getIdToken",value:function(e){return this._delegate.getIdToken(e)}},{key:"linkAndRetrieveDataWithCredential",value:function(e){return this.linkWithCredential(e)}},{key:"linkWithCredential",value:function(e){var t=this;return(0,g.Z)(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",sa(t.auth,Jt(t._delegate,e)));case 1:case"end":return n.stop()}},n)}))()}},{key:"linkWithPhoneNumber",value:function(e,t){var n=this;return(0,g.Z)(regeneratorRuntime.mark(function r(){return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",ua(n.auth,function(e,t,n){return _r.apply(this,arguments)}(n._delegate,e,t)));case 1:case"end":return r.stop()}},r)}))()}},{key:"linkWithPopup",value:function(e){var t=this;return(0,g.Z)(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",sa(t.auth,function(e,t,n){return Ur.apply(this,arguments)}(t._delegate,e,ra)));case 1:case"end":return n.stop()}},n)}))()}},{key:"linkWithRedirect",value:function(e){var t=this;return(0,g.Z)(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Xi(qe(t.auth));case 2:return n.abrupt("return",function(e,t,n){return function(e,t,n){return Qr.apply(this,arguments)}(e,t,n)}(t._delegate,e,ra));case 3:case"end":return n.stop()}},n)}))()}},{key:"reauthenticateAndRetrieveDataWithCredential",value:function(e){return this.reauthenticateWithCredential(e)}},{key:"reauthenticateWithCredential",value:function(e){var t=this;return(0,g.Z)(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",sa(t.auth,Xt(t._delegate,e)));case 1:case"end":return n.stop()}},n)}))()}},{key:"reauthenticateWithPhoneNumber",value:function(e,t){return ua(this.auth,function(e,t,n){return xr.apply(this,arguments)}(this._delegate,e,t))}},{key:"reauthenticateWithPopup",value:function(e){return sa(this.auth,function(e,t,n){return Mr.apply(this,arguments)}(this._delegate,e,ra))}},{key:"reauthenticateWithRedirect",value:function(e){var t=this;return(0,g.Z)(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Xi(qe(t.auth));case 2:return n.abrupt("return",function(e,t,n){return function(e,t,n){return Wr.apply(this,arguments)}(e,t,n)}(t._delegate,e,ra));case 3:case"end":return n.stop()}},n)}))()}},{key:"sendEmailVerification",value:function(e){return function(e,t){return wn.apply(this,arguments)}(this._delegate,e)}},{key:"unlink",value:function(e){var t=this;return(0,g.Z)(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,function(e,t){return Vt.apply(this,arguments)}(t._delegate,e);case 2:return n.abrupt("return",t);case 3:case"end":return n.stop()}},n)}))()}},{key:"updateEmail",value:function(e){return function(e,t){return In((0,k.m9)(e),t,null)}(this._delegate,e)}},{key:"updatePassword",value:function(e){return function(e,t){return In((0,k.m9)(e),null,t)}(this._delegate,e)}},{key:"updatePhoneNumber",value:function(e){return function(e,t){return Sr.apply(this,arguments)}(this._delegate,e)}},{key:"updateProfile",value:function(e){return function(e,t){return Tn.apply(this,arguments)}(this._delegate,e)}},{key:"verifyBeforeUpdateEmail",value:function(e,t){return function(e,t,n){return bn.apply(this,arguments)}(this._delegate,e,t)}},{key:"emailVerified",get:function(){return this._delegate.emailVerified}},{key:"isAnonymous",get:function(){return this._delegate.isAnonymous}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"phoneNumber",get:function(){return this._delegate.phoneNumber}},{key:"providerData",get:function(){return this._delegate.providerData}},{key:"refreshToken",get:function(){return this._delegate.refreshToken}},{key:"tenantId",get:function(){return this._delegate.tenantId}},{key:"displayName",get:function(){return this._delegate.displayName}},{key:"email",get:function(){return this._delegate.email}},{key:"photoURL",get:function(){return this._delegate.photoURL}},{key:"providerId",get:function(){return this._delegate.providerId}},{key:"uid",get:function(){return this._delegate.uid}},{key:"auth",get:function(){return this._delegate.auth}}],[{key:"getOrCreate",value:function(t){return e.USER_MAP.has(t)||e.USER_MAP.set(t,new e(t)),e.USER_MAP.get(t)}}]),e}();ha.USER_MAP=new WeakMap;var fa=P,da=function(){var e=function(){function e(t,n){if(f(this,e),this.app=t,n.isInitialized())return this._delegate=n.getImmediate(),void this.linkUnderlyingAuth();var r=t.options.apiKey;fa(r,"invalid-api-key",{appName:t.name});var i=[Se];if("undefined"!=typeof window){i=function(e,t){var n=ta();if(!(null==n?void 0:n.sessionStorage))return[];var r=Ee($i,e,t);switch(n.sessionStorage.getItem(r)){case Yi.NONE:return[Se];case Yi.LOCAL:return[ar,Bn];case Yi.SESSION:return[Bn];default:return[]}}(r,t.name);for(var a=0,o=[ar,qn,Bn];a<o.length;a++){var s=o[a];i.includes(s)||i.push(s)}}fa(r,"invalid-api-key",{appName:t.name});var u="undefined"!=typeof window?ra:void 0;this._delegate=n.initialize({options:{persistence:i,popupRedirectResolver:u}}),this._delegate._updateErrorMap(I),this.linkUnderlyingAuth()}return h(e,[{key:"emulatorConfig",get:function(){return this._delegate.emulatorConfig}},{key:"currentUser",get:function(){return this._delegate.currentUser?ha.getOrCreate(this._delegate.currentUser):null}},{key:"languageCode",get:function(){return this._delegate.languageCode},set:function(e){this._delegate.languageCode=e}},{key:"settings",get:function(){return this._delegate.settings}},{key:"tenantId",get:function(){return this._delegate.tenantId},set:function(e){this._delegate.tenantId=e}},{key:"useDeviceLanguage",value:function(){this._delegate.useDeviceLanguage()}},{key:"signOut",value:function(){return this._delegate.signOut()}},{key:"useEmulator",value:function(e,n){!function(e,n,r){var i=qe(e);P(i._canInitEmulator,i,"emulator-config-failed"),P(/^https?:\/\//.test(n),i,"invalid-emulator-scheme");var a=!!(null==r?void 0:r.disableWarnings),o=ze(n),s=function(e){var n=ze(e),r=/(\/\/)?([^?#/]+)/.exec(e.substr(n.length));if(!r)return{host:"",port:null};var i=r[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(i);if(a){var o=a[1];return{host:o,port:Ze(i.substr(o.length+1))}}var s=t(i.split(":"),2);return{host:s[0],port:Ze(s[1])}}(n),u=s.host,c=s.port;i.config.emulator={url:"".concat(o,"//").concat(u).concat(null===c?"":":".concat(c),"/")},i.settings.appVerificationDisabledForTesting=!0,i.emulatorConfig=Object.freeze({host:u,port:c,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:a})}),a||function(){function e(){var e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}(this._delegate,e,n)}},{key:"applyActionCode",value:function(e){return function(e,t){return ln.apply(this,arguments)}(this._delegate,e)}},{key:"checkActionCode",value:function(e){return hn(this._delegate,e)}},{key:"confirmPasswordReset",value:function(e,t){return function(e,t,n){return cn.apply(this,arguments)}(this._delegate,e,t)}},{key:"createUserWithEmailAndPassword",value:function(e,t){var n=this;return(0,g.Z)(regeneratorRuntime.mark(function r(){return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",sa(n._delegate,function(e,t,n){return vn.apply(this,arguments)}(n._delegate,e,t)));case 1:case"end":return r.stop()}},r)}))()}},{key:"fetchProvidersForEmail",value:function(e){return this.fetchSignInMethodsForEmail(e)}},{key:"fetchSignInMethodsForEmail",value:function(e){return function(e,t){return kn.apply(this,arguments)}(this._delegate,e)}},{key:"isSignInWithEmailLink",value:function(e){return function(e,t){var n=_t.parseLink(t);return"EMAIL_SIGNIN"===(null==n?void 0:n.operation)}(0,e)}},{key:"getRedirectResult",value:function(){var e=this;return(0,g.Z)(regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return fa(Ki(),e._delegate,"operation-not-supported-in-this-environment"),t.next=3,function(e,t){return Yr.apply(this,arguments)}(e._delegate,ra);case 3:return n=t.sent,t.abrupt("return",n?sa(e._delegate,Promise.resolve(n)):{credential:null,user:null});case 5:case"end":return t.stop()}},t)}))()}},{key:"addFrameworkForLogging",value:function(e){!function(e,t){qe(e)._logFramework(t)}(this._delegate,e)}},{key:"onAuthStateChanged",value:function(e,t,n){var r=va(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onAuthStateChanged(i,a,o)}},{key:"onIdTokenChanged",value:function(e,t,n){var r=va(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onIdTokenChanged(i,a,o)}},{key:"sendSignInLinkToEmail",value:function(e,t){return function(e,t,n){return pn.apply(this,arguments)}(this._delegate,e,t)}},{key:"sendPasswordResetEmail",value:function(e,t){return function(e,t,n){return un.apply(this,arguments)}(this._delegate,e,t||void 0)}},{key:"setPersistence",value:function(e){var t=this;return(0,g.Z)(regeneratorRuntime.mark(function n(){var r;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:n.t0=(function(e,t){Ji(Object.values(Yi).includes(t),e,"invalid-persistence-type"),(0,k.b$)()?Ji(t!==Yi.SESSION,e,"unsupported-persistence-type"):(0,k.UG)()?Ji(t===Yi.NONE,e,"unsupported-persistence-type"):Gi()?Ji(t===Yi.NONE||t===Yi.LOCAL&&(0,k.hl)(),e,"unsupported-persistence-type"):Ji(t===Yi.NONE||Hi(),e,"unsupported-persistence-type")}(t._delegate,e),e),n.next=n.t0===Yi.SESSION?3:n.t0===Yi.LOCAL?5:n.t0===Yi.NONE?14:16;break;case 3:return r=Bn,n.abrupt("break",17);case 5:return n.next=7,U(ar)._isAvailable();case 7:if(!n.sent){n.next=11;break}n.t1=ar,n.next=12;break;case 11:n.t1=qn;case 12:return r=n.t1,n.abrupt("break",17);case 14:return r=Se,n.abrupt("break",17);case 16:return n.abrupt("return",C("argument-error",{appName:t._delegate.name}));case 17:return n.abrupt("return",t._delegate.setPersistence(r));case 18:case"end":return n.stop()}},n)}))()}},{key:"signInAndRetrieveDataWithCredential",value:function(e){return this.signInWithCredential(e)}},{key:"signInAnonymously",value:function(){return sa(this._delegate,function(e){return Ft.apply(this,arguments)}(this._delegate))}},{key:"signInWithCredential",value:function(e){return sa(this._delegate,Qt(this._delegate,e))}},{key:"signInWithCustomToken",value:function(e){return sa(this._delegate,function(e,t){return rn.apply(this,arguments)}(this._delegate,e))}},{key:"signInWithEmailAndPassword",value:function(e,t){return sa(this._delegate,function(e,t,n){return Qt((0,k.m9)(e),xt.credential(t,n))}(this._delegate,e,t))}},{key:"signInWithEmailLink",value:function(e,t){return sa(this._delegate,function(e,t,n){return mn.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPhoneNumber",value:function(e,t){return ua(this._delegate,function(e,t,n){return br.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPopup",value:function(e){var t=this;return(0,g.Z)(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(fa(Ki(),t._delegate,"operation-not-supported-in-this-environment"),sa(t._delegate,function(e,t,n){return Fr.apply(this,arguments)}(t._delegate,e,ra))));case 1:case"end":return n.stop()}},n)}))()}},{key:"signInWithRedirect",value:function(e){var t=this;return(0,g.Z)(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return fa(Ki(),t._delegate,"operation-not-supported-in-this-environment"),n.next=3,Xi(t._delegate);case 3:return n.abrupt("return",function(e,t,n){return function(e,t,n){return Kr.apply(this,arguments)}(e,t,n)}(t._delegate,e,ra));case 4:case"end":return n.stop()}},n)}))()}},{key:"updateCurrentUser",value:function(e){return this._delegate.updateCurrentUser(e)}},{key:"verifyPasswordResetCode",value:function(e){return function(e,t){return dn.apply(this,arguments)}(this._delegate,e)}},{key:"unwrap",value:function(){return this._delegate}},{key:"_delete",value:function(){return this._delegate._delete()}},{key:"linkUnderlyingAuth",value:function(){var e=this;this._delegate.wrapped=function(){return e}}}]),e}();return e.Persistence=Yi,e}();function va(e,t,n){var r,i=e;"function"!=typeof e&&(i=(r=e).next,t=r.error,n=r.complete);var a=i;return{next:function(e){return a(e&&ha.getOrCreate(e))},error:t,complete:n}}var pa=function(){function e(){f(this,e),this.providerId="phone",this._delegate=new Er(ia(y.Z.auth()))}return h(e,[{key:"verifyPhoneNumber",value:function(e,t){return this._delegate.verifyPhoneNumber(e,t)}},{key:"unwrap",value:function(){return this._delegate}}],[{key:"credential",value:function(e,t){return Er.credential(e,t)}}]),e}();pa.PHONE_SIGN_IN_METHOD=Er.PHONE_SIGN_IN_METHOD,pa.PROVIDER_ID=Er.PROVIDER_ID;var ma=P,ga=function(){function e(t,n){var r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:y.Z.app();f(this,e),ma(null===(r=i.options)||void 0===r?void 0:r.apiKey,"invalid-api-key",{appName:i.name}),this._delegate=new kr(t,n,i.auth()),this.type=this._delegate.type}return h(e,[{key:"clear",value:function(){this._delegate.clear()}},{key:"render",value:function(){return this._delegate.render()}},{key:"verify",value:function(){return this._delegate.verify()}}]),e}();!function(e){e.INTERNAL.registerComponent(new T.wA("auth-compat",function(e){var t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("auth");return new da(t,n)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:xt,FacebookAuthProvider:Et,GithubAuthProvider:Ct,GoogleAuthProvider:Rt,OAuthProvider:St,PhoneAuthProvider:pa,PhoneMultiFactorGenerator:Ii,RecaptchaVerifier:ga,TwitterAuthProvider:Nt,Auth:da,AuthCredential:He,Error:k.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),e.registerVersion("@firebase/auth-compat","0.1.6")}(y.Z)},6676:function(e,t){!function(e){"use strict";function t(e){return Array.prototype.slice.call(e)}function n(e){return new Promise(function(t,n){e.onsuccess=function(){t(e.result)},e.onerror=function(){n(e.error)}})}function r(e,t,r){var i,a=new Promise(function(a,o){n(i=e[t].apply(e,r)).then(a,o)});return a.request=i,a}function i(e,t,n){var i=r(e,t,n);return i.then(function(e){if(e)return new l(e,i.request)})}function a(e,t,n){n.forEach(function(n){Object.defineProperty(e.prototype,n,{get:function(){return this[t][n]},set:function(e){this[t][n]=e}})})}function o(e,t,n,i){i.forEach(function(i){i in n.prototype&&(e.prototype[i]=function(){return r(this[t],i,arguments)})})}function s(e,t,n,r){r.forEach(function(r){r in n.prototype&&(e.prototype[r]=function(){return this[t][r].apply(this[t],arguments)})})}function u(e,t,n,r){r.forEach(function(r){r in n.prototype&&(e.prototype[r]=function(){return i(this[t],r,arguments)})})}function c(e){this._index=e}function l(e,t){this._cursor=e,this._request=t}function h(e){this._store=e}function f(e){this._tx=e,this.complete=new Promise(function(t,n){e.oncomplete=function(){t()},e.onerror=function(){n(e.error)},e.onabort=function(){n(e.error)}})}function d(e,t,n){this._db=e,this.oldVersion=t,this.transaction=new f(n)}function v(e){this._db=e}a(c,"_index",["name","keyPath","multiEntry","unique"]),o(c,"_index",IDBIndex,["get","getKey","getAll","getAllKeys","count"]),u(c,"_index",IDBIndex,["openCursor","openKeyCursor"]),a(l,"_cursor",["direction","key","primaryKey","value"]),o(l,"_cursor",IDBCursor,["update","delete"]),["advance","continue","continuePrimaryKey"].forEach(function(e){e in IDBCursor.prototype&&(l.prototype[e]=function(){var t=this,r=arguments;return Promise.resolve().then(function(){return t._cursor[e].apply(t._cursor,r),n(t._request).then(function(e){if(e)return new l(e,t._request)})})})}),h.prototype.createIndex=function(){return new c(this._store.createIndex.apply(this._store,arguments))},h.prototype.index=function(){return new c(this._store.index.apply(this._store,arguments))},a(h,"_store",["name","keyPath","indexNames","autoIncrement"]),o(h,"_store",IDBObjectStore,["put","add","delete","clear","get","getAll","getKey","getAllKeys","count"]),u(h,"_store",IDBObjectStore,["openCursor","openKeyCursor"]),s(h,"_store",IDBObjectStore,["deleteIndex"]),f.prototype.objectStore=function(){return new h(this._tx.objectStore.apply(this._tx,arguments))},a(f,"_tx",["objectStoreNames","mode"]),s(f,"_tx",IDBTransaction,["abort"]),d.prototype.createObjectStore=function(){return new h(this._db.createObjectStore.apply(this._db,arguments))},a(d,"_db",["name","version","objectStoreNames"]),s(d,"_db",IDBDatabase,["deleteObjectStore","close"]),v.prototype.transaction=function(){return new f(this._db.transaction.apply(this._db,arguments))},a(v,"_db",["name","version","objectStoreNames"]),s(v,"_db",IDBDatabase,["close"]),["openCursor","openKeyCursor"].forEach(function(e){[h,c].forEach(function(n){e in n.prototype&&(n.prototype[e.replace("open","iterate")]=function(){var n=t(arguments),r=n[n.length-1],i=this._store||this._index,a=i[e].apply(i,n.slice(0,-1));a.onsuccess=function(){r(a.result)}})})}),[c,h].forEach(function(e){e.prototype.getAll||(e.prototype.getAll=function(e,t){var n=this,r=[];return new Promise(function(i){n.iterateCursor(e,function(e){e?(r.push(e.value),void 0===t||r.length!=t?e.continue():i(r)):i(r)})})})}),e.openDb=function(e,t,n){var i=r(indexedDB,"open",[e,t]),a=i.request;return a&&(a.onupgradeneeded=function(e){n&&n(new d(a.result,e.oldVersion,a.transaction))}),i.then(function(e){return new v(e)})},e.deleteDb=function(e){return r(indexedDB,"deleteDatabase",[e])},Object.defineProperty(e,"__esModule",{value:!0})}(t)},7574:function(e,t,n){"use strict";n.d(t,{y:function(){return l}});var r,i=n(7393),a=n(9181),o=n(6490),s=n(6554),u=n(4487),c=n(2494),l=((r=function(e){function t(e){f(this,t),this._isScalar=!1,e&&(this._subscribe=e)}return h(t,[{key:"lift",value:function(e){var n=new t;return n.source=this,n.operator=e,n}},{key:"subscribe",value:function(e,t,n){var r=this.operator,s=function(e,t,n){if(e){if(e instanceof i.L)return e;if(e[a.b])return e[a.b]()}return e||t||n?new i.L(e,t,n):new i.L(o.c)}(e,t,n);if(s.add(r?r.call(s,this.source):this.source||c.v.useDeprecatedSynchronousErrorHandling&&!s.syncErrorThrowable?this._subscribe(s):this._trySubscribe(s)),c.v.useDeprecatedSynchronousErrorHandling&&s.syncErrorThrowable&&(s.syncErrorThrowable=!1,s.syncErrorThrown))throw s.syncErrorValue;return s}},{key:"_trySubscribe",value:function(e){try{return this._subscribe(e)}catch(t){c.v.useDeprecatedSynchronousErrorHandling&&(e.syncErrorThrown=!0,e.syncErrorValue=t),function(e){for(;e;){var t=e,n=t.closed,r=t.destination,a=t.isStopped;if(n||a)return!1;e=r&&r instanceof i.L?r:null}return!0}(e)?e.error(t):console.warn(t)}}},{key:"forEach",value:function(e,t){var n=this;return new(t=d(t))(function(t,r){var i;i=n.subscribe(function(t){try{e(t)}catch(n){r(n),i&&i.unsubscribe()}},r,t)})}},{key:"_subscribe",value:function(e){var t=this.source;return t&&t.subscribe(e)}},{key:e,value:function(){return this}},{key:"pipe",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?this:function(e){return 0===e.length?u.y:1===e.length?e[0]:function(t){return e.reduce(function(e,t){return t(e)},t)}}(t)(this)}},{key:"toPromise",value:function(e){var t=this;return new(e=d(e))(function(e,n){var r;t.subscribe(function(e){return r=e},function(e){return n(e)},function(){return e(r)})})}}]),t}(s.L)).create=function(e){return new r(e)},r);function d(e){if(e||(e=c.v.Promise||Promise),!e)throw new Error("no Promise impl found");return e}},6490:function(e,t,n){"use strict";n.d(t,{c:function(){return a}});var r=n(2494),i=n(4449),a={closed:!0,next:function(e){},error:function(e){if(r.v.useDeprecatedSynchronousErrorHandling)throw e;(0,i.z)(e)},complete:function(){}}},9765:function(e,t,n){"use strict";n.d(t,{Yc:function(){return p},xQ:function(){return m}});var r,a=n(7574),o=n(7393),s=n(5319),u=n(7971),c=n(8858),l=n(9181),p=function(e){d(n,e);var t=v(n);function n(e){var r;return f(this,n),(r=t.call(this,e)).destination=e,r}return n}(o.L),m=((r=function(e,t){d(r,e);var n=v(r);function r(){var e;return f(this,r),(e=n.call(this)).observers=[],e.closed=!1,e.isStopped=!1,e.hasError=!1,e.thrownError=null,e}return h(r,[{key:t,value:function(){return new p(this)}},{key:"lift",value:function(e){var t=new g(this,this);return t.operator=e,t}},{key:"next",value:function(e){if(this.closed)throw new u.N;if(!this.isStopped)for(var t=this.observers,n=t.length,r=t.slice(),i=0;i<n;i++)r[i].next(e)}},{key:"error",value:function(e){if(this.closed)throw new u.N;this.hasError=!0,this.thrownError=e,this.isStopped=!0;for(var t=this.observers,n=t.length,r=t.slice(),i=0;i<n;i++)r[i].error(e);this.observers.length=0}},{key:"complete",value:function(){if(this.closed)throw new u.N;this.isStopped=!0;for(var e=this.observers,t=e.length,n=e.slice(),r=0;r<t;r++)n[r].complete();this.observers.length=0}},{key:"unsubscribe",value:function(){this.isStopped=!0,this.closed=!0,this.observers=null}},{key:"_trySubscribe",value:function(e){if(this.closed)throw new u.N;return i(b(r.prototype),"_trySubscribe",this).call(this,e)}},{key:"_subscribe",value:function(e){if(this.closed)throw new u.N;return this.hasError?(e.error(this.thrownError),s.w.EMPTY):this.isStopped?(e.complete(),s.w.EMPTY):(this.observers.push(e),new c.W(this,e))}},{key:"asObservable",value:function(){var e=new a.y;return e.source=this,e}}]),r}(a.y,l.b)).create=function(e,t){return new g(e,t)},r),g=function(e){d(n,e);var t=v(n);function n(e,r){var i;return f(this,n),(i=t.call(this)).destination=e,i.source=r,i}return h(n,[{key:"next",value:function(e){var t=this.destination;t&&t.next&&t.next(e)}},{key:"error",value:function(e){var t=this.destination;t&&t.error&&this.destination.error(e)}},{key:"complete",value:function(){var e=this.destination;e&&e.complete&&this.destination.complete()}},{key:"_subscribe",value:function(e){return this.source?this.source.subscribe(e):s.w.EMPTY}}]),n}(m)},8858:function(e,t,n){"use strict";n.d(t,{W:function(){return r}});var r=function(e){d(n,e);var t=v(n);function n(e,r){var i;return f(this,n),(i=t.call(this)).subject=e,i.subscriber=r,i.closed=!1,i}return h(n,[{key:"unsubscribe",value:function(){if(!this.closed){this.closed=!0;var e=this.subject,t=e.observers;if(this.subject=null,t&&0!==t.length&&!e.isStopped&&!e.closed){var n=t.indexOf(this.subscriber);-1!==n&&t.splice(n,1)}}}}]),n}(n(5319).w)},7393:function(e,t,n){"use strict";n.d(t,{L:function(){return l}});var r=n(9105),a=n(6490),o=n(5319),s=n(9181),u=n(2494),c=n(4449),l=function(e,t){d(r,e);var n=v(r);function r(e,t,i){var o;switch(f(this,r),(o=n.call(this)).syncErrorValue=null,o.syncErrorThrown=!1,o.syncErrorThrowable=!1,o.isStopped=!1,arguments.length){case 0:o.destination=a.c;break;case 1:if(!e){o.destination=a.c;break}if("object"==typeof e){e instanceof r?(o.syncErrorThrowable=e.syncErrorThrowable,o.destination=e,e.add(m(o))):(o.syncErrorThrowable=!0,o.destination=new p(m(o),e));break}default:o.syncErrorThrowable=!0,o.destination=new p(m(o),e,t,i)}return o}return h(r,[{key:t,value:function(){return this}},{key:"next",value:function(e){this.isStopped||this._next(e)}},{key:"error",value:function(e){this.isStopped||(this.isStopped=!0,this._error(e))}},{key:"complete",value:function(){this.isStopped||(this.isStopped=!0,this._complete())}},{key:"unsubscribe",value:function(){this.closed||(this.isStopped=!0,i(b(r.prototype),"unsubscribe",this).call(this))}},{key:"_next",value:function(e){this.destination.next(e)}},{key:"_error",value:function(e){this.destination.error(e),this.unsubscribe()}},{key:"_complete",value:function(){this.destination.complete(),this.unsubscribe()}},{key:"_unsubscribeAndRecycle",value:function(){var e=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=e,this}}],[{key:"create",value:function(e,t,n){var i=new r(e,t,n);return i.syncErrorThrowable=!1,i}}]),r}(o.w,s.b),p=function(e){d(n,e);var t=v(n);function n(e,i,o,s){var u;f(this,n),(u=t.call(this))._parentSubscriber=e;var c,l=m(u);return(0,r.m)(i)?c=i:i&&(c=i.next,o=i.error,s=i.complete,i!==a.c&&(l=Object.create(i),(0,r.m)(l.unsubscribe)&&u.add(l.unsubscribe.bind(l)),l.unsubscribe=u.unsubscribe.bind(m(u)))),u._context=l,u._next=c,u._error=o,u._complete=s,u}return h(n,[{key:"next",value:function(e){if(!this.isStopped&&this._next){var t=this._parentSubscriber;u.v.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?this.__tryOrSetError(t,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e)}}},{key:"error",value:function(e){if(!this.isStopped){var t=this._parentSubscriber,n=u.v.useDeprecatedSynchronousErrorHandling;if(this._error)n&&t.syncErrorThrowable?(this.__tryOrSetError(t,this._error,e),this.unsubscribe()):(this.__tryOrUnsub(this._error,e),this.unsubscribe());else if(t.syncErrorThrowable)n?(t.syncErrorValue=e,t.syncErrorThrown=!0):(0,c.z)(e),this.unsubscribe();else{if(this.unsubscribe(),n)throw e;(0,c.z)(e)}}}},{key:"complete",value:function(){var e=this;if(!this.isStopped){var t=this._parentSubscriber;if(this._complete){var n=function(){return e._complete.call(e._context)};u.v.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,n),this.unsubscribe()):(this.__tryOrUnsub(n),this.unsubscribe())}else this.unsubscribe()}}},{key:"__tryOrUnsub",value:function(e,t){try{e.call(this._context,t)}catch(n){if(this.unsubscribe(),u.v.useDeprecatedSynchronousErrorHandling)throw n;(0,c.z)(n)}}},{key:"__tryOrSetError",value:function(e,t,n){if(!u.v.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{t.call(this._context,n)}catch(r){return u.v.useDeprecatedSynchronousErrorHandling?(e.syncErrorValue=r,e.syncErrorThrown=!0,!0):((0,c.z)(r),!0)}return!1}},{key:"_unsubscribe",value:function(){var e=this._parentSubscriber;this._context=null,this._parentSubscriber=null,e.unsubscribe()}}]),n}(l)},5319:function(e,t,n){"use strict";n.d(t,{w:function(){return u}});var r,i=n(9796),a=n(1555),o=n(9105),s=function(){function e(e){return Error.call(this),this.message=e?"".concat(e.length," errors occurred during unsubscription:\n").concat(e.map(function(e,t){return"".concat(t+1,") ").concat(e.toString())}).join("\n  ")):"",this.name="UnsubscriptionError",this.errors=e,this}return e.prototype=Object.create(Error.prototype),e}(),u=function(){function e(t){f(this,e),this.closed=!1,this._parentOrParents=null,this._subscriptions=null,t&&(this._ctorUnsubscribe=!0,this._unsubscribe=t)}return h(e,[{key:"unsubscribe",value:function(){var t;if(!this.closed){var n=this._parentOrParents,r=this._ctorUnsubscribe,u=this._unsubscribe,l=this._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,n instanceof e)n.remove(this);else if(null!==n)for(var h=0;h<n.length;++h)n[h].remove(this);if((0,o.m)(u)){r&&(this._unsubscribe=void 0);try{u.call(this)}catch(h){t=h instanceof s?c(h.errors):[h]}}if((0,i.k)(l))for(var f=-1,d=l.length;++f<d;){var v=l[f];if((0,a.K)(v))try{v.unsubscribe()}catch(p){t=t||[],p instanceof s?t=t.concat(c(p.errors)):t.push(p)}}if(t)throw new s(t)}}},{key:"add",value:function(t){var n=t;if(!t)return e.EMPTY;switch(typeof t){case"function":n=new e(t);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof e)){var r=n;(n=new e)._subscriptions=[r]}break;default:throw new Error("unrecognized teardown "+t+" added to Subscription.")}var i=n._parentOrParents;if(null===i)n._parentOrParents=this;else if(i instanceof e){if(i===this)return n;n._parentOrParents=[i,this]}else{if(-1!==i.indexOf(this))return n;i.push(this)}var a=this._subscriptions;return null===a?this._subscriptions=[n]:a.push(n),n}},{key:"remove",value:function(e){var t=this._subscriptions;if(t){var n=t.indexOf(e);-1!==n&&t.splice(n,1)}}}]),e}();function c(e){return e.reduce(function(e,t){return e.concat(t instanceof s?t.errors:t)},[])}u.EMPTY=((r=new u).closed=!0,r)},2494:function(e,t,n){"use strict";n.d(t,{v:function(){return i}});var r=!1,i={Promise:void 0,set useDeprecatedSynchronousErrorHandling(e){if(e){var t=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+t.stack)}else r&&console.log("RxJS: Back to a better error behavior. Thank you. <3");r=e},get useDeprecatedSynchronousErrorHandling(){return r}}},5345:function(e,t,n){"use strict";n.d(t,{IY:function(){return o},Ds:function(){return s},ft:function(){return u}});var r=n(7393),i=n(7574),a=n(7444),o=function(e){d(n,e);var t=v(n);function n(e){var r;return f(this,n),(r=t.call(this)).parent=e,r}return h(n,[{key:"_next",value:function(e){this.parent.notifyNext(e)}},{key:"_error",value:function(e){this.parent.notifyError(e),this.unsubscribe()}},{key:"_complete",value:function(){this.parent.notifyComplete(),this.unsubscribe()}}]),n}(r.L),s=function(e){d(n,e);var t=v(n);function n(){return f(this,n),t.apply(this,arguments)}return h(n,[{key:"notifyNext",value:function(e){this.destination.next(e)}},{key:"notifyError",value:function(e){this.destination.error(e)}},{key:"notifyComplete",value:function(){this.destination.complete()}}]),n}(r.L);function u(e,t){if(!t.closed){if(e instanceof i.y)return e.subscribe(t);var n;try{n=(0,a.s)(e)(t)}catch(r){t.error(r)}return n}}},2441:function(e,t,n){"use strict";n.d(t,{c:function(){return c},N:function(){return l}});var r,a=n(9765),o=n(7574),s=n(5319),u=n(1307),c=function(e){d(n,e);var t=v(n);function n(e,r){var i;return f(this,n),(i=t.call(this)).source=e,i.subjectFactory=r,i._refCount=0,i._isComplete=!1,i}return h(n,[{key:"_subscribe",value:function(e){return this.getSubject().subscribe(e)}},{key:"getSubject",value:function(){var e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}},{key:"connect",value:function(){var e=this._connection;return e||(this._isComplete=!1,(e=this._connection=new s.w).add(this.source.subscribe(new p(this.getSubject(),this))),e.closed&&(this._connection=null,e=s.w.EMPTY)),e}},{key:"refCount",value:function(){return(0,u.x)()(this)}}]),n}(o.y),l={operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:(r=c.prototype)._subscribe},_isComplete:{value:r._isComplete,writable:!0},getSubject:{value:r.getSubject},connect:{value:r.connect},refCount:{value:r.refCount}},p=function(e){d(n,e);var t=v(n);function n(e,r){var i;return f(this,n),(i=t.call(this,e)).connectable=r,i}return h(n,[{key:"_error",value:function(e){this._unsubscribe(),i(b(n.prototype),"_error",this).call(this,e)}},{key:"_complete",value:function(){this.connectable._isComplete=!0,this._unsubscribe(),i(b(n.prototype),"_complete",this).call(this)}},{key:"_unsubscribe",value:function(){var e=this.connectable;if(e){this.connectable=null;var t=e._connection;e._refCount=0,e._subject=null,e._connection=null,t&&t.unsubscribe()}}}]),n}(a.Yc)},9193:function(e,t,n){"use strict";n.d(t,{E:function(){return i},c:function(){return a}});var r=n(7574),i=new r.y(function(e){return e.complete()});function a(e){return e?function(e){return new r.y(function(t){return e.schedule(function(){return t.complete()})})}(e):i}},4402:function(e,t,n){"use strict";n.d(t,{D:function(){return h}});var r=n(7574),i=n(7444),a=n(5319),o=n(6554),s=n(4087),u=n(377),c=n(4072),l=n(9489);function h(e,t){return t?function(e,t){if(null!=e){if(function(e){return e&&"function"==typeof e[o.L]}(e))return function(e,t){return new r.y(function(n){var r=new a.w;return r.add(t.schedule(function(){var i=e[o.L]();r.add(i.subscribe({next:function(e){r.add(t.schedule(function(){return n.next(e)}))},error:function(e){r.add(t.schedule(function(){return n.error(e)}))},complete:function(){r.add(t.schedule(function(){return n.complete()}))}}))})),r})}(e,t);if((0,c.t)(e))return function(e,t){return new r.y(function(n){var r=new a.w;return r.add(t.schedule(function(){return e.then(function(e){r.add(t.schedule(function(){n.next(e),r.add(t.schedule(function(){return n.complete()}))}))},function(e){r.add(t.schedule(function(){return n.error(e)}))})})),r})}(e,t);if((0,l.z)(e))return(0,s.r)(e,t);if(function(e){return e&&"function"==typeof e[u.hZ]}(e)||"string"==typeof e)return function(e,t){if(!e)throw new Error("Iterable cannot be null");return new r.y(function(n){var r,i=new a.w;return i.add(function(){r&&"function"==typeof r.return&&r.return()}),i.add(t.schedule(function(){r=e[u.hZ](),i.add(t.schedule(function(){if(!n.closed){var e,t;try{var i=r.next();e=i.value,t=i.done}catch(i){return void n.error(i)}t?n.complete():(n.next(e),this.schedule())}}))})),i})}(e,t)}throw new TypeError((null!==e&&typeof e||e)+" is not observable")}(e,t):e instanceof r.y?e:new r.y((0,i.s)(e))}},6693:function(e,t,n){"use strict";n.d(t,{n:function(){return o}});var r=n(7574),i=n(5015),a=n(4087);function o(e,t){return t?(0,a.r)(e,t):new r.y((0,i.V)(e))}},6682:function(e,t,n){"use strict";n.d(t,{T:function(){return s}});var r=n(7574),i=n(4869),a=n(3282),o=n(6693);function s(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var s=Number.POSITIVE_INFINITY,u=null,c=t[t.length-1];return(0,i.K)(c)?(u=t.pop(),t.length>1&&"number"==typeof t[t.length-1]&&(s=t.pop())):"number"==typeof c&&(s=t.pop()),null===u&&1===t.length&&t[0]instanceof r.y?t[0]:(0,a.J)(s)((0,o.n)(t,u))}},5917:function(e,t,n){"use strict";n.d(t,{of:function(){return o}});var r=n(4869),i=n(6693),a=n(4087);function o(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var o=t[t.length-1];return(0,r.K)(o)?(t.pop(),(0,a.r)(t,o)):(0,i.n)(t)}},8002:function(e,t,n){"use strict";n.d(t,{U:function(){return i}});var r=n(7393);function i(e,t){return function(n){if("function"!=typeof e)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new a(e,t))}}var a=function(){function e(t,n){f(this,e),this.project=t,this.thisArg=n}return h(e,[{key:"call",value:function(e,t){return t.subscribe(new o(e,this.project,this.thisArg))}}]),e}(),o=function(e){d(n,e);var t=v(n);function n(e,r,i){var a;return f(this,n),(a=t.call(this,e)).project=r,a.count=0,a.thisArg=i||m(a),a}return h(n,[{key:"_next",value:function(e){var t;try{t=this.project.call(this.thisArg,e,this.count++)}catch(n){return void this.destination.error(n)}this.destination.next(t)}}]),n}(r.L)},3282:function(e,t,n){"use strict";n.d(t,{J:function(){return a}});var r=n(9773),i=n(4487);function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Number.POSITIVE_INFINITY;return(0,r.zg)(i.y,e)}},9773:function(e,t,n){"use strict";n.d(t,{zg:function(){return o}});var r=n(8002),i=n(4402),a=n(5345);function o(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Number.POSITIVE_INFINITY;return"function"==typeof t?function(a){return a.pipe(o(function(n,a){return(0,i.D)(e(n,a)).pipe((0,r.U)(function(e,r){return t(n,e,a,r)}))},n))}:("number"==typeof t&&(n=t),function(t){return t.lift(new s(e,n))})}var s=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.POSITIVE_INFINITY;f(this,e),this.project=t,this.concurrent=n}return h(e,[{key:"call",value:function(e,t){return t.subscribe(new u(e,this.project,this.concurrent))}}]),e}(),u=function(e){d(n,e);var t=v(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Number.POSITIVE_INFINITY;return f(this,n),(i=t.call(this,e)).project=r,i.concurrent=a,i.hasCompleted=!1,i.buffer=[],i.active=0,i.index=0,i}return h(n,[{key:"_next",value:function(e){this.active<this.concurrent?this._tryNext(e):this.buffer.push(e)}},{key:"_tryNext",value:function(e){var t,n=this.index++;try{t=this.project(e,n)}catch(r){return void this.destination.error(r)}this.active++,this._innerSub(t)}},{key:"_innerSub",value:function(e){var t=new a.IY(this),n=this.destination;n.add(t);var r=(0,a.ft)(e,t);r!==t&&n.add(r)}},{key:"_complete",value:function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}},{key:"notifyNext",value:function(e){this.destination.next(e)}},{key:"notifyComplete",value:function(){var e=this.buffer;this.active--,e.length>0?this._next(e.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}]),n}(a.Ds)},309:function(e,t,n){"use strict";n.d(t,{ht:function(){return l},QV:function(){return u}});var r=n(7393),i=n(9193),a=n(5917),o=n(7574),s=function(){function e(t,n,r){f(this,e),this.kind=t,this.value=n,this.error=r,this.hasValue="N"===t}return h(e,[{key:"observe",value:function(e){switch(this.kind){case"N":return e.next&&e.next(this.value);case"E":return e.error&&e.error(this.error);case"C":return e.complete&&e.complete()}}},{key:"do",value:function(e,t,n){switch(this.kind){case"N":return e&&e(this.value);case"E":return t&&t(this.error);case"C":return n&&n()}}},{key:"accept",value:function(e,t,n){return e&&"function"==typeof e.next?this.observe(e):this.do(e,t,n)}},{key:"toObservable",value:function(){switch(this.kind){case"N":return(0,a.of)(this.value);case"E":return e=this.error,new o.y(function(t){return t.error(e)});case"C":return(0,i.c)()}var e;throw new Error("unexpected notification kind value")}}],[{key:"createNext",value:function(t){return void 0!==t?new e("N",t):e.undefinedValueNotification}},{key:"createError",value:function(t){return new e("E",void 0,t)}},{key:"createComplete",value:function(){return e.completeNotification}}]),e}();function u(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return function(n){return n.lift(new c(e,t))}}s.completeNotification=new s("C"),s.undefinedValueNotification=new s("N",void 0);var c=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;f(this,e),this.scheduler=t,this.delay=n}return h(e,[{key:"call",value:function(e,t){return t.subscribe(new l(e,this.scheduler,this.delay))}}]),e}(),l=function(e){d(n,e);var t=v(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return f(this,n),(i=t.call(this,e)).scheduler=r,i.delay=a,i}return h(n,[{key:"scheduleMessage",value:function(e){this.destination.add(this.scheduler.schedule(n.dispatch,this.delay,new p(e,this.destination)))}},{key:"_next",value:function(e){this.scheduleMessage(s.createNext(e))}},{key:"_error",value:function(e){this.scheduleMessage(s.createError(e)),this.unsubscribe()}},{key:"_complete",value:function(){this.scheduleMessage(s.createComplete()),this.unsubscribe()}}],[{key:"dispatch",value:function(e){var t=e.notification,n=e.destination;t.observe(n),this.unsubscribe()}}]),n}(r.L),p=function e(t,n){f(this,e),this.notification=t,this.destination=n}},1307:function(e,t,n){"use strict";n.d(t,{x:function(){return i}});var r=n(7393);function i(){return function(e){return e.lift(new a(e))}}var a=function(){function e(t){f(this,e),this.connectable=t}return h(e,[{key:"call",value:function(e,t){var n=this.connectable;n._refCount++;var r=new o(e,n),i=t.subscribe(r);return r.closed||(r.connection=n.connect()),i}}]),e}(),o=function(e){d(n,e);var t=v(n);function n(e,r){var i;return f(this,n),(i=t.call(this,e)).connectable=r,i}return h(n,[{key:"_unsubscribe",value:function(){var e=this.connectable;if(e){this.connectable=null;var t=e._refCount;if(t<=0)this.connection=null;else if(e._refCount=t-1,t>1)this.connection=null;else{var n=this.connection,r=e._connection;this.connection=null,r&&(!n||r===n)&&r.unsubscribe()}}else this.connection=null}}]),n}(r.L)},3101:function(e,t,n){"use strict";n.d(t,{R:function(){return k}});var r=n(7574),a=1,o=Promise.resolve(),s={};function u(e){return e in s&&(delete s[e],!0)}var c=function(e){var t=a++;return s[t]=!0,o.then(function(){return u(t)&&e()}),t},l=function(e){u(e)},p=n(6465),m=new(function(e){d(n,e);var t=v(n);function n(){return f(this,n),t.apply(this,arguments)}return h(n,[{key:"flush",value:function(e){this.active=!0,this.scheduled=void 0;var t,n=this.actions,r=-1,i=n.length;e=e||n.shift();do{if(t=e.execute(e.state,e.delay))break}while(++r<i&&(e=n.shift()));if(this.active=!1,t){for(;++r<i&&(e=n.shift());)e.unsubscribe();throw t}}}]),n}(n(6102).v))(function(e){d(n,e);var t=v(n);function n(e,r){var i;return f(this,n),(i=t.call(this,e,r)).scheduler=e,i.work=r,i}return h(n,[{key:"requestAsyncId",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return null!==r&&r>0?i(b(n.prototype),"requestAsyncId",this).call(this,e,t,r):(e.actions.push(this),e.scheduled||(e.scheduled=c(e.flush.bind(e,null))))}},{key:"recycleAsyncId",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(null!==r&&r>0||null===r&&this.delay>0)return i(b(n.prototype),"recycleAsyncId",this).call(this,e,t,r);0===e.actions.length&&(l(t),e.scheduled=void 0)}}]),n}(p.o)),g=n(9796),y=function(e){d(n,e);var t=v(n);function n(e){var r,i,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:m;return f(this,n),(r=t.call(this)).source=e,r.delayTime=a,r.scheduler=o,(!(!(0,g.k)(i=a)&&i-parseFloat(i)+1>=0)||a<0)&&(r.delayTime=0),(!o||"function"!=typeof o.schedule)&&(r.scheduler=m),r}return h(n,[{key:"_subscribe",value:function(e){return this.scheduler.schedule(n.dispatch,this.delayTime,{source:this.source,subscriber:e})}}],[{key:"create",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:m;return new n(e,t,r)}},{key:"dispatch",value:function(e){var t=e.source,n=e.subscriber;return this.add(t.subscribe(n))}}]),n}(r.y);function k(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return function(n){return n.lift(new w(e,t))}}var w=function(){function e(t,n){f(this,e),this.scheduler=t,this.delay=n}return h(e,[{key:"call",value:function(e,t){return new y(t,this.delay,this.scheduler).subscribe(e)}}]),e}()},3342:function(e,t,n){"use strict";n.d(t,{b:function(){return o}});var r=n(7393);function i(){}var a=n(9105);function o(e,t,n){return function(r){return r.lift(new s(e,t,n))}}var s=function(){function e(t,n,r){f(this,e),this.nextOrObserver=t,this.error=n,this.complete=r}return h(e,[{key:"call",value:function(e,t){return t.subscribe(new u(e,this.nextOrObserver,this.error,this.complete))}}]),e}(),u=function(e){d(n,e);var t=v(n);function n(e,r,o,s){var u;return f(this,n),(u=t.call(this,e))._tapNext=i,u._tapError=i,u._tapComplete=i,u._tapError=o||i,u._tapComplete=s||i,(0,a.m)(r)?(u._context=m(u),u._tapNext=r):r&&(u._context=r,u._tapNext=r.next||i,u._tapError=r.error||i,u._tapComplete=r.complete||i),u}return h(n,[{key:"_next",value:function(e){try{this._tapNext.call(this._context,e)}catch(t){return void this.destination.error(t)}this.destination.next(e)}},{key:"_error",value:function(e){try{this._tapError.call(this._context,e)}catch(t){return void this.destination.error(t)}this.destination.error(e)}},{key:"_complete",value:function(){try{this._tapComplete.call(this._context)}catch(e){return void this.destination.error(e)}return this.destination.complete()}}]),n}(r.L)},4087:function(e,t,n){"use strict";n.d(t,{r:function(){return a}});var r=n(7574),i=n(5319);function a(e,t){return new r.y(function(n){var r=new i.w,a=0;return r.add(t.schedule(function(){a!==e.length?(n.next(e[a++]),n.closed||r.add(this.schedule())):n.complete()})),r})}},6465:function(e,t,n){"use strict";n.d(t,{o:function(){return r}});var r=function(e){d(n,e);var t=v(n);function n(e,r){var i;return f(this,n),(i=t.call(this,e,r)).scheduler=e,i.work=r,i.pending=!1,i}return h(n,[{key:"schedule",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(this.closed)return this;this.state=e;var n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,t)),this.pending=!0,this.delay=t,this.id=this.id||this.requestAsyncId(r,this.id,t),this}},{key:"requestAsyncId",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return setInterval(e.flush.bind(e,this),n)}},{key:"recycleAsyncId",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(null!==n&&this.delay===n&&!1===this.pending)return t;clearInterval(t)}},{key:"execute",value:function(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var n=this._execute(e,t);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}},{key:"_execute",value:function(e,t){var n,r=!1;try{this.work(e)}catch(i){r=!0,n=!!i&&i||new Error(i)}if(r)return this.unsubscribe(),n}},{key:"_unsubscribe",value:function(){var e=this.id,t=this.scheduler,n=t.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null}}]),n}(function(e){d(n,e);var t=v(n);function n(e,r){return f(this,n),t.call(this)}return h(n,[{key:"schedule",value:function(e){return this}}]),n}(n(5319).w))},6102:function(e,t,n){"use strict";n.d(t,{v:function(){return o}});var r,a=((r=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.now;f(this,e),this.SchedulerAction=t,this.now=n}return h(e,[{key:"schedule",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0;return new this.SchedulerAction(this,e).schedule(n,t)}}]),e}()).now=function(){return Date.now()},r),o=function(e){d(n,e);var t=v(n);function n(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a.now;return f(this,n),(r=t.call(this,e,function(){return n.delegate&&n.delegate!==m(r)?n.delegate.now():i()})).actions=[],r.active=!1,r.scheduled=void 0,r}return h(n,[{key:"schedule",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2?arguments[2]:void 0;return n.delegate&&n.delegate!==this?n.delegate.schedule(e,t,r):i(b(n.prototype),"schedule",this).call(this,e,t,r)}},{key:"flush",value:function(e){var t=this.actions;if(this.active)t.push(e);else{var n;this.active=!0;do{if(n=e.execute(e.state,e.delay))break}while(e=t.shift());if(this.active=!1,n){for(;e=t.shift();)e.unsubscribe();throw n}}}}]),n}(a)},3637:function(e,t,n){"use strict";n.d(t,{z:function(){return i}});var r=n(6465),i=new(n(6102).v)(r.o)},7771:function(e,t,n){"use strict";n.d(t,{c:function(){return o},N:function(){return a}});var r=n(6465),a=new(function(e){d(n,e);var t=v(n);function n(){return f(this,n),t.apply(this,arguments)}return n}(n(6102).v))(function(e){d(n,e);var t=v(n);function n(e,r){var i;return f(this,n),(i=t.call(this,e,r)).scheduler=e,i.work=r,i}return h(n,[{key:"schedule",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t>0?i(b(n.prototype),"schedule",this).call(this,e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}},{key:"execute",value:function(e,t){return t>0||this.closed?i(b(n.prototype),"execute",this).call(this,e,t):this._execute(e,t)}},{key:"requestAsyncId",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return null!==r&&r>0||null===r&&this.delay>0?i(b(n.prototype),"requestAsyncId",this).call(this,e,t,r):e.flush(this)}}]),n}(r.o)),o=a},377:function(e,t,n){"use strict";n.d(t,{hZ:function(){return r}});var r="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"},6554:function(e,t,n){"use strict";n.d(t,{L:function(){return r}});var r="function"==typeof Symbol&&Symbol.observable||"@@observable"},9181:function(e,t,n){"use strict";n.d(t,{b:function(){return r}});var r="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()},7971:function(e,t,n){"use strict";n.d(t,{N:function(){return r}});var r=function(){function e(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return e.prototype=Object.create(Error.prototype),e}()},4449:function(e,t,n){"use strict";function r(e){setTimeout(function(){throw e},0)}n.d(t,{z:function(){return r}})},4487:function(e,t,n){"use strict";function r(e){return e}n.d(t,{y:function(){return r}})},9796:function(e,t,n){"use strict";n.d(t,{k:function(){return r}});var r=Array.isArray||function(e){return e&&"number"==typeof e.length}},9489:function(e,t,n){"use strict";n.d(t,{z:function(){return r}});var r=function(e){return e&&"number"==typeof e.length&&"function"!=typeof e}},9105:function(e,t,n){"use strict";function r(e){return"function"==typeof e}n.d(t,{m:function(){return r}})},1555:function(e,t,n){"use strict";function r(e){return null!==e&&"object"==typeof e}n.d(t,{K:function(){return r}})},4072:function(e,t,n){"use strict";function r(e){return!!e&&"function"!=typeof e.subscribe&&"function"==typeof e.then}n.d(t,{t:function(){return r}})},4869:function(e,t,n){"use strict";function r(e){return e&&"function"==typeof e.schedule}n.d(t,{K:function(){return r}})},7444:function(e,t,n){"use strict";n.d(t,{s:function(){return l}});var r=n(5015),i=n(4449),a=n(377),o=n(6554),s=n(9489),u=n(4072),c=n(1555),l=function(e){if(e&&"function"==typeof e[o.L])return function(e){return function(t){var n=e[o.L]();if("function"!=typeof n.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return n.subscribe(t)}}(e);if((0,s.z)(e))return(0,r.V)(e);if((0,u.t)(e))return function(e){return function(t){return e.then(function(e){t.closed||(t.next(e),t.complete())},function(e){return t.error(e)}).then(null,i.z),t}}(e);if(e&&"function"==typeof e[a.hZ])return function(e){return function(t){for(var n=e[a.hZ]();;){var r=void 0;try{r=n.next()}catch(i){return t.error(i),t}if(r.done){t.complete();break}if(t.next(r.value),t.closed)break}return"function"==typeof n.return&&t.add(function(){n.return&&n.return()}),t}}(e);var t="You provided ".concat((0,c.K)(e)?"an invalid object":"'".concat(e,"'")," where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.");throw new TypeError(t)}},5015:function(e,t,n){"use strict";n.d(t,{V:function(){return r}});var r=function(e){return function(t){for(var n=0,r=e.length;n<r&&!t.closed;n++)t.next(e[n]);t.complete()}}},4272:function(n,r,o){"use strict";var u=o(3018),c=null;function l(){return c}var k=new u.OlP("DocumentToken"),w=function(){var e=function(){function e(){f(this,e)}return h(e,[{key:"historyGo",value:function(e){throw new Error("Not implemented")}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=(0,u.Yz7)({factory:_,token:e,providedIn:"platform"}),e}();function _(){return(0,u.LFG)(T)}var x=new u.OlP("Location Initialized"),T=function(){var e=function(e){d(n,e);var t=v(n);function n(e){var r;return f(this,n),(r=t.call(this))._doc=e,r._init(),r}return h(n,[{key:"_init",value:function(){this.location=window.location,this._history=window.history}},{key:"getBaseHrefFromDOM",value:function(){return l().getBaseHref(this._doc)}},{key:"onPopState",value:function(e){var t=l().getGlobalEventTarget(this._doc,"window");return t.addEventListener("popstate",e,!1),function(){return t.removeEventListener("popstate",e)}}},{key:"onHashChange",value:function(e){var t=l().getGlobalEventTarget(this._doc,"window");return t.addEventListener("hashchange",e,!1),function(){return t.removeEventListener("hashchange",e)}}},{key:"href",get:function(){return this.location.href}},{key:"protocol",get:function(){return this.location.protocol}},{key:"hostname",get:function(){return this.location.hostname}},{key:"port",get:function(){return this.location.port}},{key:"pathname",get:function(){return this.location.pathname},set:function(e){this.location.pathname=e}},{key:"search",get:function(){return this.location.search}},{key:"hash",get:function(){return this.location.hash}},{key:"pushState",value:function(e,t,n){I()?this._history.pushState(e,t,n):this.location.hash=n}},{key:"replaceState",value:function(e,t,n){I()?this._history.replaceState(e,t,n):this.location.hash=n}},{key:"forward",value:function(){this._history.forward()}},{key:"back",value:function(){this._history.back()}},{key:"historyGo",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this._history.go(e)}},{key:"getState",value:function(){return this._history.state}}]),n}(w);return e.\u0275fac=function(t){return new(t||e)(u.LFG(k))},e.\u0275prov=(0,u.Yz7)({factory:S,token:e,providedIn:"platform"}),e}();function I(){return!!window.history.pushState}function S(){return new T((0,u.LFG)(k))}function E(e,t){if(0==e.length)return t;if(0==t.length)return e;var n=0;return e.endsWith("/")&&n++,t.startsWith("/")&&n++,2==n?e+t.substring(1):1==n?e+t:e+"/"+t}function R(e){var t=e.match(/#|\?|$/),n=t&&t.index||e.length;return e.slice(0,n-("/"===e[n-1]?1:0))+e.slice(n)}function C(e){return e&&"?"!==e[0]?"?"+e:e}var A=function(){var e=function(){function e(){f(this,e)}return h(e,[{key:"historyGo",value:function(e){throw new Error("Not implemented")}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=(0,u.Yz7)({factory:N,token:e,providedIn:"root"}),e}();function N(e){var t=(0,u.LFG)(k).location;return new D((0,u.LFG)(w),t&&t.origin||"")}var O=new u.OlP("appBaseHref"),D=function(){var e=function(e){d(n,e);var t=v(n);function n(e,r){var i;if(f(this,n),(i=t.call(this))._platformLocation=e,i._removeListenerFns=[],null==r&&(r=i._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");return i._baseHref=r,p(i)}return h(n,[{key:"ngOnDestroy",value:function(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}},{key:"onPopState",value:function(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}},{key:"getBaseHref",value:function(){return this._baseHref}},{key:"prepareExternalUrl",value:function(e){return E(this._baseHref,e)}},{key:"path",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this._platformLocation.pathname+C(this._platformLocation.search),n=this._platformLocation.hash;return n&&e?"".concat(t).concat(n):t}},{key:"pushState",value:function(e,t,n,r){var i=this.prepareExternalUrl(n+C(r));this._platformLocation.pushState(e,t,i)}},{key:"replaceState",value:function(e,t,n,r){var i=this.prepareExternalUrl(n+C(r));this._platformLocation.replaceState(e,t,i)}},{key:"forward",value:function(){this._platformLocation.forward()}},{key:"back",value:function(){this._platformLocation.back()}},{key:"historyGo",value:function(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;null===(t=(e=this._platformLocation).historyGo)||void 0===t||t.call(e,n)}}]),n}(A);return e.\u0275fac=function(t){return new(t||e)(u.LFG(w),u.LFG(O,8))},e.\u0275prov=u.Yz7({token:e,factory:e.\u0275fac}),e}(),P=function(){var e=function(e){d(n,e);var t=v(n);function n(e,r){var i;return f(this,n),(i=t.call(this))._platformLocation=e,i._baseHref="",i._removeListenerFns=[],null!=r&&(i._baseHref=r),i}return h(n,[{key:"ngOnDestroy",value:function(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}},{key:"onPopState",value:function(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}},{key:"getBaseHref",value:function(){return this._baseHref}},{key:"path",value:function(){var e=this._platformLocation.hash;return null==e&&(e="#"),e.length>0?e.substring(1):e}},{key:"prepareExternalUrl",value:function(e){var t=E(this._baseHref,e);return t.length>0?"#"+t:t}},{key:"pushState",value:function(e,t,n,r){var i=this.prepareExternalUrl(n+C(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.pushState(e,t,i)}},{key:"replaceState",value:function(e,t,n,r){var i=this.prepareExternalUrl(n+C(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.replaceState(e,t,i)}},{key:"forward",value:function(){this._platformLocation.forward()}},{key:"back",value:function(){this._platformLocation.back()}},{key:"historyGo",value:function(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;null===(t=(e=this._platformLocation).historyGo)||void 0===t||t.call(e,n)}}]),n}(A);return e.\u0275fac=function(t){return new(t||e)(u.LFG(w),u.LFG(O,8))},e.\u0275prov=u.Yz7({token:e,factory:e.\u0275fac}),e}(),L=function(){var e=function(){function e(t,n){var r=this;f(this,e),this._subject=new u.vpe,this._urlChangeListeners=[],this._platformStrategy=t;var i=this._platformStrategy.getBaseHref();this._platformLocation=n,this._baseHref=R(M(i)),this._platformStrategy.onPopState(function(e){r._subject.emit({url:r.path(!0),pop:!0,state:e.state,type:e.type})})}return h(e,[{key:"path",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.normalize(this._platformStrategy.path(e))}},{key:"getState",value:function(){return this._platformLocation.getState()}},{key:"isCurrentPathEqualTo",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return this.path()==this.normalize(e+C(t))}},{key:"normalize",value:function(t){return e.stripTrailingSlash(function(e,t){return e&&t.startsWith(e)?t.substring(e.length):t}(this._baseHref,M(t)))}},{key:"prepareExternalUrl",value:function(e){return e&&"/"!==e[0]&&(e="/"+e),this._platformStrategy.prepareExternalUrl(e)}},{key:"go",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this._platformStrategy.pushState(n,"",e,t),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+C(t)),n)}},{key:"replaceState",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this._platformStrategy.replaceState(n,"",e,t),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+C(t)),n)}},{key:"forward",value:function(){this._platformStrategy.forward()}},{key:"back",value:function(){this._platformStrategy.back()}},{key:"historyGo",value:function(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;null===(t=(e=this._platformStrategy).historyGo)||void 0===t||t.call(e,n)}},{key:"onUrlChange",value:function(e){var t=this;this._urlChangeListeners.push(e),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(function(e){t._notifyUrlChangeListeners(e.url,e.state)}))}},{key:"_notifyUrlChangeListeners",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;this._urlChangeListeners.forEach(function(n){return n(e,t)})}},{key:"subscribe",value:function(e,t,n){return this._subject.subscribe({next:e,error:t,complete:n})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(u.LFG(A),u.LFG(w))},e.normalizeQueryParams=C,e.joinWithSlash=E,e.stripTrailingSlash=R,e.\u0275prov=(0,u.Yz7)({factory:F,token:e,providedIn:"root"}),e}();function F(){return new L((0,u.LFG)(A),(0,u.LFG)(w))}function M(e){return e.replace(/\/index.html$/,"")}var U=((U=U||{})[U.Zero=0]="Zero",U[U.One=1]="One",U[U.Two=2]="Two",U[U.Few=3]="Few",U[U.Many=4]="Many",U[U.Other=5]="Other",U),j=u.kL8,V=function e(){f(this,e)},q=function(){var e=function(e){d(n,e);var t=v(n);function n(e){var r;return f(this,n),(r=t.call(this)).locale=e,r}return h(n,[{key:"getPluralCategory",value:function(e,t){switch(j(t||this.locale)(e)){case U.Zero:return"zero";case U.One:return"one";case U.Two:return"two";case U.Few:return"few";case U.Many:return"many";default:return"other"}}}]),n}(V);return e.\u0275fac=function(t){return new(t||e)(u.LFG(u.soG))},e.\u0275prov=u.Yz7({token:e,factory:e.\u0275fac}),e}(),B=function(){var e=function(){function e(t,n){f(this,e),this._viewContainer=t,this._context=new z,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=n}return h(e,[{key:"ngIf",set:function(e){this._context.$implicit=this._context.ngIf=e,this._updateView()}},{key:"ngIfThen",set:function(e){Z("ngIfThen",e),this._thenTemplateRef=e,this._thenViewRef=null,this._updateView()}},{key:"ngIfElse",set:function(e){Z("ngIfElse",e),this._elseTemplateRef=e,this._elseViewRef=null,this._updateView()}},{key:"_updateView",value:function(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}}],[{key:"ngTemplateContextGuard",value:function(e,t){return!0}}]),e}();return e.\u0275fac=function(t){return new(t||e)(u.Y36(u.s_b),u.Y36(u.Rgc))},e.\u0275dir=u.lG2({type:e,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),e}(),z=function e(){f(this,e),this.$implicit=null,this.ngIf=null};function Z(e,t){if(t&&!t.createEmbeddedView)throw new Error("".concat(e," must be a TemplateRef, but received '").concat((0,u.AaK)(t),"'."))}var H=function(){var e=function e(){f(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=u.oAB({type:e}),e.\u0275inj=u.cJS({providers:[{provide:V,useClass:q}]}),e}();function G(e){return"server"===e}var K=function(){var e=function e(){f(this,e)};return e.\u0275prov=(0,u.Yz7)({token:e,providedIn:"root",factory:function(){return new W((0,u.LFG)(k),window)}}),e}(),W=function(){function e(t,n){f(this,e),this.document=t,this.window=n,this.offset=function(){return[0,0]}}return h(e,[{key:"setOffset",value:function(e){this.offset=Array.isArray(e)?function(){return e}:e}},{key:"getScrollPosition",value:function(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}},{key:"scrollToPosition",value:function(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}},{key:"scrollToAnchor",value:function(e){if(this.supportsScrolling()){var t=function(e,t){var n=e.getElementById(t)||e.getElementsByName(t)[0];if(n)return n;if("function"==typeof e.createTreeWalker&&e.body&&(e.body.createShadowRoot||e.body.attachShadow))for(var r=e.createTreeWalker(e.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;i;){var a=i.shadowRoot;if(a){var o=a.getElementById(t)||a.querySelector('[name="'.concat(t,'"]'));if(o)return o}i=r.nextNode()}return null}(this.document,e);t&&(this.scrollToElement(t),this.attemptFocus(t))}}},{key:"setHistoryScrollRestoration",value:function(e){if(this.supportScrollRestoration()){var t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}},{key:"scrollToElement",value:function(e){var t=e.getBoundingClientRect(),n=t.left+this.window.pageXOffset,r=t.top+this.window.pageYOffset,i=this.offset();this.window.scrollTo(n-i[0],r-i[1])}},{key:"attemptFocus",value:function(e){return e.focus(),this.document.activeElement===e}},{key:"supportScrollRestoration",value:function(){try{if(!this.supportsScrolling())return!1;var e=Q(this.window.history)||Q(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(e){return!1}}},{key:"supportsScrolling",value:function(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(e){return!1}}}]),e}();function Q(e){return Object.getOwnPropertyDescriptor(e,"scrollRestoration")}var Y,J=function(e){d(r,e);var n=v(r);function r(){return f(this,r),n.apply(this,arguments)}return h(r,[{key:"onAndCancel",value:function(e,t,n){return e.addEventListener(t,n,!1),function(){e.removeEventListener(t,n,!1)}}},{key:"dispatchEvent",value:function(e,t){e.dispatchEvent(t)}},{key:"remove",value:function(e){e.parentNode&&e.parentNode.removeChild(e)}},{key:"createElement",value:function(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}},{key:"createHtmlDocument",value:function(){return document.implementation.createHTMLDocument("fakeTitle")}},{key:"getDefaultDocument",value:function(){return document}},{key:"isElementNode",value:function(e){return e.nodeType===Node.ELEMENT_NODE}},{key:"isShadowRoot",value:function(e){return e instanceof DocumentFragment}},{key:"getGlobalEventTarget",value:function(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}},{key:"getBaseHref",value:function(e){var t=($=$||document.querySelector("base"))?$.getAttribute("href"):null;return null==t?null:function(e){(Y=Y||document.createElement("a")).setAttribute("href",e);var t=Y.pathname;return"/"===t.charAt(0)?t:"/".concat(t)}(t)}},{key:"resetBaseElement",value:function(){$=null}},{key:"getUserAgent",value:function(){return window.navigator.userAgent}},{key:"getCookie",value:function(e){return function(e,n){n=encodeURIComponent(n);var r,i=s(e.split(";"));try{for(i.s();!(r=i.n()).done;){var a=r.value,o=a.indexOf("="),u=t(-1==o?[a,""]:[a.slice(0,o),a.slice(o+1)],2),c=u[0],l=u[1];if(c.trim()===n)return decodeURIComponent(l)}}catch(h){i.e(h)}finally{i.f()}return null}(document.cookie,e)}}],[{key:"makeCurrent",value:function(){var e;e=new r,c||(c=e)}}]),r}(function(e){d(n,e);var t=v(n);function n(){var e;return f(this,n),(e=t.apply(this,arguments)).supportsDOMEvents=!0,e}return n}(function(){return function e(){f(this,e)}}())),$=null,X=new u.OlP("TRANSITION_ID"),ee=[{provide:u.ip1,useFactory:function(e,t,n){return function(){n.get(u.CZH).donePromise.then(function(){for(var n=l(),r=t.querySelectorAll('style[ng-transition="'.concat(e,'"]')),i=0;i<r.length;i++)n.remove(r[i])})}},deps:[X,k,u.zs3],multi:!0}],te=function(){function e(){f(this,e)}return h(e,[{key:"addToWindow",value:function(e){u.dqk.getAngularTestability=function(t){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=e.findTestabilityInTree(t,n);if(null==r)throw new Error("Could not find testability for element.");return r},u.dqk.getAllAngularTestabilities=function(){return e.getAllTestabilities()},u.dqk.getAllAngularRootElements=function(){return e.getAllRootElements()},u.dqk.frameworkStabilizers||(u.dqk.frameworkStabilizers=[]),u.dqk.frameworkStabilizers.push(function(e){var t=u.dqk.getAllAngularTestabilities(),n=t.length,r=!1,i=function(t){r=r||t,0==--n&&e(r)};t.forEach(function(e){e.whenStable(i)})})}},{key:"findTestabilityInTree",value:function(e,t,n){if(null==t)return null;var r=e.getTestability(t);return null!=r?r:n?l().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}],[{key:"init",value:function(){(0,u.VLi)(new e)}}]),e}(),ne=function(){var e=function(){function e(){f(this,e)}return h(e,[{key:"build",value:function(){return new XMLHttpRequest}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=u.Yz7({token:e,factory:e.\u0275fac}),e}(),re=new u.OlP("EventManagerPlugins"),ie=function(){var e=function(){function e(t,n){var r=this;f(this,e),this._zone=n,this._eventNameToPlugin=new Map,t.forEach(function(e){return e.manager=r}),this._plugins=t.slice().reverse()}return h(e,[{key:"addEventListener",value:function(e,t,n){return this._findPluginFor(t).addEventListener(e,t,n)}},{key:"addGlobalEventListener",value:function(e,t,n){return this._findPluginFor(t).addGlobalEventListener(e,t,n)}},{key:"getZone",value:function(){return this._zone}},{key:"_findPluginFor",value:function(e){var t=this._eventNameToPlugin.get(e);if(t)return t;for(var n=this._plugins,r=0;r<n.length;r++){var i=n[r];if(i.supports(e))return this._eventNameToPlugin.set(e,i),i}throw new Error("No event manager plugin found for event ".concat(e))}}]),e}();return e.\u0275fac=function(t){return new(t||e)(u.LFG(re),u.LFG(u.R0b))},e.\u0275prov=u.Yz7({token:e,factory:e.\u0275fac}),e}(),ae=function(){function e(t){f(this,e),this._doc=t}return h(e,[{key:"addGlobalEventListener",value:function(e,t,n){var r=l().getGlobalEventTarget(this._doc,e);if(!r)throw new Error("Unsupported event target ".concat(r," for event ").concat(t));return this.addEventListener(r,t,n)}}]),e}(),oe=function(){var e=function(){function e(){f(this,e),this._stylesSet=new Set}return h(e,[{key:"addStyles",value:function(e){var t=this,n=new Set;e.forEach(function(e){t._stylesSet.has(e)||(t._stylesSet.add(e),n.add(e))}),this.onStylesAdded(n)}},{key:"onStylesAdded",value:function(e){}},{key:"getAllStyles",value:function(){return Array.from(this._stylesSet)}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=u.Yz7({token:e,factory:e.\u0275fac}),e}(),se=function(){var e=function(e){d(n,e);var t=v(n);function n(e){var r;return f(this,n),(r=t.call(this))._doc=e,r._hostNodes=new Map,r._hostNodes.set(e.head,[]),r}return h(n,[{key:"_addStylesToHost",value:function(e,t,n){var r=this;e.forEach(function(e){var i=r._doc.createElement("style");i.textContent=e,n.push(t.appendChild(i))})}},{key:"addHost",value:function(e){var t=[];this._addStylesToHost(this._stylesSet,e,t),this._hostNodes.set(e,t)}},{key:"removeHost",value:function(e){var t=this._hostNodes.get(e);t&&t.forEach(ue),this._hostNodes.delete(e)}},{key:"onStylesAdded",value:function(e){var t=this;this._hostNodes.forEach(function(n,r){t._addStylesToHost(e,r,n)})}},{key:"ngOnDestroy",value:function(){this._hostNodes.forEach(function(e){return e.forEach(ue)})}}]),n}(oe);return e.\u0275fac=function(t){return new(t||e)(u.LFG(k))},e.\u0275prov=u.Yz7({token:e,factory:e.\u0275fac}),e}();function ue(e){l().remove(e)}var ce={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},le=/%COMP%/g;function he(e,t,n){for(var r=0;r<t.length;r++){var i=t[r];Array.isArray(i)?he(e,i,n):(i=i.replace(le,e),n.push(i))}return n}function fe(e){return function(t){if("__ngUnwrap__"===t)return e;!1===e(t)&&(t.preventDefault(),t.returnValue=!1)}}var de=function(){var e=function(){function e(t,n,r){f(this,e),this.eventManager=t,this.sharedStylesHost=n,this.appId=r,this.rendererByCompId=new Map,this.defaultRenderer=new ve(t)}return h(e,[{key:"createRenderer",value:function(e,t){if(!e||!t)return this.defaultRenderer;switch(t.encapsulation){case u.ifc.Emulated:var n=this.rendererByCompId.get(t.id);return n||(n=new pe(this.eventManager,this.sharedStylesHost,t,this.appId),this.rendererByCompId.set(t.id,n)),n.applyToHost(e),n;case 1:case u.ifc.ShadowDom:return new me(this.eventManager,this.sharedStylesHost,e,t);default:if(!this.rendererByCompId.has(t.id)){var r=he(t.id,t.styles,[]);this.sharedStylesHost.addStyles(r),this.rendererByCompId.set(t.id,this.defaultRenderer)}return this.defaultRenderer}}},{key:"begin",value:function(){}},{key:"end",value:function(){}}]),e}();return e.\u0275fac=function(t){return new(t||e)(u.LFG(ie),u.LFG(se),u.LFG(u.AFp))},e.\u0275prov=u.Yz7({token:e,factory:e.\u0275fac}),e}(),ve=function(){function e(t){f(this,e),this.eventManager=t,this.data=Object.create(null)}return h(e,[{key:"destroy",value:function(){}},{key:"createElement",value:function(e,t){return t?document.createElementNS(ce[t]||t,e):document.createElement(e)}},{key:"createComment",value:function(e){return document.createComment(e)}},{key:"createText",value:function(e){return document.createTextNode(e)}},{key:"appendChild",value:function(e,t){e.appendChild(t)}},{key:"insertBefore",value:function(e,t,n){e&&e.insertBefore(t,n)}},{key:"removeChild",value:function(e,t){e&&e.removeChild(t)}},{key:"selectRootElement",value:function(e,t){var n="string"==typeof e?document.querySelector(e):e;if(!n)throw new Error('The selector "'.concat(e,'" did not match any elements'));return t||(n.textContent=""),n}},{key:"parentNode",value:function(e){return e.parentNode}},{key:"nextSibling",value:function(e){return e.nextSibling}},{key:"setAttribute",value:function(e,t,n,r){if(r){t=r+":"+t;var i=ce[r];i?e.setAttributeNS(i,t,n):e.setAttribute(t,n)}else e.setAttribute(t,n)}},{key:"removeAttribute",value:function(e,t,n){if(n){var r=ce[n];r?e.removeAttributeNS(r,t):e.removeAttribute("".concat(n,":").concat(t))}else e.removeAttribute(t)}},{key:"addClass",value:function(e,t){e.classList.add(t)}},{key:"removeClass",value:function(e,t){e.classList.remove(t)}},{key:"setStyle",value:function(e,t,n,r){r&(u.JOm.DashCase|u.JOm.Important)?e.style.setProperty(t,n,r&u.JOm.Important?"important":""):e.style[t]=n}},{key:"removeStyle",value:function(e,t,n){n&u.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}},{key:"setProperty",value:function(e,t,n){e[t]=n}},{key:"setValue",value:function(e,t){e.nodeValue=t}},{key:"listen",value:function(e,t,n){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,fe(n)):this.eventManager.addEventListener(e,t,fe(n))}}]),e}(),pe=function(e){d(n,e);var t=v(n);function n(e,r,i,a){var o;f(this,n),(o=t.call(this,e)).component=i;var s=he(a+"-"+i.id,i.styles,[]);return r.addStyles(s),o.contentAttr="_ngcontent-%COMP%".replace(le,a+"-"+i.id),o.hostAttr=function(e){return"_nghost-%COMP%".replace(le,e)}(a+"-"+i.id),o}return h(n,[{key:"applyToHost",value:function(e){i(b(n.prototype),"setAttribute",this).call(this,e,this.hostAttr,"")}},{key:"createElement",value:function(e,t){var r=i(b(n.prototype),"createElement",this).call(this,e,t);return i(b(n.prototype),"setAttribute",this).call(this,r,this.contentAttr,""),r}}]),n}(ve),me=function(e){d(n,e);var t=v(n);function n(e,r,i,a){var o;f(this,n),(o=t.call(this,e)).sharedStylesHost=r,o.hostEl=i,o.shadowRoot=i.attachShadow({mode:"open"}),o.sharedStylesHost.addHost(o.shadowRoot);for(var s=he(a.id,a.styles,[]),u=0;u<s.length;u++){var c=document.createElement("style");c.textContent=s[u],o.shadowRoot.appendChild(c)}return o}return h(n,[{key:"nodeOrShadowRoot",value:function(e){return e===this.hostEl?this.shadowRoot:e}},{key:"destroy",value:function(){this.sharedStylesHost.removeHost(this.shadowRoot)}},{key:"appendChild",value:function(e,t){return i(b(n.prototype),"appendChild",this).call(this,this.nodeOrShadowRoot(e),t)}},{key:"insertBefore",value:function(e,t,r){return i(b(n.prototype),"insertBefore",this).call(this,this.nodeOrShadowRoot(e),t,r)}},{key:"removeChild",value:function(e,t){return i(b(n.prototype),"removeChild",this).call(this,this.nodeOrShadowRoot(e),t)}},{key:"parentNode",value:function(e){return this.nodeOrShadowRoot(i(b(n.prototype),"parentNode",this).call(this,this.nodeOrShadowRoot(e)))}}]),n}(ve),ge=function(){var e=function(e){d(n,e);var t=v(n);function n(e){return f(this,n),t.call(this,e)}return h(n,[{key:"supports",value:function(e){return!0}},{key:"addEventListener",value:function(e,t,n){var r=this;return e.addEventListener(t,n,!1),function(){return r.removeEventListener(e,t,n)}}},{key:"removeEventListener",value:function(e,t,n){return e.removeEventListener(t,n)}}]),n}(ae);return e.\u0275fac=function(t){return new(t||e)(u.LFG(k))},e.\u0275prov=u.Yz7({token:e,factory:e.\u0275fac}),e}(),ye=["alt","control","meta","shift"],ke={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},we={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},be={alt:function(e){return e.altKey},control:function(e){return e.ctrlKey},meta:function(e){return e.metaKey},shift:function(e){return e.shiftKey}},_e=function(){var e=function(e){d(n,e);var t=v(n);function n(e){return f(this,n),t.call(this,e)}return h(n,[{key:"supports",value:function(e){return null!=n.parseEventName(e)}},{key:"addEventListener",value:function(e,t,r){var i=n.parseEventName(t),a=n.eventCallback(i.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(function(){return l().onAndCancel(e,i.domEventName,a)})}}],[{key:"parseEventName",value:function(e){var t=e.toLowerCase().split("."),r=t.shift();if(0===t.length||"keydown"!==r&&"keyup"!==r)return null;var i=n._normalizeKey(t.pop()),a="";if(ye.forEach(function(e){var n=t.indexOf(e);n>-1&&(t.splice(n,1),a+=e+".")}),a+=i,0!=t.length||0===i.length)return null;var o={};return o.domEventName=r,o.fullKey=a,o}},{key:"getEventFullKey",value:function(e){var t="",n=function(e){var t=e.key;if(null==t){if(null==(t=e.keyIdentifier))return"Unidentified";t.startsWith("U+")&&(t=String.fromCharCode(parseInt(t.substring(2),16)),3===e.location&&we.hasOwnProperty(t)&&(t=we[t]))}return ke[t]||t}(e);return" "===(n=n.toLowerCase())?n="space":"."===n&&(n="dot"),ye.forEach(function(r){r!=n&&be[r](e)&&(t+=r+".")}),t+=n}},{key:"eventCallback",value:function(e,t,r){return function(i){n.getEventFullKey(i)===e&&r.runGuarded(function(){return t(i)})}}},{key:"_normalizeKey",value:function(e){switch(e){case"esc":return"escape";default:return e}}}]),n}(ae);return e.\u0275fac=function(t){return new(t||e)(u.LFG(k))},e.\u0275prov=u.Yz7({token:e,factory:e.\u0275fac}),e}(),xe=function(){var e=function e(){f(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=(0,u.Yz7)({factory:function(){return(0,u.LFG)(Te)},token:e,providedIn:"root"}),e}(),Te=function(){var e=function(e){d(n,e);var t=v(n);function n(e){var r;return f(this,n),(r=t.call(this))._doc=e,r}return h(n,[{key:"sanitize",value:function(e,t){if(null==t)return null;switch(e){case u.q3G.NONE:return t;case u.q3G.HTML:return(0,u.qzn)(t,"HTML")?(0,u.z3N)(t):(0,u.EiD)(this._doc,String(t)).toString();case u.q3G.STYLE:return(0,u.qzn)(t,"Style")?(0,u.z3N)(t):t;case u.q3G.SCRIPT:if((0,u.qzn)(t,"Script"))return(0,u.z3N)(t);throw new Error("unsafe value used in a script context");case u.q3G.URL:return(0,u.yhl)(t),(0,u.qzn)(t,"URL")?(0,u.z3N)(t):(0,u.mCW)(String(t));case u.q3G.RESOURCE_URL:if((0,u.qzn)(t,"ResourceURL"))return(0,u.z3N)(t);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error("Unexpected SecurityContext ".concat(e," (see https://g.co/ng/security#xss)"))}}},{key:"bypassSecurityTrustHtml",value:function(e){return(0,u.JVY)(e)}},{key:"bypassSecurityTrustStyle",value:function(e){return(0,u.L6k)(e)}},{key:"bypassSecurityTrustScript",value:function(e){return(0,u.eBb)(e)}},{key:"bypassSecurityTrustUrl",value:function(e){return(0,u.LAX)(e)}},{key:"bypassSecurityTrustResourceUrl",value:function(e){return(0,u.pB0)(e)}}]),n}(xe);return e.\u0275fac=function(t){return new(t||e)(u.LFG(k))},e.\u0275prov=(0,u.Yz7)({factory:function(){return function(e){return new Te(e.get(k))}((0,u.LFG)(u.gxx))},token:e,providedIn:"root"}),e}(),Ie=(0,u.eFA)(u._c5,"browser",[{provide:u.Lbi,useValue:"browser"},{provide:u.g9A,useValue:function(){J.makeCurrent(),te.init()},multi:!0},{provide:k,useFactory:function(){return(0,u.RDi)(document),document},deps:[]}]),Se=[[],{provide:u.zSh,useValue:"root"},{provide:u.qLn,useFactory:function(){return new u.qLn},deps:[]},{provide:re,useClass:ge,multi:!0,deps:[k,u.R0b,u.Lbi]},{provide:re,useClass:_e,multi:!0,deps:[k]},[],{provide:de,useClass:de,deps:[ie,se,u.AFp]},{provide:u.FYo,useExisting:de},{provide:oe,useExisting:se},{provide:se,useClass:se,deps:[k]},{provide:u.dDg,useClass:u.dDg,deps:[u.R0b]},{provide:ie,useClass:ie,deps:[re,u.R0b]},{provide:function e(){f(this,e)},useClass:ne,deps:[]},[]],Ee=function(){var e=function(){function e(t){if(f(this,e),t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}return h(e,null,[{key:"withServerTransition",value:function(t){return{ngModule:e,providers:[{provide:u.AFp,useValue:t.appId},{provide:X,useExisting:u.AFp},ee]}}}]),e}();return e.\u0275fac=function(t){return new(t||e)(u.LFG(e,12))},e.\u0275mod=u.oAB({type:e}),e.\u0275inj=u.cJS({providers:Se,imports:[H,u.hGG]}),e}();"undefined"!=typeof window&&window;var Re={apiKey:"AIzaSyAHjWLR6UClo4KMMhGa3T8F5iKF4BJes8E",authDomain:"proyecto-9178b.firebaseapp.com",projectId:"proyecto-9178b",storageBucket:"proyecto-9178b.appspot.com",messagingSenderId:"111386703671",appId:"1:111386703671:web:5eafbec592e37df1e00cb2",measurementId:"G-W41SNQ6BZM"},Ce=o(4402),Ae=o(5917),Ne=o(9765),Oe=o(7971),De=function(e){d(n,e);var t=v(n);function n(e){var r;return f(this,n),(r=t.call(this))._value=e,r}return h(n,[{key:"value",get:function(){return this.getValue()}},{key:"_subscribe",value:function(e){var t=i(b(n.prototype),"_subscribe",this).call(this,e);return t&&!t.closed&&e.next(this._value),t}},{key:"getValue",value:function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new Oe.N;return this._value}},{key:"next",value:function(e){i(b(n.prototype),"next",this).call(this,this._value=e)}}]),n}(Ne.xQ),Pe=o(4869),Le=o(9796),Fe=o(7393),Me=function(e){d(n,e);var t=v(n);function n(){return f(this,n),t.apply(this,arguments)}return h(n,[{key:"notifyNext",value:function(e,t,n,r,i){this.destination.next(t)}},{key:"notifyError",value:function(e,t){this.destination.error(e)}},{key:"notifyComplete",value:function(e){this.destination.complete()}}]),n}(Fe.L),Ue=function(e){d(n,e);var t=v(n);function n(e,r,i){var a;return f(this,n),(a=t.call(this)).parent=e,a.outerValue=r,a.outerIndex=i,a.index=0,a}return h(n,[{key:"_next",value:function(e){this.parent.notifyNext(this.outerValue,e,this.outerIndex,this.index++,this)}},{key:"_error",value:function(e){this.parent.notifyError(e,this),this.unsubscribe()}},{key:"_complete",value:function(){this.parent.notifyComplete(this),this.unsubscribe()}}]),n}(Fe.L),je=o(7444),Ve=o(7574);function qe(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:new Ue(e,n,r);if(!i.closed)return t instanceof Ve.y?t.subscribe(i):(0,je.s)(t)(i)}var Be=o(6693),ze={},Ze=function(){function e(t){f(this,e),this.resultSelector=t}return h(e,[{key:"call",value:function(e,t){return t.subscribe(new He(e,this.resultSelector))}}]),e}(),He=function(e){d(n,e);var t=v(n);function n(e,r){var i;return f(this,n),(i=t.call(this,e)).resultSelector=r,i.active=0,i.values=[],i.observables=[],i}return h(n,[{key:"_next",value:function(e){this.values.push(ze),this.observables.push(e)}},{key:"_complete",value:function(){var e=this.observables,t=e.length;if(0===t)this.destination.complete();else{this.active=t,this.toRespond=t;for(var n=0;n<t;n++)this.add(qe(this,e[n],void 0,n))}}},{key:"notifyComplete",value:function(e){0==(this.active-=1)&&this.destination.complete()}},{key:"notifyNext",value:function(e,t,n){var r=this.values,i=this.toRespond?r[n]===ze?--this.toRespond:this.toRespond:0;r[n]=t,0===i&&(this.resultSelector?this._tryResultSelector(r):this.destination.next(r.slice()))}},{key:"_tryResultSelector",value:function(e){var t;try{t=this.resultSelector.apply(this,e)}catch(n){return void this.destination.error(n)}this.destination.next(t)}}]),n}(Me),Ge=function(){function e(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return e.prototype=Object.create(Error.prototype),e}(),Ke=o(3282);function We(){return(0,Ke.J)(1)(Ae.of.apply(void 0,arguments))}var Qe=o(9193);function Ye(e){return new Ve.y(function(t){var n;try{n=e()}catch(r){return void t.error(r)}return(n?(0,Ce.D)(n):(0,Qe.c)()).subscribe(t)})}var Je=o(2441),$e=o(8002),Xe=o(5345);function et(e,t){return"function"==typeof t?function(n){return n.pipe(et(function(n,r){return(0,Ce.D)(e(n,r)).pipe((0,$e.U)(function(e,i){return t(n,e,r,i)}))}))}:function(t){return t.lift(new tt(e))}}var tt=function(){function e(t){f(this,e),this.project=t}return h(e,[{key:"call",value:function(e,t){return t.subscribe(new nt(e,this.project))}}]),e}(),nt=function(e){d(n,e);var t=v(n);function n(e,r){var i;return f(this,n),(i=t.call(this,e)).project=r,i.index=0,i}return h(n,[{key:"_next",value:function(e){var t,n=this.index++;try{t=this.project(e,n)}catch(r){return void this.destination.error(r)}this._innerSub(t)}},{key:"_innerSub",value:function(e){var t=this.innerSubscription;t&&t.unsubscribe();var n=new Xe.IY(this),r=this.destination;r.add(n),this.innerSubscription=(0,Xe.ft)(e,n),this.innerSubscription!==n&&r.add(this.innerSubscription)}},{key:"_complete",value:function(){var e=this.innerSubscription;(!e||e.closed)&&i(b(n.prototype),"_complete",this).call(this),this.unsubscribe()}},{key:"_unsubscribe",value:function(){this.innerSubscription=void 0}},{key:"notifyComplete",value:function(){this.innerSubscription=void 0,this.isStopped&&i(b(n.prototype),"_complete",this).call(this)}},{key:"notifyNext",value:function(e){this.destination.next(e)}}]),n}(Xe.Ds),rt=function(){function e(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return e.prototype=Object.create(Error.prototype),e}();function it(e){return function(t){return 0===e?(0,Qe.c)():t.lift(new at(e))}}var at=function(){function e(t){if(f(this,e),this.total=t,this.total<0)throw new rt}return h(e,[{key:"call",value:function(e,t){return t.subscribe(new ot(e,this.total))}}]),e}(),ot=function(e){d(n,e);var t=v(n);function n(e,r){var i;return f(this,n),(i=t.call(this,e)).total=r,i.count=0,i}return h(n,[{key:"_next",value:function(e){var t=this.total,n=++this.count;n<=t&&(this.destination.next(e),n===t&&(this.destination.complete(),this.unsubscribe()))}}]),n}(Fe.L);function st(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t[t.length-1];return(0,Pe.K)(r)?(t.pop(),function(e){return We(t,e,r)}):function(e){return We(t,e)}}function ut(e,t){var n=!1;return arguments.length>=2&&(n=!0),function(r){return r.lift(new ct(e,t,n))}}var ct=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];f(this,e),this.accumulator=t,this.seed=n,this.hasSeed=r}return h(e,[{key:"call",value:function(e,t){return t.subscribe(new lt(e,this.accumulator,this.seed,this.hasSeed))}}]),e}(),lt=function(e){d(n,e);var t=v(n);function n(e,r,i,a){var o;return f(this,n),(o=t.call(this,e)).accumulator=r,o._seed=i,o.hasSeed=a,o.index=0,o}return h(n,[{key:"seed",get:function(){return this._seed},set:function(e){this.hasSeed=!0,this._seed=e}},{key:"_next",value:function(e){if(this.hasSeed)return this._tryNext(e);this.seed=e,this.destination.next(e)}},{key:"_tryNext",value:function(e){var t,n=this.index++;try{t=this.accumulator(this.seed,e,n)}catch(r){this.destination.error(r)}this.seed=t,this.destination.next(t)}}]),n}(Fe.L);function ht(e,t){return function(n){return n.lift(new ft(e,t))}}var ft=function(){function e(t,n){f(this,e),this.predicate=t,this.thisArg=n}return h(e,[{key:"call",value:function(e,t){return t.subscribe(new dt(e,this.predicate,this.thisArg))}}]),e}(),dt=function(e){d(n,e);var t=v(n);function n(e,r,i){var a;return f(this,n),(a=t.call(this,e)).predicate=r,a.thisArg=i,a.count=0,a}return h(n,[{key:"_next",value:function(e){var t;try{t=this.predicate.call(this.thisArg,e,this.count++)}catch(n){return void this.destination.error(n)}t&&this.destination.next(e)}}]),n}(Fe.L);function vt(e){return function(t){var n=new pt(e),r=t.lift(n);return n.caught=r}}var pt=function(){function e(t){f(this,e),this.selector=t}return h(e,[{key:"call",value:function(e,t){return t.subscribe(new mt(e,this.selector,this.caught))}}]),e}(),mt=function(e){d(n,e);var t=v(n);function n(e,r,i){var a;return f(this,n),(a=t.call(this,e)).selector=r,a.caught=i,a}return h(n,[{key:"error",value:function(e){if(!this.isStopped){var t;try{t=this.selector(e,this.caught)}catch(o){return void i(b(n.prototype),"error",this).call(this,o)}this._unsubscribeAndRecycle();var r=new Xe.IY(this);this.add(r);var a=(0,Xe.ft)(t,r);a!==r&&this.add(a)}}}]),n}(Xe.Ds),gt=o(9773);function yt(e,t){return(0,gt.zg)(e,t,1)}function kt(e){return function(t){return 0===e?(0,Qe.c)():t.lift(new wt(e))}}var wt=function(){function e(t){if(f(this,e),this.total=t,this.total<0)throw new rt}return h(e,[{key:"call",value:function(e,t){return t.subscribe(new bt(e,this.total))}}]),e}(),bt=function(e){d(n,e);var t=v(n);function n(e,r){var i;return f(this,n),(i=t.call(this,e)).total=r,i.ring=new Array,i.count=0,i}return h(n,[{key:"_next",value:function(e){var t=this.ring,n=this.total,r=this.count++;t.length<n?t.push(e):t[r%n]=e}},{key:"_complete",value:function(){var e=this.destination,t=this.count;if(t>0)for(var n=this.count>=this.total?this.total:this.count,r=this.ring,i=0;i<n;i++){var a=t++%n;e.next(r[a])}e.complete()}}]),n}(Fe.L);function _t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:It;return function(t){return t.lift(new xt(e))}}var xt=function(){function e(t){f(this,e),this.errorFactory=t}return h(e,[{key:"call",value:function(e,t){return t.subscribe(new Tt(e,this.errorFactory))}}]),e}(),Tt=function(e){d(n,e);var t=v(n);function n(e,r){var i;return f(this,n),(i=t.call(this,e)).errorFactory=r,i.hasValue=!1,i}return h(n,[{key:"_next",value:function(e){this.hasValue=!0,this.destination.next(e)}},{key:"_complete",value:function(){if(this.hasValue)return this.destination.complete();var e;try{e=this.errorFactory()}catch(t){e=t}this.destination.error(e)}}]),n}(Fe.L);function It(){return new Ge}function St(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return function(t){return t.lift(new Et(e))}}var Et=function(){function e(t){f(this,e),this.defaultValue=t}return h(e,[{key:"call",value:function(e,t){return t.subscribe(new Rt(e,this.defaultValue))}}]),e}(),Rt=function(e){d(n,e);var t=v(n);function n(e,r){var i;return f(this,n),(i=t.call(this,e)).defaultValue=r,i.isEmpty=!0,i}return h(n,[{key:"_next",value:function(e){this.isEmpty=!1,this.destination.next(e)}},{key:"_complete",value:function(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}]),n}(Fe.L),Ct=o(4487);function At(e,t){var n=arguments.length>=2;return function(r){return r.pipe(e?ht(function(t,n){return e(t,n,r)}):Ct.y,it(1),n?St(t):_t(function(){return new Ge}))}}var Nt=o(3342),Ot=o(1307),Dt=o(5319),Pt=function(){function e(t){f(this,e),this.callback=t}return h(e,[{key:"call",value:function(e,t){return t.subscribe(new Lt(e,this.callback))}}]),e}(),Lt=function(e){d(n,e);var t=v(n);function n(e,r){var i;return f(this,n),(i=t.call(this,e)).add(new Dt.w(r)),i}return n}(Fe.L),Ft=function e(t,n){f(this,e),this.id=t,this.url=n},Mt=function(e){d(n,e);var t=v(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"imperative",o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return f(this,n),(i=t.call(this,e,r)).navigationTrigger=a,i.restoredState=o,i}return h(n,[{key:"toString",value:function(){return"NavigationStart(id: ".concat(this.id,", url: '").concat(this.url,"')")}}]),n}(Ft),Ut=function(e){d(n,e);var t=v(n);function n(e,r,i){var a;return f(this,n),(a=t.call(this,e,r)).urlAfterRedirects=i,a}return h(n,[{key:"toString",value:function(){return"NavigationEnd(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"')")}}]),n}(Ft),jt=function(e){d(n,e);var t=v(n);function n(e,r,i){var a;return f(this,n),(a=t.call(this,e,r)).reason=i,a}return h(n,[{key:"toString",value:function(){return"NavigationCancel(id: ".concat(this.id,", url: '").concat(this.url,"')")}}]),n}(Ft),Vt=function(e){d(n,e);var t=v(n);function n(e,r,i){var a;return f(this,n),(a=t.call(this,e,r)).error=i,a}return h(n,[{key:"toString",value:function(){return"NavigationError(id: ".concat(this.id,", url: '").concat(this.url,"', error: ").concat(this.error,")")}}]),n}(Ft),qt=function(e){d(n,e);var t=v(n);function n(e,r,i,a){var o;return f(this,n),(o=t.call(this,e,r)).urlAfterRedirects=i,o.state=a,o}return h(n,[{key:"toString",value:function(){return"RoutesRecognized(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"', state: ").concat(this.state,")")}}]),n}(Ft),Bt=function(e){d(n,e);var t=v(n);function n(e,r,i,a){var o;return f(this,n),(o=t.call(this,e,r)).urlAfterRedirects=i,o.state=a,o}return h(n,[{key:"toString",value:function(){return"GuardsCheckStart(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"', state: ").concat(this.state,")")}}]),n}(Ft),zt=function(e){d(n,e);var t=v(n);function n(e,r,i,a,o){var s;return f(this,n),(s=t.call(this,e,r)).urlAfterRedirects=i,s.state=a,s.shouldActivate=o,s}return h(n,[{key:"toString",value:function(){return"GuardsCheckEnd(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"', state: ").concat(this.state,", shouldActivate: ").concat(this.shouldActivate,")")}}]),n}(Ft),Zt=function(e){d(n,e);var t=v(n);function n(e,r,i,a){var o;return f(this,n),(o=t.call(this,e,r)).urlAfterRedirects=i,o.state=a,o}return h(n,[{key:"toString",value:function(){return"ResolveStart(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"', state: ").concat(this.state,")")}}]),n}(Ft),Ht=function(e){d(n,e);var t=v(n);function n(e,r,i,a){var o;return f(this,n),(o=t.call(this,e,r)).urlAfterRedirects=i,o.state=a,o}return h(n,[{key:"toString",value:function(){return"ResolveEnd(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"', state: ").concat(this.state,")")}}]),n}(Ft),Gt=function(){function e(t){f(this,e),this.route=t}return h(e,[{key:"toString",value:function(){return"RouteConfigLoadStart(path: ".concat(this.route.path,")")}}]),e}(),Kt=function(){function e(t){f(this,e),this.route=t}return h(e,[{key:"toString",value:function(){return"RouteConfigLoadEnd(path: ".concat(this.route.path,")")}}]),e}(),Wt=function(){function e(t){f(this,e),this.snapshot=t}return h(e,[{key:"toString",value:function(){return"ChildActivationStart(path: '".concat(this.snapshot.routeConfig&&this.snapshot.routeConfig.path||"","')")}}]),e}(),Qt=function(){function e(t){f(this,e),this.snapshot=t}return h(e,[{key:"toString",value:function(){return"ChildActivationEnd(path: '".concat(this.snapshot.routeConfig&&this.snapshot.routeConfig.path||"","')")}}]),e}(),Yt=function(){function e(t){f(this,e),this.snapshot=t}return h(e,[{key:"toString",value:function(){return"ActivationStart(path: '".concat(this.snapshot.routeConfig&&this.snapshot.routeConfig.path||"","')")}}]),e}(),Jt=function(){function e(t){f(this,e),this.snapshot=t}return h(e,[{key:"toString",value:function(){return"ActivationEnd(path: '".concat(this.snapshot.routeConfig&&this.snapshot.routeConfig.path||"","')")}}]),e}(),$t=function(){function e(t,n,r){f(this,e),this.routerEvent=t,this.position=n,this.anchor=r}return h(e,[{key:"toString",value:function(){return"Scroll(anchor: '".concat(this.anchor,"', position: '").concat(this.position?"".concat(this.position[0],", ").concat(this.position[1]):null,"')")}}]),e}(),Xt="primary",en=function(){function e(t){f(this,e),this.params=t||{}}return h(e,[{key:"has",value:function(e){return Object.prototype.hasOwnProperty.call(this.params,e)}},{key:"get",value:function(e){if(this.has(e)){var t=this.params[e];return Array.isArray(t)?t[0]:t}return null}},{key:"getAll",value:function(e){if(this.has(e)){var t=this.params[e];return Array.isArray(t)?t:[t]}return[]}},{key:"keys",get:function(){return Object.keys(this.params)}}]),e}();function tn(e){return new en(e)}var nn="ngNavigationCancelingError";function rn(e){var t=Error("NavigationCancelingError: "+e);return t[nn]=!0,t}function an(e,t,n){var r=n.path.split("/");if(r.length>e.length||"full"===n.pathMatch&&(t.hasChildren()||r.length<e.length))return null;for(var i={},a=0;a<r.length;a++){var o=r[a],s=e[a];if(o.startsWith(":"))i[o.substring(1)]=s;else if(o!==s.path)return null}return{consumed:e.slice(0,r.length),posParams:i}}function on(e,t){var n,r=e?Object.keys(e):void 0,i=t?Object.keys(t):void 0;if(!r||!i||r.length!=i.length)return!1;for(var a=0;a<r.length;a++)if(!sn(e[n=r[a]],t[n]))return!1;return!0}function sn(e,t){if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return!1;var n=a(e).sort(),r=a(t).sort();return n.every(function(e,t){return r[t]===e})}return e===t}function un(e){return Array.prototype.concat.apply([],e)}function cn(e){return e.length>0?e[e.length-1]:null}function ln(e,t){for(var n in e)e.hasOwnProperty(n)&&t(e[n],n)}function hn(e){return(0,u.CqO)(e)?e:(0,u.QGY)(e)?(0,Ce.D)(Promise.resolve(e)):(0,Ae.of)(e)}var fn={exact:function e(t,n,r){if(!bn(t.segments,n.segments)||!gn(t.segments,n.segments,r)||t.numberOfChildren!==n.numberOfChildren)return!1;for(var i in n.children)if(!t.children[i]||!e(t.children[i],n.children[i],r))return!1;return!0},subset:pn},dn={exact:function(e,t){return on(e,t)},subset:function(e,t){return Object.keys(t).length<=Object.keys(e).length&&Object.keys(t).every(function(n){return sn(e[n],t[n])})},ignored:function(){return!0}};function vn(e,t,n){return fn[n.paths](e.root,t.root,n.matrixParams)&&dn[n.queryParams](e.queryParams,t.queryParams)&&!("exact"===n.fragment&&e.fragment!==t.fragment)}function pn(e,t,n){return mn(e,t,t.segments,n)}function mn(e,t,n,r){if(e.segments.length>n.length){var i=e.segments.slice(0,n.length);return!(!bn(i,n)||t.hasChildren()||!gn(i,n,r))}if(e.segments.length===n.length){if(!bn(e.segments,n)||!gn(e.segments,n,r))return!1;for(var a in t.children)if(!e.children[a]||!pn(e.children[a],t.children[a],r))return!1;return!0}var o=n.slice(0,e.segments.length),s=n.slice(e.segments.length);return!!(bn(e.segments,o)&&gn(e.segments,o,r)&&e.children[Xt])&&mn(e.children[Xt],t,s,r)}function gn(e,t,n){return t.every(function(t,r){return dn[n](e[r].parameters,t.parameters)})}var yn=function(){function e(t,n,r){f(this,e),this.root=t,this.queryParams=n,this.fragment=r}return h(e,[{key:"queryParamMap",get:function(){return this._queryParamMap||(this._queryParamMap=tn(this.queryParams)),this._queryParamMap}},{key:"toString",value:function(){return Tn.serialize(this)}}]),e}(),kn=function(){function e(t,n){var r=this;f(this,e),this.segments=t,this.children=n,this.parent=null,ln(n,function(e,t){return e.parent=r})}return h(e,[{key:"hasChildren",value:function(){return this.numberOfChildren>0}},{key:"numberOfChildren",get:function(){return Object.keys(this.children).length}},{key:"toString",value:function(){return In(this)}}]),e}(),wn=function(){function e(t,n){f(this,e),this.path=t,this.parameters=n}return h(e,[{key:"parameterMap",get:function(){return this._parameterMap||(this._parameterMap=tn(this.parameters)),this._parameterMap}},{key:"toString",value:function(){return On(this)}}]),e}();function bn(e,t){return e.length===t.length&&e.every(function(e,n){return e.path===t[n].path})}var _n=function e(){f(this,e)},xn=function(){function e(){f(this,e)}return h(e,[{key:"parse",value:function(e){var t=new Mn(e);return new yn(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}},{key:"serialize",value:function(e){var t;return"".concat("/".concat(Sn(e.root,!0)),function(e){var t=Object.keys(e).map(function(t){var n=e[t];return Array.isArray(n)?n.map(function(e){return"".concat(Rn(t),"=").concat(Rn(e))}).join("&"):"".concat(Rn(t),"=").concat(Rn(n))}).filter(function(e){return!!e});return t.length?"?".concat(t.join("&")):""}(e.queryParams)).concat("string"==typeof e.fragment?"#".concat((t=e.fragment,encodeURI(t))):"")}}]),e}(),Tn=new xn;function In(e){return e.segments.map(function(e){return On(e)}).join("/")}function Sn(e,t){if(!e.hasChildren())return In(e);if(t){var n=e.children[Xt]?Sn(e.children[Xt],!1):"",r=[];return ln(e.children,function(e,t){t!==Xt&&r.push("".concat(t,":").concat(Sn(e,!1)))}),r.length>0?"".concat(n,"(").concat(r.join("//"),")"):n}var i=function(e,t){var n=[];return ln(e.children,function(e,r){r===Xt&&(n=n.concat(t(e,r)))}),ln(e.children,function(e,r){r!==Xt&&(n=n.concat(t(e,r)))}),n}(e,function(t,n){return n===Xt?[Sn(e.children[Xt],!1)]:["".concat(n,":").concat(Sn(t,!1))]});return 1===Object.keys(e.children).length&&null!=e.children[Xt]?"".concat(In(e),"/").concat(i[0]):"".concat(In(e),"/(").concat(i.join("//"),")")}function En(e){return encodeURIComponent(e).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Rn(e){return En(e).replace(/%3B/gi,";")}function Cn(e){return En(e).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function An(e){return decodeURIComponent(e)}function Nn(e){return An(e.replace(/\+/g,"%20"))}function On(e){return"".concat(Cn(e.path)).concat(function(e){return Object.keys(e).map(function(t){return";".concat(Cn(t),"=").concat(Cn(e[t]))}).join("")}(e.parameters))}var Dn=/^[^\/()?;=#]+/;function Pn(e){var t=e.match(Dn);return t?t[0]:""}var Ln=/^[^=?&#]+/,Fn=/^[^?&#]+/,Mn=function(){function e(t){f(this,e),this.url=t,this.remaining=t}return h(e,[{key:"parseRootSegment",value:function(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new kn([],{}):new kn([],this.parseChildren())}},{key:"parseQueryParams",value:function(){var e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}},{key:"parseFragment",value:function(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}},{key:"parseChildren",value:function(){if(""===this.remaining)return{};this.consumeOptional("/");var e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());var t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));var n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(n[Xt]=new kn(e,t)),n}},{key:"parseSegment",value:function(){var e=Pn(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error("Empty path url segment cannot have parameters: '".concat(this.remaining,"'."));return this.capture(e),new wn(An(e),this.parseMatrixParams())}},{key:"parseMatrixParams",value:function(){for(var e={};this.consumeOptional(";");)this.parseParam(e);return e}},{key:"parseParam",value:function(e){var t=Pn(this.remaining);if(t){this.capture(t);var n="";if(this.consumeOptional("=")){var r=Pn(this.remaining);r&&(n=r,this.capture(n))}e[An(t)]=An(n)}}},{key:"parseQueryParam",value:function(e){var t=function(e){var t=e.match(Ln);return t?t[0]:""}(this.remaining);if(t){this.capture(t);var n="";if(this.consumeOptional("=")){var r=function(e){var t=e.match(Fn);return t?t[0]:""}(this.remaining);r&&(n=r,this.capture(n))}var i=Nn(t),a=Nn(n);if(e.hasOwnProperty(i)){var o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(a)}else e[i]=a}}},{key:"parseParens",value:function(e){var t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){var n=Pn(this.remaining),r=this.remaining[n.length];if("/"!==r&&")"!==r&&";"!==r)throw new Error("Cannot parse url '".concat(this.url,"'"));var i=void 0;n.indexOf(":")>-1?(i=n.substr(0,n.indexOf(":")),this.capture(i),this.capture(":")):e&&(i=Xt);var a=this.parseChildren();t[i]=1===Object.keys(a).length?a[Xt]:new kn([],a),this.consumeOptional("//")}return t}},{key:"peekStartsWith",value:function(e){return this.remaining.startsWith(e)}},{key:"consumeOptional",value:function(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}},{key:"capture",value:function(e){if(!this.consumeOptional(e))throw new Error('Expected "'.concat(e,'".'))}}]),e}(),Un=function(){function e(t){f(this,e),this._root=t}return h(e,[{key:"root",get:function(){return this._root.value}},{key:"parent",value:function(e){var t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}},{key:"children",value:function(e){var t=jn(e,this._root);return t?t.children.map(function(e){return e.value}):[]}},{key:"firstChild",value:function(e){var t=jn(e,this._root);return t&&t.children.length>0?t.children[0].value:null}},{key:"siblings",value:function(e){var t=Vn(e,this._root);return t.length<2?[]:t[t.length-2].children.map(function(e){return e.value}).filter(function(t){return t!==e})}},{key:"pathFromRoot",value:function(e){return Vn(e,this._root).map(function(e){return e.value})}}]),e}();function jn(e,t){if(e===t.value)return t;var n,r=s(t.children);try{for(r.s();!(n=r.n()).done;){var i=jn(e,n.value);if(i)return i}}catch(a){r.e(a)}finally{r.f()}return null}function Vn(e,t){if(e===t.value)return[t];var n,r=s(t.children);try{for(r.s();!(n=r.n()).done;){var i=Vn(e,n.value);if(i.length)return i.unshift(t),i}}catch(a){r.e(a)}finally{r.f()}return[]}var qn=function(){function e(t,n){f(this,e),this.value=t,this.children=n}return h(e,[{key:"toString",value:function(){return"TreeNode(".concat(this.value,")")}}]),e}();function Bn(e){var t={};return e&&e.children.forEach(function(e){return t[e.value.outlet]=e}),t}var zn=function(e){d(n,e);var t=v(n);function n(e,r){var i;return f(this,n),(i=t.call(this,e)).snapshot=r,Qn(m(i),e),i}return h(n,[{key:"toString",value:function(){return this.snapshot.toString()}}]),n}(Un);function Zn(e,t){var n=function(e,t){var n=new Kn([],{},{},"",{},Xt,t,null,e.root,-1,{});return new Wn("",new qn(n,[]))}(e,t),r=new De([new wn("",{})]),i=new De({}),a=new De({}),o=new De({}),s=new De(""),u=new Hn(r,i,o,s,a,Xt,t,n.root);return u.snapshot=n.root,new zn(new qn(u,[]),n)}var Hn=function(){function e(t,n,r,i,a,o,s,u){f(this,e),this.url=t,this.params=n,this.queryParams=r,this.fragment=i,this.data=a,this.outlet=o,this.component=s,this._futureSnapshot=u}return h(e,[{key:"routeConfig",get:function(){return this._futureSnapshot.routeConfig}},{key:"root",get:function(){return this._routerState.root}},{key:"parent",get:function(){return this._routerState.parent(this)}},{key:"firstChild",get:function(){return this._routerState.firstChild(this)}},{key:"children",get:function(){return this._routerState.children(this)}},{key:"pathFromRoot",get:function(){return this._routerState.pathFromRoot(this)}},{key:"paramMap",get:function(){return this._paramMap||(this._paramMap=this.params.pipe((0,$e.U)(function(e){return tn(e)}))),this._paramMap}},{key:"queryParamMap",get:function(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,$e.U)(function(e){return tn(e)}))),this._queryParamMap}},{key:"toString",value:function(){return this.snapshot?this.snapshot.toString():"Future(".concat(this._futureSnapshot,")")}}]),e}();function Gn(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"emptyOnly",n=e.pathFromRoot,r=0;if("always"!==t)for(r=n.length-1;r>=1;){var i=n[r],a=n[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(a.component)break;r--}}return function(e){return e.reduce(function(e,t){return{params:Object.assign(Object.assign({},e.params),t.params),data:Object.assign(Object.assign({},e.data),t.data),resolve:Object.assign(Object.assign({},e.resolve),t._resolvedData)}},{params:{},data:{},resolve:{}})}(n.slice(r))}var Kn=function(){function e(t,n,r,i,a,o,s,u,c,l,h){f(this,e),this.url=t,this.params=n,this.queryParams=r,this.fragment=i,this.data=a,this.outlet=o,this.component=s,this.routeConfig=u,this._urlSegment=c,this._lastPathIndex=l,this._resolve=h}return h(e,[{key:"root",get:function(){return this._routerState.root}},{key:"parent",get:function(){return this._routerState.parent(this)}},{key:"firstChild",get:function(){return this._routerState.firstChild(this)}},{key:"children",get:function(){return this._routerState.children(this)}},{key:"pathFromRoot",get:function(){return this._routerState.pathFromRoot(this)}},{key:"paramMap",get:function(){return this._paramMap||(this._paramMap=tn(this.params)),this._paramMap}},{key:"queryParamMap",get:function(){return this._queryParamMap||(this._queryParamMap=tn(this.queryParams)),this._queryParamMap}},{key:"toString",value:function(){return"Route(url:'".concat(this.url.map(function(e){return e.toString()}).join("/"),"', path:'").concat(this.routeConfig?this.routeConfig.path:"","')")}}]),e}(),Wn=function(e){d(n,e);var t=v(n);function n(e,r){var i;return f(this,n),(i=t.call(this,r)).url=e,Qn(m(i),r),i}return h(n,[{key:"toString",value:function(){return Yn(this._root)}}]),n}(Un);function Qn(e,t){t.value._routerState=e,t.children.forEach(function(t){return Qn(e,t)})}function Yn(e){var t=e.children.length>0?" { ".concat(e.children.map(Yn).join(", ")," } "):"";return"".concat(e.value).concat(t)}function Jn(e){if(e.snapshot){var t=e.snapshot,n=e._futureSnapshot;e.snapshot=n,on(t.queryParams,n.queryParams)||e.queryParams.next(n.queryParams),t.fragment!==n.fragment&&e.fragment.next(n.fragment),on(t.params,n.params)||e.params.next(n.params),function(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;++n)if(!on(e[n],t[n]))return!1;return!0}(t.url,n.url)||e.url.next(n.url),on(t.data,n.data)||e.data.next(n.data)}else e.snapshot=e._futureSnapshot,e.data.next(e._futureSnapshot.data)}function $n(e,t){return on(e.params,t.params)&&function(e,t){return bn(e,t)&&e.every(function(e,n){return on(e.parameters,t[n].parameters)})}(e.url,t.url)&&!(!e.parent!=!t.parent)&&(!e.parent||$n(e.parent,t.parent))}function Xn(e,t,n){if(n&&e.shouldReuseRoute(t.value,n.value.snapshot)){var r=n.value;r._futureSnapshot=t.value;var i=function(e,t,n){return t.children.map(function(t){var r,i=s(n.children);try{for(i.s();!(r=i.n()).done;){var a=r.value;if(e.shouldReuseRoute(t.value,a.value.snapshot))return Xn(e,t,a)}}catch(o){i.e(o)}finally{i.f()}return Xn(e,t)})}(e,t,n);return new qn(r,i)}if(e.shouldAttach(t.value)){var a=e.retrieve(t.value);if(null!==a){var o=a.route;return er(t,o),o}}var u=function(e){return new Hn(new De(e.url),new De(e.params),new De(e.queryParams),new De(e.fragment),new De(e.data),e.outlet,e.component,e)}(t.value),c=t.children.map(function(t){return Xn(e,t)});return new qn(u,c)}function er(e,t){if(e.value.routeConfig!==t.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(e.children.length!==t.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");t.value._futureSnapshot=e.value;for(var n=0;n<e.children.length;++n)er(e.children[n],t.children[n])}function tr(e){return"object"==typeof e&&null!=e&&!e.outlets&&!e.segmentPath}function nr(e){return"object"==typeof e&&null!=e&&e.outlets}function rr(e,t,n,r,i){var a={};return r&&ln(r,function(e,t){a[t]=Array.isArray(e)?e.map(function(e){return"".concat(e)}):"".concat(e)}),new yn(n.root===e?t:ir(n.root,e,t),a,i)}function ir(e,t,n){var r={};return ln(e.children,function(e,i){r[i]=e===t?n:ir(e,t,n)}),new kn(e.segments,r)}var ar=function(){function e(t,n,r){if(f(this,e),this.isAbsolute=t,this.numberOfDoubleDots=n,this.commands=r,t&&r.length>0&&tr(r[0]))throw new Error("Root segment cannot have matrix parameters");var i=r.find(nr);if(i&&i!==cn(r))throw new Error("{outlets:{}} has to be the last command")}return h(e,[{key:"toRoot",value:function(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}]),e}(),or=function e(t,n,r){f(this,e),this.segmentGroup=t,this.processChildren=n,this.index=r};function sr(e,t,n){if(e||(e=new kn([],{})),0===e.segments.length&&e.hasChildren())return ur(e,t,n);var r=function(e,t,n){for(var r=0,i=t,a={match:!1,pathIndex:0,commandIndex:0};i<e.segments.length;){if(r>=n.length)return a;var o=e.segments[i],s=n[r];if(nr(s))break;var u="".concat(s),c=r<n.length-1?n[r+1]:null;if(i>0&&void 0===u)break;if(u&&c&&"object"==typeof c&&void 0===c.outlets){if(!fr(u,c,o))return a;r+=2}else{if(!fr(u,{},o))return a;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(e,t,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<e.segments.length){var a=new kn(e.segments.slice(0,r.pathIndex),{});return a.children[Xt]=new kn(e.segments.slice(r.pathIndex),e.children),ur(a,0,i)}return r.match&&0===i.length?new kn(e.segments,{}):r.match&&!e.hasChildren()?cr(e,t,n):r.match?ur(e,0,i):cr(e,t,n)}function ur(t,n,r){if(0===r.length)return new kn(t.segments,{});var i=function(t){return nr(t[0])?t[0].outlets:e({},Xt,t)}(r),a={};return ln(i,function(e,r){"string"==typeof e&&(e=[e]),null!==e&&(a[r]=sr(t.children[r],n,e))}),ln(t.children,function(e,t){void 0===i[t]&&(a[t]=e)}),new kn(t.segments,a)}function cr(e,t,n){for(var r=e.segments.slice(0,t),i=0;i<n.length;){var a=n[i];if(nr(a)){var o=lr(a.outlets);return new kn(r,o)}if(0===i&&tr(n[0]))r.push(new wn(e.segments[t].path,hr(n[0]))),i++;else{var s=nr(a)?a.outlets[Xt]:"".concat(a),u=i<n.length-1?n[i+1]:null;s&&u&&tr(u)?(r.push(new wn(s,hr(u))),i+=2):(r.push(new wn(s,{})),i++)}}return new kn(r,{})}function lr(e){var t={};return ln(e,function(e,n){"string"==typeof e&&(e=[e]),null!==e&&(t[n]=cr(new kn([],{}),0,e))}),t}function hr(e){var t={};return ln(e,function(e,n){return t[n]="".concat(e)}),t}function fr(e,t,n){return e==n.path&&on(t,n.parameters)}var dr=function(){function e(t,n,r,i){f(this,e),this.routeReuseStrategy=t,this.futureState=n,this.currState=r,this.forwardEvent=i}return h(e,[{key:"activate",value:function(e){var t=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,n,e),Jn(this.futureState.root),this.activateChildRoutes(t,n,e)}},{key:"deactivateChildRoutes",value:function(e,t,n){var r=this,i=Bn(t);e.children.forEach(function(e){var t=e.value.outlet;r.deactivateRoutes(e,i[t],n),delete i[t]}),ln(i,function(e,t){r.deactivateRouteAndItsChildren(e,n)})}},{key:"deactivateRoutes",value:function(e,t,n){var r=e.value,i=t?t.value:null;if(r===i)if(r.component){var a=n.getContext(r.outlet);a&&this.deactivateChildRoutes(e,t,a.children)}else this.deactivateChildRoutes(e,t,n);else i&&this.deactivateRouteAndItsChildren(t,n)}},{key:"deactivateRouteAndItsChildren",value:function(e,t){this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}},{key:"detachAndStoreRouteSubtree",value:function(e,t){var n=t.getContext(e.value.outlet);if(n&&n.outlet){var r=n.outlet.detach(),i=n.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:r,route:e,contexts:i})}}},{key:"deactivateRouteAndOutlet",value:function(e,t){for(var n=t.getContext(e.value.outlet),r=n&&e.value.component?n.children:t,i=Bn(e),a=0,o=Object.keys(i);a<o.length;a++){var s=o[a];this.deactivateRouteAndItsChildren(i[s],r)}n&&n.outlet&&(n.outlet.deactivate(),n.children.onOutletDeactivated(),n.attachRef=null,n.resolver=null,n.route=null)}},{key:"activateChildRoutes",value:function(e,t,n){var r=this,i=Bn(t);e.children.forEach(function(e){r.activateRoutes(e,i[e.value.outlet],n),r.forwardEvent(new Jt(e.value.snapshot))}),e.children.length&&this.forwardEvent(new Qt(e.value.snapshot))}},{key:"activateRoutes",value:function(e,t,n){var r=e.value,i=t?t.value:null;if(Jn(r),r===i)if(r.component){var a=n.getOrCreateContext(r.outlet);this.activateChildRoutes(e,t,a.children)}else this.activateChildRoutes(e,t,n);else if(r.component){var o=n.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){var s=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),o.children.onOutletReAttached(s.contexts),o.attachRef=s.componentRef,o.route=s.route.value,o.outlet&&o.outlet.attach(s.componentRef,s.route.value),vr(s.route)}else{var u=function(e){for(var t=e.parent;t;t=t.parent){var n=t.routeConfig;if(n&&n._loadedConfig)return n._loadedConfig;if(n&&n.component)return null}return null}(r.snapshot),c=u?u.module.componentFactoryResolver:null;o.attachRef=null,o.route=r,o.resolver=c,o.outlet&&o.outlet.activateWith(r,c),this.activateChildRoutes(e,null,o.children)}}else this.activateChildRoutes(e,null,n)}}]),e}();function vr(e){Jn(e.value),e.children.forEach(vr)}var pr=function e(t,n){f(this,e),this.routes=t,this.module=n};function mr(e){return"function"==typeof e}function gr(e){return e instanceof yn}var yr=Symbol("INITIAL_VALUE");function kr(){return et(function(e){return function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r,i;return(0,Pe.K)(t[t.length-1])&&(i=t.pop()),"function"==typeof t[t.length-1]&&(r=t.pop()),1===t.length&&(0,Le.k)(t[0])&&(t=t[0]),(0,Be.n)(t,i).lift(new Ze(r))}(e.map(function(e){return e.pipe(it(1),st(yr))})).pipe(ut(function(e,t){var n=!1;return t.reduce(function(e,r,i){return e!==yr?e:(r===yr&&(n=!0),n||!1!==r&&i!==t.length-1&&!gr(r)?e:r)},e)},yr),ht(function(e){return e!==yr}),(0,$e.U)(function(e){return gr(e)?e:!0===e}),it(1))})}var wr=function(){var e=function e(){f(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=u.Xpm({type:e,selectors:[["ng-component"]],decls:1,vars:0,template:function(e,t){1&e&&u._UZ(0,"router-outlet")},directives:function(){return[yi]},encapsulation:2}),e}();function br(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=0;n<e.length;n++){var r=e[n];_r(r,xr(t,r))}}function _r(e,t){e.children&&br(e.children,t)}function xr(e,t){return t?e||t.path?e&&!t.path?"".concat(e,"/"):!e&&t.path?t.path:"".concat(e,"/").concat(t.path):"":e}function Tr(e){var t=e.children&&e.children.map(Tr),n=t?Object.assign(Object.assign({},e),{children:t}):Object.assign({},e);return!n.component&&(t||n.loadChildren)&&n.outlet&&n.outlet!==Xt&&(n.component=wr),n}function Ir(e){return e.outlet||Xt}function Sr(e,t){var n=e.filter(function(e){return Ir(e)===t});return n.push.apply(n,a(e.filter(function(e){return Ir(e)!==t}))),n}var Er={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function Rr(e,t,n){var r;if(""===t.path)return"full"===t.pathMatch&&(e.hasChildren()||n.length>0)?Object.assign({},Er):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};var i=(t.matcher||an)(n,e,t);if(!i)return Object.assign({},Er);var a={};ln(i.posParams,function(e,t){a[t]=e.path});var o=i.consumed.length>0?Object.assign(Object.assign({},a),i.consumed[i.consumed.length-1].parameters):a;return{matched:!0,consumedSegments:i.consumed,lastChild:i.consumed.length,parameters:o,positionalParamSegments:null!==(r=i.posParams)&&void 0!==r?r:{}}}function Cr(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"corrected";if(n.length>0&&function(e,t,n){return n.some(function(n){return Ar(e,t,n)&&Ir(n)!==Xt})}(e,n,r)){var a=new kn(t,function(e,t,n,r){var i={};i[Xt]=r,r._sourceSegment=e,r._segmentIndexShift=t.length;var a,o=s(n);try{for(o.s();!(a=o.n()).done;){var u=a.value;if(""===u.path&&Ir(u)!==Xt){var c=new kn([],{});c._sourceSegment=e,c._segmentIndexShift=t.length,i[Ir(u)]=c}}}catch(l){o.e(l)}finally{o.f()}return i}(e,t,r,new kn(n,e.children)));return a._sourceSegment=e,a._segmentIndexShift=t.length,{segmentGroup:a,slicedSegments:[]}}if(0===n.length&&function(e,t,n){return n.some(function(n){return Ar(e,t,n)})}(e,n,r)){var o=new kn(e.segments,function(e,t,n,r,i,a){var o,u={},c=s(r);try{for(c.s();!(o=c.n()).done;){var l=o.value;if(Ar(e,n,l)&&!i[Ir(l)]){var h=new kn([],{});h._sourceSegment=e,h._segmentIndexShift="legacy"===a?e.segments.length:t.length,u[Ir(l)]=h}}}catch(f){c.e(f)}finally{c.f()}return Object.assign(Object.assign({},i),u)}(e,t,n,r,e.children,i));return o._sourceSegment=e,o._segmentIndexShift=t.length,{segmentGroup:o,slicedSegments:n}}var u=new kn(e.segments,e.children);return u._sourceSegment=e,u._segmentIndexShift=t.length,{segmentGroup:u,slicedSegments:n}}function Ar(e,t,n){return(!(e.hasChildren()||t.length>0)||"full"!==n.pathMatch)&&""===n.path}function Nr(e,t,n,r){return!!(Ir(e)===r||r!==Xt&&Ar(t,n,e))&&("**"===e.path||Rr(t,e,n).matched)}function Or(e,t,n){return 0===t.length&&!e.children[n]}var Dr=function e(t){f(this,e),this.segmentGroup=t||null},Pr=function e(t){f(this,e),this.urlTree=t};function Lr(e){return new Ve.y(function(t){return t.error(new Dr(e))})}function Fr(e){return new Ve.y(function(t){return t.error(new Pr(e))})}function Mr(e){return new Ve.y(function(t){return t.error(new Error("Only absolute redirects can have named outlets. redirectTo: '".concat(e,"'")))})}var Ur=function(){function t(e,n,r,i,a){f(this,t),this.configLoader=n,this.urlSerializer=r,this.urlTree=i,this.config=a,this.allowRedirects=!0,this.ngModule=e.get(u.h0i)}return h(t,[{key:"apply",value:function(){var e=this,t=Cr(this.urlTree.root,[],[],this.config).segmentGroup,n=new kn(t.segments,t.children);return this.expandSegmentGroup(this.ngModule,this.config,n,Xt).pipe((0,$e.U)(function(t){return e.createUrlTree(jr(t),e.urlTree.queryParams,e.urlTree.fragment)})).pipe(vt(function(t){if(t instanceof Pr)return e.allowRedirects=!1,e.match(t.urlTree);throw t instanceof Dr?e.noMatchError(t):t}))}},{key:"match",value:function(e){var t=this;return this.expandSegmentGroup(this.ngModule,this.config,e.root,Xt).pipe((0,$e.U)(function(n){return t.createUrlTree(jr(n),e.queryParams,e.fragment)})).pipe(vt(function(e){throw e instanceof Dr?t.noMatchError(e):e}))}},{key:"noMatchError",value:function(e){return new Error("Cannot match any routes. URL Segment: '".concat(e.segmentGroup,"'"))}},{key:"createUrlTree",value:function(t,n,r){var i=t.segments.length>0?new kn([],e({},Xt,t)):t;return new yn(i,n,r)}},{key:"expandSegmentGroup",value:function(e,t,n,r){return 0===n.segments.length&&n.hasChildren()?this.expandChildren(e,t,n).pipe((0,$e.U)(function(e){return new kn([],e)})):this.expandSegment(e,n,t,n.segments,r,!0)}},{key:"expandChildren",value:function(e,t,n){for(var r=this,i=[],a=0,o=Object.keys(n.children);a<o.length;a++){var s=o[a];"primary"===s?i.unshift(s):i.push(s)}return(0,Ce.D)(i).pipe(yt(function(i){var a=n.children[i],o=Sr(t,i);return r.expandSegmentGroup(e,o,a,i).pipe((0,$e.U)(function(e){return{segment:e,outlet:i}}))}),ut(function(e,t){return e[t.outlet]=t.segment,e},{}),function(e,t){var n=arguments.length>=2;return function(r){return r.pipe(e?ht(function(t,n){return e(t,n,r)}):Ct.y,kt(1),n?St(t):_t(function(){return new Ge}))}}())}},{key:"expandSegment",value:function(e,t,n,r,i,a){var o=this;return(0,Ce.D)(n).pipe(yt(function(s){return o.expandSegmentAgainstRoute(e,t,n,s,r,i,a).pipe(vt(function(e){if(e instanceof Dr)return(0,Ae.of)(null);throw e}))}),At(function(e){return!!e}),vt(function(e,n){if(e instanceof Ge||"EmptyError"===e.name){if(Or(t,r,i))return(0,Ae.of)(new kn([],{}));throw new Dr(t)}throw e}))}},{key:"expandSegmentAgainstRoute",value:function(e,t,n,r,i,a,o){return Nr(r,t,i,a)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,t,r,i,a):o&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,n,r,i,a):Lr(t):Lr(t)}},{key:"expandSegmentAgainstRouteUsingRedirect",value:function(e,t,n,r,i,a){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,n,r,a):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,n,r,i,a)}},{key:"expandWildCardWithParamsAgainstRouteUsingRedirect",value:function(e,t,n,r){var i=this,a=this.applyRedirectCommands([],n.redirectTo,{});return n.redirectTo.startsWith("/")?Fr(a):this.lineralizeSegments(n,a).pipe((0,gt.zg)(function(n){var a=new kn(n,{});return i.expandSegment(e,a,t,n,r,!1)}))}},{key:"expandRegularSegmentAgainstRouteUsingRedirect",value:function(e,t,n,r,i,a){var o=this,s=Rr(t,r,i),u=s.matched,c=s.consumedSegments,l=s.lastChild,h=s.positionalParamSegments;if(!u)return Lr(t);var f=this.applyRedirectCommands(c,r.redirectTo,h);return r.redirectTo.startsWith("/")?Fr(f):this.lineralizeSegments(r,f).pipe((0,gt.zg)(function(r){return o.expandSegment(e,t,n,r.concat(i.slice(l)),a,!1)}))}},{key:"matchSegmentAgainstRoute",value:function(e,t,n,r,i){var a=this;if("**"===n.path)return n.loadChildren?(n._loadedConfig?(0,Ae.of)(n._loadedConfig):this.configLoader.load(e.injector,n)).pipe((0,$e.U)(function(e){return n._loadedConfig=e,new kn(r,{})})):(0,Ae.of)(new kn(r,{}));var o=Rr(t,n,r),s=o.matched,u=o.consumedSegments,c=o.lastChild;if(!s)return Lr(t);var l=r.slice(c);return this.getChildConfig(e,n,r).pipe((0,gt.zg)(function(e){var r=e.module,o=e.routes,s=Cr(t,u,l,o),c=s.segmentGroup,h=s.slicedSegments,f=new kn(c.segments,c.children);if(0===h.length&&f.hasChildren())return a.expandChildren(r,o,f).pipe((0,$e.U)(function(e){return new kn(u,e)}));if(0===o.length&&0===h.length)return(0,Ae.of)(new kn(u,{}));var d=Ir(n)===i;return a.expandSegment(r,f,o,h,d?Xt:i,!0).pipe((0,$e.U)(function(e){return new kn(u.concat(e.segments),e.children)}))}))}},{key:"getChildConfig",value:function(e,t,n){var r=this;return t.children?(0,Ae.of)(new pr(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?(0,Ae.of)(t._loadedConfig):this.runCanLoadGuards(e.injector,t,n).pipe((0,gt.zg)(function(n){return n?r.configLoader.load(e.injector,t).pipe((0,$e.U)(function(e){return t._loadedConfig=e,e})):(i=t,new Ve.y(function(e){return e.error(rn("Cannot load children because the guard of the route \"path: '".concat(i.path,"'\" returned false")))}));var i})):(0,Ae.of)(new pr([],e))}},{key:"runCanLoadGuards",value:function(e,t,n){var r=this,i=t.canLoad;if(!i||0===i.length)return(0,Ae.of)(!0);var a=i.map(function(r){var i,a,o=e.get(r);if((a=o)&&mr(a.canLoad))i=o.canLoad(t,n);else{if(!mr(o))throw new Error("Invalid CanLoad guard");i=o(t,n)}return hn(i)});return(0,Ae.of)(a).pipe(kr(),(0,Nt.b)(function(e){if(gr(e)){var t=rn('Redirecting to "'.concat(r.urlSerializer.serialize(e),'"'));throw t.url=e,t}}),(0,$e.U)(function(e){return!0===e}))}},{key:"lineralizeSegments",value:function(e,t){for(var n=[],r=t.root;;){if(n=n.concat(r.segments),0===r.numberOfChildren)return(0,Ae.of)(n);if(r.numberOfChildren>1||!r.children[Xt])return Mr(e.redirectTo);r=r.children[Xt]}}},{key:"applyRedirectCommands",value:function(e,t,n){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,n)}},{key:"applyRedirectCreatreUrlTree",value:function(e,t,n,r){var i=this.createSegmentGroup(e,t.root,n,r);return new yn(i,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}},{key:"createQueryParams",value:function(e,t){var n={};return ln(e,function(e,r){if("string"==typeof e&&e.startsWith(":")){var i=e.substring(1);n[r]=t[i]}else n[r]=e}),n}},{key:"createSegmentGroup",value:function(e,t,n,r){var i=this,a=this.createSegments(e,t.segments,n,r),o={};return ln(t.children,function(t,a){o[a]=i.createSegmentGroup(e,t,n,r)}),new kn(a,o)}},{key:"createSegments",value:function(e,t,n,r){var i=this;return t.map(function(t){return t.path.startsWith(":")?i.findPosParam(e,t,r):i.findOrReturn(t,n)})}},{key:"findPosParam",value:function(e,t,n){var r=n[t.path.substring(1)];if(!r)throw new Error("Cannot redirect to '".concat(e,"'. Cannot find '").concat(t.path,"'."));return r}},{key:"findOrReturn",value:function(e,t){var n,r=0,i=s(t);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a.path===e.path)return t.splice(r),a;r++}}catch(o){i.e(o)}finally{i.f()}return e}}]),t}();function jr(e){for(var t={},n=0,r=Object.keys(e.children);n<r.length;n++){var i=r[n],a=jr(e.children[i]);(a.segments.length>0||a.hasChildren())&&(t[i]=a)}return function(e){if(1===e.numberOfChildren&&e.children[Xt]){var t=e.children[Xt];return new kn(e.segments.concat(t.segments),t.children)}return e}(new kn(e.segments,t))}var Vr=function e(t){f(this,e),this.path=t,this.route=this.path[this.path.length-1]},qr=function e(t,n){f(this,e),this.component=t,this.route=n};function Br(e,t,n){var r=e._root;return Zr(r,t?t._root:null,n,[r.value])}function zr(e,t,n){var r=function(e){if(!e)return null;for(var t=e.parent;t;t=t.parent){var n=t.routeConfig;if(n&&n._loadedConfig)return n._loadedConfig}return null}(t);return(r?r.module.injector:n).get(e)}function Zr(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{canDeactivateChecks:[],canActivateChecks:[]},a=Bn(t);return e.children.forEach(function(e){(function(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{canDeactivateChecks:[],canActivateChecks:[]},a=e.value,o=t?t.value:null,s=n?n.getContext(e.value.outlet):null;if(o&&a.routeConfig===o.routeConfig){var u=function(e,t,n){if("function"==typeof n)return n(e,t);switch(n){case"pathParamsChange":return!bn(e.url,t.url);case"pathParamsOrQueryParamsChange":return!bn(e.url,t.url)||!on(e.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!$n(e,t)||!on(e.queryParams,t.queryParams);case"paramsChange":default:return!$n(e,t)}}(o,a,a.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new Vr(r)):(a.data=o.data,a._resolvedData=o._resolvedData),Zr(e,t,a.component?s?s.children:null:n,r,i),u&&s&&s.outlet&&s.outlet.isActivated&&i.canDeactivateChecks.push(new qr(s.outlet.component,o))}else o&&Hr(t,s,i),i.canActivateChecks.push(new Vr(r)),Zr(e,null,a.component?s?s.children:null:n,r,i)})(e,a[e.value.outlet],n,r.concat([e.value]),i),delete a[e.value.outlet]}),ln(a,function(e,t){return Hr(e,n.getContext(t),i)}),i}function Hr(e,t,n){var r=Bn(e),i=e.value;ln(r,function(e,r){Hr(e,i.component?t?t.children.getContext(r):null:t,n)}),n.canDeactivateChecks.push(new qr(i.component&&t&&t.outlet&&t.outlet.isActivated?t.outlet.component:null,i))}var Gr=function e(){f(this,e)};function Kr(e){return new Ve.y(function(t){return t.error(e)})}var Wr=function(){function e(t,n,r,i,a,o){f(this,e),this.rootComponentType=t,this.config=n,this.urlTree=r,this.url=i,this.paramsInheritanceStrategy=a,this.relativeLinkResolution=o}return h(e,[{key:"recognize",value:function(){var e=Cr(this.urlTree.root,[],[],this.config.filter(function(e){return void 0===e.redirectTo}),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,Xt);if(null===t)return null;var n=new Kn([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Xt,this.rootComponentType,null,this.urlTree.root,-1,{}),r=new qn(n,t),i=new Wn(this.url,r);return this.inheritParamsAndData(i._root),i}},{key:"inheritParamsAndData",value:function(e){var t=this,n=e.value,r=Gn(n,this.paramsInheritanceStrategy);n.params=Object.freeze(r.params),n.data=Object.freeze(r.data),e.children.forEach(function(e){return t.inheritParamsAndData(e)})}},{key:"processSegmentGroup",value:function(e,t,n){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,n)}},{key:"processChildren",value:function(e,t){for(var n=[],r=0,i=Object.keys(t.children);r<i.length;r++){var o=i[r],s=t.children[o],u=Sr(e,o),c=this.processSegmentGroup(u,s,o);if(null===c)return null;n.push.apply(n,a(c))}var l=Qr(n);return l.sort(function(e,t){return e.value.outlet===Xt?-1:t.value.outlet===Xt?1:e.value.outlet.localeCompare(t.value.outlet)}),l}},{key:"processSegment",value:function(e,t,n,r){var i,a=s(e);try{for(a.s();!(i=a.n()).done;){var o=i.value,u=this.processSegmentAgainstRoute(o,t,n,r);if(null!==u)return u}}catch(c){a.e(c)}finally{a.f()}return Or(t,n,r)?[]:null}},{key:"processSegmentAgainstRoute",value:function(e,t,n,r){if(e.redirectTo||!Nr(e,t,n,r))return null;var i,a=[],o=[];if("**"===e.path){var s=n.length>0?cn(n).parameters:{};i=new Kn(n,s,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,$r(e),Ir(e),e.component,e,Yr(t),Jr(t)+n.length,Xr(e))}else{var u=Rr(t,e,n);if(!u.matched)return null;a=u.consumedSegments,o=n.slice(u.lastChild),i=new Kn(a,u.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,$r(e),Ir(e),e.component,e,Yr(t),Jr(t)+a.length,Xr(e))}var c,l=(c=e).children?c.children:c.loadChildren?c._loadedConfig.routes:[],h=Cr(t,a,o,l.filter(function(e){return void 0===e.redirectTo}),this.relativeLinkResolution),f=h.segmentGroup,d=h.slicedSegments;if(0===d.length&&f.hasChildren()){var v=this.processChildren(l,f);return null===v?null:[new qn(i,v)]}if(0===l.length&&0===d.length)return[new qn(i,[])];var p=Ir(e)===r,m=this.processSegment(l,f,d,p?Xt:r);return null===m?null:[new qn(i,m)]}}]),e}();function Qr(e){var t,n=[],r=new Set,i=s(e);try{var o=function(){var e,i=t.value;if(!function(e){var t=e.value.routeConfig;return t&&""===t.path&&void 0===t.redirectTo}(i))return n.push(i),"continue";var o=n.find(function(e){return i.value.routeConfig===e.value.routeConfig});void 0!==o?((e=o.children).push.apply(e,a(i.children)),r.add(o)):n.push(i)};for(i.s();!(t=i.n()).done;)o()}catch(f){i.e(f)}finally{i.f()}var u,c=s(r);try{for(c.s();!(u=c.n()).done;){var l=u.value,h=Qr(l.children);n.push(new qn(l.value,h))}}catch(f){c.e(f)}finally{c.f()}return n.filter(function(e){return!r.has(e)})}function Yr(e){for(var t=e;t._sourceSegment;)t=t._sourceSegment;return t}function Jr(e){for(var t=e,n=t._segmentIndexShift?t._segmentIndexShift:0;t._sourceSegment;)n+=(t=t._sourceSegment)._segmentIndexShift?t._segmentIndexShift:0;return n-1}function $r(e){return e.data||{}}function Xr(e){return e.resolve||{}}function ei(e){return et(function(t){var n=e(t);return n?(0,Ce.D)(n).pipe((0,$e.U)(function(){return t})):(0,Ae.of)(t)})}var ti=function(e){d(n,e);var t=v(n);function n(){return f(this,n),t.apply(this,arguments)}return n}(function(){function e(){f(this,e)}return h(e,[{key:"shouldDetach",value:function(e){return!1}},{key:"store",value:function(e,t){}},{key:"shouldAttach",value:function(e){return!1}},{key:"retrieve",value:function(e){return null}},{key:"shouldReuseRoute",value:function(e,t){return e.routeConfig===t.routeConfig}}]),e}()),ni=new u.OlP("ROUTES"),ri=function(){function e(t,n,r,i){f(this,e),this.loader=t,this.compiler=n,this.onLoadStartListener=r,this.onLoadEndListener=i}return h(e,[{key:"load",value:function(e,t){var n=this;if(t._loader$)return t._loader$;this.onLoadStartListener&&this.onLoadStartListener(t);var r=this.loadModuleFactory(t.loadChildren).pipe((0,$e.U)(function(r){n.onLoadEndListener&&n.onLoadEndListener(t);var i=r.create(e);return new pr(un(i.injector.get(ni,void 0,u.XFs.Self|u.XFs.Optional)).map(Tr),i)}),vt(function(e){throw t._loader$=void 0,e}));return t._loader$=new Je.c(r,function(){return new Ne.xQ}).pipe((0,Ot.x)()),t._loader$}},{key:"loadModuleFactory",value:function(e){var t=this;return"string"==typeof e?(0,Ce.D)(this.loader.load(e)):hn(e()).pipe((0,gt.zg)(function(e){return e instanceof u.YKP?(0,Ae.of)(e):(0,Ce.D)(t.compiler.compileModuleAsync(e))}))}}]),e}(),ii=function e(){f(this,e),this.outlet=null,this.route=null,this.resolver=null,this.children=new ai,this.attachRef=null},ai=function(){function e(){f(this,e),this.contexts=new Map}return h(e,[{key:"onChildOutletCreated",value:function(e,t){var n=this.getOrCreateContext(e);n.outlet=t,this.contexts.set(e,n)}},{key:"onChildOutletDestroyed",value:function(e){var t=this.getContext(e);t&&(t.outlet=null,t.attachRef=null)}},{key:"onOutletDeactivated",value:function(){var e=this.contexts;return this.contexts=new Map,e}},{key:"onOutletReAttached",value:function(e){this.contexts=e}},{key:"getOrCreateContext",value:function(e){var t=this.getContext(e);return t||(t=new ii,this.contexts.set(e,t)),t}},{key:"getContext",value:function(e){return this.contexts.get(e)||null}}]),e}(),oi=function(){function e(){f(this,e)}return h(e,[{key:"shouldProcessUrl",value:function(e){return!0}},{key:"extract",value:function(e){return e}},{key:"merge",value:function(e,t){return e}}]),e}();function si(e){throw e}function ui(e,t,n){return t.parse("/")}function ci(e,t){return(0,Ae.of)(null)}var li={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},hi={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},fi=function(){var e=function(){function e(t,n,r,i,a,o,s,c){var l=this;f(this,e),this.rootComponentType=t,this.urlSerializer=n,this.rootContexts=r,this.location=i,this.config=c,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.lastLocationChangeInfo=null,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new Ne.xQ,this.errorHandler=si,this.malformedUriErrorHandler=ui,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:ci,afterPreactivation:ci},this.urlHandlingStrategy=new oi,this.routeReuseStrategy=new ti,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=a.get(u.h0i),this.console=a.get(u.c2e);var h=a.get(u.R0b);this.isNgZoneEnabled=h instanceof u.R0b&&u.R0b.isInAngularZone(),this.resetConfig(c),this.currentUrlTree=new yn(new kn([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new ri(o,s,function(e){return l.triggerEvent(new Gt(e))},function(e){return l.triggerEvent(new Kt(e))}),this.routerState=Zn(this.currentUrlTree,this.rootComponentType),this.transitions=new De({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}return h(e,[{key:"browserPageId",get:function(){var e;return null===(e=this.location.getState())||void 0===e?void 0:e.\u0275routerPageId}},{key:"setupNavigations",value:function(e){var t=this,n=this.events;return e.pipe(ht(function(e){return 0!==e.id}),(0,$e.U)(function(e){return Object.assign(Object.assign({},e),{extractedUrl:t.urlHandlingStrategy.extract(e.rawUrl)})}),et(function(e){var r=!1,i=!1;return(0,Ae.of)(e).pipe((0,Nt.b)(function(e){t.currentNavigation={id:e.id,initialUrl:e.currentRawUrl,extractedUrl:e.extractedUrl,trigger:e.source,extras:e.extras,previousNavigation:t.lastSuccessfulNavigation?Object.assign(Object.assign({},t.lastSuccessfulNavigation),{previousNavigation:null}):null}}),et(function(e){var r=t.browserUrlTree.toString(),a=!t.navigated||e.extractedUrl.toString()!==r||r!==t.currentUrlTree.toString();if(("reload"===t.onSameUrlNavigation||a)&&t.urlHandlingStrategy.shouldProcessUrl(e.rawUrl))return di(e.source)&&(t.browserUrlTree=e.extractedUrl),(0,Ae.of)(e).pipe(et(function(e){var r=t.transitions.getValue();return n.next(new Mt(e.id,t.serializeUrl(e.extractedUrl),e.source,e.restoredState)),r!==t.transitions.getValue()?Qe.E:Promise.resolve(e)}),function(e,t,n,r){return et(function(i){return function(e,t,n,r,i){return new Ur(e,t,n,r,i).apply()}(e,t,n,i.extractedUrl,r).pipe((0,$e.U)(function(e){return Object.assign(Object.assign({},i),{urlAfterRedirects:e})}))})}(t.ngModule.injector,t.configLoader,t.urlSerializer,t.config),(0,Nt.b)(function(e){t.currentNavigation=Object.assign(Object.assign({},t.currentNavigation),{finalUrl:e.urlAfterRedirects})}),function(e,n,r,a,o){return(0,gt.zg)(function(r){return function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"emptyOnly",o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"legacy";try{var s=new Wr(e,t,n,r,a,o).recognize();return null===s?Kr(new Gr):(0,Ae.of)(s)}catch(i){return Kr(i)}}(e,n,r.urlAfterRedirects,(s=r.urlAfterRedirects,t.serializeUrl(s)),a,o).pipe((0,$e.U)(function(e){return Object.assign(Object.assign({},r),{targetSnapshot:e})}));var s})}(t.rootComponentType,t.config,0,t.paramsInheritanceStrategy,t.relativeLinkResolution),(0,Nt.b)(function(e){"eager"===t.urlUpdateStrategy&&(e.extras.skipLocationChange||t.setBrowserUrl(e.urlAfterRedirects,e),t.browserUrlTree=e.urlAfterRedirects);var r=new qt(e.id,t.serializeUrl(e.extractedUrl),t.serializeUrl(e.urlAfterRedirects),e.targetSnapshot);n.next(r)}));if(a&&t.rawUrlTree&&t.urlHandlingStrategy.shouldProcessUrl(t.rawUrlTree)){var o=e.id,s=e.extractedUrl,u=e.source,c=e.restoredState,l=e.extras,h=new Mt(o,t.serializeUrl(s),u,c);n.next(h);var f=Zn(s,t.rootComponentType).snapshot;return(0,Ae.of)(Object.assign(Object.assign({},e),{targetSnapshot:f,urlAfterRedirects:s,extras:Object.assign(Object.assign({},l),{skipLocationChange:!1,replaceUrl:!1})}))}return t.rawUrlTree=e.rawUrl,t.browserUrlTree=e.urlAfterRedirects,e.resolve(null),Qe.E}),ei(function(e){var n=e.targetSnapshot,r=e.id,i=e.extractedUrl,a=e.rawUrl,o=e.extras,s=o.skipLocationChange,u=o.replaceUrl;return t.hooks.beforePreactivation(n,{navigationId:r,appliedUrlTree:i,rawUrlTree:a,skipLocationChange:!!s,replaceUrl:!!u})}),(0,Nt.b)(function(e){var n=new Bt(e.id,t.serializeUrl(e.extractedUrl),t.serializeUrl(e.urlAfterRedirects),e.targetSnapshot);t.triggerEvent(n)}),(0,$e.U)(function(e){return Object.assign(Object.assign({},e),{guards:Br(e.targetSnapshot,e.currentSnapshot,t.rootContexts)})}),function(e,t){return(0,gt.zg)(function(n){var r=n.targetSnapshot,i=n.currentSnapshot,a=n.guards,o=a.canActivateChecks,s=a.canDeactivateChecks;return 0===s.length&&0===o.length?(0,Ae.of)(Object.assign(Object.assign({},n),{guardsResult:!0})):function(e,t,n,r){return(0,Ce.D)(e).pipe((0,gt.zg)(function(e){return function(e,t,n,r,i){var a=t&&t.routeConfig?t.routeConfig.canDeactivate:null;if(!a||0===a.length)return(0,Ae.of)(!0);var o=a.map(function(a){var o,s=zr(a,t,i);if(function(e){return e&&mr(e.canDeactivate)}(s))o=hn(s.canDeactivate(e,t,n,r));else{if(!mr(s))throw new Error("Invalid CanDeactivate guard");o=hn(s(e,t,n,r))}return o.pipe(At())});return(0,Ae.of)(o).pipe(kr())}(e.component,e.route,n,t,r)}),At(function(e){return!0!==e},!0))}(s,r,i,e).pipe((0,gt.zg)(function(n){return n&&function(e){return"boolean"==typeof e}(n)?function(e,t,n,r){return(0,Ce.D)(t).pipe(yt(function(t){return We(function(e,t){return null!==e&&t&&t(new Wt(e)),(0,Ae.of)(!0)}(t.route.parent,r),function(e,t){return null!==e&&t&&t(new Yt(e)),(0,Ae.of)(!0)}(t.route,r),function(e,t,n){var r=t[t.length-1],i=t.slice(0,t.length-1).reverse().map(function(e){return function(e){var t=e.routeConfig?e.routeConfig.canActivateChild:null;return t&&0!==t.length?{node:e,guards:t}:null}(e)}).filter(function(e){return null!==e}).map(function(t){return Ye(function(){var i=t.guards.map(function(i){var a,o=zr(i,t.node,n);if(function(e){return e&&mr(e.canActivateChild)}(o))a=hn(o.canActivateChild(r,e));else{if(!mr(o))throw new Error("Invalid CanActivateChild guard");a=hn(o(r,e))}return a.pipe(At())});return(0,Ae.of)(i).pipe(kr())})});return(0,Ae.of)(i).pipe(kr())}(e,t.path,n),function(e,t,n){var r=t.routeConfig?t.routeConfig.canActivate:null;if(!r||0===r.length)return(0,Ae.of)(!0);var i=r.map(function(r){return Ye(function(){var i,a=zr(r,t,n);if(function(e){return e&&mr(e.canActivate)}(a))i=hn(a.canActivate(t,e));else{if(!mr(a))throw new Error("Invalid CanActivate guard");i=hn(a(t,e))}return i.pipe(At())})});return(0,Ae.of)(i).pipe(kr())}(e,t.route,n))}),At(function(e){return!0!==e},!0))}(r,o,e,t):(0,Ae.of)(n)}),(0,$e.U)(function(e){return Object.assign(Object.assign({},n),{guardsResult:e})}))})}(t.ngModule.injector,function(e){return t.triggerEvent(e)}),(0,Nt.b)(function(e){if(gr(e.guardsResult)){var n=rn('Redirecting to "'.concat(t.serializeUrl(e.guardsResult),'"'));throw n.url=e.guardsResult,n}var r=new zt(e.id,t.serializeUrl(e.extractedUrl),t.serializeUrl(e.urlAfterRedirects),e.targetSnapshot,!!e.guardsResult);t.triggerEvent(r)}),ht(function(e){return!!e.guardsResult||(t.restoreHistory(e),t.cancelNavigationTransition(e,""),!1)}),ei(function(e){if(e.guards.canActivateChecks.length)return(0,Ae.of)(e).pipe((0,Nt.b)(function(e){var n=new Zt(e.id,t.serializeUrl(e.extractedUrl),t.serializeUrl(e.urlAfterRedirects),e.targetSnapshot);t.triggerEvent(n)}),et(function(e){var n=!1;return(0,Ae.of)(e).pipe(function(e,t){return(0,gt.zg)(function(n){var r=n.targetSnapshot,i=n.guards.canActivateChecks;if(!i.length)return(0,Ae.of)(n);var a=0;return(0,Ce.D)(i).pipe(yt(function(n){return function(e,t,n,r){return function(e,t,n,r){var i=Object.keys(e);if(0===i.length)return(0,Ae.of)({});var a={};return(0,Ce.D)(i).pipe((0,gt.zg)(function(i){return function(e,t,n,r){var i=zr(e,t,r);return hn(i.resolve?i.resolve(t,n):i(t,n))}(e[i],t,n,r).pipe((0,Nt.b)(function(e){a[i]=e}))}),kt(1),(0,gt.zg)(function(){return Object.keys(a).length===i.length?(0,Ae.of)(a):Qe.E}))}(e._resolve,e,t,r).pipe((0,$e.U)(function(t){return e._resolvedData=t,e.data=Object.assign(Object.assign({},e.data),Gn(e,n).resolve),null}))}(n.route,r,e,t)}),(0,Nt.b)(function(){return a++}),kt(1),(0,gt.zg)(function(e){return a===i.length?(0,Ae.of)(n):Qe.E}))})}(t.paramsInheritanceStrategy,t.ngModule.injector),(0,Nt.b)({next:function(){return n=!0},complete:function(){n||(t.restoreHistory(e),t.cancelNavigationTransition(e,"At least one route resolver didn't emit any value."))}}))}),(0,Nt.b)(function(e){var n=new Ht(e.id,t.serializeUrl(e.extractedUrl),t.serializeUrl(e.urlAfterRedirects),e.targetSnapshot);t.triggerEvent(n)}))}),ei(function(e){var n=e.targetSnapshot,r=e.id,i=e.extractedUrl,a=e.rawUrl,o=e.extras,s=o.skipLocationChange,u=o.replaceUrl;return t.hooks.afterPreactivation(n,{navigationId:r,appliedUrlTree:i,rawUrlTree:a,skipLocationChange:!!s,replaceUrl:!!u})}),(0,$e.U)(function(e){var n=function(e,t,n){var r=Xn(e,t._root,n?n._root:void 0);return new zn(r,t)}(t.routeReuseStrategy,e.targetSnapshot,e.currentRouterState);return Object.assign(Object.assign({},e),{targetRouterState:n})}),(0,Nt.b)(function(e){t.currentUrlTree=e.urlAfterRedirects,t.rawUrlTree=t.urlHandlingStrategy.merge(e.urlAfterRedirects,e.rawUrl),t.routerState=e.targetRouterState,"deferred"===t.urlUpdateStrategy&&(e.extras.skipLocationChange||t.setBrowserUrl(t.rawUrlTree,e),t.browserUrlTree=e.urlAfterRedirects)}),function(e,t,n){return(0,$e.U)(function(r){return new dr(t,r.targetRouterState,r.currentRouterState,n).activate(e),r})}(t.rootContexts,t.routeReuseStrategy,function(e){return t.triggerEvent(e)}),(0,Nt.b)({next:function(){r=!0},complete:function(){r=!0}}),function(e){return function(t){return t.lift(new Pt(e))}}(function(){var n;if(!r&&!i){var a="Navigation ID ".concat(e.id," is not equal to the current navigation id ").concat(t.navigationId);"replace"===t.canceledNavigationResolution?(t.restoreHistory(e),t.cancelNavigationTransition(e,a)):t.cancelNavigationTransition(e,a)}(null===(n=t.currentNavigation)||void 0===n?void 0:n.id)===e.id&&(t.currentNavigation=null)}),vt(function(r){if(i=!0,function(e){return e&&e[nn]}(r)){var a=gr(r.url);a||(t.navigated=!0,t.restoreHistory(e,!0));var o=new jt(e.id,t.serializeUrl(e.extractedUrl),r.message);n.next(o),a?setTimeout(function(){var n=t.urlHandlingStrategy.merge(r.url,t.rawUrlTree),i={skipLocationChange:e.extras.skipLocationChange,replaceUrl:"eager"===t.urlUpdateStrategy||di(e.source)};t.scheduleNavigation(n,"imperative",null,i,{resolve:e.resolve,reject:e.reject,promise:e.promise})},0):e.resolve(!1)}else{t.restoreHistory(e,!0);var s=new Vt(e.id,t.serializeUrl(e.extractedUrl),r);n.next(s);try{e.resolve(t.errorHandler(r))}catch(o){e.reject(o)}}return Qe.E}))}))}},{key:"resetRootComponentType",value:function(e){this.rootComponentType=e,this.routerState.root.component=this.rootComponentType}},{key:"getTransition",value:function(){var e=this.transitions.value;return e.urlAfterRedirects=this.browserUrlTree,e}},{key:"setTransition",value:function(e){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),e))}},{key:"initialNavigation",value:function(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}},{key:"setUpLocationChangeListener",value:function(){var e=this;this.locationSubscription||(this.locationSubscription=this.location.subscribe(function(t){var n=e.extractLocationChangeInfoFromEvent(t);e.shouldScheduleNavigation(e.lastLocationChangeInfo,n)&&setTimeout(function(){var t=n.source,r=n.state,i=n.urlTree,a={replaceUrl:!0};if(r){var o=Object.assign({},r);delete o.navigationId,delete o.\u0275routerPageId,0!==Object.keys(o).length&&(a.state=o)}e.scheduleNavigation(i,t,r,a)},0),e.lastLocationChangeInfo=n}))}},{key:"extractLocationChangeInfoFromEvent",value:function(e){var t;return{source:"popstate"===e.type?"popstate":"hashchange",urlTree:this.parseUrl(e.url),state:(null===(t=e.state)||void 0===t?void 0:t.navigationId)?e.state:null,transitionId:this.getTransition().id}}},{key:"shouldScheduleNavigation",value:function(e,t){if(!e)return!0;var n=t.urlTree.toString()===e.urlTree.toString();return t.transitionId!==e.transitionId||!n||!("hashchange"===t.source&&"popstate"===e.source||"popstate"===t.source&&"hashchange"===e.source)}},{key:"url",get:function(){return this.serializeUrl(this.currentUrlTree)}},{key:"getCurrentNavigation",value:function(){return this.currentNavigation}},{key:"triggerEvent",value:function(e){this.events.next(e)}},{key:"resetConfig",value:function(e){br(e),this.config=e.map(Tr),this.navigated=!1,this.lastSuccessfulId=-1}},{key:"ngOnDestroy",value:function(){this.dispose()}},{key:"dispose",value:function(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}},{key:"createUrlTree",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.relativeTo,r=t.queryParams,i=t.fragment,o=t.queryParamsHandling,s=t.preserveFragment,u=n||this.routerState.root,c=s?this.currentUrlTree.fragment:i,l=null;switch(o){case"merge":l=Object.assign(Object.assign({},this.currentUrlTree.queryParams),r);break;case"preserve":l=this.currentUrlTree.queryParams;break;default:l=r||null}return null!==l&&(l=this.removeEmptyProps(l)),function(e,t,n,r,i){if(0===n.length)return rr(t.root,t.root,t,r,i);var o=function(e){if("string"==typeof e[0]&&1===e.length&&"/"===e[0])return new ar(!0,0,e);var t=0,n=!1,r=e.reduce(function(e,r,i){if("object"==typeof r&&null!=r){if(r.outlets){var o={};return ln(r.outlets,function(e,t){o[t]="string"==typeof e?e.split("/"):e}),[].concat(a(e),[{outlets:o}])}if(r.segmentPath)return[].concat(a(e),[r.segmentPath])}return"string"!=typeof r?[].concat(a(e),[r]):0===i?(r.split("/").forEach(function(r,i){0==i&&"."===r||(0==i&&""===r?n=!0:".."===r?t++:""!=r&&e.push(r))}),e):[].concat(a(e),[r])},[]);return new ar(n,t,r)}(n);if(o.toRoot())return rr(t.root,new kn([],{}),t,r,i);var s=function(e,t,n){if(e.isAbsolute)return new or(t.root,!0,0);if(-1===n.snapshot._lastPathIndex){var r=n.snapshot._urlSegment;return new or(r,r===t.root,0)}var i=tr(e.commands[0])?0:1;return function(e,t,n){for(var r=e,i=t,a=n;a>i;){if(a-=i,!(r=r.parent))throw new Error("Invalid number of '../'");i=r.segments.length}return new or(r,!1,i-a)}(n.snapshot._urlSegment,n.snapshot._lastPathIndex+i,e.numberOfDoubleDots)}(o,t,e),u=s.processChildren?ur(s.segmentGroup,s.index,o.commands):sr(s.segmentGroup,s.index,o.commands);return rr(s.segmentGroup,u,t,r,i)}(u,this.currentUrlTree,e,l,null!=c?c:null)}},{key:"navigateByUrl",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{skipLocationChange:!1},n=gr(e)?e:this.parseUrl(e),r=this.urlHandlingStrategy.merge(n,this.rawUrlTree);return this.scheduleNavigation(r,"imperative",null,t)}},{key:"navigate",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{skipLocationChange:!1};return function(e){for(var t=0;t<e.length;t++){var n=e[t];if(null==n)throw new Error("The requested path contains ".concat(n," segment at index ").concat(t))}}(e),this.navigateByUrl(this.createUrlTree(e,t),t)}},{key:"serializeUrl",value:function(e){return this.urlSerializer.serialize(e)}},{key:"parseUrl",value:function(e){var t;try{t=this.urlSerializer.parse(e)}catch(n){t=this.malformedUriErrorHandler(n,this.urlSerializer,e)}return t}},{key:"isActive",value:function(e,t){var n;if(n=!0===t?Object.assign({},li):!1===t?Object.assign({},hi):t,gr(e))return vn(this.currentUrlTree,e,n);var r=this.parseUrl(e);return vn(this.currentUrlTree,r,n)}},{key:"removeEmptyProps",value:function(e){return Object.keys(e).reduce(function(t,n){var r=e[n];return null!=r&&(t[n]=r),t},{})}},{key:"processNavigations",value:function(){var e=this;this.navigations.subscribe(function(t){e.navigated=!0,e.lastSuccessfulId=t.id,e.currentPageId=t.targetPageId,e.events.next(new Ut(t.id,e.serializeUrl(t.extractedUrl),e.serializeUrl(e.currentUrlTree))),e.lastSuccessfulNavigation=e.currentNavigation,t.resolve(!0)},function(t){e.console.warn("Unhandled Navigation Error: ".concat(t))})}},{key:"scheduleNavigation",value:function(e,t,n,r,i){var a,o;if(this.disposed)return Promise.resolve(!1);var s,u,c,l=this.getTransition(),h=di(t)&&l&&!di(l.source),f=(this.lastSuccessfulId===l.id||this.currentNavigation?l.rawUrl:l.urlAfterRedirects).toString()===e.toString();if(h&&f)return Promise.resolve(!0);i?(s=i.resolve,u=i.reject,c=i.promise):c=new Promise(function(e,t){s=e,u=t});var d,v=++this.navigationId;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(n=this.location.getState()),d=n&&n.\u0275routerPageId?n.\u0275routerPageId:r.replaceUrl||r.skipLocationChange?null!==(a=this.browserPageId)&&void 0!==a?a:0:(null!==(o=this.browserPageId)&&void 0!==o?o:0)+1):d=0,this.setTransition({id:v,targetPageId:d,source:t,restoredState:n,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:e,extras:r,resolve:s,reject:u,promise:c,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),c.catch(function(e){return Promise.reject(e)})}},{key:"setBrowserUrl",value:function(e,t){var n=this.urlSerializer.serialize(e),r=Object.assign(Object.assign({},t.extras.state),this.generateNgRouterState(t.id,t.targetPageId));this.location.isCurrentPathEqualTo(n)||t.extras.replaceUrl?this.location.replaceState(n,"",r):this.location.go(n,"",r)}},{key:"restoreHistory",value:function(e){var t,n,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if("computed"===this.canceledNavigationResolution){var i=this.currentPageId-e.targetPageId;"popstate"!==e.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(t=this.currentNavigation)||void 0===t?void 0:t.finalUrl)||0===i?this.currentUrlTree===(null===(n=this.currentNavigation)||void 0===n?void 0:n.finalUrl)&&0===i&&(this.resetState(e),this.browserUrlTree=e.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(i)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(e),this.resetUrlToCurrentUrlTree())}},{key:"resetState",value:function(e){this.routerState=e.currentRouterState,this.currentUrlTree=e.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e.rawUrl)}},{key:"resetUrlToCurrentUrlTree",value:function(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}},{key:"cancelNavigationTransition",value:function(e,t){var n=new jt(e.id,this.serializeUrl(e.extractedUrl),t);this.triggerEvent(n),e.resolve(!1)}},{key:"generateNgRouterState",value:function(e,t){return"computed"===this.canceledNavigationResolution?{navigationId:e,"\u0275routerPageId":t}:{navigationId:e}}}]),e}();return e.\u0275fac=function(t){return new(t||e)(u.LFG(u.DyG),u.LFG(_n),u.LFG(ai),u.LFG(L),u.LFG(u.zs3),u.LFG(u.v3s),u.LFG(u.Sil),u.LFG(void 0))},e.\u0275prov=u.Yz7({token:e,factory:e.\u0275fac}),e}();function di(e){return"imperative"!==e}var vi=function(){var e=function(){function e(t,n,r,i,a){f(this,e),this.router=t,this.route=n,this.commands=[],this.onChanges=new Ne.xQ,null==r&&i.setAttribute(a.nativeElement,"tabindex","0")}return h(e,[{key:"ngOnChanges",value:function(e){this.onChanges.next(this)}},{key:"routerLink",set:function(e){this.commands=null!=e?Array.isArray(e)?e:[e]:[]}},{key:"onClick",value:function(){var e={skipLocationChange:mi(this.skipLocationChange),replaceUrl:mi(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,e),!0}},{key:"urlTree",get:function(){return this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:mi(this.preserveFragment)})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(u.Y36(fi),u.Y36(Hn),u.$8M("tabindex"),u.Y36(u.Qsj),u.Y36(u.SBq))},e.\u0275dir=u.lG2({type:e,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(e,t){1&e&&u.NdJ("click",function(){return t.onClick()})},inputs:{routerLink:"routerLink",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo"},features:[u.TTD]}),e}(),pi=function(){var e=function(){function e(t,n,r){var i=this;f(this,e),this.router=t,this.route=n,this.locationStrategy=r,this.commands=[],this.onChanges=new Ne.xQ,this.subscription=t.events.subscribe(function(e){e instanceof Ut&&i.updateTargetUrlAndHref()})}return h(e,[{key:"routerLink",set:function(e){this.commands=null!=e?Array.isArray(e)?e:[e]:[]}},{key:"ngOnChanges",value:function(e){this.updateTargetUrlAndHref(),this.onChanges.next(this)}},{key:"ngOnDestroy",value:function(){this.subscription.unsubscribe()}},{key:"onClick",value:function(e,t,n,r,i){if(0!==e||t||n||r||i||"string"==typeof this.target&&"_self"!=this.target)return!0;var a={skipLocationChange:mi(this.skipLocationChange),replaceUrl:mi(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,a),!1}},{key:"updateTargetUrlAndHref",value:function(){this.href=this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree))}},{key:"urlTree",get:function(){return this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:mi(this.preserveFragment)})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(u.Y36(fi),u.Y36(Hn),u.Y36(A))},e.\u0275dir=u.lG2({type:e,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(e,t){1&e&&u.NdJ("click",function(e){return t.onClick(e.button,e.ctrlKey,e.shiftKey,e.altKey,e.metaKey)}),2&e&&(u.Ikx("href",t.href,u.LSH),u.uIk("target",t.target))},inputs:{routerLink:"routerLink",target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo"},features:[u.TTD]}),e}();function mi(e){return""===e||!!e}var gi=function(){var e=function(){function e(t,n,r,i,a,o){var s=this;f(this,e),this.router=t,this.element=n,this.renderer=r,this.cdr=i,this.link=a,this.linkWithHref=o,this.classes=[],this.isActive=!1,this.routerLinkActiveOptions={exact:!1},this.routerEventsSubscription=t.events.subscribe(function(e){e instanceof Ut&&s.update()})}return h(e,[{key:"ngAfterContentInit",value:function(){var e=this;(0,Ae.of)(this.links.changes,this.linksWithHrefs.changes,(0,Ae.of)(null)).pipe((0,Ke.J)()).subscribe(function(t){e.update(),e.subscribeToEachLinkOnChanges()})}},{key:"subscribeToEachLinkOnChanges",value:function(){var e,t=this;null===(e=this.linkInputChangesSubscription)||void 0===e||e.unsubscribe();var n=[].concat(a(this.links.toArray()),a(this.linksWithHrefs.toArray()),[this.link,this.linkWithHref]).filter(function(e){return!!e}).map(function(e){return e.onChanges});this.linkInputChangesSubscription=(0,Ce.D)(n).pipe((0,Ke.J)()).subscribe(function(e){t.isActive!==t.isLinkActive(t.router)(e)&&t.update()})}},{key:"routerLinkActive",set:function(e){var t=Array.isArray(e)?e:e.split(" ");this.classes=t.filter(function(e){return!!e})}},{key:"ngOnChanges",value:function(e){this.update()}},{key:"ngOnDestroy",value:function(){var e;this.routerEventsSubscription.unsubscribe(),null===(e=this.linkInputChangesSubscription)||void 0===e||e.unsubscribe()}},{key:"update",value:function(){var e=this;!this.links||!this.linksWithHrefs||!this.router.navigated||Promise.resolve().then(function(){var t=e.hasActiveLinks();e.isActive!==t&&(e.isActive=t,e.cdr.markForCheck(),e.classes.forEach(function(n){t?e.renderer.addClass(e.element.nativeElement,n):e.renderer.removeClass(e.element.nativeElement,n)}))})}},{key:"isLinkActive",value:function(e){var t=function(e){return!!e.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return function(n){return e.isActive(n.urlTree,t)}}},{key:"hasActiveLinks",value:function(){var e=this.isLinkActive(this.router);return this.link&&e(this.link)||this.linkWithHref&&e(this.linkWithHref)||this.links.some(e)||this.linksWithHrefs.some(e)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(u.Y36(fi),u.Y36(u.SBq),u.Y36(u.Qsj),u.Y36(u.sBO),u.Y36(vi,8),u.Y36(pi,8))},e.\u0275dir=u.lG2({type:e,selectors:[["","routerLinkActive",""]],contentQueries:function(e,t,n){var r;(1&e&&(u.Suo(n,vi,5),u.Suo(n,pi,5)),2&e)&&(u.iGM(r=u.CRH())&&(t.links=r),u.iGM(r=u.CRH())&&(t.linksWithHrefs=r))},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",routerLinkActive:"routerLinkActive"},exportAs:["routerLinkActive"],features:[u.TTD]}),e}(),yi=function(){var e=function(){function e(t,n,r,i,a){f(this,e),this.parentContexts=t,this.location=n,this.resolver=r,this.changeDetector=a,this.activated=null,this._activatedRoute=null,this.activateEvents=new u.vpe,this.deactivateEvents=new u.vpe,this.name=i||Xt,t.onChildOutletCreated(this.name,this)}return h(e,[{key:"ngOnDestroy",value:function(){this.parentContexts.onChildOutletDestroyed(this.name)}},{key:"ngOnInit",value:function(){if(!this.activated){var e=this.parentContexts.getContext(this.name);e&&e.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.resolver||null))}}},{key:"isActivated",get:function(){return!!this.activated}},{key:"component",get:function(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}},{key:"activatedRoute",get:function(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}},{key:"activatedRouteData",get:function(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}},{key:"detach",value:function(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();var e=this.activated;return this.activated=null,this._activatedRoute=null,e}},{key:"attach",value:function(e,t){this.activated=e,this._activatedRoute=t,this.location.insert(e.hostView)}},{key:"deactivate",value:function(){if(this.activated){var e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}},{key:"activateWith",value:function(e,t){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=e;var n=(t=t||this.resolver).resolveComponentFactory(e._futureSnapshot.routeConfig.component),r=this.parentContexts.getOrCreateContext(this.name).children,i=new ki(e,r,this.location.injector);this.activated=this.location.createComponent(n,this.location.length,i),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(u.Y36(ai),u.Y36(u.s_b),u.Y36(u._Vd),u.$8M("name"),u.Y36(u.sBO))},e.\u0275dir=u.lG2({type:e,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),e}(),ki=function(){function e(t,n,r){f(this,e),this.route=t,this.childContexts=n,this.parent=r}return h(e,[{key:"get",value:function(e,t){return e===Hn?this.route:e===ai?this.childContexts:this.parent.get(e,t)}}]),e}(),wi=function e(){f(this,e)},bi=function(){function e(){f(this,e)}return h(e,[{key:"preload",value:function(e,t){return(0,Ae.of)(null)}}]),e}(),_i=function(){var e=function(){function e(t,n,r,i,a){f(this,e),this.router=t,this.injector=i,this.preloadingStrategy=a,this.loader=new ri(n,r,function(e){return t.triggerEvent(new Gt(e))},function(e){return t.triggerEvent(new Kt(e))})}return h(e,[{key:"setUpPreloading",value:function(){var e=this;this.subscription=this.router.events.pipe(ht(function(e){return e instanceof Ut}),yt(function(){return e.preload()})).subscribe(function(){})}},{key:"preload",value:function(){var e=this.injector.get(u.h0i);return this.processRoutes(e,this.router.config)}},{key:"ngOnDestroy",value:function(){this.subscription&&this.subscription.unsubscribe()}},{key:"processRoutes",value:function(e,t){var n,r=[],i=s(t);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a.loadChildren&&!a.canLoad&&a._loadedConfig){var o=a._loadedConfig;r.push(this.processRoutes(o.module,o.routes))}else a.loadChildren&&!a.canLoad?r.push(this.preloadConfig(e,a)):a.children&&r.push(this.processRoutes(e,a.children))}}catch(u){i.e(u)}finally{i.f()}return(0,Ce.D)(r).pipe((0,Ke.J)(),(0,$e.U)(function(e){}))}},{key:"preloadConfig",value:function(e,t){var n=this;return this.preloadingStrategy.preload(t,function(){return(t._loadedConfig?(0,Ae.of)(t._loadedConfig):n.loader.load(e.injector,t)).pipe((0,gt.zg)(function(e){return t._loadedConfig=e,n.processRoutes(e.module,e.routes)}))})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(u.LFG(fi),u.LFG(u.v3s),u.LFG(u.Sil),u.LFG(u.zs3),u.LFG(wi))},e.\u0275prov=u.Yz7({token:e,factory:e.\u0275fac}),e}(),xi=function(){var e=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};f(this,e),this.router=t,this.viewportScroller=n,this.options=r,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},r.scrollPositionRestoration=r.scrollPositionRestoration||"disabled",r.anchorScrolling=r.anchorScrolling||"disabled"}return h(e,[{key:"init",value:function(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}},{key:"createScrollEvents",value:function(){var e=this;return this.router.events.subscribe(function(t){t instanceof Mt?(e.store[e.lastId]=e.viewportScroller.getScrollPosition(),e.lastSource=t.navigationTrigger,e.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Ut&&(e.lastId=t.id,e.scheduleScrollEvent(t,e.router.parseUrl(t.urlAfterRedirects).fragment))})}},{key:"consumeScrollEvents",value:function(){var e=this;return this.router.events.subscribe(function(t){t instanceof $t&&(t.position?"top"===e.options.scrollPositionRestoration?e.viewportScroller.scrollToPosition([0,0]):"enabled"===e.options.scrollPositionRestoration&&e.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===e.options.anchorScrolling?e.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==e.options.scrollPositionRestoration&&e.viewportScroller.scrollToPosition([0,0]))})}},{key:"scheduleScrollEvent",value:function(e,t){this.router.triggerEvent(new $t(e,"popstate"===this.lastSource?this.store[this.restoredId]:null,t))}},{key:"ngOnDestroy",value:function(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}]),e}();return e.\u0275fac=function(t){return new(t||e)(u.LFG(fi),u.LFG(K),u.LFG(void 0))},e.\u0275prov=u.Yz7({token:e,factory:e.\u0275fac}),e}(),Ti=new u.OlP("ROUTER_CONFIGURATION"),Ii=new u.OlP("ROUTER_FORROOT_GUARD"),Si=[L,{provide:_n,useClass:xn},{provide:fi,useFactory:function(e,t,n,r,i,a,o){var s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:{},u=arguments.length>8?arguments[8]:void 0,c=arguments.length>9?arguments[9]:void 0,l=new fi(null,e,t,n,r,i,a,un(o));return u&&(l.urlHandlingStrategy=u),c&&(l.routeReuseStrategy=c),function(e,t){e.errorHandler&&(t.errorHandler=e.errorHandler),e.malformedUriErrorHandler&&(t.malformedUriErrorHandler=e.malformedUriErrorHandler),e.onSameUrlNavigation&&(t.onSameUrlNavigation=e.onSameUrlNavigation),e.paramsInheritanceStrategy&&(t.paramsInheritanceStrategy=e.paramsInheritanceStrategy),e.relativeLinkResolution&&(t.relativeLinkResolution=e.relativeLinkResolution),e.urlUpdateStrategy&&(t.urlUpdateStrategy=e.urlUpdateStrategy)}(s,l),s.enableTracing&&l.events.subscribe(function(e){var t,n;null===(t=console.group)||void 0===t||t.call(console,"Router Event: ".concat(e.constructor.name)),console.log(e.toString()),console.log(e),null===(n=console.groupEnd)||void 0===n||n.call(console)}),l},deps:[_n,ai,L,u.zs3,u.v3s,u.Sil,ni,Ti,[function(){return function e(){f(this,e)}}(),new u.FiY],[function(){return function e(){f(this,e)}}(),new u.FiY]]},ai,{provide:Hn,useFactory:function(e){return e.routerState.root},deps:[fi]},{provide:u.v3s,useClass:u.EAV},_i,bi,function(){function e(){f(this,e)}return h(e,[{key:"preload",value:function(e,t){return t().pipe(vt(function(){return(0,Ae.of)(null)}))}}]),e}(),{provide:Ti,useValue:{enableTracing:!1}}];function Ei(){return new u.PXZ("Router",fi)}var Ri=function(){var e=function(){function e(t,n){f(this,e)}return h(e,null,[{key:"forRoot",value:function(t,n){return{ngModule:e,providers:[Si,Oi(t),{provide:Ii,useFactory:Ni,deps:[[fi,new u.FiY,new u.tp0]]},{provide:Ti,useValue:n||{}},{provide:A,useFactory:Ai,deps:[w,[new u.tBr(O),new u.FiY],Ti]},{provide:xi,useFactory:Ci,deps:[fi,K,Ti]},{provide:wi,useExisting:n&&n.preloadingStrategy?n.preloadingStrategy:bi},{provide:u.PXZ,multi:!0,useFactory:Ei},[Di,{provide:u.ip1,multi:!0,useFactory:Pi,deps:[Di]},{provide:Fi,useFactory:Li,deps:[Di]},{provide:u.tb,multi:!0,useExisting:Fi}]]}}},{key:"forChild",value:function(t){return{ngModule:e,providers:[Oi(t)]}}}]),e}();return e.\u0275fac=function(t){return new(t||e)(u.LFG(Ii,8),u.LFG(fi,8))},e.\u0275mod=u.oAB({type:e}),e.\u0275inj=u.cJS({}),e}();function Ci(e,t,n){return n.scrollOffset&&t.setOffset(n.scrollOffset),new xi(e,t,n)}function Ai(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return n.useHash?new P(e,t):new D(e,t)}function Ni(e){return"guarded"}function Oi(e){return[{provide:u.deG,multi:!0,useValue:e},{provide:ni,multi:!0,useValue:e}]}var Di=function(){var e=function(){function e(t){f(this,e),this.injector=t,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new Ne.xQ}return h(e,[{key:"appInitializer",value:function(){var e=this;return this.injector.get(x,Promise.resolve(null)).then(function(){if(e.destroyed)return Promise.resolve(!0);var t=null,n=new Promise(function(e){return t=e}),r=e.injector.get(fi),i=e.injector.get(Ti);return"disabled"===i.initialNavigation?(r.setUpLocationChangeListener(),t(!0)):"enabled"===i.initialNavigation||"enabledBlocking"===i.initialNavigation?(r.hooks.afterPreactivation=function(){return e.initNavigation?(0,Ae.of)(null):(e.initNavigation=!0,t(!0),e.resultOfPreactivationDone)},r.initialNavigation()):t(!0),n})}},{key:"bootstrapListener",value:function(e){var t=this.injector.get(Ti),n=this.injector.get(_i),r=this.injector.get(xi),i=this.injector.get(fi),a=this.injector.get(u.z2F);e===a.components[0]&&(("enabledNonBlocking"===t.initialNavigation||void 0===t.initialNavigation)&&i.initialNavigation(),n.setUpPreloading(),r.init(),i.resetRootComponentType(a.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}},{key:"ngOnDestroy",value:function(){this.destroyed=!0}}]),e}();return e.\u0275fac=function(t){return new(t||e)(u.LFG(u.zs3))},e.\u0275prov=u.Yz7({token:e,factory:e.\u0275fac}),e}();function Pi(e){return e.appInitializer.bind(e)}function Li(e){return e.bootstrapListener.bind(e)}var Fi=new u.OlP("Router Initializer"),Mi=o(3637),Ui=o(6643);function ji(){return function(e){return e.lift(new qi)}}var Vi,qi=function(){function e(){f(this,e)}return h(e,[{key:"call",value:function(e,t){return t.subscribe(new Bi(e))}}]),e}(),Bi=function(e){d(n,e);var t=v(n);function n(e){var r;return f(this,n),(r=t.call(this,e)).hasPrev=!1,r}return h(n,[{key:"_next",value:function(e){var t;this.hasPrev?t=[this.prev,e]:this.hasPrev=!0,this.prev=e,t&&this.destination.next(t)}}]),n}(Fe.L),zi=function(){function e(t,n){f(this,e),this.compare=t,this.keySelector=n}return h(e,[{key:"call",value:function(e,t){return t.subscribe(new Zi(e,this.compare,this.keySelector))}}]),e}(),Zi=function(e){d(n,e);var t=v(n);function n(e,r,i){var a;return f(this,n),(a=t.call(this,e)).keySelector=i,a.hasKey=!1,"function"==typeof r&&(a.compare=r),a}return h(n,[{key:"compare",value:function(e,t){return e===t}},{key:"_next",value:function(e){var t;try{var n=this.keySelector;t=n?n(e):e}catch(n){return this.destination.error(n)}var r=!1;if(this.hasKey)try{r=(0,this.compare)(this.key,t)}catch(n){return this.destination.error(n)}else this.hasKey=!0;r||(this.key=t,this.destination.next(e))}}]),n}(Fe.L),Hi=o(8939),Gi=(o(4671),o(4486)),Ki=o(8239),Wi=o(5452),Qi=o(6034),Yi=o(5601),Ji=o(3854),$i="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Xi={},ea=ea||{},ta=$i||self;function na(){}function ra(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function ia(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var aa="closure_uid_"+(1e9*Math.random()>>>0),oa=0;function sa(e,t,n){return e.call.apply(e.bind,arguments)}function ua(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function ca(e,t,n){return(ca=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?sa:ua).apply(null,arguments)}function la(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function ha(e,t){function n(){}n.prototype=t.prototype,e.Z=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Vb=function(e,n,r){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return t.prototype[n].apply(e,i)}}function fa(){this.s=this.s,this.o=this.o}var da={};fa.prototype.s=!1,fa.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var e=function(e){return Object.prototype.hasOwnProperty.call(e,aa)&&e[aa]||(e[aa]=++oa)}(this);delete da[e]}},fa.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var va=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"==typeof e)return"string"!=typeof t||1!=t.length?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},pa=Array.prototype.forEach?function(e,t,n){Array.prototype.forEach.call(e,t,n)}:function(e,t,n){for(var r=e.length,i="string"==typeof e?e.split(""):e,a=0;a<r;a++)a in i&&t.call(n,i[a],a,e)};function ma(e){return Array.prototype.concat.apply([],arguments)}function ga(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function ya(e){return/^[\s\xa0]*$/.test(e)}var ka,wa=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function ba(e,t){return-1!=e.indexOf(t)}function _a(e,t){return e<t?-1:e>t?1:0}e:{var xa=ta.navigator;if(xa){var Ta=xa.userAgent;if(Ta){ka=Ta;break e}}ka=""}function Ia(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function Sa(e){var t={};for(var n in e)t[n]=e[n];return t}var Ea="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Ra(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var a=0;a<Ea.length;a++)n=Ea[a],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function Ca(e){return Ca[" "](e),e}Ca[" "]=na;var Aa,Na,Oa=ba(ka,"Opera"),Da=ba(ka,"Trident")||ba(ka,"MSIE"),Pa=ba(ka,"Edge"),La=Pa||Da,Fa=ba(ka,"Gecko")&&!(ba(ka.toLowerCase(),"webkit")&&!ba(ka,"Edge"))&&!(ba(ka,"Trident")||ba(ka,"MSIE"))&&!ba(ka,"Edge"),Ma=ba(ka.toLowerCase(),"webkit")&&!ba(ka,"Edge");function Ua(){var e=ta.document;return e?e.documentMode:void 0}e:{var ja="",Va=(Na=ka,Fa?/rv:([^\);]+)(\)|;)/.exec(Na):Pa?/Edge\/([\d\.]+)/.exec(Na):Da?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(Na):Ma?/WebKit\/(\S+)/.exec(Na):Oa?/(?:Version)[ \/]?(\S+)/.exec(Na):void 0);if(Va&&(ja=Va?Va[1]:""),Da){var qa=Ua();if(null!=qa&&qa>parseFloat(ja)){Aa=String(qa);break e}}Aa=ja}var Ba={};var za=ta.document&&Da&&(Ua()||parseInt(Aa,10))||void 0,Za=function(){if(!ta.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{ta.addEventListener("test",na,t),ta.removeEventListener("test",na,t)}catch(n){}return e}();function Ha(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}function Ga(e,t){if(Ha.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(Fa){e:{try{Ca(t.nodeName);var i=!0;break e}catch(a){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"==typeof e.pointerType?e.pointerType:Ka[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&Ga.Z.h.call(this)}}Ha.prototype.h=function(){this.defaultPrevented=!0},ha(Ga,Ha);var Ka={2:"touch",3:"pen",4:"mouse"};Ga.prototype.h=function(){Ga.Z.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var Wa="closure_listenable_"+(1e6*Math.random()|0),Qa=0;function Ya(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ia=i,this.key=++Qa,this.ca=this.fa=!1}function Ja(e){e.ca=!0,e.listener=null,e.proxy=null,e.src=null,e.ia=null}function $a(e){this.src=e,this.g={},this.h=0}function Xa(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],a=va(i,t);(r=0<=a)&&Array.prototype.splice.call(i,a,1),r&&(Ja(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function eo(e,t,n,r){for(var i=0;i<e.length;++i){var a=e[i];if(!a.ca&&a.listener==t&&a.capture==!!n&&a.ia==r)return i}return-1}$a.prototype.add=function(e,t,n,r,i){var a=e.toString();(e=this.g[a])||(e=this.g[a]=[],this.h++);var o=eo(e,t,r,i);return-1<o?(t=e[o],n||(t.fa=!1)):((t=new Ya(t,this.src,a,!!r,i)).fa=n,e.push(t)),t};var to="closure_lm_"+(1e6*Math.random()|0),no={};function ro(e,t,n,r,i){if(r&&r.once)return ao(e,t,n,r,i);if(Array.isArray(t)){for(var a=0;a<t.length;a++)ro(e,t[a],n,r,i);return null}return n=fo(n),e&&e[Wa]?e.N(t,n,ia(r)?!!r.capture:!!r,i):io(e,t,n,!1,r,i)}function io(e,t,n,r,i,a){if(!t)throw Error("Invalid event type");var o=ia(i)?!!i.capture:!!i,s=lo(e);if(s||(e[to]=s=new $a(e)),(n=s.add(t,n,r,o,a)).proxy)return n;if(r=function(){var e=co;return function t(n){return e.call(t.src,t.listener,n)}}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)Za||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(uo(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function ao(e,t,n,r,i){if(Array.isArray(t)){for(var a=0;a<t.length;a++)ao(e,t[a],n,r,i);return null}return n=fo(n),e&&e[Wa]?e.O(t,n,ia(r)?!!r.capture:!!r,i):io(e,t,n,!0,r,i)}function oo(e,t,n,r,i){if(Array.isArray(t))for(var a=0;a<t.length;a++)oo(e,t[a],n,r,i);else r=ia(r)?!!r.capture:!!r,n=fo(n),e&&e[Wa]?(e=e.i,(t=String(t).toString())in e.g&&-1<(n=eo(a=e.g[t],n,r,i))&&(Ja(a[n]),Array.prototype.splice.call(a,n,1),0==a.length&&(delete e.g[t],e.h--))):e&&(e=lo(e))&&(t=e.g[t.toString()],e=-1,t&&(e=eo(t,n,r,i)),(n=-1<e?t[e]:null)&&so(n))}function so(e){if("number"!=typeof e&&e&&!e.ca){var t=e.src;if(t&&t[Wa])Xa(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(uo(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=lo(t))?(Xa(n,e),0==n.h&&(n.src=null,t[to]=null)):Ja(e)}}}function uo(e){return e in no?no[e]:no[e]="on"+e}function co(e,t){if(e.ca)e=!0;else{t=new Ga(t,this);var n=e.listener,r=e.ia||e.src;e.fa&&so(e),e=n.call(r,t)}return e}function lo(e){return(e=e[to])instanceof $a?e:null}var ho="__closure_events_fn_"+(1e9*Math.random()>>>0);function fo(e){return"function"==typeof e?e:(e[ho]||(e[ho]=function(t){return e.handleEvent(t)}),e[ho])}function vo(){fa.call(this),this.i=new $a(this),this.P=this,this.I=null}function po(e,t){var n,r=e.I;if(r)for(n=[];r;r=r.I)n.push(r);if(e=e.P,r=t.type||t,"string"==typeof t)t=new Ha(t,e);else if(t instanceof Ha)t.target=t.target||e;else{var i=t;Ra(t=new Ha(r,e),i)}if(i=!0,n)for(var a=n.length-1;0<=a;a--){var o=t.g=n[a];i=mo(o,r,!0,t)&&i}if(i=mo(o=t.g=e,r,!0,t)&&i,i=mo(o,r,!1,t)&&i,n)for(a=0;a<n.length;a++)i=mo(o=t.g=n[a],r,!1,t)&&i}function mo(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,a=0;a<t.length;++a){var o=t[a];if(o&&!o.ca&&o.capture==n){var s=o.listener,u=o.ia||o.src;o.fa&&Xa(e.i,o),i=!1!==s.call(u,r)&&i}}return i&&!r.defaultPrevented}ha(vo,fa),vo.prototype[Wa]=!0,vo.prototype.removeEventListener=function(e,t,n,r){oo(this,e,t,n,r)},vo.prototype.M=function(){if(vo.Z.M.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)Ja(n[r]);delete t.g[e],t.h--}}this.I=null},vo.prototype.N=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},vo.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var go=ta.JSON.stringify;function yo(){var e=Io,t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var ko,wo=new(function(){function e(t,n){f(this,e),this.i=t,this.j=n,this.h=0,this.g=null}return h(e,[{key:"get",value:function(){var e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}]),e}())(function(){return new bo},function(e){return e.reset()}),bo=function(){function e(){f(this,e),this.next=this.g=this.h=null}return h(e,[{key:"set",value:function(e,t){this.h=e,this.g=t,this.next=null}},{key:"reset",value:function(){this.next=this.g=this.h=null}}]),e}();function _o(e){ta.setTimeout(function(){throw e},0)}function xo(e,t){ko||function(){var e=ta.Promise.resolve(void 0);ko=function(){e.then(So)}}(),To||(ko(),To=!0),Io.add(e,t)}var To=!1,Io=new(function(){function e(){f(this,e),this.h=this.g=null}return h(e,[{key:"add",value:function(e,t){var n=wo.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}}]),e}());function So(){for(var e;e=yo();){try{e.h.call(e.g)}catch(n){_o(n)}var t=wo;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}To=!1}function Eo(e,t){vo.call(this),this.h=e||1,this.g=t||ta,this.j=ca(this.kb,this),this.l=Date.now()}function Ro(e){e.da=!1,e.S&&(e.g.clearTimeout(e.S),e.S=null)}function Co(e,t,n){if("function"==typeof e)n&&(e=ca(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=ca(e.handleEvent,e)}return 2147483647<Number(t)?-1:ta.setTimeout(e,t||0)}function Ao(e){e.g=Co(function(){e.g=null,e.i&&(e.i=!1,Ao(e))},e.j);var t=e.h;e.h=null,e.m.apply(null,t)}ha(Eo,vo),(Vi=Eo.prototype).da=!1,Vi.S=null,Vi.kb=function(){if(this.da){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-e):(this.S&&(this.g.clearTimeout(this.S),this.S=null),po(this,"tick"),this.da&&(Ro(this),this.start()))}},Vi.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Vi.M=function(){Eo.Z.M.call(this),Ro(this),delete this.g};var No=function(e){d(n,e);var t=v(n);function n(e,r){var i;return f(this,n),(i=t.call(this)).m=e,i.j=r,i.h=null,i.i=!1,i.g=null,i}return h(n,[{key:"l",value:function(e){this.h=arguments,this.g?this.i=!0:Ao(this)}},{key:"M",value:function(){i(b(n.prototype),"M",this).call(this),this.g&&(ta.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}]),n}(fa);function Oo(e){fa.call(this),this.h=e,this.g={}}ha(Oo,fa);var Do=[];function Po(e,t,n,r){Array.isArray(n)||(n&&(Do[0]=n.toString()),n=Do);for(var i=0;i<n.length;i++){var a=ro(t,n[i],r||e.handleEvent,!1,e.h||e);if(!a)break;e.g[a.key]=a}}function Lo(e){Ia(e.g,function(e,t){this.g.hasOwnProperty(t)&&so(e)},e),e.g={}}function Fo(){this.g=!0}function Mo(e,t,n,r){e.info(function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var o=1;o<i.length;o++)i[o]=""}}}return go(n)}catch(s){return t}}(e,n)+(r?" "+r:"")})}Oo.prototype.M=function(){Oo.Z.M.call(this),Lo(this)},Oo.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Fo.prototype.Aa=function(){this.g=!1},Fo.prototype.info=function(){};var Uo={},jo=null;function Vo(){return jo=jo||new vo}function qo(e){Ha.call(this,Uo.Ma,e)}function Bo(e){var t=Vo();po(t,new qo(t,e))}function zo(e,t){Ha.call(this,Uo.STAT_EVENT,e),this.stat=t}function Zo(e){var t=Vo();po(t,new zo(t,e))}function Ho(e,t){Ha.call(this,Uo.Na,e),this.size=t}function Go(e,t){if("function"!=typeof e)throw Error("Fn must not be null and must be a function");return ta.setTimeout(function(){e()},t)}Uo.Ma="serverreachability",ha(qo,Ha),Uo.STAT_EVENT="statevent",ha(zo,Ha),Uo.Na="timingevent",ha(Ho,Ha);var Ko={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},Wo={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function Qo(){}function Yo(){}Qo.prototype.h=null;var Jo,$o={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function Xo(){Ha.call(this,"d")}function es(){Ha.call(this,"c")}function ts(){}function ns(e,t,n,r){this.l=e,this.j=t,this.m=n,this.X=r||1,this.V=new Oo(this),this.P=is,this.W=new Eo(e=La?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new rs}function rs(){this.i=null,this.g="",this.h=!1}ha(Xo,Ha),ha(es,Ha),ha(ts,Qo),ts.prototype.g=function(){return new XMLHttpRequest},ts.prototype.i=function(){return{}},Jo=new ts;var is=45e3,as={},os={};function ss(e,t,n){e.K=1,e.v=As(Ts(t)),e.s=n,e.U=!0,us(e,null)}function us(e,t){e.F=Date.now(),fs(e),e.A=Ts(e.v);var n=e.A,r=e.X;Array.isArray(r)||(r=[String(r)]),zs(n.h,"t",r),e.C=0,n=e.l.H,e.h=new rs,e.g=zu(e.l,n?t:null,!e.s),0<e.O&&(e.L=new No(ca(e.Ia,e,e.g),e.O)),Po(e.V,e.g,"readystatechange",e.gb),t=e.H?Sa(e.H):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.s,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),Bo(1),function(e,t,n,r,i,a){e.info(function(){if(e.g)if(a)for(var o="",s=a.split("&"),u=0;u<s.length;u++){var c=s[u].split("=");if(1<c.length){var l=c[0];c=c[1];var h=l.split("_");o=2<=h.length&&"type"==h[1]?o+(l+"=")+c+"&":o+(l+"=redacted&")}}else o=null;else o=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o})}(e.j,e.u,e.A,e.m,e.X,e.s)}function cs(e){return!!e.g&&"GET"==e.u&&2!=e.K&&e.l.Ba}function ls(e,t,n){for(var r,i=!0;!e.I&&e.C<n.length;){if((r=hs(e,n))==os){4==t&&(e.o=4,Zo(14),i=!1),Mo(e.j,e.m,null,"[Incomplete Response]");break}if(r==as){e.o=4,Zo(15),Mo(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}Mo(e.j,e.m,r,null),gs(e,r)}cs(e)&&r!=os&&r!=as&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,Zo(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.aa&&(e.aa=!0,(t=e.l).g==e&&t.$&&!t.L&&(t.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),Lu(t),t.L=!0,Zo(11))):(Mo(e.j,e.m,n,"[Invalid Chunked Response]"),ms(e),ps(e))}function hs(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?os:(n=Number(t.substring(n,r)),isNaN(n)?as:(r+=1)+n>t.length?os:(t=t.substr(r,n),e.C=r+n,t))}function fs(e){e.Y=Date.now()+e.P,ds(e,e.P)}function ds(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Go(ca(e.eb,e),t)}function vs(e){e.B&&(ta.clearTimeout(e.B),e.B=null)}function ps(e){0==e.l.G||e.I||Uu(e.l,e)}function ms(e){vs(e);var t=e.L;t&&"function"==typeof t.na&&t.na(),e.L=null,Ro(e.W),Lo(e.V),e.g&&(t=e.g,e.g=null,t.abort(),t.na())}function gs(e,t){try{var n=e.l;if(0!=n.G&&(n.g==e||Qs(n.i,e)))if(n.I=e.N,!e.J&&Qs(n.i,e)&&3==n.G){try{var r=n.Ca.g.parse(t)}catch(a){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0])e:if(n.u)n.ta=i[1],0<n.ta-n.U&&37500>i[2]&&n.N&&0==n.A&&!n.v&&(n.v=Go(ca(n.ab,n),6e3));else{if(n.g){if(!(n.g.F+3e3<e.F))break e;Mu(n),Su(n)}Pu(n),Zo(18)}if(1>=Ws(n.i)&&n.ka){try{n.ka()}catch(a){}n.ka=void 0}}else Vu(n,11)}else if((e.J||n.g==e)&&Mu(n),!ya(t))for(i=n.Ca.g.parse(t),t=0;t<i.length;t++){var a=i[t];if(n.U=a[0],a=a[1],2==n.G)if("c"==a[0]){n.J=a[1],n.la=a[2];var o=a[3];null!=o&&(n.ma=o,n.h.info("VER="+n.ma));var s=a[4];null!=s&&(n.za=s,n.h.info("SVER="+n.za));var u=a[5];null!=u&&"number"==typeof u&&0<u&&(n.K=r=1.5*u,n.h.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=e.g;if(c){var l=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var h=r.i;!h.g&&(ba(l,"spdy")||ba(l,"quic")||ba(l,"h2"))&&(h.j=h.l,h.g=new Set,h.h&&(Ys(h,h.h),h.h=null))}if(r.D){var f=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;f&&(r.sa=f,Cs(r.F,r.D,f))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-e.F,n.h.info("Handshake RTT: "+n.O+"ms"));var d=e;if((r=n).oa=Bu(r,r.H?r.la:null,r.W),d.J){Js(r.i,d);var v=d,p=r.K;p&&v.setTimeout(p),v.B&&(vs(v),fs(v)),r.g=d}else Du(r);0<n.l.length&&Cu(n)}else"stop"!=a[0]&&"close"!=a[0]||Vu(n,7);else 3==n.G&&("stop"==a[0]||"close"==a[0]?"stop"==a[0]?Vu(n,7):Iu(n):"noop"!=a[0]&&n.j&&n.j.wa(a),n.A=0)}Bo(4)}catch(a){}}function ys(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(ra(e)||"string"==typeof e)pa(e,t,void 0);else{if(e.T&&"function"==typeof e.T)var n=e.T();else if(e.R&&"function"==typeof e.R)n=void 0;else if(ra(e)||"string"==typeof e){n=[];for(var r=e.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,e)n[r++]=i;i=(r=function(e){if(e.R&&"function"==typeof e.R)return e.R();if("string"==typeof e)return e.split("");if(ra(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e)).length;for(var a=0;a<i;a++)t.call(void 0,r[a],n&&n[a],e)}}function ks(e,t){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(e)if(e instanceof ks)for(n=e.T(),r=0;r<n.length;r++)this.set(n[r],e.get(n[r]));else for(r in e)this.set(r,e[r])}function ws(e){if(e.i!=e.g.length){for(var t=0,n=0;t<e.g.length;){var r=e.g[t];bs(e.h,r)&&(e.g[n++]=r),t++}e.g.length=n}if(e.i!=e.g.length){var i={};for(n=t=0;t<e.g.length;)bs(i,r=e.g[t])||(e.g[n++]=r,i[r]=1),t++;e.g.length=n}}function bs(e,t){return Object.prototype.hasOwnProperty.call(e,t)}(Vi=ns.prototype).setTimeout=function(e){this.P=e},Vi.gb=function(e){e=e.target;var t=this.L;t&&3==wu(e)?t.l():this.Ia(e)},Vi.Ia=function(e){try{if(e==this.g)e:{var t=wu(this.g),n=this.g.Da(),r=this.g.ba();if(!(3>t)&&(3!=t||La||this.g&&(this.h.h||this.g.ga()||bu(this.g)))){this.I||4!=t||7==n||Bo(8==n||0>=r?3:2),vs(this);var i=this.g.ba();this.N=i;t:if(cs(this)){var a=bu(this.g);e="";var o=a.length,s=4==wu(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){ms(this),ps(this);var u="";break t}this.h.i=new ta.TextDecoder}for(n=0;n<o;n++)this.h.h=!0,e+=this.h.i.decode(a[n],{stream:s&&n==o-1});a.splice(0,o),this.h.g+=e,this.C=0,u=this.h.g}else u=this.g.ga();if(this.i=200==i,function(e,t,n,r,i,a,o){e.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+a+" "+o})}(this.j,this.u,this.A,this.m,this.X,t,i),this.i){if(this.$&&!this.J){t:{if(this.g){var c,l=this.g;if((c=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ya(c)){var h=c;break t}}h=null}if(!(i=h)){this.i=!1,this.o=3,Zo(12),ms(this),ps(this);break e}Mo(this.j,this.m,i,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,gs(this,i)}this.U?(ls(this,t,u),La&&this.i&&3==t&&(Po(this.V,this.W,"tick",this.fb),this.W.start())):(Mo(this.j,this.m,u,null),gs(this,u)),4==t&&ms(this),this.i&&!this.I&&(4==t?Uu(this.l,this):(this.i=!1,fs(this)))}else 400==i&&0<u.indexOf("Unknown SID")?(this.o=3,Zo(12)):(this.o=0,Zo(13)),ms(this),ps(this)}}}catch(t){}},Vi.fb=function(){if(this.g){var e=wu(this.g),t=this.g.ga();this.C<t.length&&(vs(this),ls(this,e,t),this.i&&4!=e&&fs(this))}},Vi.cancel=function(){this.I=!0,ms(this)},Vi.eb=function(){this.B=null;var e=Date.now();0<=e-this.Y?(function(e,t){e.info(function(){return"TIMEOUT: "+t})}(this.j,this.A),2!=this.K&&(Bo(3),Zo(17)),ms(this),this.o=2,ps(this)):ds(this,this.Y-e)},(Vi=ks.prototype).R=function(){ws(this);for(var e=[],t=0;t<this.g.length;t++)e.push(this.h[this.g[t]]);return e},Vi.T=function(){return ws(this),this.g.concat()},Vi.get=function(e,t){return bs(this.h,e)?this.h[e]:t},Vi.set=function(e,t){bs(this.h,e)||(this.i++,this.g.push(e)),this.h[e]=t},Vi.forEach=function(e,t){for(var n=this.T(),r=0;r<n.length;r++){var i=n[r],a=this.get(i);e.call(t,a,i,this)}};var _s=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function xs(e,t){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,e instanceof xs){this.g=void 0!==t?t:e.g,Is(this,e.j),this.s=e.s,Ss(this,e.i),Es(this,e.m),this.l=e.l,t=e.h;var n=new js;n.i=t.i,t.g&&(n.g=new ks(t.g),n.h=t.h),Rs(this,n),this.o=e.o}else e&&(n=String(e).match(_s))?(this.g=!!t,Is(this,n[1]||"",!0),this.s=Ns(n[2]||""),Ss(this,n[3]||"",!0),Es(this,n[4]),this.l=Ns(n[5]||"",!0),Rs(this,n[6]||"",!0),this.o=Ns(n[7]||"")):(this.g=!!t,this.h=new js(null,this.g))}function Ts(e){return new xs(e)}function Is(e,t,n){e.j=n?Ns(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function Ss(e,t,n){e.i=n?Ns(t,!0):t}function Es(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function Rs(e,t,n){t instanceof js?(e.h=t,function(e,t){t&&!e.j&&(Vs(e),e.i=null,e.g.forEach(function(e,t){var n=t.toLowerCase();t!=n&&(qs(this,t),zs(this,n,e))},e)),e.j=t}(e.h,e.g)):(n||(t=Os(t,Ms)),e.h=new js(t,e.g))}function Cs(e,t,n){e.h.set(t,n)}function As(e){return Cs(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function Ns(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function Os(e,t,n){return"string"==typeof e?(e=encodeURI(e).replace(t,Ds),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Ds(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}xs.prototype.toString=function(){var e=[],t=this.j;t&&e.push(Os(t,Ps,!0),":");var n=this.i;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(Os(t,Ps,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.i&&"/"!=n.charAt(0)&&e.push("/"),e.push(Os(n,"/"==n.charAt(0)?Fs:Ls,!0))),(n=this.h.toString())&&e.push("?",n),(n=this.o)&&e.push("#",Os(n,Us)),e.join("")};var Ps=/[#\/\?@]/g,Ls=/[#\?:]/g,Fs=/[#\?]/g,Ms=/[#\?@]/g,Us=/#/g;function js(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Vs(e){e.g||(e.g=new ks,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var a=e[n].substring(0,r);i=e[n].substring(r+1)}else a=e[n];t(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)}))}function qs(e,t){Vs(e),t=Zs(e,t),bs(e.g.h,t)&&(e.i=null,e.h-=e.g.get(t).length,bs((e=e.g).h,t)&&(delete e.h[t],e.i--,e.g.length>2*e.i&&ws(e)))}function Bs(e,t){return Vs(e),t=Zs(e,t),bs(e.g.h,t)}function zs(e,t,n){qs(e,t),0<n.length&&(e.i=null,e.g.set(Zs(e,t),ga(n)),e.h+=n.length)}function Zs(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function Hs(e){this.l=e||Gs,e=ta.PerformanceNavigationTiming?0<(e=ta.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):!!(ta.g&&ta.g.Ea&&ta.g.Ea()&&ta.g.Ea().Zb),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(Vi=js.prototype).add=function(e,t){Vs(this),this.i=null,e=Zs(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},Vi.forEach=function(e,t){Vs(this),this.g.forEach(function(n,r){pa(n,function(n){e.call(t,n,r,this)},this)},this)},Vi.T=function(){Vs(this);for(var e=this.g.R(),t=this.g.T(),n=[],r=0;r<t.length;r++)for(var i=e[r],a=0;a<i.length;a++)n.push(t[r]);return n},Vi.R=function(e){Vs(this);var t=[];if("string"==typeof e)Bs(this,e)&&(t=ma(t,this.g.get(Zs(this,e))));else{e=this.g.R();for(var n=0;n<e.length;n++)t=ma(t,e[n])}return t},Vi.set=function(e,t){return Vs(this),this.i=null,Bs(this,e=Zs(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},Vi.get=function(e,t){return e&&0<(e=this.R(e)).length?String(e[0]):t},Vi.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=this.g.T(),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r));r=this.R(r);for(var a=0;a<r.length;a++){var o=i;""!==r[a]&&(o+="="+encodeURIComponent(String(r[a]))),e.push(o)}}return this.i=e.join("&")};var Gs=10;function Ks(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Ws(e){return e.h?1:e.g?e.g.size:0}function Qs(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function Ys(e,t){e.g?e.g.add(t):e.h=t}function Js(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function $s(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){var t,n=e.i,r=s(e.g.values());try{for(r.s();!(t=r.n()).done;){var i=t.value;n=n.concat(i.D)}}catch(a){r.e(a)}finally{r.f()}return n}return ga(e.i)}function Xs(){}function eu(){this.g=new Xs}function tu(e,t,n){var r=n||"";try{ys(e,function(e,n){var i=e;ia(e)&&(i=go(e)),t.push(r+n+"="+encodeURIComponent(i))})}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function nu(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(a){}}function ru(e){this.l=e.$b||null,this.j=e.ib||!1}function iu(e,t){vo.call(this),this.D=e,this.u=t,this.m=void 0,this.readyState=au,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Hs.prototype.cancel=function(){if(this.i=$s(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){var e,t=s(this.g.values());try{for(t.s();!(e=t.n()).done;){e.value.cancel()}}catch(n){t.e(n)}finally{t.f()}this.g.clear()}},Xs.prototype.stringify=function(e){return ta.JSON.stringify(e,void 0)},Xs.prototype.parse=function(e){return ta.JSON.parse(e,void 0)},ha(ru,Qo),ru.prototype.g=function(){return new iu(this.l,this.j)},ru.prototype.i=function(e){return function(){return e}}({}),ha(iu,vo);var au=0;function ou(e){e.j.read().then(e.Sa.bind(e)).catch(e.ha.bind(e))}function su(e){e.readyState=4,e.l=null,e.j=null,e.A=null,uu(e)}function uu(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(Vi=iu.prototype).open=function(e,t){if(this.readyState!=au)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,uu(this)},Vi.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||ta).fetch(new Request(this.B,t)).then(this.Va.bind(this),this.ha.bind(this))},Vi.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,su(this)),this.readyState=au},Vi.Va=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,uu(this)),this.g&&(this.readyState=3,uu(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==ta.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;ou(this)}else e.text().then(this.Ua.bind(this),this.ha.bind(this))},Vi.Sa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?su(this):uu(this),3==this.readyState&&ou(this)}},Vi.Ua=function(e){this.g&&(this.response=this.responseText=e,su(this))},Vi.Ta=function(e){this.g&&(this.response=e,su(this))},Vi.ha=function(){this.g&&su(this)},Vi.setRequestHeader=function(e,t){this.v.append(e,t)},Vi.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},Vi.getAllResponseHeaders=function(){if(!this.h)return"";for(var e=[],t=this.h.entries(),n=t.next();!n.done;)e.push((n=n.value)[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(iu.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var cu=ta.JSON.parse;function lu(e){vo.call(this),this.headers=new ks,this.u=e||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=hu,this.K=this.L=!1}ha(lu,vo);var hu="",fu=/^https?$/i,du=["POST","PUT"];function vu(e){return"content-type"==e.toLowerCase()}function pu(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,mu(e),yu(e)}function mu(e){e.D||(e.D=!0,po(e,"complete"),po(e,"error"))}function gu(e){if(e.h&&void 0!==ea&&(!e.C[1]||4!=wu(e)||2!=e.ba()))if(e.v&&4==wu(e))Co(e.Fa,0,e);else if(po(e,"readystatechange"),4==wu(e)){e.h=!1;try{var t,n=e.ba();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var a=String(e.H).match(_s)[1]||null;if(!a&&ta.self&&ta.self.location){var o=ta.self.location.protocol;a=o.substr(0,o.length-1)}i=!fu.test(a?a.toLowerCase():"")}t=i}if(t)po(e,"complete"),po(e,"success");else{e.m=6;try{var s=2<wu(e)?e.g.statusText:""}catch(u){s=""}e.j=s+" ["+e.ba()+"]",mu(e)}}finally{yu(e)}}}function yu(e,t){if(e.g){ku(e);var n=e.g,r=e.C[0]?na:null;e.g=null,e.C=null,t||po(e,"ready");try{n.onreadystatechange=r}catch(i){}}}function ku(e){e.g&&e.K&&(e.g.ontimeout=null),e.A&&(ta.clearTimeout(e.A),e.A=null)}function wu(e){return e.g?e.g.readyState:0}function bu(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.J){case hu:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(t){return null}}function _u(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=function(e){var t="";return Ia(e,function(e,n){t+=n,t+=":",t+=e,t+="\r\n"}),t}(n),"string"==typeof e?null!=n&&encodeURIComponent(String(n)):Cs(e,t,n))}function xu(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Tu(e){this.za=0,this.l=[],this.h=new Fo,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=xu("failFast",!1,e),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=xu("baseRetryDelayMs",5e3,e),this.$a=xu("retryDelaySeedMs",1e4,e),this.Ya=xu("forwardChannelMaxRetries",2,e),this.ra=xu("forwardChannelRequestTimeoutMs",2e4,e),this.qa=e&&e.xmlHttpFactory||void 0,this.Ba=e&&e.Yb||!1,this.K=void 0,this.H=e&&e.supportsCrossDomainXhr||!1,this.J="",this.i=new Hs(e&&e.concurrentRequestLimit),this.Ca=new eu,this.ja=e&&e.fastHandshake||!1,this.Ra=e&&e.Wb||!1,e&&e.Aa&&this.h.Aa(),e&&e.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&e&&e.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!e||!1!==e.Xb}function Iu(e){if(Eu(e),3==e.G){var t=e.V++,n=Ts(e.F);Cs(n,"SID",e.J),Cs(n,"RID",t),Cs(n,"TYPE","terminate"),Nu(e,n),(t=new ns(e,e.h,t,void 0)).K=2,t.v=As(Ts(n)),n=!1,ta.navigator&&ta.navigator.sendBeacon&&(n=ta.navigator.sendBeacon(t.v.toString(),"")),!n&&ta.Image&&((new Image).src=t.v,n=!0),n||(t.g=zu(t.l,null),t.g.ea(t.v)),t.F=Date.now(),fs(t)}qu(e)}function Su(e){e.g&&(Lu(e),e.g.cancel(),e.g=null)}function Eu(e){Su(e),e.u&&(ta.clearTimeout(e.u),e.u=null),Mu(e),e.i.cancel(),e.m&&("number"==typeof e.m&&ta.clearTimeout(e.m),e.m=null)}function Ru(e,t){e.l.push(new(function(){return function e(t,n){f(this,e),this.h=t,this.g=n}}())(e.Za++,t)),3==e.G&&Cu(e)}function Cu(e){Ks(e.i)||e.m||(e.m=!0,xo(e.Ha,e),e.C=0)}function Au(e,t){var n;n=t?t.m:e.V++;var r=Ts(e.F);Cs(r,"SID",e.J),Cs(r,"RID",n),Cs(r,"AID",e.U),Nu(e,r),e.o&&e.s&&_u(r,e.o,e.s),n=new ns(e,e.h,n,e.C+1),null===e.o&&(n.H=e.s),t&&(e.l=t.D.concat(e.l)),t=Ou(e,n,1e3),n.setTimeout(Math.round(.5*e.ra)+Math.round(.5*e.ra*Math.random())),Ys(e.i,n),ss(n,r,t)}function Nu(e,t){e.j&&ys({},function(e,n){Cs(t,n,e)})}function Ou(e,t,n){n=Math.min(e.l.length,n);var r=e.j?ca(e.j.Oa,e.j,e):null;e:for(var i=e.l,a=-1;;){var o=["count="+n];-1==a?0<n?(a=i[0].h,o.push("ofs="+a)):a=0:o.push("ofs="+a);for(var s=!0,u=0;u<n;u++){var c=i[u].h,l=i[u].g;if(0>(c-=a))a=Math.max(0,i[u].h-100),s=!1;else try{tu(l,o,"req"+c+"_")}catch(h){r&&r(l)}}if(s){r=o.join("&");break e}}return e=e.l.splice(0,n),t.D=e,r}function Du(e){e.g||e.u||(e.Y=1,xo(e.Ga,e),e.A=0)}function Pu(e){return!(e.g||e.u||3<=e.A||(e.Y++,e.u=Go(ca(e.Ga,e),ju(e,e.A)),e.A++,0))}function Lu(e){null!=e.B&&(ta.clearTimeout(e.B),e.B=null)}function Fu(e){e.g=new ns(e,e.h,"rpc",e.Y),null===e.o&&(e.g.H=e.s),e.g.O=0;var t=Ts(e.oa);Cs(t,"RID","rpc"),Cs(t,"SID",e.J),Cs(t,"CI",e.N?"0":"1"),Cs(t,"AID",e.U),Nu(e,t),Cs(t,"TYPE","xmlhttp"),e.o&&e.s&&_u(t,e.o,e.s),e.K&&e.g.setTimeout(e.K);var n=e.g;e=e.la,n.K=1,n.v=As(Ts(t)),n.s=null,n.U=!0,us(n,e)}function Mu(e){null!=e.v&&(ta.clearTimeout(e.v),e.v=null)}function Uu(e,t){var n=null;if(e.g==t){Mu(e),Lu(e),e.g=null;var r=2}else{if(!Qs(e.i,t))return;n=t.D,Js(e.i,t),r=1}if(e.I=t.N,0!=e.G)if(t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.F;var i=e.C;po(r=Vo(),new Ho(r,n,t,i)),Cu(e)}else Du(e);else if(3==(i=t.o)||0==i&&0<e.I||!(1==r&&function(e,t){return!(Ws(e.i)>=e.i.j-(e.m?1:0)||(e.m?(e.l=t.D.concat(e.l),0):1==e.G||2==e.G||e.C>=(e.Xa?0:e.Ya)||(e.m=Go(ca(e.Ha,e,t),ju(e,e.C)),e.C++,0)))}(e,t)||2==r&&Pu(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:Vu(e,5);break;case 4:Vu(e,10);break;case 3:Vu(e,6);break;default:Vu(e,2)}}function ju(e,t){var n=e.Pa+Math.floor(Math.random()*e.$a);return e.j||(n*=2),n*t}function Vu(e,t){if(e.h.info("Error code "+t),2==t){var n=null;e.j&&(n=null);var r=ca(e.jb,e);n||(n=new xs("//www.google.com/images/cleardot.gif"),ta.location&&"http"==ta.location.protocol||Is(n,"https"),As(n)),function(e,t){var n=new Fo;if(ta.Image){var r=new Image;r.onload=la(nu,n,r,"TestLoadImage: loaded",!0,t),r.onerror=la(nu,n,r,"TestLoadImage: error",!1,t),r.onabort=la(nu,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=la(nu,n,r,"TestLoadImage: timeout",!1,t),ta.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=e}else t(!1)}(n.toString(),r)}else Zo(2);e.G=0,e.j&&e.j.va(t),qu(e),Eu(e)}function qu(e){e.G=0,e.I=-1,e.j&&((0!=$s(e.i).length||0!=e.l.length)&&(e.i.i.length=0,ga(e.l),e.l.length=0),e.j.ua())}function Bu(e,t,n){var r=function(e){return e instanceof xs?Ts(e):new xs(e,void 0)}(n);if(""!=r.i)t&&Ss(r,t+"."+r.i),Es(r,r.m);else{var i=ta.location;r=function(e,t,n,r){var i=new xs(null,void 0);return e&&Is(i,e),t&&Ss(i,t),n&&Es(i,n),r&&(i.l=r),i}(i.protocol,t?t+"."+i.hostname:i.hostname,+i.port,n)}return e.aa&&Ia(e.aa,function(e,t){Cs(r,t,e)}),n=e.sa,(t=e.D)&&n&&Cs(r,t,n),Cs(r,"VER",e.ma),Nu(e,r),r}function zu(e,t,n){if(t&&!e.H)throw Error("Can't create secondary domain capable XhrIo object.");return(t=new lu(n&&e.Ba&&!e.qa?new ru({ib:!0}):e.qa)).L=e.H,t}function Zu(){}function Hu(){if(Da&&!(10<=Number(za)))throw Error("Environmental error: no available transport.")}function Gu(e,t){vo.call(this),this.g=new Tu(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(e?e["X-WebChannel-Client-Profile"]=t.ya:e={"X-WebChannel-Client-Profile":t.ya}),this.g.P=e,(e=t&&t.httpHeadersOverwriteParam)&&!ya(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!ya(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&t in(e=this.h)&&delete e[t]),this.j=new Qu(this)}function Ku(e){Xo.call(this);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function Wu(){es.call(this),this.status=1}function Qu(e){this.g=e}(Vi=lu.prototype).ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+e);t=t?t.toUpperCase():"GET",this.H=e,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Jo.g(),this.C=function(e){return e.h||(e.h=e.i())}(this.u?this.u:Jo),this.g.onreadystatechange=ca(this.Fa,this);try{this.F=!0,this.g.open(t,String(e),!0),this.F=!1}catch(a){return void pu(this,a)}e=n||"";var i=new ks(this.headers);r&&ys(r,function(e,t){i.set(t,e)}),r=function(e){e:{for(var t=vu,n=e.length,r="string"==typeof e?e.split(""):e,i=0;i<n;i++)if(i in r&&t.call(void 0,r[i],i,e)){t=i;break e}t=-1}return 0>t?null:"string"==typeof e?e.charAt(t):e[t]}(i.T()),n=ta.FormData&&e instanceof ta.FormData,!(0<=va(du,t))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(e,t){this.g.setRequestHeader(t,e)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{ku(this),0<this.B&&((this.K=function(e){return Da&&function(){return e=Ba,Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=function(){for(var e=0,t=wa(String(Aa)).split("."),n=wa("9").split("."),r=Math.max(t.length,n.length),i=0;0==e&&i<r;i++){var a=t[i]||"",o=n[i]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],0==a[0].length&&0==o[0].length)break;e=_a(0==a[1].length?0:parseInt(a[1],10),0==o[1].length?0:parseInt(o[1],10))||_a(0==a[2].length,0==o[2].length)||_a(a[2],o[2]),a=a[3],o=o[3]}while(0==e)}return 0<=e}();var e}()&&"number"==typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=ca(this.pa,this)):this.A=Co(this.pa,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(a){pu(this,a)}},Vi.pa=function(){void 0!==ea&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,po(this,"timeout"),this.abort(8))},Vi.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,po(this,"complete"),po(this,"abort"),yu(this))},Vi.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),yu(this,!0)),lu.Z.M.call(this)},Vi.Fa=function(){this.s||(this.F||this.v||this.l?gu(this):this.cb())},Vi.cb=function(){gu(this)},Vi.ba=function(){try{return 2<wu(this)?this.g.status:-1}catch(Na){return-1}},Vi.ga=function(){try{return this.g?this.g.responseText:""}catch(Na){return""}},Vi.Qa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),cu(t)}},Vi.Da=function(){return this.m},Vi.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(Vi=Tu.prototype).ma=8,Vi.G=1,Vi.hb=function(e){try{this.h.info("Origin Trials invoked: "+e)}catch(t){}},Vi.Ha=function(e){if(this.m)if(this.m=null,1==this.G){if(!e){this.V=Math.floor(1e5*Math.random()),e=this.V++;var t=new ns(this,this.h,e,void 0),n=this.s;if(this.P&&(n?Ra(n=Sa(n),this.P):n=this.P),null===this.o&&(t.H=n),this.ja)e:{for(var r=0,i=0;i<this.l.length;i++){var a=this.l[i];if(void 0===(a="__data__"in a.g&&"string"==typeof(a=a.g.__data__)?a.length:void 0))break;if(4096<(r+=a)){r=i;break e}if(4096===r||i===this.l.length-1){r=i+1;break e}}r=1e3}else r=1e3;r=Ou(this,t,r),Cs(i=Ts(this.F),"RID",e),Cs(i,"CVER",22),this.D&&Cs(i,"X-HTTP-Session-Id",this.D),Nu(this,i),this.o&&n&&_u(i,this.o,n),Ys(this.i,t),this.Ra&&Cs(i,"TYPE","init"),this.ja?(Cs(i,"$req",r),Cs(i,"SID","null"),t.$=!0,ss(t,i,null)):ss(t,i,r),this.G=2}}else 3==this.G&&(e?Au(this,e):0==this.l.length||Ks(this.i)||Au(this))},Vi.Ga=function(){if(this.u=null,Fu(this),this.$&&!(this.L||null==this.g||0>=this.O)){var e=2*this.O;this.h.info("BP detection timer enabled: "+e),this.B=Go(ca(this.bb,this),e)}},Vi.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Zo(10),Su(this),Fu(this))},Vi.ab=function(){null!=this.v&&(this.v=null,Su(this),Pu(this),Zo(19))},Vi.jb=function(e){e?(this.h.info("Successfully pinged google.com"),Zo(2)):(this.h.info("Failed to ping google.com"),Zo(1))},(Vi=Zu.prototype).xa=function(){},Vi.wa=function(){},Vi.va=function(){},Vi.ua=function(){},Vi.Oa=function(){},Hu.prototype.g=function(e,t){return new Gu(e,t)},ha(Gu,vo),Gu.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var e=this.g,t=this.l,n=this.h||void 0;e.Wa&&(e.h.info("Origin Trials enabled."),xo(ca(e.hb,e,t))),Zo(0),e.W=t,e.aa=n||{},e.N=e.X,e.F=Bu(e,null,e.W),Cu(e)},Gu.prototype.close=function(){Iu(this.g)},Gu.prototype.u=function(e){if("string"==typeof e){var t={};t.__data__=e,Ru(this.g,t)}else this.v?((t={}).__data__=go(e),Ru(this.g,t)):Ru(this.g,e)},Gu.prototype.M=function(){this.g.j=null,delete this.j,Iu(this.g),delete this.g,Gu.Z.M.call(this)},ha(Ku,Xo),ha(Wu,es),ha(Qu,Zu),Qu.prototype.xa=function(){po(this.g,"a")},Qu.prototype.wa=function(e){po(this.g,new Ku(e))},Qu.prototype.va=function(e){po(this.g,new Wu(e))},Qu.prototype.ua=function(){po(this.g,"b")},Hu.prototype.createWebChannel=Hu.prototype.g,Gu.prototype.send=Gu.prototype.u,Gu.prototype.open=Gu.prototype.m,Gu.prototype.close=Gu.prototype.close,Ko.NO_ERROR=0,Ko.TIMEOUT=8,Ko.HTTP_ERROR=6,Wo.COMPLETE="complete",Yo.EventType=$o,$o.OPEN="a",$o.CLOSE="b",$o.ERROR="c",$o.MESSAGE="d",vo.prototype.listen=vo.prototype.N,lu.prototype.listenOnce=lu.prototype.O,lu.prototype.getLastError=lu.prototype.La,lu.prototype.getLastErrorCode=lu.prototype.Da,lu.prototype.getStatus=lu.prototype.ba,lu.prototype.getResponseJson=lu.prototype.Qa,lu.prototype.getResponseText=lu.prototype.ga,lu.prototype.send=lu.prototype.ea;var Yu=Xi.createWebChannelTransport=function(){return new Hu},Ju=Xi.getStatEventTarget=function(){return Vo()},$u=Xi.ErrorCode=Ko,Xu=Xi.EventType=Wo,ec=Xi.Event=Uo,tc=Xi.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},nc=Xi.FetchXmlHttpFactory=ru,rc=Xi.WebChannel=Yo,ic=Xi.XhrIo=lu,ac="@firebase/firestore",oc=function(){function e(t){f(this,e),this.uid=t}return h(e,[{key:"isAuthenticated",value:function(){return null!=this.uid}},{key:"toKey",value:function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}},{key:"isEqual",value:function(e){return e.uid===this.uid}}]),e}();oc.UNAUTHENTICATED=new oc(null),oc.GOOGLE_CREDENTIALS=new oc("google-credentials-uid"),oc.FIRST_PARTY=new oc("first-party-uid"),oc.MOCK_USER=new oc("mock-user");var sc="9.1.3",uc=new Yi.Yd("@firebase/firestore");function cc(){return uc.logLevel}function lc(e){if(uc.logLevel<=Yi.in.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(dc);uc.debug.apply(uc,["Firestore (".concat(sc,"): ").concat(e)].concat(a(i)))}}function hc(e){if(uc.logLevel<=Yi.in.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(dc);uc.error.apply(uc,["Firestore (".concat(sc,"): ").concat(e)].concat(a(i)))}}function fc(e){if(uc.logLevel<=Yi.in.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(dc);uc.warn.apply(uc,["Firestore (".concat(sc,"): ").concat(e)].concat(a(i)))}}function dc(e){if("string"==typeof e)return e;try{return JSON.stringify(e)}catch(t){return e}}function vc(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state",t="FIRESTORE (".concat(sc,") INTERNAL ASSERTION FAILED: ")+e;throw hc(t),new Error(t)}function pc(e,t){e||vc()}function mc(e,t){return e}var gc={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},yc=function(e){d(n,e);var t=v(n);function n(e,r){var i;return f(this,n),(i=t.call(this,r)).code=e,i.message=r,i.name="FirebaseError",i.toString=function(){return"".concat(i.name,": [code=").concat(i.code,"]: ").concat(i.message)},i}return n}(g(Error)),kc=function e(){var t=this;f(this,e),this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})},wc=function e(t,n){f(this,e),this.user=n,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization="Bearer ".concat(t)},bc=function(){function e(){f(this,e)}return h(e,[{key:"getToken",value:function(){return Promise.resolve(null)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){e.enqueueRetryable(function(){return t(oc.UNAUTHENTICATED)})}},{key:"shutdown",value:function(){}}]),e}(),_c=function(){function e(t){f(this,e),this.token=t,this.changeListener=null}return h(e,[{key:"getToken",value:function(){return Promise.resolve(this.token)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){var n=this;this.changeListener=t,e.enqueueRetryable(function(){return t(n.token.user)})}},{key:"shutdown",value:function(){this.changeListener=null}}]),e}(),xc=function(){function e(t){f(this,e),this.t=t,this.currentUser=oc.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}return h(e,[{key:"start",value:function(e,t){var n=this,r=this,i=this.i,a=function(e){return n.i!==i?(i=n.i,t(e)):Promise.resolve()},o=new kc;this.o=function(){n.i++,n.currentUser=n.u(),o.resolve(),o=new kc,e.enqueueRetryable(function(){return a(n.currentUser)})};var s=function(){var t=o;e.enqueueRetryable((0,Ki.Z)(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.promise;case 2:return e.next=4,a(r.currentUser);case 4:case"end":return e.stop()}},e)})))},u=function(e){lc("FirebaseCredentialsProvider","Auth detected"),n.auth=e,n.auth.addAuthTokenListener(n.o),s()};this.t.onInit(function(e){return u(e)}),setTimeout(function(){if(!n.auth){var e=n.t.getImmediate({optional:!0});e?u(e):(lc("FirebaseCredentialsProvider","Auth not yet detected"),o.resolve(),o=new kc)}},0),s()}},{key:"getToken",value:function(){var e=this,t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(function(n){return e.i!==t?(lc("FirebaseCredentialsProvider","getToken aborted due to token change."),e.getToken()):n?(pc("string"==typeof n.accessToken),new wc(n.accessToken,e.currentUser)):null}):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.auth&&this.auth.removeAuthTokenListener(this.o)}},{key:"u",value:function(){var e=this.auth&&this.auth.getUid();return pc(null===e||"string"==typeof e),new oc(e)}}]),e}(),Tc=function(){function e(t,n,r){f(this,e),this.h=t,this.l=n,this.m=r,this.type="FirstParty",this.user=oc.FIRST_PARTY}return h(e,[{key:"authHeaders",get:function(){var e={"X-Goog-AuthUser":this.l},t=this.h.auth.getAuthHeaderValueForFirstParty([]);return t&&(e.Authorization=t),this.m&&(e["X-Goog-Iam-Authorization-Token"]=this.m),e}}]),e}(),Ic=function(){function e(t,n,r){f(this,e),this.h=t,this.l=n,this.m=r}return h(e,[{key:"getToken",value:function(){return Promise.resolve(new Tc(this.h,this.l,this.m))}},{key:"start",value:function(e,t){e.enqueueRetryable(function(){return t(oc.FIRST_PARTY)})}},{key:"shutdown",value:function(){}},{key:"invalidateToken",value:function(){}}]),e}(),Sc=function(){function e(t,n){var r=this;f(this,e),this.previousValue=t,n&&(n.sequenceNumberHandler=function(e){return r.g(e)},this.p=function(e){return n.writeSequenceNumber(e)})}return h(e,[{key:"g",value:function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}},{key:"next",value:function(){var e=++this.previousValue;return this.p&&this.p(e),e}}]),e}();function Ec(e){var t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(var r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}Sc.T=-1;var Rc=function(){function e(){f(this,e)}return h(e,null,[{key:"I",value:function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,n="";n.length<20;)for(var r=Ec(40),i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%e.length));return n}}]),e}();function Cc(e,t){return e<t?-1:e>t?1:0}function Ac(e,t,n){return e.length===t.length&&e.every(function(e,r){return n(e,t[r])})}function Nc(e){return e+"\0"}var Oc=function(){function e(t,n){if(f(this,e),this.seconds=t,this.nanoseconds=n,n<0)throw new yc(gc.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new yc(gc.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new yc(gc.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new yc(gc.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return h(e,[{key:"toDate",value:function(){return new Date(this.toMillis())}},{key:"toMillis",value:function(){return 1e3*this.seconds+this.nanoseconds/1e6}},{key:"_compareTo",value:function(e){return this.seconds===e.seconds?Cc(this.nanoseconds,e.nanoseconds):Cc(this.seconds,e.seconds)}},{key:"isEqual",value:function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}},{key:"toString",value:function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}},{key:"toJSON",value:function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}},{key:"valueOf",value:function(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}],[{key:"now",value:function(){return e.fromMillis(Date.now())}},{key:"fromDate",value:function(t){return e.fromMillis(t.getTime())}},{key:"fromMillis",value:function(t){var n=Math.floor(t/1e3);return new e(n,Math.floor(1e6*(t-1e3*n)))}}]),e}(),Dc=function(){function e(t){f(this,e),this.timestamp=t}return h(e,[{key:"compareTo",value:function(e){return this.timestamp._compareTo(e.timestamp)}},{key:"isEqual",value:function(e){return this.timestamp.isEqual(e.timestamp)}},{key:"toMicroseconds",value:function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}},{key:"toString",value:function(){return"SnapshotVersion("+this.timestamp.toString()+")"}},{key:"toTimestamp",value:function(){return this.timestamp}}],[{key:"fromTimestamp",value:function(t){return new e(t)}},{key:"min",value:function(){return new e(new Oc(0,0))}}]),e}();function Pc(e){var t=0;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Lc(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Fc(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}var Mc=function(){function e(t,n,r){f(this,e),void 0===n?n=0:n>t.length&&vc(),void 0===r?r=t.length-n:r>t.length-n&&vc(),this.segments=t,this.offset=n,this.len=r}return h(e,[{key:"length",get:function(){return this.len}},{key:"isEqual",value:function(t){return 0===e.comparator(this,t)}},{key:"child",value:function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach(function(e){n.push(e)}):n.push(t),this.construct(n)}},{key:"limit",value:function(){return this.offset+this.length}},{key:"popFirst",value:function(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}},{key:"popLast",value:function(){return this.construct(this.segments,this.offset,this.length-1)}},{key:"firstSegment",value:function(){return this.segments[this.offset]}},{key:"lastSegment",value:function(){return this.get(this.length-1)}},{key:"get",value:function(e){return this.segments[this.offset+e]}},{key:"isEmpty",value:function(){return 0===this.length}},{key:"isPrefixOf",value:function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"isImmediateParentOf",value:function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"forEach",value:function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}},{key:"toArray",value:function(){return this.segments.slice(this.offset,this.limit())}}],[{key:"comparator",value:function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=e.get(r),a=t.get(r);if(i<a)return-1;if(i>a)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}]),e}(),Uc=function(e){d(n,e);var t=v(n);function n(){return f(this,n),t.apply(this,arguments)}return h(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().join("/")}},{key:"toString",value:function(){return this.canonicalString()}}],[{key:"fromString",value:function(){for(var e=[],t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];for(var o=0,s=r;o<s.length;o++){var u=s[o];if(u.indexOf("//")>=0)throw new yc(gc.INVALID_ARGUMENT,"Invalid segment (".concat(u,"). Paths must not contain // in them."));e.push.apply(e,a(u.split("/").filter(function(e){return e.length>0})))}return new n(e)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(Mc),jc=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Vc=function(e){d(n,e);var t=v(n);function n(){return f(this,n),t.apply(this,arguments)}return h(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().map(function(e){return e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e}).join(".")}},{key:"toString",value:function(){return this.canonicalString()}},{key:"isKeyField",value:function(){return 1===this.length&&"__name__"===this.get(0)}}],[{key:"isValidIdentifier",value:function(e){return jc.test(e)}},{key:"keyField",value:function(){return new n(["__name__"])}},{key:"fromServerFormat",value:function(e){for(var t=[],r="",i=0,a=function(){if(0===r.length)throw new yc(gc.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(r),r=""},o=!1;i<e.length;){var s=e[i];if("\\"===s){if(i+1===e.length)throw new yc(gc.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var u=e[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new yc(gc.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else"`"===s?(o=!o,i++):"."!==s||o?(r+=s,i++):(a(),i++)}if(a(),o)throw new yc(gc.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(Mc),qc=function(){function e(t){f(this,e),this.fields=t,t.sort(Vc.comparator)}return h(e,[{key:"covers",value:function(e){var t,n=s(this.fields);try{for(n.s();!(t=n.n()).done;){if(t.value.isPrefixOf(e))return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"isEqual",value:function(e){return Ac(this.fields,e.fields,function(e,t){return e.isEqual(t)})}}]),e}(),Bc=function(){function e(t){f(this,e),this.binaryString=t}return h(e,[{key:"toBase64",value:function(){return btoa(this.binaryString)}},{key:"toUint8Array",value:function(){return function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}},{key:"approximateByteSize",value:function(){return 2*this.binaryString.length}},{key:"compareTo",value:function(e){return Cc(this.binaryString,e.binaryString)}},{key:"isEqual",value:function(e){return this.binaryString===e.binaryString}}],[{key:"fromBase64String",value:function(t){return new e(atob(t))}},{key:"fromUint8Array",value:function(t){return new e(function(e){for(var t="",n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(t))}}]),e}();Bc.EMPTY_BYTE_STRING=new Bc("");var zc=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Zc(e){if(pc(!!e),"string"==typeof e){var t=0,n=zc.exec(e);if(pc(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:Hc(e.seconds),nanos:Hc(e.nanos)}}function Hc(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function Gc(e){return"string"==typeof e?Bc.fromBase64String(e):Bc.fromUint8Array(e)}function Kc(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Wc(e){var t=e.mapValue.fields.__previous_value__;return Kc(t)?Wc(t):t}function Qc(e){var t=Zc(e.mapValue.fields.__local_write_time__.timestampValue);return new Oc(t.seconds,t.nanos)}function Yc(e){return null==e}function Jc(e){return 0===e&&1/e==-1/0}function $c(e){return"number"==typeof e&&Number.isInteger(e)&&!Jc(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}var Xc=function(){function e(t){f(this,e),this.path=t}return h(e,[{key:"hasCollectionId",value:function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}},{key:"isEqual",value:function(e){return null!==e&&0===Uc.comparator(this.path,e.path)}},{key:"toString",value:function(){return this.path.toString()}}],[{key:"fromPath",value:function(t){return new e(Uc.fromString(t))}},{key:"fromName",value:function(t){return new e(Uc.fromString(t).popFirst(5))}},{key:"comparator",value:function(e,t){return Uc.comparator(e.path,t.path)}},{key:"isDocumentKey",value:function(e){return e.length%2==0}},{key:"fromSegments",value:function(t){return new e(new Uc(t.slice()))}}]),e}();function el(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Kc(e)?4:10:vc()}function tl(e,t){var n,r=el(e);if(r!==el(t))return!1;switch(r){case 0:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Qc(e).isEqual(Qc(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;var n=Zc(e.timestampValue),r=Zc(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return n=t,Gc(e.bytesValue).isEqual(Gc(n.bytesValue));case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return Hc(e.geoPointValue.latitude)===Hc(t.geoPointValue.latitude)&&Hc(e.geoPointValue.longitude)===Hc(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return Hc(e.integerValue)===Hc(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){var n=Hc(e.doubleValue),r=Hc(t.doubleValue);return n===r?Jc(n)===Jc(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return Ac(e.arrayValue.values||[],t.arrayValue.values||[],tl);case 10:return function(e,t){var n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(Pc(n)!==Pc(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!tl(n[i],r[i])))return!1;return!0}(e,t);default:return vc()}}function nl(e,t){return void 0!==(e.values||[]).find(function(e){return tl(e,t)})}function rl(e,t){var n,r,i,a,o=el(e),s=el(t);if(o!==s)return Cc(o,s);switch(o){case 0:return 0;case 1:return Cc(e.booleanValue,t.booleanValue);case 2:return r=t,i=Hc((n=e).integerValue||n.doubleValue),a=Hc(r.integerValue||r.doubleValue),i<a?-1:i>a?1:i===a?0:isNaN(i)?isNaN(a)?0:-1:1;case 3:return il(e.timestampValue,t.timestampValue);case 4:return il(Qc(e),Qc(t));case 5:return Cc(e.stringValue,t.stringValue);case 6:return function(e,t){var n=Gc(e),r=Gc(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){for(var n=e.split("/"),r=t.split("/"),i=0;i<n.length&&i<r.length;i++){var a=Cc(n[i],r[i]);if(0!==a)return a}return Cc(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){var n=Cc(Hc(e.latitude),Hc(t.latitude));return 0!==n?n:Cc(Hc(e.longitude),Hc(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){for(var n=e.values||[],r=t.values||[],i=0;i<n.length&&i<r.length;++i){var a=rl(n[i],r[i]);if(a)return a}return Cc(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){var n=e.fields||{},r=Object.keys(n),i=t.fields||{},a=Object.keys(i);r.sort(),a.sort();for(var o=0;o<r.length&&o<a.length;++o){var s=Cc(r[o],a[o]);if(0!==s)return s;var u=rl(n[r[o]],i[a[o]]);if(0!==u)return u}return Cc(r.length,a.length)}(e.mapValue,t.mapValue);default:throw vc()}}function il(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return Cc(e,t);var n=Zc(e),r=Zc(t),i=Cc(n.seconds,r.seconds);return 0!==i?i:Cc(n.nanos,r.nanos)}function al(e){return ol(e)}function ol(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?(t=e.timestampValue,n=Zc(t),"time(".concat(n.seconds,",").concat(n.nanos,")")):"stringValue"in e?e.stringValue:"bytesValue"in e?Gc(e.bytesValue).toBase64():"referenceValue"in e?Xc.fromName(e.referenceValue).toString():"geoPointValue"in e?"geo(".concat((r=e.geoPointValue).latitude,",").concat(r.longitude,")"):"arrayValue"in e?function(e){var t,n="[",r=!0,i=s(e.values||[]);try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+=ol(a)}}catch(o){i.e(o)}finally{i.f()}return n+"]"}(e.arrayValue):"mapValue"in e?function(e){var t,n="{",r=!0,i=s(Object.keys(e.fields||{}).sort());try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+="".concat(a,":").concat(ol(e.fields[a]))}}catch(o){i.e(o)}finally{i.f()}return n+"}"}(e.mapValue):vc();var t,n,r}function sl(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function ul(e){return!!e&&"integerValue"in e}function cl(e){return!!e&&"arrayValue"in e}function ll(e){return!!e&&"nullValue"in e}function hl(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function fl(e){return!!e&&"mapValue"in e}function dl(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){var t={mapValue:{fields:{}}};return Lc(e.mapValue.fields,function(e,n){return t.mapValue.fields[e]=dl(n)}),t}if(e.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(e.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=dl(e.arrayValue.values[r]);return n}return Object.assign({},e)}var vl=function(){function e(t){f(this,e),this.value=t}return h(e,[{key:"field",value:function(e){if(e.isEmpty())return this.value;for(var t=this.value,n=0;n<e.length-1;++n)if(!fl(t=(t.mapValue.fields||{})[e.get(n)]))return null;return(t=(t.mapValue.fields||{})[e.lastSegment()])||null}},{key:"set",value:function(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=dl(t)}},{key:"setAll",value:function(e){var t=this,n=Vc.emptyPath(),r={},i=[];e.forEach(function(e,a){if(!n.isImmediateParentOf(a)){var o=t.getFieldsMap(n);t.applyChanges(o,r,i),r={},i=[],n=a.popLast()}e?r[a.lastSegment()]=dl(e):i.push(a.lastSegment())});var a=this.getFieldsMap(n);this.applyChanges(a,r,i)}},{key:"delete",value:function(e){var t=this.field(e.popLast());fl(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}},{key:"isEqual",value:function(e){return tl(this.value,e.value)}},{key:"getFieldsMap",value:function(e){var t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(var n=0;n<e.length;++n){var r=t.mapValue.fields[e.get(n)];fl(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}},{key:"applyChanges",value:function(e,t,n){Lc(t,function(t,n){return e[t]=n});var r,i=s(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;delete e[a]}}catch(o){i.e(o)}finally{i.f()}}},{key:"clone",value:function(){return new e(dl(this.value))}}],[{key:"empty",value:function(){return new e({mapValue:{}})}}]),e}();function pl(e){var t=[];return Lc(e.fields,function(e,n){var r=new Vc([e]);if(fl(n)){var i=pl(n.mapValue).fields;if(0===i.length)t.push(r);else{var a,o=s(i);try{for(o.s();!(a=o.n()).done;){var u=a.value;t.push(r.child(u))}}catch(c){o.e(c)}finally{o.f()}}}else t.push(r)}),new qc(t)}var ml=function(){function e(t,n,r,i,a){f(this,e),this.key=t,this.documentType=n,this.version=r,this.data=i,this.documentState=a}return h(e,[{key:"convertToFoundDocument",value:function(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}},{key:"convertToNoDocument",value:function(e){return this.version=e,this.documentType=2,this.data=vl.empty(),this.documentState=0,this}},{key:"convertToUnknownDocument",value:function(e){return this.version=e,this.documentType=3,this.data=vl.empty(),this.documentState=2,this}},{key:"setHasCommittedMutations",value:function(){return this.documentState=2,this}},{key:"setHasLocalMutations",value:function(){return this.documentState=1,this}},{key:"hasLocalMutations",get:function(){return 1===this.documentState}},{key:"hasCommittedMutations",get:function(){return 2===this.documentState}},{key:"hasPendingWrites",get:function(){return this.hasLocalMutations||this.hasCommittedMutations}},{key:"isValidDocument",value:function(){return 0!==this.documentType}},{key:"isFoundDocument",value:function(){return 1===this.documentType}},{key:"isNoDocument",value:function(){return 2===this.documentType}},{key:"isUnknownDocument",value:function(){return 3===this.documentType}},{key:"isEqual",value:function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}},{key:"clone",value:function(){return new e(this.key,this.documentType,this.version,this.data.clone(),this.documentState)}},{key:"toString",value:function(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}],[{key:"newInvalidDocument",value:function(t){return new e(t,0,Dc.min(),vl.empty(),0)}},{key:"newFoundDocument",value:function(t,n,r){return new e(t,1,n,r,0)}},{key:"newNoDocument",value:function(t,n){return new e(t,2,n,vl.empty(),0)}},{key:"newUnknownDocument",value:function(t,n){return new e(t,3,n,vl.empty(),2)}}]),e}(),gl=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;f(this,e),this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=o,this.endAt=s,this.A=null};function yl(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;return new gl(e,t,n,r,i,a,o)}function kl(e){var t=mc(e);if(null===t.A){var n=t.path.canonicalString();null!==t.collectionGroup&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map(function(e){return function(e){return e.field.canonicalString()+e.op.toString()+al(e.value)}(e)}).join(","),n+="|ob:",n+=t.orderBy.map(function(e){return(t=e).field.canonicalString()+t.dir;var t}).join(","),Yc(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=Ol(t.startAt)),t.endAt&&(n+="|ub:",n+=Ol(t.endAt)),t.A=n}return t.A}function wl(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(var n=0;n<e.orderBy.length;n++)if(!Pl(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(var r=0;r<e.filters.length;r++)if((i=e.filters[r]).op!==(a=t.filters[r]).op||!i.field.isEqual(a.field)||!tl(i.value,a.value))return!1;var i,a;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Fl(e.startAt,t.startAt)&&Fl(e.endAt,t.endAt)}function bl(e){return Xc.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}var _l=function(e){d(n,e);var t=v(n);function n(e,r,i){var a;return f(this,n),(a=t.call(this)).field=e,a.op=r,a.value=i,a}return h(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return"!="===this.op?null!==t&&this.P(rl(t,this.value)):null!==t&&el(this.value)===el(t)&&this.P(rl(t,this.value))}},{key:"P",value:function(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return vc()}}},{key:"v",value:function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}],[{key:"create",value:function(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.R(e,t,r):new xl(e,t,r):"array-contains"===t?new El(e,r):"in"===t?new Rl(e,r):"not-in"===t?new Cl(e,r):"array-contains-any"===t?new Al(e,r):new n(e,t,r)}},{key:"R",value:function(e,t,n){return"in"===t?new Tl(e,n):new Il(e,n)}}]),n}(function(){return function e(){f(this,e)}}()),xl=function(e){d(n,e);var t=v(n);function n(e,r,i){var a;return f(this,n),(a=t.call(this,e,r,i)).key=Xc.fromName(i.referenceValue),a}return h(n,[{key:"matches",value:function(e){var t=Xc.comparator(e.key,this.key);return this.P(t)}}]),n}(_l),Tl=function(e){d(n,e);var t=v(n);function n(e,r){var i;return f(this,n),(i=t.call(this,e,"in",r)).keys=Sl(0,r),i}return h(n,[{key:"matches",value:function(e){return this.keys.some(function(t){return t.isEqual(e.key)})}}]),n}(_l),Il=function(e){d(n,e);var t=v(n);function n(e,r){var i;return f(this,n),(i=t.call(this,e,"not-in",r)).keys=Sl(0,r),i}return h(n,[{key:"matches",value:function(e){return!this.keys.some(function(t){return t.isEqual(e.key)})}}]),n}(_l);function Sl(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map(function(e){return Xc.fromName(e.referenceValue)})}var El=function(e){d(n,e);var t=v(n);function n(e,r){return f(this,n),t.call(this,e,"array-contains",r)}return h(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return cl(t)&&nl(t.arrayValue,this.value)}}]),n}(_l),Rl=function(e){d(n,e);var t=v(n);function n(e,r){return f(this,n),t.call(this,e,"in",r)}return h(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return null!==t&&nl(this.value.arrayValue,t)}}]),n}(_l),Cl=function(e){d(n,e);var t=v(n);function n(e,r){return f(this,n),t.call(this,e,"not-in",r)}return h(n,[{key:"matches",value:function(e){if(nl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var t=e.data.field(this.field);return null!==t&&!nl(this.value.arrayValue,t)}}]),n}(_l),Al=function(e){d(n,e);var t=v(n);function n(e,r){return f(this,n),t.call(this,e,"array-contains-any",r)}return h(n,[{key:"matches",value:function(e){var t=this,n=e.data.field(this.field);return!(!cl(n)||!n.arrayValue.values)&&n.arrayValue.values.some(function(e){return nl(t.value.arrayValue,e)})}}]),n}(_l),Nl=function e(t,n){f(this,e),this.position=t,this.before=n};function Ol(e){return"".concat(e.before?"b":"a",":").concat(e.position.map(function(e){return al(e)}).join(","))}var Dl=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";f(this,e),this.field=t,this.dir=n};function Pl(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}function Ll(e,t,n){for(var r=0,i=0;i<e.position.length;i++){var a=t[i],o=e.position[i];if(r=a.field.isKeyField()?Xc.comparator(Xc.fromName(o.referenceValue),n.key):rl(o,n.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return e.before?r<=0:r<0}function Fl(e,t){if(null===e)return null===t;if(null===t||e.before!==t.before||e.position.length!==t.position.length)return!1;for(var n=0;n<e.position.length;n++)if(!tl(e.position[n],t.position[n]))return!1;return!0}var Ml=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;f(this,e),this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=o,this.startAt=s,this.endAt=u,this.V=null,this.S=null};function Ul(e,t,n,r,i,a,o,s){return new Ml(e,t,n,r,i,a,o,s)}function jl(e){return new Ml(e)}function Vl(e){return!Yc(e.limit)&&"F"===e.limitType}function ql(e){return!Yc(e.limit)&&"L"===e.limitType}function Bl(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function zl(e){var t,n=s(e.filters);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.v())return r.field}}catch(i){n.e(i)}finally{n.f()}return null}function Zl(e){return null!==e.collectionGroup}function Hl(e){var t=mc(e);if(null===t.V){t.V=[];var n=zl(t),r=Bl(t);if(null!==n&&null===r)n.isKeyField()||t.V.push(new Dl(n)),t.V.push(new Dl(Vc.keyField(),"asc"));else{var i,a=!1,o=s(t.explicitOrderBy);try{for(o.s();!(i=o.n()).done;){var u=i.value;t.V.push(u),u.field.isKeyField()&&(a=!0)}}catch(l){o.e(l)}finally{o.f()}if(!a){var c=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.V.push(new Dl(Vc.keyField(),c))}}}return t.V}function Gl(e){var t=mc(e);if(!t.S)if("F"===t.limitType)t.S=yl(t.path,t.collectionGroup,Hl(t),t.filters,t.limit,t.startAt,t.endAt);else{var n,r=[],i=s(Hl(t));try{for(i.s();!(n=i.n()).done;){var a=n.value;r.push(new Dl(a.field,"desc"===a.dir?"asc":"desc"))}}catch(c){i.e(c)}finally{i.f()}var o=t.endAt?new Nl(t.endAt.position,!t.endAt.before):null,u=t.startAt?new Nl(t.startAt.position,!t.startAt.before):null;t.S=yl(t.path,t.collectionGroup,r,t.filters,t.limit,o,u)}return t.S}function Kl(e,t,n){return new Ml(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Wl(e,t){return wl(Gl(e),Gl(t))&&e.limitType===t.limitType}function Ql(e){return"".concat(kl(Gl(e)),"|lt:").concat(e.limitType)}function Yl(e){return"Query(target=".concat(function(e){var t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map(function(e){return"".concat((t=e).field.canonicalString()," ").concat(t.op," ").concat(al(t.value));var t}).join(", "),"]")),Yc(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map(function(e){return"".concat((t=e).field.canonicalString()," (").concat(t.dir,")");var t}).join(", "),"]")),e.startAt&&(t+=", startAt: "+Ol(e.startAt)),e.endAt&&(t+=", endAt: "+Ol(e.endAt)),"Target(".concat(t,")")}(Gl(e)),"; limitType=").concat(e.limitType,")")}function Jl(e,t){return t.isFoundDocument()&&function(e,t){var n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):Xc.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){var n,r=s(e.explicitOrderBy);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(!i.field.isKeyField()&&null===t.data.field(i.field))return!1}}catch(a){r.e(a)}finally{r.f()}return!0}(e,t)&&function(e,t){var n,r=s(e.filters);try{for(r.s();!(n=r.n()).done;){if(!n.value.matches(t))return!1}}catch(i){r.e(i)}finally{r.f()}return!0}(e,t)&&(r=t,!((n=e).startAt&&!Ll(n.startAt,Hl(n),r)||n.endAt&&Ll(n.endAt,Hl(n),r)));var n,r}function $l(e){return function(t,n){var r,i=!1,a=s(Hl(e));try{for(a.s();!(r=a.n()).done;){var o=r.value,u=Xl(o,t,n);if(0!==u)return u;i=i||o.field.isKeyField()}}catch(c){a.e(c)}finally{a.f()}return 0}}function Xl(e,t,n){var r,i,a,o,s=e.field.isKeyField()?Xc.comparator(t.key,n.key):(r=e.field,i=n,a=t.data.field(r),o=i.data.field(r),null!==a&&null!==o?rl(a,o):vc());switch(e.dir){case"asc":return s;case"desc":return-1*s;default:return vc()}}function eh(e,t){if(e.D){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Jc(t)?"-0":t}}function th(e){return{integerValue:""+e}}function nh(e,t){return $c(t)?th(t):eh(e,t)}var rh=function e(){f(this,e),this._=void 0};function ih(e,t,n){return e instanceof sh?(i=t,a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:(r=n).seconds,nanos:r.nanoseconds}}}},i&&(a.fields.__previous_value__=i),{mapValue:a}):e instanceof uh?ch(e,t):e instanceof lh?hh(e,t):function(e,t){var n=oh(e,t),r=dh(n)+dh(e.C);return ul(n)&&ul(e.C)?th(r):eh(e.N,r)}(e,t);var r,i,a}function ah(e,t,n){return e instanceof uh?ch(e,t):e instanceof lh?hh(e,t):n}function oh(e,t){return e instanceof fh?ul(r=t)||(n=r)&&"doubleValue"in n?t:{integerValue:0}:null;var n,r}var sh=function(e){d(n,e);var t=v(n);function n(){return f(this,n),t.apply(this,arguments)}return n}(rh),uh=function(e){d(n,e);var t=v(n);function n(e){var r;return f(this,n),(r=t.call(this)).elements=e,r}return n}(rh);function ch(e,t){var n,r=vh(t),i=s(e.elements);try{var a=function(){var e=n.value;r.some(function(t){return tl(t,e)})||r.push(e)};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var lh=function(e){d(n,e);var t=v(n);function n(e){var r;return f(this,n),(r=t.call(this)).elements=e,r}return n}(rh);function hh(e,t){var n,r=vh(t),i=s(e.elements);try{var a=function(){var e=n.value;r=r.filter(function(t){return!tl(t,e)})};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var fh=function(e){d(n,e);var t=v(n);function n(e,r){var i;return f(this,n),(i=t.call(this)).N=e,i.C=r,i}return n}(rh);function dh(e){return Hc(e.integerValue||e.doubleValue)}function vh(e){return cl(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}var ph=function e(t,n){f(this,e),this.field=t,this.transform=n},mh=function e(t,n){f(this,e),this.version=t,this.transformResults=n},gh=function(){function e(t,n){f(this,e),this.updateTime=t,this.exists=n}return h(e,[{key:"isNone",get:function(){return void 0===this.updateTime&&void 0===this.exists}},{key:"isEqual",value:function(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}],[{key:"none",value:function(){return new e}},{key:"exists",value:function(t){return new e(void 0,t)}},{key:"updateTime",value:function(t){return new e(t)}}]),e}();function yh(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}var kh=function e(){f(this,e)};function wh(e,t,n){var r,i,a,o,s;e instanceof Ih?(i=t,a=n,o=(r=e).value.clone(),s=Rh(r.fieldTransforms,i,a.transformResults),o.setAll(s),i.convertToFoundDocument(a.version,o).setHasCommittedMutations()):e instanceof Sh?function(e,t,n){if(yh(e.precondition,t)){var r=Rh(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(Eh(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else t.convertToUnknownDocument(n.version)}(e,t,n):t.convertToNoDocument(n.version).setHasCommittedMutations()}function bh(e,t,n){var r;e instanceof Ih?function(e,t,n){if(yh(e.precondition,t)){var r=e.value.clone(),i=Ch(e.fieldTransforms,n,t);r.setAll(i),t.convertToFoundDocument(Th(t),r).setHasLocalMutations()}}(e,t,n):e instanceof Sh?function(e,t,n){if(yh(e.precondition,t)){var r=Ch(e.fieldTransforms,n,t),i=t.data;i.setAll(Eh(e)),i.setAll(r),t.convertToFoundDocument(Th(t),i).setHasLocalMutations()}}(e,t,n):yh(e.precondition,r=t)&&r.convertToNoDocument(Dc.min())}function _h(e,t){var n,r=null,i=s(e.fieldTransforms);try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.field),u=oh(a.transform,o||null);null!=u&&(null==r&&(r=vl.empty()),r.set(a.field,u))}}catch(c){i.e(c)}finally{i.f()}return r||null}function xh(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&(r=t.fieldTransforms,!!(void 0===(n=e.fieldTransforms)&&void 0===r||n&&r&&Ac(n,r,function(e,t){return function(e,t){return e.field.isEqual(t.field)&&(r=t.transform,(n=e.transform)instanceof uh&&r instanceof uh||n instanceof lh&&r instanceof lh?Ac(n.elements,r.elements,tl):n instanceof fh&&r instanceof fh?tl(n.C,r.C):n instanceof sh&&r instanceof sh);var n,r}(e,t)})))&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask));var n,r}function Th(e){return e.isFoundDocument()?e.version:Dc.min()}var Ih=function(e){d(n,e);var t=v(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return f(this,n),(a=t.call(this)).key=e,a.value=r,a.precondition=i,a.fieldTransforms=o,a.type=0,a}return n}(kh),Sh=function(e){d(n,e);var t=v(n);function n(e,r,i,a){var o,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return f(this,n),(o=t.call(this)).key=e,o.data=r,o.fieldMask=i,o.precondition=a,o.fieldTransforms=s,o.type=1,o}return n}(kh);function Eh(e){var t=new Map;return e.fieldMask.fields.forEach(function(n){if(!n.isEmpty()){var r=e.data.field(n);t.set(n,r)}}),t}function Rh(e,t,n){var r=new Map;pc(e.length===n.length);for(var i=0;i<n.length;i++){var a=e[i],o=a.transform,s=t.data.field(a.field);r.set(a.field,ah(o,s,n[i]))}return r}function Ch(e,t,n){var r,i=new Map,a=s(e);try{for(a.s();!(r=a.n()).done;){var o=r.value,u=o.transform,c=n.data.field(o.field);i.set(o.field,ih(u,c,t))}}catch(l){a.e(l)}finally{a.f()}return i}var Ah,Nh,Oh=function(e){d(n,e);var t=v(n);function n(e,r){var i;return f(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=2,i.fieldTransforms=[],i}return n}(kh),Dh=function(e){d(n,e);var t=v(n);function n(e,r){var i;return f(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=3,i.fieldTransforms=[],i}return n}(kh),Ph=function e(t){f(this,e),this.count=t};function Lh(e){switch(e){default:return vc();case gc.CANCELLED:case gc.UNKNOWN:case gc.DEADLINE_EXCEEDED:case gc.RESOURCE_EXHAUSTED:case gc.INTERNAL:case gc.UNAVAILABLE:case gc.UNAUTHENTICATED:return!1;case gc.INVALID_ARGUMENT:case gc.NOT_FOUND:case gc.ALREADY_EXISTS:case gc.PERMISSION_DENIED:case gc.FAILED_PRECONDITION:case gc.ABORTED:case gc.OUT_OF_RANGE:case gc.UNIMPLEMENTED:case gc.DATA_LOSS:return!0}}function Fh(e){if(void 0===e)return hc("GRPC error has no .code"),gc.UNKNOWN;switch(e){case Ah.OK:return gc.OK;case Ah.CANCELLED:return gc.CANCELLED;case Ah.UNKNOWN:return gc.UNKNOWN;case Ah.DEADLINE_EXCEEDED:return gc.DEADLINE_EXCEEDED;case Ah.RESOURCE_EXHAUSTED:return gc.RESOURCE_EXHAUSTED;case Ah.INTERNAL:return gc.INTERNAL;case Ah.UNAVAILABLE:return gc.UNAVAILABLE;case Ah.UNAUTHENTICATED:return gc.UNAUTHENTICATED;case Ah.INVALID_ARGUMENT:return gc.INVALID_ARGUMENT;case Ah.NOT_FOUND:return gc.NOT_FOUND;case Ah.ALREADY_EXISTS:return gc.ALREADY_EXISTS;case Ah.PERMISSION_DENIED:return gc.PERMISSION_DENIED;case Ah.FAILED_PRECONDITION:return gc.FAILED_PRECONDITION;case Ah.ABORTED:return gc.ABORTED;case Ah.OUT_OF_RANGE:return gc.OUT_OF_RANGE;case Ah.UNIMPLEMENTED:return gc.UNIMPLEMENTED;case Ah.DATA_LOSS:return gc.DATA_LOSS;default:return vc()}}(Nh=Ah||(Ah={}))[Nh.OK=0]="OK",Nh[Nh.CANCELLED=1]="CANCELLED",Nh[Nh.UNKNOWN=2]="UNKNOWN",Nh[Nh.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Nh[Nh.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Nh[Nh.NOT_FOUND=5]="NOT_FOUND",Nh[Nh.ALREADY_EXISTS=6]="ALREADY_EXISTS",Nh[Nh.PERMISSION_DENIED=7]="PERMISSION_DENIED",Nh[Nh.UNAUTHENTICATED=16]="UNAUTHENTICATED",Nh[Nh.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Nh[Nh.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Nh[Nh.ABORTED=10]="ABORTED",Nh[Nh.OUT_OF_RANGE=11]="OUT_OF_RANGE",Nh[Nh.UNIMPLEMENTED=12]="UNIMPLEMENTED",Nh[Nh.INTERNAL=13]="INTERNAL",Nh[Nh.UNAVAILABLE=14]="UNAVAILABLE",Nh[Nh.DATA_LOSS=15]="DATA_LOSS";var Mh=function(){function e(t,n){f(this,e),this.comparator=t,this.root=n||jh.EMPTY}return h(e,[{key:"insert",value:function(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,jh.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,jh.BLACK,null,null))}},{key:"get",value:function(e){for(var t=this.root;!t.isEmpty();){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}},{key:"indexOf",value:function(e){for(var t=0,n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}},{key:"isEmpty",value:function(){return this.root.isEmpty()}},{key:"size",get:function(){return this.root.size}},{key:"minKey",value:function(){return this.root.minKey()}},{key:"maxKey",value:function(){return this.root.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root.inorderTraversal(e)}},{key:"forEach",value:function(e){this.inorderTraversal(function(t,n){return e(t,n),!1})}},{key:"toString",value:function(){var e=[];return this.inorderTraversal(function(t,n){return e.push("".concat(t,":").concat(n)),!1}),"{".concat(e.join(", "),"}")}},{key:"reverseTraversal",value:function(e){return this.root.reverseTraversal(e)}},{key:"getIterator",value:function(){return new Uh(this.root,null,this.comparator,!1)}},{key:"getIteratorFrom",value:function(e){return new Uh(this.root,e,this.comparator,!1)}},{key:"getReverseIterator",value:function(){return new Uh(this.root,null,this.comparator,!0)}},{key:"getReverseIteratorFrom",value:function(e){return new Uh(this.root,e,this.comparator,!0)}}]),e}(),Uh=function(){function e(t,n,r,i){f(this,e),this.isReverse=i,this.nodeStack=[];for(var a=1;!t.isEmpty();)if(a=n?r(t.key,n):1,i&&(a*=-1),a<0)t=this.isReverse?t.left:t.right;else{if(0===a){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return h(e,[{key:"getNext",value:function(){var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}},{key:"hasNext",value:function(){return this.nodeStack.length>0}},{key:"peek",value:function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}]),e}(),jh=function(){function e(t,n,r,i,a){f(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:e.EMPTY,this.right=null!=a?a:e.EMPTY,this.size=this.left.size+1+this.right.size}return h(e,[{key:"copy",value:function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min",value:function(){return this.left.isEmpty()?this:this.left.min()}},{key:"minKey",value:function(){return this.min().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp()}},{key:"removeMin",value:function(){if(this.left.isEmpty())return e.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()}},{key:"remove",value:function(t,n){var r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(t,i.key)){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}},{key:"isRed",value:function(){return this.color}},{key:"fixUp",value:function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}},{key:"moveRedLeft",value:function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e}},{key:"moveRedRight",value:function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e}},{key:"rotateLeft",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth",value:function(){var e=this.check();return Math.pow(2,e)<=this.size+1}},{key:"check",value:function(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw vc();var e=this.left.check();if(e!==this.right.check())throw vc();return e+(this.isRed()?0:1)}}]),e}();jh.EMPTY=null,jh.RED=!0,jh.BLACK=!1,jh.EMPTY=new(function(){function e(){f(this,e),this.size=0}return h(e,[{key:"key",get:function(){throw vc()}},{key:"value",get:function(){throw vc()}},{key:"color",get:function(){throw vc()}},{key:"left",get:function(){throw vc()}},{key:"right",get:function(){throw vc()}},{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new jh(e,t)}},{key:"remove",value:function(e,t){return this}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"isRed",value:function(){return!1}},{key:"checkMaxDepth",value:function(){return!0}},{key:"check",value:function(){return 0}}]),e}());var Vh=function(){function e(t){f(this,e),this.comparator=t,this.data=new Mh(this.comparator)}return h(e,[{key:"has",value:function(e){return null!==this.data.get(e)}},{key:"first",value:function(){return this.data.minKey()}},{key:"last",value:function(){return this.data.maxKey()}},{key:"size",get:function(){return this.data.size}},{key:"indexOf",value:function(e){return this.data.indexOf(e)}},{key:"forEach",value:function(e){this.data.inorderTraversal(function(t,n){return e(t),!1})}},{key:"forEachInRange",value:function(e,t){for(var n=this.data.getIteratorFrom(e[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}},{key:"forEachWhile",value:function(e,t){var n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}},{key:"firstAfterOrEqual",value:function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}},{key:"getIterator",value:function(){return new qh(this.data.getIterator())}},{key:"getIteratorFrom",value:function(e){return new qh(this.data.getIteratorFrom(e))}},{key:"add",value:function(e){return this.copy(this.data.remove(e).insert(e,!0))}},{key:"delete",value:function(e){return this.has(e)?this.copy(this.data.remove(e)):this}},{key:"isEmpty",value:function(){return this.data.isEmpty()}},{key:"unionWith",value:function(e){var t=this;return t.size<e.size&&(t=e,e=this),e.forEach(function(e){t=t.add(e)}),t}},{key:"isEqual",value:function(t){if(!(t instanceof e)||this.size!==t.size)return!1;for(var n=this.data.getIterator(),r=t.data.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}},{key:"toArray",value:function(){var e=[];return this.forEach(function(t){e.push(t)}),e}},{key:"toString",value:function(){var e=[];return this.forEach(function(t){return e.push(t)}),"SortedSet("+e.toString()+")"}},{key:"copy",value:function(t){var n=new e(this.comparator);return n.data=t,n}}]),e}(),qh=function(){function e(t){f(this,e),this.iter=t}return h(e,[{key:"getNext",value:function(){return this.iter.getNext().key}},{key:"hasNext",value:function(){return this.iter.hasNext()}}]),e}(),Bh=new Mh(Xc.comparator);function zh(){return Bh}var Zh=new Mh(Xc.comparator);function Hh(){return Zh}var Gh=new Mh(Xc.comparator);function Kh(){return Gh}var Wh=new Vh(Xc.comparator);function Qh(){for(var e=Wh,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.add(o)}return e}var Yh=new Vh(Cc);function Jh(){return Yh}var $h=function(){function e(t,n,r,i,a){f(this,e),this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}return h(e,null,[{key:"createSynthesizedRemoteEventForCurrentChange",value:function(t,n){var r=new Map;return r.set(t,Xh.createSynthesizedTargetChangeForCurrentChange(t,n)),new e(Dc.min(),r,Jh(),zh(),Qh())}}]),e}(),Xh=function(){function e(t,n,r,i,a){f(this,e),this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}return h(e,null,[{key:"createSynthesizedTargetChangeForCurrentChange",value:function(t,n){return new e(Bc.EMPTY_BYTE_STRING,n,Qh(),Qh(),Qh())}}]),e}(),ef=function e(t,n,r,i){f(this,e),this.k=t,this.removedTargetIds=n,this.key=r,this.$=i},tf=function e(t,n){f(this,e),this.targetId=t,this.O=n},nf=function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Bc.EMPTY_BYTE_STRING,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;f(this,e),this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i},rf=function(){function e(){f(this,e),this.F=0,this.M=sf(),this.L=Bc.EMPTY_BYTE_STRING,this.B=!1,this.U=!0}return h(e,[{key:"current",get:function(){return this.B}},{key:"resumeToken",get:function(){return this.L}},{key:"q",get:function(){return 0!==this.F}},{key:"K",get:function(){return this.U}},{key:"j",value:function(e){e.approximateByteSize()>0&&(this.U=!0,this.L=e)}},{key:"W",value:function(){var e=Qh(),t=Qh(),n=Qh();return this.M.forEach(function(r,i){switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:vc()}}),new Xh(this.L,this.B,e,t,n)}},{key:"G",value:function(){this.U=!1,this.M=sf()}},{key:"H",value:function(e,t){this.U=!0,this.M=this.M.insert(e,t)}},{key:"J",value:function(e){this.U=!0,this.M=this.M.remove(e)}},{key:"Y",value:function(){this.F+=1}},{key:"X",value:function(){this.F-=1}},{key:"Z",value:function(){this.U=!0,this.B=!0}}]),e}(),af=function(){function e(t){f(this,e),this.tt=t,this.et=new Map,this.nt=zh(),this.st=of(),this.it=new Vh(Cc)}return h(e,[{key:"rt",value:function(e){var t,n=s(e.k);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.$&&e.$.isFoundDocument()?this.ot(r,e.$):this.at(r,e.key,e.$)}}catch(u){n.e(u)}finally{n.f()}var i,a=s(e.removedTargetIds);try{for(a.s();!(i=a.n()).done;){var o=i.value;this.at(o,e.key,e.$)}}catch(u){a.e(u)}finally{a.f()}}},{key:"ct",value:function(e){var t=this;this.forEachTarget(e,function(n){var r=t.ut(n);switch(e.state){case 0:t.ht(n)&&r.j(e.resumeToken);break;case 1:r.X(),r.q||r.G(),r.j(e.resumeToken);break;case 2:r.X(),r.q||t.removeTarget(n);break;case 3:t.ht(n)&&(r.Z(),r.j(e.resumeToken));break;case 4:t.ht(n)&&(t.lt(n),r.j(e.resumeToken));break;default:vc()}})}},{key:"forEachTarget",value:function(e,t){var n=this;e.targetIds.length>0?e.targetIds.forEach(t):this.et.forEach(function(e,r){n.ht(r)&&t(r)})}},{key:"ft",value:function(e){var t=e.targetId,n=e.O.count,r=this.dt(t);if(r){var i=r.target;if(bl(i))if(0===n){var a=new Xc(i.path);this.at(t,a,ml.newNoDocument(a,Dc.min()))}else pc(1===n);else this.wt(t)!==n&&(this.lt(t),this.it=this.it.add(t))}}},{key:"_t",value:function(e){var t=this,n=new Map;this.et.forEach(function(r,i){var a=t.dt(i);if(a){if(r.current&&bl(a.target)){var o=new Xc(a.target.path);null!==t.nt.get(o)||t.gt(i,o)||t.at(i,o,ml.newNoDocument(o,e))}r.K&&(n.set(i,r.W()),r.G())}});var r=Qh();this.st.forEach(function(e,n){var i=!0;n.forEachWhile(function(e){var n=t.dt(e);return!n||2===n.purpose||(i=!1,!1)}),i&&(r=r.add(e))});var i=new $h(e,n,this.it,this.nt,r);return this.nt=zh(),this.st=of(),this.it=new Vh(Cc),i}},{key:"ot",value:function(e,t){if(this.ht(e)){var n=this.gt(e,t.key)?2:0;this.ut(e).H(t.key,n),this.nt=this.nt.insert(t.key,t),this.st=this.st.insert(t.key,this.yt(t.key).add(e))}}},{key:"at",value:function(e,t,n){if(this.ht(e)){var r=this.ut(e);this.gt(e,t)?r.H(t,1):r.J(t),this.st=this.st.insert(t,this.yt(t).delete(e)),n&&(this.nt=this.nt.insert(t,n))}}},{key:"removeTarget",value:function(e){this.et.delete(e)}},{key:"wt",value:function(e){var t=this.ut(e).W();return this.tt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}},{key:"Y",value:function(e){this.ut(e).Y()}},{key:"ut",value:function(e){var t=this.et.get(e);return t||(t=new rf,this.et.set(e,t)),t}},{key:"yt",value:function(e){var t=this.st.get(e);return t||(t=new Vh(Cc),this.st=this.st.insert(e,t)),t}},{key:"ht",value:function(e){var t=null!==this.dt(e);return t||lc("WatchChangeAggregator","Detected inactive target",e),t}},{key:"dt",value:function(e){var t=this.et.get(e);return t&&t.q?null:this.tt.Tt(e)}},{key:"lt",value:function(e){var t=this;this.et.set(e,new rf),this.tt.getRemoteKeysForTarget(e).forEach(function(n){t.at(e,n,null)})}},{key:"gt",value:function(e,t){return this.tt.getRemoteKeysForTarget(e).has(t)}}]),e}();function of(){return new Mh(Xc.comparator)}function sf(){return new Mh(Xc.comparator)}var uf={asc:"ASCENDING",desc:"DESCENDING"},cf={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},lf=function e(t,n){f(this,e),this.databaseId=t,this.D=n};function hf(e,t){return e.D?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function ff(e,t){return e.D?t.toBase64():t.toUint8Array()}function df(e,t){return hf(e,t.toTimestamp())}function vf(e){return pc(!!e),Dc.fromTimestamp((t=Zc(e),new Oc(t.seconds,t.nanos)));var t}function pf(e,t){return(n=e,new Uc(["projects",n.projectId,"databases",n.database])).child("documents").child(t).canonicalString();var n}function mf(e){var t=Uc.fromString(e);return pc(Vf(t)),t}function gf(e,t){return pf(e.databaseId,t.path)}function yf(e,t){var n=mf(t);if(n.get(1)!==e.databaseId.projectId)throw new yc(gc.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new yc(gc.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Xc(_f(n))}function kf(e,t){return pf(e.databaseId,t)}function wf(e){var t=mf(e);return 4===t.length?Uc.emptyPath():_f(t)}function bf(e){return new Uc(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function _f(e){return pc(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function xf(e,t,n){return{name:gf(e,t),fields:n.value.mapValue.fields}}function Tf(e,t,n){var r=yf(e,t.name),i=vf(t.updateTime),a=new vl({mapValue:{fields:t.fields}}),o=ml.newFoundDocument(r,i,a);return n&&o.setHasCommittedMutations(),n?o.setHasCommittedMutations():o}function If(e,t){var n,r;if(t instanceof Ih)n={update:xf(e,t.key,t.value)};else if(t instanceof Oh)n={delete:gf(e,t.key)};else if(t instanceof Sh)n={update:xf(e,t.key,t.data),updateMask:jf(t.fieldMask)};else{if(!(t instanceof Dh))return vc();n={verify:gf(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(function(e){return function(e,t){var n=t.transform;if(n instanceof sh)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof uh)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof lh)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof fh)return{fieldPath:t.field.canonicalString(),increment:n.C};throw vc()}(0,e)})),t.precondition.isNone||(n.currentDocument=void 0!==(r=t.precondition).updateTime?{updateTime:df(e,r.updateTime)}:void 0!==r.exists?{exists:r.exists}:vc()),n}function Sf(e,t){var n,r=t.currentDocument?void 0!==(n=t.currentDocument).updateTime?gh.updateTime(vf(n.updateTime)):void 0!==n.exists?gh.exists(n.exists):gh.none():gh.none(),i=t.updateTransforms?t.updateTransforms.map(function(t){return function(e,t){var n=null;"setToServerValue"in t?(pc("REQUEST_TIME"===t.setToServerValue),n=new sh):"appendMissingElements"in t?n=new uh(t.appendMissingElements.values||[]):"removeAllFromArray"in t?n=new lh(t.removeAllFromArray.values||[]):"increment"in t?n=new fh(e,t.increment):vc();var r=Vc.fromServerFormat(t.fieldPath);return new ph(r,n)}(e,t)}):[];if(t.update){var a=yf(e,t.update.name),o=new vl({mapValue:{fields:t.update.fields}});if(t.updateMask){var s=new qc((t.updateMask.fieldPaths||[]).map(function(e){return Vc.fromServerFormat(e)}));return new Sh(a,o,s,r,i)}return new Ih(a,o,r,i)}if(t.delete){var u=yf(e,t.delete);return new Oh(u,r)}if(t.verify){var c=yf(e,t.verify);return new Dh(c,r)}return vc()}function Ef(e,t){return{documents:[kf(e,t.path)]}}function Rf(e,t){var n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=kf(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=kf(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(e){if(0!==e.length){var t=e.map(function(e){return function(e){if("=="===e.op){if(hl(e.value))return{unaryFilter:{field:Lf(e.field),op:"IS_NAN"}};if(ll(e.value))return{unaryFilter:{field:Lf(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(hl(e.value))return{unaryFilter:{field:Lf(e.field),op:"IS_NOT_NAN"}};if(ll(e.value))return{unaryFilter:{field:Lf(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Lf(e.field),op:Pf(e.op),value:e.value}}}(e)});return 1===t.length?t[0]:{compositeFilter:{op:"AND",filters:t}}}}(t.filters);i&&(n.structuredQuery.where=i);var a=function(e){if(0!==e.length)return e.map(function(e){return{field:Lf((t=e).field),direction:Df(t.dir)};var t})}(t.orderBy);a&&(n.structuredQuery.orderBy=a);var o,s=(o=t.limit,e.D||Yc(o)?o:{value:o});return null!==s&&(n.structuredQuery.limit=s),t.startAt&&(n.structuredQuery.startAt=Nf(t.startAt)),t.endAt&&(n.structuredQuery.endAt=Nf(t.endAt)),n}function Cf(e){var t=wf(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){pc(1===r);var a=n.from[0];a.allDescendants?i=a.collectionId:t=t.child(a.collectionId)}var o=[];n.where&&(o=Af(n.where));var s=[];n.orderBy&&(s=n.orderBy.map(function(e){return new Dl(Ff((t=e).field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction));var t}));var u=null;n.limit&&(u=function(e){var t;return Yc(t="object"==typeof e?e.value:e)?null:t}(n.limit));var c=null;n.startAt&&(c=Of(n.startAt));var l=null;return n.endAt&&(l=Of(n.endAt)),Ul(t,i,s,o,u,"F",c,l)}function Af(e){return e?void 0!==e.unaryFilter?[Uf(e)]:void 0!==e.fieldFilter?[Mf(e)]:void 0!==e.compositeFilter?e.compositeFilter.filters.map(function(e){return Af(e)}).reduce(function(e,t){return e.concat(t)}):vc():[]}function Nf(e){return{before:e.before,values:e.position}}function Of(e){return new Nl(e.values||[],!!e.before)}function Df(e){return uf[e]}function Pf(e){return cf[e]}function Lf(e){return{fieldPath:e.canonicalString()}}function Ff(e){return Vc.fromServerFormat(e.fieldPath)}function Mf(e){return _l.create(Ff(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return vc()}}(e.fieldFilter.op),e.fieldFilter.value)}function Uf(e){switch(e.unaryFilter.op){case"IS_NAN":var t=Ff(e.unaryFilter.field);return _l.create(t,"==",{doubleValue:NaN});case"IS_NULL":var n=Ff(e.unaryFilter.field);return _l.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=Ff(e.unaryFilter.field);return _l.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=Ff(e.unaryFilter.field);return _l.create(i,"!=",{nullValue:"NULL_VALUE"});default:return vc()}}function jf(e){var t=[];return e.fields.forEach(function(e){return t.push(e.canonicalString())}),{fieldPaths:t}}function Vf(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}function qf(e){for(var t="",n=0;n<e.length;n++)t.length>0&&(t=zf(t)),t=Bf(e.get(n),t);return zf(t)}function Bf(e,t){for(var n=t,r=e.length,i=0;i<r;i++){var a=e.charAt(i);switch(a){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=a}}return n}function zf(e){return e+"\x01\x01"}function Zf(e){var t=e.length;if(pc(t>=2),2===t)return pc("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),Uc.emptyPath();for(var n=t-2,r=[],i="",a=0;a<t;){var o=e.indexOf("\x01",a);switch((o<0||o>n)&&vc(),e.charAt(o+1)){case"\x01":var s=e.substring(a,o),u=void 0;0===i.length?u=s:(u=i+=s,i=""),r.push(u);break;case"\x10":i+=e.substring(a,o),i+="\0";break;case"\x11":i+=e.substring(a,o+1);break;default:vc()}a=o+2}return new Uc(r)}var Hf=function e(t,n){f(this,e),this.seconds=t,this.nanoseconds=n},Gf=function e(t,n,r){f(this,e),this.ownerId=t,this.allowTabSynchronization=n,this.leaseTimestampMs=r};Gf.store="owner",Gf.key="owner";var Kf=function e(t,n,r){f(this,e),this.userId=t,this.lastAcknowledgedBatchId=n,this.lastStreamToken=r};Kf.store="mutationQueues",Kf.keyPath="userId";var Wf=function e(t,n,r,i,a){f(this,e),this.userId=t,this.batchId=n,this.localWriteTimeMs=r,this.baseMutations=i,this.mutations=a};Wf.store="mutations",Wf.keyPath="batchId",Wf.userMutationsIndex="userMutationsIndex",Wf.userMutationsKeyPath=["userId","batchId"];var Qf=function(){function e(){f(this,e)}return h(e,null,[{key:"prefixForUser",value:function(e){return[e]}},{key:"prefixForPath",value:function(e,t){return[e,qf(t)]}},{key:"key",value:function(e,t,n){return[e,qf(t),n]}}]),e}();Qf.store="documentMutations",Qf.PLACEHOLDER=new Qf;var Yf=function e(t,n){f(this,e),this.path=t,this.readTime=n},Jf=function e(t,n){f(this,e),this.path=t,this.version=n},$f=function e(t,n,r,i,a,o){f(this,e),this.unknownDocument=t,this.noDocument=n,this.document=r,this.hasCommittedMutations=i,this.readTime=a,this.parentPath=o};$f.store="remoteDocuments",$f.readTimeIndex="readTimeIndex",$f.readTimeIndexPath="readTime",$f.collectionReadTimeIndex="collectionReadTimeIndex",$f.collectionReadTimeIndexPath=["parentPath","readTime"];var Xf=function e(t){f(this,e),this.byteSize=t};Xf.store="remoteDocumentGlobal",Xf.key="remoteDocumentGlobalKey";var ed=function e(t,n,r,i,a,o,s){f(this,e),this.targetId=t,this.canonicalId=n,this.readTime=r,this.resumeToken=i,this.lastListenSequenceNumber=a,this.lastLimboFreeSnapshotVersion=o,this.query=s};ed.store="targets",ed.keyPath="targetId",ed.queryTargetsIndexName="queryTargetsIndex",ed.queryTargetsKeyPath=["canonicalId","targetId"];var td=function e(t,n,r){f(this,e),this.targetId=t,this.path=n,this.sequenceNumber=r};td.store="targetDocuments",td.keyPath=["targetId","path"],td.documentTargetsIndex="documentTargetsIndex",td.documentTargetsKeyPath=["path","targetId"];var nd=function e(t,n,r,i){f(this,e),this.highestTargetId=t,this.highestListenSequenceNumber=n,this.lastRemoteSnapshotVersion=r,this.targetCount=i};nd.key="targetGlobalKey",nd.store="targetGlobal";var rd=function e(t,n){f(this,e),this.collectionId=t,this.parent=n};rd.store="collectionParents",rd.keyPath=["collectionId","parent"];var id=function e(t,n,r,i){f(this,e),this.clientId=t,this.updateTimeMs=n,this.networkEnabled=r,this.inForeground=i};id.store="clientMetadata",id.keyPath="clientId";var ad=function e(t,n,r){f(this,e),this.bundleId=t,this.createTime=n,this.version=r};ad.store="bundles",ad.keyPath="bundleId";var od=function e(t,n,r){f(this,e),this.name=t,this.readTime=n,this.bundledQuery=r};od.store="namedQueries",od.keyPath="name";var sd=[Kf.store,Wf.store,Qf.store,$f.store,ed.store,Gf.store,nd.store,td.store,id.store,Xf.store,rd.store,ad.store,od.store],ud="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",cd=function(){function e(){f(this,e),this.onCommittedListeners=[]}return h(e,[{key:"addOnCommittedListener",value:function(e){this.onCommittedListeners.push(e)}},{key:"raiseOnCommittedEvent",value:function(){this.onCommittedListeners.forEach(function(e){return e()})}}]),e}(),ld=function(){function e(t){var n=this;f(this,e),this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(function(e){n.isDone=!0,n.result=e,n.nextCallback&&n.nextCallback(e)},function(e){n.isDone=!0,n.error=e,n.catchCallback&&n.catchCallback(e)})}return h(e,[{key:"catch",value:function(e){return this.next(void 0,e)}},{key:"next",value:function(t,n){var r=this;return this.callbackAttached&&vc(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e(function(e,i){r.nextCallback=function(n){r.wrapSuccess(t,n).next(e,i)},r.catchCallback=function(t){r.wrapFailure(n,t).next(e,i)}})}},{key:"toPromise",value:function(){var e=this;return new Promise(function(t,n){e.next(t,n)})}},{key:"wrapUserFunction",value:function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(n){return e.reject(n)}}},{key:"wrapSuccess",value:function(t,n){return t?this.wrapUserFunction(function(){return t(n)}):e.resolve(n)}},{key:"wrapFailure",value:function(t,n){return t?this.wrapUserFunction(function(){return t(n)}):e.reject(n)}}],[{key:"resolve",value:function(t){return new e(function(e,n){e(t)})}},{key:"reject",value:function(t){return new e(function(e,n){n(t)})}},{key:"waitFor",value:function(t){return new e(function(e,n){var r=0,i=0,a=!1;t.forEach(function(t){++r,t.next(function(){++i,a&&i===r&&e()},function(e){return n(e)})}),a=!0,i===r&&e()})}},{key:"or",value:function(t){var n,r=e.resolve(!1),i=s(t);try{var a=function(){var t=n.value;r=r.next(function(n){return n?e.resolve(n):t()})};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return r}},{key:"forEach",value:function(e,t){var n=this,r=[];return e.forEach(function(e,i){r.push(t.call(n,e,i))}),this.waitFor(r)}}]),e}(),hd=function(){function e(t,n){var r=this;f(this,e),this.action=t,this.transaction=n,this.aborted=!1,this.Et=new kc,this.transaction.oncomplete=function(){r.Et.resolve()},this.transaction.onabort=function(){n.error?r.Et.reject(new vd(t,n.error)):r.Et.resolve()},this.transaction.onerror=function(e){var n=kd(e.target.error);r.Et.reject(new vd(t,n))}}return h(e,[{key:"It",get:function(){return this.Et.promise}},{key:"abort",value:function(e){e&&this.Et.reject(e),this.aborted||(lc("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}},{key:"store",value:function(e){var t=this.transaction.objectStore(e);return new md(t)}}],[{key:"open",value:function(t,n,r,i){try{return new e(n,t.transaction(i,r))}catch(a){throw new vd(n,a)}}}]),e}(),fd=function(){function e(t,n,r){f(this,e),this.name=t,this.version=n,this.At=r,12.2===e.Rt((0,Ji.z$)())&&hc("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return h(e,[{key:"Dt",value:function(e){var t=this;return(0,Ki.Z)(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(n.t0=t.db,n.t0){n.next=6;break}return lc("SimpleDb","Opening database:",t.name),n.next=5,new Promise(function(n,r){var i=indexedDB.open(t.name,t.version);i.onsuccess=function(e){n(e.target.result)},i.onblocked=function(){r(new vd(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(t){var n=t.target.error;r("VersionError"===n.name?new yc(gc.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===n.name?new yc(gc.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+n):new vd(e,n))},i.onupgradeneeded=function(e){lc("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',e.oldVersion),t.At.Ct(e.target.result,i.transaction,e.oldVersion,t.version).next(function(){lc("SimpleDb","Database upgrade to version "+t.version+" complete")})}});case 5:t.db=n.sent;case 6:return t.Nt&&(t.db.onversionchange=function(e){return t.Nt(e)}),n.abrupt("return",t.db);case 8:case"end":return n.stop()}},n)}))()}},{key:"xt",value:function(e){this.Nt=e,this.db&&(this.db.onversionchange=function(t){return e(t)})}},{key:"runTransaction",value:function(e,t,n,r){var i=this;return(0,Ki.Z)(regeneratorRuntime.mark(function a(){var o,s,u,c;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:o="readonly"===t,s=0;case 2:return++s,a.prev=3,a.delegateYield(regeneratorRuntime.mark(function t(){var a,s;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i.Dt(e);case 2:return i.db=t.sent,a=hd.open(i.db,e,o?"readonly":"readwrite",n),(s=r(a).catch(function(e){return a.abort(e),ld.reject(e)}).toPromise()).catch(function(){}),t.next=7,a.It;case 7:return t.t0=s,t.abrupt("return",{v:t.t0});case 9:case"end":return t.stop()}},t)})(),"t0",5);case 5:if("object"!=typeof(u=a.t0)){a.next=8;break}return a.abrupt("return",u.v);case 8:a.next=15;break;case 10:if(a.prev=10,a.t1=a.catch(3),c="FirebaseError"!==a.t1.name&&s<3,lc("SimpleDb","Transaction failed with error:",a.t1.message,"Retrying:",c),i.close(),c){a.next=15;break}return a.abrupt("return",Promise.reject(a.t1));case 15:a.next=2;break;case 17:case"end":return a.stop()}},a,null,[[3,10]])}))()}},{key:"close",value:function(){this.db&&this.db.close(),this.db=void 0}}],[{key:"delete",value:function(e){return lc("SimpleDb","Removing database:",e),gd(window.indexedDB.deleteDatabase(e)).toPromise()}},{key:"bt",value:function(){if(!(0,Ji.hl)())return!1;if(e.Pt())return!0;var t=(0,Ji.z$)(),n=e.Rt(t),r=0<n&&n<10,i=e.vt(t),a=0<i&&i<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||a)}},{key:"Pt",value:function(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.Vt)}},{key:"St",value:function(e,t){return e.store(t)}},{key:"Rt",value:function(e){var t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}},{key:"vt",value:function(e){var t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}}]),e}(),dd=function(){function e(t){f(this,e),this.kt=t,this.$t=!1,this.Ot=null}return h(e,[{key:"isDone",get:function(){return this.$t}},{key:"Ft",get:function(){return this.Ot}},{key:"cursor",set:function(e){this.kt=e}},{key:"done",value:function(){this.$t=!0}},{key:"Mt",value:function(e){this.Ot=e}},{key:"delete",value:function(){return gd(this.kt.delete())}}]),e}(),vd=function(e){d(n,e);var t=v(n);function n(e,r){var i;return f(this,n),(i=t.call(this,gc.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(r))).name="IndexedDbTransactionError",i}return n}(yc);function pd(e){return"IndexedDbTransactionError"===e.name}var md=function(){function e(t){f(this,e),this.store=t}return h(e,[{key:"put",value:function(e,t){var n;return void 0!==t?(lc("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(lc("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),gd(n)}},{key:"add",value:function(e){return lc("SimpleDb","ADD",this.store.name,e,e),gd(this.store.add(e))}},{key:"get",value:function(e){var t=this;return gd(this.store.get(e)).next(function(n){return void 0===n&&(n=null),lc("SimpleDb","GET",t.store.name,e,n),n})}},{key:"delete",value:function(e){return lc("SimpleDb","DELETE",this.store.name,e),gd(this.store.delete(e))}},{key:"count",value:function(){return lc("SimpleDb","COUNT",this.store.name),gd(this.store.count())}},{key:"Lt",value:function(e,t){var n=this.cursor(this.options(e,t)),r=[];return this.Bt(n,function(e,t){r.push(t)}).next(function(){return r})}},{key:"Ut",value:function(e,t){lc("SimpleDb","DELETE ALL",this.store.name);var n=this.options(e,t);n.qt=!1;var r=this.cursor(n);return this.Bt(r,function(e,t,n){return n.delete()})}},{key:"Kt",value:function(e,t){var n;t?n=e:(n={},t=e);var r=this.cursor(n);return this.Bt(r,t)}},{key:"jt",value:function(e){var t=this.cursor({});return new ld(function(n,r){t.onerror=function(e){var t=kd(e.target.error);r(t)},t.onsuccess=function(t){var r=t.target.result;r?e(r.primaryKey,r.value).next(function(e){e?r.continue():n()}):n()}})}},{key:"Bt",value:function(e,t){var n=[];return new ld(function(r,i){e.onerror=function(e){i(e.target.error)},e.onsuccess=function(e){var i=e.target.result;if(i){var a=new dd(i),o=t(i.primaryKey,i.value,a);if(o instanceof ld){var s=o.catch(function(e){return a.done(),ld.reject(e)});n.push(s)}a.isDone?r():null===a.Ft?i.continue():i.continue(a.Ft)}else r()}}).next(function(){return ld.waitFor(n)})}},{key:"options",value:function(e,t){var n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}},{key:"cursor",value:function(e){var t="next";if(e.reverse&&(t="prev"),e.index){var n=this.store.index(e.index);return e.qt?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}]),e}();function gd(e){return new ld(function(t,n){e.onsuccess=function(e){t(e.target.result)},e.onerror=function(e){var t=kd(e.target.error);n(t)}})}var yd=!1;function kd(e){var t=fd.Rt((0,Ji.z$)());if(t>=12.2&&t<13){var n="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(n)>=0){var r=new yc("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(n,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return yd||(yd=!0,setTimeout(function(){throw r},0)),r}}return e}var wd=function(e){d(n,e);var t=v(n);function n(e,r){var i;return f(this,n),(i=t.call(this)).Qt=e,i.currentSequenceNumber=r,i}return n}(cd);function bd(e,t){var n=mc(e);return fd.St(n.Qt,t)}var _d=function(){function e(t,n,r,i){f(this,e),this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}return h(e,[{key:"applyToRemoteDocument",value:function(e,t){for(var n=t.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(e.key)&&wh(i,e,n[r])}}},{key:"applyToLocalView",value:function(e){var t,n=s(this.baseMutations);try{for(n.s();!(t=n.n()).done;){var r=t.value;r.key.isEqual(e.key)&&bh(r,e,this.localWriteTime)}}catch(u){n.e(u)}finally{n.f()}var i,a=s(this.mutations);try{for(a.s();!(i=a.n()).done;){var o=i.value;o.key.isEqual(e.key)&&bh(o,e,this.localWriteTime)}}catch(u){a.e(u)}finally{a.f()}}},{key:"applyToLocalDocumentSet",value:function(e){var t=this;this.mutations.forEach(function(n){var r=e.get(n.key),i=r;t.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(Dc.min())})}},{key:"keys",value:function(){return this.mutations.reduce(function(e,t){return e.add(t.key)},Qh())}},{key:"isEqual",value:function(e){return this.batchId===e.batchId&&Ac(this.mutations,e.mutations,function(e,t){return xh(e,t)})&&Ac(this.baseMutations,e.baseMutations,function(e,t){return xh(e,t)})}}]),e}(),xd=function(){function e(t,n,r,i){f(this,e),this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}return h(e,null,[{key:"from",value:function(t,n,r){pc(t.mutations.length===r.length);for(var i=Kh(),a=t.mutations,o=0;o<a.length;o++)i=i.insert(a[o].key,r[o].version);return new e(t,n,r,i)}}]),e}(),Td=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Dc.min(),o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Dc.min(),s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Bc.EMPTY_BYTE_STRING;f(this,e),this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s}return h(e,[{key:"withSequenceNumber",value:function(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}},{key:"withResumeToken",value:function(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t)}},{key:"withLastLimboFreeSnapshotVersion",value:function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)}}]),e}(),Id=function e(t){f(this,e),this.Wt=t};function Sd(e,t){if(t.document)return Tf(e.Wt,t.document,!!t.hasCommittedMutations);if(t.noDocument){var n=Xc.fromSegments(t.noDocument.path),r=Nd(t.noDocument.readTime),i=ml.newNoDocument(n,r);return t.hasCommittedMutations?i.setHasCommittedMutations():i}if(t.unknownDocument){var a=Xc.fromSegments(t.unknownDocument.path),o=Nd(t.unknownDocument.version);return ml.newUnknownDocument(a,o)}return vc()}function Ed(e,t,n){var r,i,a=Rd(n),o=t.key.path.popLast().toArray();if(t.isFoundDocument()){var s={name:gf(r=e.Wt,(i=t).key),fields:i.data.value.mapValue.fields,updateTime:hf(r,i.version.toTimestamp())};return new $f(null,null,s,t.hasCommittedMutations,a,o)}if(t.isNoDocument()){var u=t.key.path.toArray(),c=Ad(t.version),l=t.hasCommittedMutations;return new $f(null,new Yf(u,c),null,l,a,o)}if(t.isUnknownDocument()){var h=t.key.path.toArray(),f=Ad(t.version);return new $f(new Jf(h,f),null,null,!0,a,o)}return vc()}function Rd(e){var t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function Cd(e){var t=new Oc(e[0],e[1]);return Dc.fromTimestamp(t)}function Ad(e){var t=e.toTimestamp();return new Hf(t.seconds,t.nanoseconds)}function Nd(e){var t=new Oc(e.seconds,e.nanoseconds);return Dc.fromTimestamp(t)}function Od(e,t){for(var n=(t.baseMutations||[]).map(function(t){return Sf(e.Wt,t)}),r=0;r<t.mutations.length-1;++r){var i=t.mutations[r];r+1<t.mutations.length&&void 0!==t.mutations[r+1].transform&&(i.updateTransforms=t.mutations[r+1].transform.fieldTransforms,t.mutations.splice(r+1,1),++r)}var a=t.mutations.map(function(t){return Sf(e.Wt,t)}),o=Oc.fromMillis(t.localWriteTimeMs);return new _d(t.batchId,o,n,a)}function Dd(e){var t,n,r=Nd(e.readTime),i=void 0!==e.lastLimboFreeSnapshotVersion?Nd(e.lastLimboFreeSnapshotVersion):Dc.min();return void 0!==e.query.documents?(pc(1===(n=e.query).documents.length),t=Gl(jl(wf(n.documents[0])))):t=Gl(Cf(e.query)),new Td(t,e.targetId,0,e.lastListenSequenceNumber,r,i,Bc.fromBase64String(e.resumeToken))}function Pd(e,t){var n,r=Ad(t.snapshotVersion),i=Ad(t.lastLimboFreeSnapshotVersion);n=bl(t.target)?Ef(e.Wt,t.target):Rf(e.Wt,t.target);var a=t.resumeToken.toBase64();return new ed(t.targetId,kl(t.target),r,a,t.sequenceNumber,i,n)}function Ld(e){var t=Cf({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?Kl(t,t.limit,"L"):t}var Fd=function(){function e(){f(this,e)}return h(e,[{key:"getBundleMetadata",value:function(e,t){return Md(e).get(t).next(function(e){if(e)return{id:(t=e).bundleId,createTime:Nd(t.createTime),version:t.version};var t})}},{key:"saveBundleMetadata",value:function(e,t){return Md(e).put({bundleId:(n=t).id,createTime:Ad(vf(n.createTime)),version:n.version});var n}},{key:"getNamedQuery",value:function(e,t){return Ud(e).get(t).next(function(e){if(e)return{name:(t=e).name,query:Ld(t.bundledQuery),readTime:Nd(t.readTime)};var t})}},{key:"saveNamedQuery",value:function(e,t){return Ud(e).put({name:(n=t).name,readTime:Ad(vf(n.readTime)),bundledQuery:n.bundledQuery});var n}}]),e}();function Md(e){return bd(e,ad.store)}function Ud(e){return bd(e,od.store)}var jd=function(){function e(){f(this,e),this.Gt=new Vd}return h(e,[{key:"addToCollectionParentIndex",value:function(e,t){return this.Gt.add(t),ld.resolve()}},{key:"getCollectionParents",value:function(e,t){return ld.resolve(this.Gt.getEntries(t))}}]),e}(),Vd=function(){function e(){f(this,e),this.index={}}return h(e,[{key:"add",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new Vh(Uc.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}},{key:"has",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}},{key:"getEntries",value:function(e){return(this.index[e]||new Vh(Uc.comparator)).toArray()}}]),e}(),qd=function(){function e(){f(this,e),this.zt=new Vd}return h(e,[{key:"addToCollectionParentIndex",value:function(e,t){var n=this;if(!this.zt.has(t)){var r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(function(){n.zt.add(t)});var a={collectionId:r,parent:qf(i)};return Bd(e).put(a)}return ld.resolve()}},{key:"getCollectionParents",value:function(e,t){var n=[],r=IDBKeyRange.bound([t,""],[Nc(t),""],!1,!0);return Bd(e).Lt(r).next(function(e){var r,i=s(e);try{for(i.s();!(r=i.n()).done;){var a=r.value;if(a.collectionId!==t)break;n.push(Zf(a.parent))}}catch(o){i.e(o)}finally{i.f()}return n})}}]),e}();function Bd(e){return bd(e,rd.store)}var zd={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Zd=function(){function e(t,n,r){f(this,e),this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}return h(e,null,[{key:"withCacheSize",value:function(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}]),e}();function Hd(e,t,n){var r=e.store(Wf.store),i=e.store(Qf.store),a=[],o=IDBKeyRange.only(n.batchId),u=0,c=r.Kt({range:o},function(e,t,n){return u++,n.delete()});a.push(c.next(function(){pc(1===u)}));var l,h=[],f=s(n.mutations);try{for(f.s();!(l=f.n()).done;){var d=l.value,v=Qf.key(t,d.key.path,n.batchId);a.push(i.delete(v)),h.push(d.key)}}catch(p){f.e(p)}finally{f.f()}return ld.waitFor(a).next(function(){return h})}function Gd(e){if(!e)return 0;var t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw vc();t=e.noDocument}return JSON.stringify(t).length}Zd.DEFAULT_COLLECTION_PERCENTILE=10,Zd.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Zd.DEFAULT=new Zd(41943040,Zd.DEFAULT_COLLECTION_PERCENTILE,Zd.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Zd.DISABLED=new Zd(-1,0,0);var Kd=function(){function e(t,n,r,i){f(this,e),this.userId=t,this.N=n,this.Ht=r,this.referenceDelegate=i,this.Jt={}}return h(e,[{key:"checkEmpty",value:function(e){var t=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Qd(e).Kt({index:Wf.userMutationsIndex,range:n},function(e,n,r){t=!1,r.done()}).next(function(){return t})}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this,a=Yd(e),o=Qd(e);return o.add({}).next(function(u){pc("number"==typeof u);var c,l=new _d(u,t,n,r),h=function(e,t,n){var r=n.baseMutations.map(function(t){return If(e.Wt,t)}),i=n.mutations.map(function(t){return If(e.Wt,t)});return new Wf(t,n.batchId,n.localWriteTime.toMillis(),r,i)}(i.N,i.userId,l),f=[],d=new Vh(function(e,t){return Cc(e.canonicalString(),t.canonicalString())}),v=s(r);try{for(v.s();!(c=v.n()).done;){var p=c.value,m=Qf.key(i.userId,p.key.path,u);d=d.add(p.key.path.popLast()),f.push(o.put(h)),f.push(a.put(m,Qf.PLACEHOLDER))}}catch(g){v.e(g)}finally{v.f()}return d.forEach(function(t){f.push(i.Ht.addToCollectionParentIndex(e,t))}),e.addOnCommittedListener(function(){i.Jt[u]=l.keys()}),ld.waitFor(f).next(function(){return l})})}},{key:"lookupMutationBatch",value:function(e,t){var n=this;return Qd(e).get(t).next(function(e){return e?(pc(e.userId===n.userId),Od(n.N,e)):null})}},{key:"Xt",value:function(e,t){var n=this;return this.Jt[t]?ld.resolve(this.Jt[t]):this.lookupMutationBatch(e,t).next(function(e){if(e){var r=e.keys();return n.Jt[t]=r,r}return null})}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=this,r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),a=null;return Qd(e).Kt({index:Wf.userMutationsIndex,range:i},function(e,t,i){t.userId===n.userId&&(pc(t.batchId>=r),a=Od(n.N,t)),i.done()}).next(function(){return a})}},{key:"getHighestUnacknowledgedBatchId",value:function(e){var t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return Qd(e).Kt({index:Wf.userMutationsIndex,range:t,reverse:!0},function(e,t,r){n=t.batchId,r.done()}).next(function(){return n})}},{key:"getAllMutationBatches",value:function(e){var t=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Qd(e).Lt(Wf.userMutationsIndex,n).next(function(e){return e.map(function(e){return Od(t.N,e)})})}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,n){var r=this,i=Qf.prefixForPath(this.userId,n.path),a=IDBKeyRange.lowerBound(i),o=[];return Yd(e).Kt({range:a},function(i,a,s){var u=t(i,3),c=u[0],l=u[1],h=u[2],f=Zf(l);if(c===r.userId&&n.path.isEqual(f))return Qd(e).get(h).next(function(e){if(!e)throw vc();pc(e.userId===r.userId),o.push(Od(r.N,e))});s.done()}).next(function(){return o})}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,n){var r=this,i=new Vh(Cc),a=[];return n.forEach(function(n){var o=Qf.prefixForPath(r.userId,n.path),s=IDBKeyRange.lowerBound(o),u=Yd(e).Kt({range:s},function(e,a,o){var s=t(e,3),u=s[0],c=s[1],l=s[2],h=Zf(c);u===r.userId&&n.path.isEqual(h)?i=i.add(l):o.done()});a.push(u)}),ld.waitFor(a).next(function(){return r.Zt(e,i)})}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,n){var r=this,i=n.path,a=i.length+1,o=Qf.prefixForPath(this.userId,i),s=IDBKeyRange.lowerBound(o),u=new Vh(Cc);return Yd(e).Kt({range:s},function(e,n,o){var s=t(e,3),c=s[0],l=s[1],h=s[2],f=Zf(l);c===r.userId&&i.isPrefixOf(f)?f.length===a&&(u=u.add(h)):o.done()}).next(function(){return r.Zt(e,u)})}},{key:"Zt",value:function(e,t){var n=this,r=[],i=[];return t.forEach(function(t){i.push(Qd(e).get(t).next(function(e){if(null===e)throw vc();pc(e.userId===n.userId),r.push(Od(n.N,e))}))}),ld.waitFor(i).next(function(){return r})}},{key:"removeMutationBatch",value:function(e,t){var n=this;return Hd(e.Qt,this.userId,t).next(function(r){return e.addOnCommittedListener(function(){n.te(t.batchId)}),ld.forEach(r,function(t){return n.referenceDelegate.markPotentiallyOrphaned(e,t)})})}},{key:"te",value:function(e){delete this.Jt[e]}},{key:"performConsistencyCheck",value:function(e){var t=this;return this.checkEmpty(e).next(function(n){if(!n)return ld.resolve();var r=IDBKeyRange.lowerBound(Qf.prefixForUser(t.userId)),i=[];return Yd(e).Kt({range:r},function(e,n,r){if(e[0]===t.userId){var a=Zf(e[1]);i.push(a)}else r.done()}).next(function(){pc(0===i.length)})})}},{key:"containsKey",value:function(e,t){return Wd(e,this.userId,t)}},{key:"ee",value:function(e){var t=this;return Jd(e).get(this.userId).next(function(e){return e||new Kf(t.userId,-1,"")})}}],[{key:"Yt",value:function(t,n,r,i){return pc(""!==t.uid),new e(t.isAuthenticated()?t.uid:"",n,r,i)}}]),e}();function Wd(e,n,r){var i=Qf.prefixForPath(n,r.path),a=i[1],o=IDBKeyRange.lowerBound(i),s=!1;return Yd(e).Kt({range:o,qt:!0},function(e,r,i){var o=t(e,3),u=o[0],c=o[1];o[2];u===n&&c===a&&(s=!0),i.done()}).next(function(){return s})}function Qd(e){return bd(e,Wf.store)}function Yd(e){return bd(e,Qf.store)}function Jd(e){return bd(e,Kf.store)}var $d=function(){function e(t){f(this,e),this.ne=t}return h(e,[{key:"next",value:function(){return this.ne+=2,this.ne}}],[{key:"se",value:function(){return new e(0)}},{key:"ie",value:function(){return new e(-1)}}]),e}(),Xd=function(){function e(t,n){f(this,e),this.referenceDelegate=t,this.N=n}return h(e,[{key:"allocateTargetId",value:function(e){var t=this;return this.re(e).next(function(n){var r=new $d(n.highestTargetId);return n.highestTargetId=r.next(),t.oe(e,n).next(function(){return n.highestTargetId})})}},{key:"getLastRemoteSnapshotVersion",value:function(e){return this.re(e).next(function(e){return Dc.fromTimestamp(new Oc(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))})}},{key:"getHighestSequenceNumber",value:function(e){return this.re(e).next(function(e){return e.highestListenSequenceNumber})}},{key:"setTargetsMetadata",value:function(e,t,n){var r=this;return this.re(e).next(function(i){return i.highestListenSequenceNumber=t,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),r.oe(e,i)})}},{key:"addTargetData",value:function(e,t){var n=this;return this.ae(e,t).next(function(){return n.re(e).next(function(r){return r.targetCount+=1,n.ce(t,r),n.oe(e,r)})})}},{key:"updateTargetData",value:function(e,t){return this.ae(e,t)}},{key:"removeTargetData",value:function(e,t){var n=this;return this.removeMatchingKeysForTargetId(e,t.targetId).next(function(){return ev(e).delete(t.targetId)}).next(function(){return n.re(e)}).next(function(t){return pc(t.targetCount>0),t.targetCount-=1,n.oe(e,t)})}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return ev(e).Kt(function(o,s){var u=Dd(s);u.sequenceNumber<=t&&null===n.get(u.targetId)&&(i++,a.push(r.removeTargetData(e,u)))}).next(function(){return ld.waitFor(a)}).next(function(){return i})}},{key:"forEachTarget",value:function(e,t){return ev(e).Kt(function(e,n){var r=Dd(n);t(r)})}},{key:"re",value:function(e){return tv(e).get(nd.key).next(function(e){return pc(null!==e),e})}},{key:"oe",value:function(e,t){return tv(e).put(nd.key,t)}},{key:"ae",value:function(e,t){return ev(e).put(Pd(this.N,t))}},{key:"ce",value:function(e,t){var n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}},{key:"getTargetCount",value:function(e){return this.re(e).next(function(e){return e.targetCount})}},{key:"getTargetData",value:function(e,t){var n=kl(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return ev(e).Kt({range:r,index:ed.queryTargetsIndexName},function(e,n,r){var a=Dd(n);wl(t,a.target)&&(i=a,r.done())}).next(function(){return i})}},{key:"addMatchingKeys",value:function(e,t,n){var r=this,i=[],a=nv(e);return t.forEach(function(t){var o=qf(t.path);i.push(a.put(new td(n,o))),i.push(r.referenceDelegate.addReference(e,n,t))}),ld.waitFor(i)}},{key:"removeMatchingKeys",value:function(e,t,n){var r=this,i=nv(e);return ld.forEach(t,function(t){var a=qf(t.path);return ld.waitFor([i.delete([n,a]),r.referenceDelegate.removeReference(e,n,t)])})}},{key:"removeMatchingKeysForTargetId",value:function(e,t){var n=nv(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=IDBKeyRange.bound([t],[t+1],!1,!0),r=nv(e),i=Qh();return r.Kt({range:n,qt:!0},function(e,t,n){var r=Zf(e[1]),a=new Xc(r);i=i.add(a)}).next(function(){return i})}},{key:"containsKey",value:function(e,n){var r=qf(n.path),i=IDBKeyRange.bound([r],[Nc(r)],!1,!0),a=0;return nv(e).Kt({index:td.documentTargetsIndex,qt:!0,range:i},function(e,n,r){var i=t(e,2),o=i[0];i[1];0!==o&&(a++,r.done())}).next(function(){return a>0})}},{key:"Tt",value:function(e,t){return ev(e).get(t).next(function(e){return e?Dd(e):null})}}]),e}();function ev(e){return bd(e,ed.store)}function tv(e){return bd(e,nd.store)}function nv(e){return bd(e,td.store)}function rv(e){return iv.apply(this,arguments)}function iv(){return(iv=(0,Ki.Z)(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code===gc.FAILED_PRECONDITION&&t.message===ud){e.next=2;break}throw t;case 2:lc("LocalStore","Unexpectedly lost primary lease");case 3:case"end":return e.stop()}},e)}))).apply(this,arguments)}function av(e,n){var r=t(e,2),i=r[0],a=r[1],o=t(n,2),s=o[0],u=o[1],c=Cc(i,s);return 0===c?Cc(a,u):c}var ov=function(){function e(t){f(this,e),this.ue=t,this.buffer=new Vh(av),this.he=0}return h(e,[{key:"le",value:function(){return++this.he}},{key:"fe",value:function(e){var t=[e,this.le()];if(this.buffer.size<this.ue)this.buffer=this.buffer.add(t);else{var n=this.buffer.last();av(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}}},{key:"maxValue",get:function(){return this.buffer.last()[0]}}]),e}(),sv=function(){function e(t,n){f(this,e),this.garbageCollector=t,this.asyncQueue=n,this.de=!1,this.we=null}return h(e,[{key:"start",value:function(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this._e(e)}},{key:"stop",value:function(){this.we&&(this.we.cancel(),this.we=null)}},{key:"started",get:function(){return null!==this.we}},{key:"_e",value:function(e){var t=this,n=this.de?3e5:6e4;lc("LruGarbageCollector","Garbage collection scheduled in ".concat(n,"ms")),this.we=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",n,(0,Ki.Z)(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return t.we=null,t.de=!0,n.prev=1,n.next=4,e.collectGarbage(t.garbageCollector);case 4:n.next=14;break;case 6:if(n.prev=6,n.t0=n.catch(1),!pd(n.t0)){n.next=12;break}lc("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n.t0),n.next=14;break;case 12:return n.next=14,rv(n.t0);case 14:return n.next=16,t._e(e);case 16:case"end":return n.stop()}},n,null,[[1,6]])})))}}]),e}(),uv=function(){function e(t,n){f(this,e),this.me=t,this.params=n}return h(e,[{key:"calculateTargetCount",value:function(e,t){return this.me.ge(e).next(function(e){return Math.floor(t/100*e)})}},{key:"nthSequenceNumber",value:function(e,t){var n=this;if(0===t)return ld.resolve(Sc.T);var r=new ov(t);return this.me.forEachTarget(e,function(e){return r.fe(e.sequenceNumber)}).next(function(){return n.me.ye(e,function(e){return r.fe(e)})}).next(function(){return r.maxValue})}},{key:"removeTargets",value:function(e,t,n){return this.me.removeTargets(e,t,n)}},{key:"removeOrphanedDocuments",value:function(e,t){return this.me.removeOrphanedDocuments(e,t)}},{key:"collect",value:function(e,t){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(lc("LruGarbageCollector","Garbage collection skipped; disabled"),ld.resolve(zd)):this.getCacheSize(e).next(function(r){return r<n.params.cacheSizeCollectionThreshold?(lc("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(r," is lower than threshold ").concat(n.params.cacheSizeCollectionThreshold)),zd):n.pe(e,t)})}},{key:"getCacheSize",value:function(e){return this.me.getCacheSize(e)}},{key:"pe",value:function(e,t){var n,r,i,a,o,s,u,c=this,l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(function(t){return t>c.params.maximumSequenceNumbersToCollect?(lc("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(c.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=c.params.maximumSequenceNumbersToCollect):r=t,a=Date.now(),c.nthSequenceNumber(e,r)}).next(function(r){return n=r,o=Date.now(),c.removeTargets(e,n,t)}).next(function(t){return i=t,s=Date.now(),c.removeOrphanedDocuments(e,n)}).next(function(e){return u=Date.now(),cc()<=Yi.in.DEBUG&&lc("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(a-l,"ms\n\tDetermined least recently used ").concat(r," in ")+(o-a)+"ms\n\tRemoved ".concat(i," targets in ")+(s-o)+"ms\n\tRemoved ".concat(e," documents in ")+(u-s)+"ms\nTotal Duration: ".concat(u-l,"ms")),ld.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})})}}]),e}(),cv=function(){function e(t,n){f(this,e),this.db=t,this.garbageCollector=new uv(this,n)}return h(e,[{key:"ge",value:function(e){var t=this.Te(e);return this.db.getTargetCache().getTargetCount(e).next(function(e){return t.next(function(t){return e+t})})}},{key:"Te",value:function(e){var t=0;return this.ye(e,function(e){t++}).next(function(){return t})}},{key:"forEachTarget",value:function(e,t){return this.db.getTargetCache().forEachTarget(e,t)}},{key:"ye",value:function(e,t){return this.Ee(e,function(e,n){return t(n)})}},{key:"addReference",value:function(e,t,n){return lv(e,n)}},{key:"removeReference",value:function(e,t,n){return lv(e,n)}},{key:"removeTargets",value:function(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}},{key:"markPotentiallyOrphaned",value:function(e,t){return lv(e,t)}},{key:"Ie",value:function(e,t){return r=t,i=!1,Jd(n=e).jt(function(e){return Wd(n,e,r).next(function(e){return e&&(i=!0),ld.resolve(!e)})}).next(function(){return i});var n,r,i}},{key:"removeOrphanedDocuments",value:function(e,t){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],a=0;return this.Ee(e,function(o,s){if(s<=t){var u=n.Ie(e,o).next(function(t){if(!t)return a++,r.getEntry(e,o).next(function(){return r.removeEntry(o),nv(e).delete([0,qf(o.path)])})});i.push(u)}}).next(function(){return ld.waitFor(i)}).next(function(){return r.apply(e)}).next(function(){return a})}},{key:"removeTarget",value:function(e,t){var n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}},{key:"updateLimboDocument",value:function(e,t){return lv(e,t)}},{key:"Ee",value:function(e,n){var r,i=nv(e),a=Sc.T;return i.Kt({index:td.documentTargetsIndex},function(e,i){var o=t(e,2),s=o[0],u=(o[1],i.path),c=i.sequenceNumber;0===s?(a!==Sc.T&&n(new Xc(Zf(r)),a),a=c,r=u):a=Sc.T}).next(function(){a!==Sc.T&&n(new Xc(Zf(r)),a)})}},{key:"getCacheSize",value:function(e){return this.db.getRemoteDocumentCache().getSize(e)}}]),e}();function lv(e,t){return nv(e).put((n=e.currentSequenceNumber,new td(0,qf(t.path),n)));var n}var hv=function(){function e(t,n){f(this,e),this.mapKeyFn=t,this.equalsFn=n,this.inner={}}return h(e,[{key:"get",value:function(e){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0!==r){var i,a=s(r);try{for(a.s();!(i=a.n()).done;){var o=t(i.value,2),u=o[0],c=o[1];if(this.equalsFn(u,e))return c}}catch(l){a.e(l)}finally{a.f()}}}},{key:"has",value:function(e){return void 0!==this.get(e)}},{key:"set",value:function(e,t){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t])}else this.inner[n]=[[e,t]]}},{key:"delete",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),!0;return!1}},{key:"forEach",value:function(e){Lc(this.inner,function(n,r){var i,a=s(r);try{for(a.s();!(i=a.n()).done;){var o=t(i.value,2),u=o[0],c=o[1];e(u,c)}}catch(l){a.e(l)}finally{a.f()}})}},{key:"isEmpty",value:function(){return Fc(this.inner)}}]),e}(),fv=function(){function e(){f(this,e),this.changes=new hv(function(e){return e.toString()},function(e,t){return e.isEqual(t)}),this.changesApplied=!1}return h(e,[{key:"getReadTime",value:function(e){var t=this.changes.get(e);return t?t.readTime:Dc.min()}},{key:"addEntry",value:function(e,t){this.assertNotApplied(),this.changes.set(e.key,{document:e,readTime:t})}},{key:"removeEntry",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.assertNotApplied(),this.changes.set(e,{document:ml.newInvalidDocument(e),readTime:t})}},{key:"getEntry",value:function(e,t){this.assertNotApplied();var n=this.changes.get(t);return void 0!==n?ld.resolve(n.document):this.getFromCache(e,t)}},{key:"getEntries",value:function(e,t){return this.getAllFromCache(e,t)}},{key:"apply",value:function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}},{key:"assertNotApplied",value:function(){}}]),e}(),dv=function(){function e(t,n){f(this,e),this.N=t,this.Ht=n}return h(e,[{key:"addEntry",value:function(e,t,n){return mv(e).put(gv(t),n)}},{key:"removeEntry",value:function(e,t){var n=mv(e),r=gv(t);return n.delete(r)}},{key:"updateMetadata",value:function(e,t){var n=this;return this.getMetadata(e).next(function(r){return r.byteSize+=t,n.Ae(e,r)})}},{key:"getEntry",value:function(e,t){var n=this;return mv(e).get(gv(t)).next(function(e){return n.Re(t,e)})}},{key:"be",value:function(e,t){var n=this;return mv(e).get(gv(t)).next(function(e){return{document:n.Re(t,e),size:Gd(e)}})}},{key:"getEntries",value:function(e,t){var n=this,r=zh();return this.Pe(e,t,function(e,t){var i=n.Re(e,t);r=r.insert(e,i)}).next(function(){return r})}},{key:"ve",value:function(e,t){var n=this,r=zh(),i=new Mh(Xc.comparator);return this.Pe(e,t,function(e,t){var a=n.Re(e,t);r=r.insert(e,a),i=i.insert(e,Gd(t))}).next(function(){return{documents:r,Ve:i}})}},{key:"Pe",value:function(e,t,n){if(t.isEmpty())return ld.resolve();var r=IDBKeyRange.bound(t.first().path.toArray(),t.last().path.toArray()),i=t.getIterator(),a=i.getNext();return mv(e).Kt({range:r},function(e,t,r){for(var o=Xc.fromSegments(e);a&&Xc.comparator(a,o)<0;)n(a,null),a=i.getNext();a&&a.isEqual(o)&&(n(a,t),a=i.hasNext()?i.getNext():null),a?r.Mt(a.path.toArray()):r.done()}).next(function(){for(;a;)n(a,null),a=i.hasNext()?i.getNext():null})}},{key:"getDocumentsMatchingQuery",value:function(e,t,n){var r=this,i=zh(),a=t.path.length+1,o={};if(n.isEqual(Dc.min())){var s=t.path.toArray();o.range=IDBKeyRange.lowerBound(s)}else{var u=t.path.toArray(),c=Rd(n);o.range=IDBKeyRange.lowerBound([u,c],!0),o.index=$f.collectionReadTimeIndex}return mv(e).Kt(o,function(e,n,o){if(e.length===a){var s=Sd(r.N,n);t.path.isPrefixOf(s.key.path)?Jl(t,s)&&(i=i.insert(s.key,s)):o.done()}}).next(function(){return i})}},{key:"newChangeBuffer",value:function(e){return new vv(this,!!e&&e.trackRemovals)}},{key:"getSize",value:function(e){return this.getMetadata(e).next(function(e){return e.byteSize})}},{key:"getMetadata",value:function(e){return pv(e).get(Xf.key).next(function(e){return pc(!!e),e})}},{key:"Ae",value:function(e,t){return pv(e).put(Xf.key,t)}},{key:"Re",value:function(e,t){if(t){var n=Sd(this.N,t);if(!n.isNoDocument()||!n.version.isEqual(Dc.min()))return n}return ml.newInvalidDocument(e)}}]),e}(),vv=function(e){d(n,e);var t=v(n);function n(e,r){var i;return f(this,n),(i=t.call(this)).Se=e,i.trackRemovals=r,i.De=new hv(function(e){return e.toString()},function(e,t){return e.isEqual(t)}),i}return h(n,[{key:"applyChanges",value:function(e){var t=this,n=[],r=0,i=new Vh(function(e,t){return Cc(e.canonicalString(),t.canonicalString())});return this.changes.forEach(function(a,o){var s=t.De.get(a);if(o.document.isValidDocument()){var u=Ed(t.Se.N,o.document,t.getReadTime(a));i=i.add(a.path.popLast()),r+=Gd(u)-s,n.push(t.Se.addEntry(e,a,u))}else if(r-=s,t.trackRemovals){var c=Ed(t.Se.N,ml.newNoDocument(a,Dc.min()),t.getReadTime(a));n.push(t.Se.addEntry(e,a,c))}else n.push(t.Se.removeEntry(e,a))}),i.forEach(function(r){n.push(t.Se.Ht.addToCollectionParentIndex(e,r))}),n.push(this.Se.updateMetadata(e,r)),ld.waitFor(n)}},{key:"getFromCache",value:function(e,t){var n=this;return this.Se.be(e,t).next(function(e){return n.De.set(t,e.size),e.document})}},{key:"getAllFromCache",value:function(e,t){var n=this;return this.Se.ve(e,t).next(function(e){var t=e.documents;return e.Ve.forEach(function(e,t){n.De.set(e,t)}),t})}}]),n}(fv);function pv(e){return bd(e,Xf.store)}function mv(e){return bd(e,$f.store)}function gv(e){return e.path.toArray()}var yv=function(){function e(t){f(this,e),this.N=t}return h(e,[{key:"Ct",value:function(e,t,n,r){var i=this;pc(n<r&&n>=0&&r<=11);var a,o=new hd("createOrUpgrade",t);n<1&&r>=1&&(e.createObjectStore(Gf.store),(a=e).createObjectStore(Kf.store,{keyPath:Kf.keyPath}),a.createObjectStore(Wf.store,{keyPath:Wf.keyPath,autoIncrement:!0}).createIndex(Wf.userMutationsIndex,Wf.userMutationsKeyPath,{unique:!0}),a.createObjectStore(Qf.store),kv(e),function(e){e.createObjectStore($f.store)}(e));var s=ld.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore(td.store),e.deleteObjectStore(ed.store),e.deleteObjectStore(nd.store)}(e),kv(e)),s=s.next(function(){return function(e){var t=e.store(nd.store),n=new nd(0,0,Dc.min().toTimestamp(),0);return t.put(nd.key,n)}(o)})),n<4&&r>=4&&(0!==n&&(s=s.next(function(){return function(e,t){return t.store(Wf.store).Lt().next(function(n){e.deleteObjectStore(Wf.store),e.createObjectStore(Wf.store,{keyPath:Wf.keyPath,autoIncrement:!0}).createIndex(Wf.userMutationsIndex,Wf.userMutationsKeyPath,{unique:!0});var r=t.store(Wf.store),i=n.map(function(e){return r.put(e)});return ld.waitFor(i)})}(e,o)})),s=s.next(function(){!function(e){e.createObjectStore(id.store,{keyPath:id.keyPath})}(e)})),n<5&&r>=5&&(s=s.next(function(){return i.Ce(o)})),n<6&&r>=6&&(s=s.next(function(){return function(e){e.createObjectStore(Xf.store)}(e),i.Ne(o)})),n<7&&r>=7&&(s=s.next(function(){return i.xe(o)})),n<8&&r>=8&&(s=s.next(function(){return i.ke(e,o)})),n<9&&r>=9&&(s=s.next(function(){(function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")})(e),function(e){var t=e.objectStore($f.store);t.createIndex($f.readTimeIndex,$f.readTimeIndexPath,{unique:!1}),t.createIndex($f.collectionReadTimeIndex,$f.collectionReadTimeIndexPath,{unique:!1})}(t)})),n<10&&r>=10&&(s=s.next(function(){return i.$e(o)})),n<11&&r>=11&&(s=s.next(function(){(function(e){e.createObjectStore(ad.store,{keyPath:ad.keyPath})})(e),function(e){e.createObjectStore(od.store,{keyPath:od.keyPath})}(e)})),s}},{key:"Ne",value:function(e){var t=0;return e.store($f.store).Kt(function(e,n){t+=Gd(n)}).next(function(){var n=new Xf(t);return e.store(Xf.store).put(Xf.key,n)})}},{key:"Ce",value:function(e){var t=this,n=e.store(Kf.store),r=e.store(Wf.store);return n.Lt().next(function(n){return ld.forEach(n,function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.Lt(Wf.userMutationsIndex,i).next(function(r){return ld.forEach(r,function(r){pc(r.userId===n.userId);var i=Od(t.N,r);return Hd(e,n.userId,i).next(function(){})})})})})}},{key:"xe",value:function(e){var t=e.store(td.store),n=e.store($f.store);return e.store(nd.store).get(nd.key).next(function(e){var r=[];return n.Kt(function(n,i){var a=new Uc(n),o=[0,qf(a)];r.push(t.get(o).next(function(n){return n?ld.resolve():t.put(new td(0,qf(a),e.highestListenSequenceNumber))}))}).next(function(){return ld.waitFor(r)})})}},{key:"ke",value:function(e,n){e.createObjectStore(rd.store,{keyPath:rd.keyPath});var r=n.store(rd.store),i=new Vd,a=function(e){if(i.add(e)){var t=e.lastSegment(),n=e.popLast();return r.put({collectionId:t,parent:qf(n)})}};return n.store($f.store).Kt({qt:!0},function(e,t){var n=new Uc(e);return a(n.popLast())}).next(function(){return n.store(Qf.store).Kt({qt:!0},function(e,n){var r=t(e,3),i=(r[0],r[1]),o=(r[2],Zf(i));return a(o.popLast())})})}},{key:"$e",value:function(e){var t=this,n=e.store(ed.store);return n.Kt(function(e,r){var i=Dd(r),a=Pd(t.N,i);return n.put(a)})}}]),e}();function kv(e){e.createObjectStore(td.store,{keyPath:td.keyPath}).createIndex(td.documentTargetsIndex,td.documentTargetsKeyPath,{unique:!0}),e.createObjectStore(ed.store,{keyPath:ed.keyPath}).createIndex(ed.queryTargetsIndexName,ed.queryTargetsKeyPath,{unique:!0}),e.createObjectStore(nd.store)}var wv="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",bv=function(){function e(t,n,r,i,a,o,s,u,c,l){if(f(this,e),this.allowTabSynchronization=t,this.persistenceKey=n,this.clientId=r,this.Oe=a,this.window=o,this.document=s,this.Fe=c,this.Me=l,this.Le=null,this.Be=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Ue=null,this.inForeground=!1,this.qe=null,this.Ke=null,this.je=Number.NEGATIVE_INFINITY,this.Qe=function(e){return Promise.resolve()},!e.bt())throw new yc(gc.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new cv(this,i),this.We=n+"main",this.N=new Id(u),this.Ge=new fd(this.We,11,new yv(this.N)),this.ze=new Xd(this.referenceDelegate,this.N),this.Ht=new qd,this.He=new dv(this.N,this.Ht),this.Je=new Fd,this.window&&this.window.localStorage?this.Ye=this.window.localStorage:(this.Ye=null,!1===l&&hc("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return h(e,[{key:"start",value:function(){var e=this;return this.Xe().then(function(){if(!e.isPrimary&&!e.allowTabSynchronization)throw new yc(gc.FAILED_PRECONDITION,wv);return e.Ze(),e.tn(),e.en(),e.runTransaction("getHighestListenSequenceNumber","readonly",function(t){return e.ze.getHighestSequenceNumber(t)})}).then(function(t){e.Le=new Sc(t,e.Fe)}).then(function(){e.Be=!0}).catch(function(t){return e.Ge&&e.Ge.close(),Promise.reject(t)})}},{key:"nn",value:function(e){var t,n=this;return this.Qe=(t=(0,Ki.Z)(regeneratorRuntime.mark(function t(r){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!n.started){t.next=2;break}return t.abrupt("return",e(r));case 2:case"end":return t.stop()}},t)})),function(e){return t.apply(this,arguments)}),e(this.isPrimary)}},{key:"setDatabaseDeletedListener",value:function(e){var t;this.Ge.xt((t=(0,Ki.Z)(regeneratorRuntime.mark(function t(n){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=null===n.newVersion,!t.t0){t.next=4;break}return t.next=4,e();case 4:case"end":return t.stop()}},t)})),function(e){return t.apply(this,arguments)}))}},{key:"setNetworkEnabled",value:function(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Oe.enqueueAndForget((0,Ki.Z)(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.started,!e.t0){e.next=4;break}return e.next=4,t.Xe();case 4:case"end":return e.stop()}},e)}))))}},{key:"Xe",value:function(){var e=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",function(t){return xv(t).put(new id(e.clientId,Date.now(),e.networkEnabled,e.inForeground)).next(function(){if(e.isPrimary)return e.sn(t).next(function(t){t||(e.isPrimary=!1,e.Oe.enqueueRetryable(function(){return e.Qe(!1)}))})}).next(function(){return e.rn(t)}).next(function(n){return e.isPrimary&&!n?e.on(t).next(function(){return!1}):!!n&&e.an(t).next(function(){return!0})})}).catch(function(t){if(pd(t))return lc("IndexedDbPersistence","Failed to extend owner lease: ",t),e.isPrimary;if(!e.allowTabSynchronization)throw t;return lc("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1}).then(function(t){e.isPrimary!==t&&e.Oe.enqueueRetryable(function(){return e.Qe(t)}),e.isPrimary=t})}},{key:"sn",value:function(e){var t=this;return _v(e).get(Gf.key).next(function(e){return ld.resolve(t.cn(e))})}},{key:"un",value:function(e){return xv(e).delete(this.clientId)}},{key:"hn",value:function(){var e=this;return(0,Ki.Z)(regeneratorRuntime.mark(function t(){var n,r,i,a;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.isPrimary||e.ln(e.je,18e5)){t.next=6;break}return e.je=Date.now(),t.next=4,e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",function(t){var n=bd(t,id.store);return n.Lt().next(function(t){var r=e.fn(t,18e5),i=t.filter(function(e){return-1===r.indexOf(e)});return ld.forEach(i,function(e){return n.delete(e.clientId)}).next(function(){return i})})}).catch(function(){return[]});case 4:if(n=t.sent,e.Ye){r=s(n);try{for(r.s();!(i=r.n()).done;)a=i.value,e.Ye.removeItem(e.dn(a.clientId))}catch(o){r.e(o)}finally{r.f()}}case 6:case"end":return t.stop()}},t)}))()}},{key:"en",value:function(){var e=this;this.Ke=this.Oe.enqueueAfterDelay("client_metadata_refresh",4e3,function(){return e.Xe().then(function(){return e.hn()}).then(function(){return e.en()})})}},{key:"cn",value:function(e){return!!e&&e.ownerId===this.clientId}},{key:"rn",value:function(e){var t=this;return this.Me?ld.resolve(!0):_v(e).get(Gf.key).next(function(n){if(null!==n&&t.ln(n.leaseTimestampMs,5e3)&&!t.wn(n.ownerId)){if(t.cn(n)&&t.networkEnabled)return!0;if(!t.cn(n)){if(!n.allowTabSynchronization)throw new yc(gc.FAILED_PRECONDITION,wv);return!1}}return!(!t.networkEnabled||!t.inForeground)||xv(e).Lt().next(function(e){return void 0===t.fn(e,5e3).find(function(e){if(t.clientId!==e.clientId){var n=!t.inForeground&&e.inForeground,r=t.networkEnabled===e.networkEnabled;if(!t.networkEnabled&&e.networkEnabled||n&&r)return!0}return!1})})}).next(function(e){return t.isPrimary!==e&&lc("IndexedDbPersistence","Client ".concat(e?"is":"is not"," eligible for a primary lease.")),e})}},{key:"shutdown",value:function(){var e=this;return(0,Ki.Z)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.Be=!1,e._n(),e.Ke&&(e.Ke.cancel(),e.Ke=null),e.mn(),e.gn(),t.next=7,e.Ge.runTransaction("shutdown","readwrite",[Gf.store,id.store],function(t){var n=new wd(t,Sc.T);return e.on(n).next(function(){return e.un(n)})});case 7:e.Ge.close(),e.yn();case 9:case"end":return t.stop()}},t)}))()}},{key:"fn",value:function(e,t){var n=this;return e.filter(function(e){return n.ln(e.updateTimeMs,t)&&!n.wn(e.clientId)})}},{key:"pn",value:function(){var e=this;return this.runTransaction("getActiveClients","readonly",function(t){return xv(t).Lt().next(function(t){return e.fn(t,18e5).map(function(e){return e.clientId})})})}},{key:"started",get:function(){return this.Be}},{key:"getMutationQueue",value:function(e){return Kd.Yt(e,this.N,this.Ht,this.referenceDelegate)}},{key:"getTargetCache",value:function(){return this.ze}},{key:"getRemoteDocumentCache",value:function(){return this.He}},{key:"getIndexManager",value:function(){return this.Ht}},{key:"getBundleCache",value:function(){return this.Je}},{key:"runTransaction",value:function(e,t,n){var r,i=this;return lc("IndexedDbPersistence","Starting transaction:",e),this.Ge.runTransaction(e,"readonly"===t?"readonly":"readwrite",sd,function(a){return r=new wd(a,i.Le?i.Le.next():Sc.T),"readwrite-primary"===t?i.sn(r).next(function(e){return!!e||i.rn(r)}).next(function(t){if(!t)throw hc("Failed to obtain primary lease for action '".concat(e,"'.")),i.isPrimary=!1,i.Oe.enqueueRetryable(function(){return i.Qe(!1)}),new yc(gc.FAILED_PRECONDITION,ud);return n(r)}).next(function(e){return i.an(r).next(function(){return e})}):i.Tn(r).next(function(){return n(r)})}).then(function(e){return r.raiseOnCommittedEvent(),e})}},{key:"Tn",value:function(e){var t=this;return _v(e).get(Gf.key).next(function(e){if(null!==e&&t.ln(e.leaseTimestampMs,5e3)&&!t.wn(e.ownerId)&&!t.cn(e)&&!(t.Me||t.allowTabSynchronization&&e.allowTabSynchronization))throw new yc(gc.FAILED_PRECONDITION,wv)})}},{key:"an",value:function(e){var t=new Gf(this.clientId,this.allowTabSynchronization,Date.now());return _v(e).put(Gf.key,t)}},{key:"on",value:function(e){var t=this,n=_v(e);return n.get(Gf.key).next(function(e){return t.cn(e)?(lc("IndexedDbPersistence","Releasing primary lease."),n.delete(Gf.key)):ld.resolve()})}},{key:"ln",value:function(e,t){var n=Date.now();return!(e<n-t||e>n&&(hc("Detected an update time that is in the future: ".concat(e," > ").concat(n)),1))}},{key:"Ze",value:function(){var e=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.qe=function(){e.Oe.enqueueAndForget(function(){return e.inForeground="visible"===e.document.visibilityState,e.Xe()})},this.document.addEventListener("visibilitychange",this.qe),this.inForeground="visible"===this.document.visibilityState)}},{key:"mn",value:function(){this.qe&&(this.document.removeEventListener("visibilitychange",this.qe),this.qe=null)}},{key:"tn",value:function(){var e,t=this;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Ue=function(){t._n(),(0,Ji.G6)()&&navigator.appVersion.match("Version/14")&&t.Oe.enterRestrictedMode(!0),t.Oe.enqueueAndForget(function(){return t.shutdown()})},this.window.addEventListener("pagehide",this.Ue))}},{key:"gn",value:function(){this.Ue&&(this.window.removeEventListener("pagehide",this.Ue),this.Ue=null)}},{key:"wn",value:function(e){var t;try{var n=null!==(null===(t=this.Ye)||void 0===t?void 0:t.getItem(this.dn(e)));return lc("IndexedDbPersistence","Client '".concat(e,"' ").concat(n?"is":"is not"," zombied in LocalStorage")),n}catch(n){return hc("IndexedDbPersistence","Failed to get zombied client id.",n),!1}}},{key:"_n",value:function(){if(this.Ye)try{this.Ye.setItem(this.dn(this.clientId),String(Date.now()))}catch(e){hc("Failed to set zombie client id.",e)}}},{key:"yn",value:function(){if(this.Ye)try{this.Ye.removeItem(this.dn(this.clientId))}catch(e){}}},{key:"dn",value:function(e){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(e)}}],[{key:"bt",value:function(){return fd.bt()}}]),e}();function _v(e){return bd(e,Gf.store)}function xv(e){return bd(e,id.store)}function Tv(e,t){var n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}var Iv=function e(t,n){f(this,e),this.progress=t,this.En=n},Sv=function(){function e(t,n,r){f(this,e),this.He=t,this.In=n,this.Ht=r}return h(e,[{key:"An",value:function(e,t){var n=this;return this.In.getAllMutationBatchesAffectingDocumentKey(e,t).next(function(r){return n.Rn(e,t,r)})}},{key:"Rn",value:function(e,t,n){return this.He.getEntry(e,t).next(function(e){var t,r=s(n);try{for(r.s();!(t=r.n()).done;){t.value.applyToLocalView(e)}}catch(i){r.e(i)}finally{r.f()}return e})}},{key:"bn",value:function(e,t){e.forEach(function(e,n){var r,i=s(t);try{for(i.s();!(r=i.n()).done;){r.value.applyToLocalView(n)}}catch(a){i.e(a)}finally{i.f()}})}},{key:"Pn",value:function(e,t){var n=this;return this.He.getEntries(e,t).next(function(t){return n.vn(e,t).next(function(){return t})})}},{key:"vn",value:function(e,t){var n=this;return this.In.getAllMutationBatchesAffectingDocumentKeys(e,t).next(function(e){return n.bn(t,e)})}},{key:"getDocumentsMatchingQuery",value:function(e,t,n){return Xc.isDocumentKey((r=t).path)&&null===r.collectionGroup&&0===r.filters.length?this.Vn(e,t.path):Zl(t)?this.Sn(e,t,n):this.Dn(e,t,n);var r}},{key:"Vn",value:function(e,t){return this.An(e,new Xc(t)).next(function(e){var t=Hh();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t})}},{key:"Sn",value:function(e,t,n){var r=this,i=t.collectionGroup,a=Hh();return this.Ht.getCollectionParents(e,i).next(function(o){return ld.forEach(o,function(o){var s,u,c=(s=t,u=o.child(i),new Ml(u,null,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt));return r.Dn(e,c,n).next(function(e){e.forEach(function(e,t){a=a.insert(e,t)})})}).next(function(){return a})})}},{key:"Dn",value:function(e,t,n){var r,i,a=this;return this.He.getDocumentsMatchingQuery(e,t,n).next(function(n){return r=n,a.In.getAllMutationBatchesAffectingQuery(e,t)}).next(function(t){return i=t,a.Cn(e,i,r).next(function(e){r=e;var t,n=s(i);try{for(n.s();!(t=n.n()).done;){var a,o=t.value,u=s(o.mutations);try{for(u.s();!(a=u.n()).done;){var c=a.value,l=c.key,h=r.get(l);null==h&&(h=ml.newInvalidDocument(l),r=r.insert(l,h)),bh(c,h,o.localWriteTime),h.isFoundDocument()||(r=r.remove(l))}}catch(f){u.e(f)}finally{u.f()}}}catch(f){n.e(f)}finally{n.f()}})}).next(function(){return r.forEach(function(e,n){Jl(t,n)||(r=r.remove(e))}),r})}},{key:"Cn",value:function(e,t,n){var r,i=Qh(),a=s(t);try{for(a.s();!(r=a.n()).done;){var o,u=s(r.value.mutations);try{for(u.s();!(o=u.n()).done;){var c=o.value;c instanceof Sh&&null===n.get(c.key)&&(i=i.add(c.key))}}catch(h){u.e(h)}finally{u.f()}}}catch(h){a.e(h)}finally{a.f()}var l=n;return this.He.getEntries(e,i).next(function(e){return e.forEach(function(e,t){t.isFoundDocument()&&(l=l.insert(e,t))}),l})}}]),e}(),Ev=function(){function e(t,n,r,i){f(this,e),this.targetId=t,this.fromCache=n,this.Nn=r,this.xn=i}return h(e,null,[{key:"kn",value:function(t,n){var r,i=Qh(),a=Qh(),o=s(n.docChanges);try{for(o.s();!(r=o.n()).done;){var u=r.value;switch(u.type){case 0:i=i.add(u.doc.key);break;case 1:a=a.add(u.doc.key)}}}catch(c){o.e(c)}finally{o.f()}return new e(t,n.fromCache,i,a)}}]),e}(),Rv=function(){function e(){f(this,e)}return h(e,[{key:"$n",value:function(e){this.On=e}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){var i,a=this;return 0===(i=t).filters.length&&null===i.limit&&null==i.startAt&&null==i.endAt&&(0===i.explicitOrderBy.length||1===i.explicitOrderBy.length&&i.explicitOrderBy[0].field.isKeyField())||n.isEqual(Dc.min())?this.Fn(e,t):this.On.Pn(e,r).next(function(i){var o=a.Mn(t,i);return(Vl(t)||ql(t))&&a.Ln(t.limitType,o,r,n)?a.Fn(e,t):(cc()<=Yi.in.DEBUG&&lc("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),Yl(t)),a.On.getDocumentsMatchingQuery(e,t,n).next(function(e){return o.forEach(function(t){e=e.insert(t.key,t)}),e}))})}},{key:"Mn",value:function(e,t){var n=new Vh($l(e));return t.forEach(function(t,r){Jl(e,r)&&(n=n.add(r))}),n}},{key:"Ln",value:function(e,t,n,r){if(n.size!==t.size)return!0;var i="F"===e?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}},{key:"Fn",value:function(e,t){return cc()<=Yi.in.DEBUG&&lc("QueryEngine","Using full collection scan to execute query:",Yl(t)),this.On.getDocumentsMatchingQuery(e,t,Dc.min())}}]),e}(),Cv=function(){function e(t,n,r,i){f(this,e),this.persistence=t,this.Bn=n,this.N=i,this.Un=new Mh(Cc),this.qn=new hv(function(e){return kl(e)},wl),this.Kn=Dc.min(),this.In=t.getMutationQueue(r),this.jn=t.getRemoteDocumentCache(),this.ze=t.getTargetCache(),this.Qn=new Sv(this.jn,this.In,this.persistence.getIndexManager()),this.Je=t.getBundleCache(),this.Bn.$n(this.Qn)}return h(e,[{key:"collectGarbage",value:function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",function(n){return e.collect(n,t.Un)})}}]),e}();function Av(e,t,n,r){return new Cv(e,t,n,r)}function Nv(e,t){return Ov.apply(this,arguments)}function Ov(){return(Ov=(0,Ki.Z)(regeneratorRuntime.mark(function e(t,n){var r,i,a,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=mc(t),i=r.In,a=r.Qn,e.next=4,r.persistence.runTransaction("Handle user change","readonly",function(e){var t;return r.In.getAllMutationBatches(e).next(function(o){return t=o,i=r.persistence.getMutationQueue(n),a=new Sv(r.jn,i,r.persistence.getIndexManager()),i.getAllMutationBatches(e)}).next(function(n){var r,i=[],o=[],u=Qh(),c=s(t);try{for(c.s();!(r=c.n()).done;){var l=r.value;i.push(l.batchId);var h,f=s(l.mutations);try{for(f.s();!(h=f.n()).done;){var d=h.value;u=u.add(d.key)}}catch(w){f.e(w)}finally{f.f()}}}catch(w){c.e(w)}finally{c.f()}var v,p=s(n);try{for(p.s();!(v=p.n()).done;){var m=v.value;o.push(m.batchId);var g,y=s(m.mutations);try{for(y.s();!(g=y.n()).done;){var k=g.value;u=u.add(k.key)}}catch(w){y.e(w)}finally{y.f()}}}catch(w){p.e(w)}finally{p.f()}return a.Pn(e,u).next(function(e){return{Wn:e,removedBatchIds:i,addedBatchIds:o}})})});case 4:return o=e.sent,e.abrupt("return",(r.In=i,r.Qn=a,r.Bn.$n(r.Qn),o));case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Dv(e,t){var n=mc(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",function(e){var r,i,a,o,s,u,c,l=t.batch.keys(),h=n.jn.newChangeBuffer({trackRemovals:!0});return(r=n,i=e,a=t,o=h,s=a.batch,u=s.keys(),c=ld.resolve(),u.forEach(function(e){c=c.next(function(){return o.getEntry(i,e)}).next(function(t){var n=a.docVersions.get(e);pc(null!==n),t.version.compareTo(n)<0&&(s.applyToRemoteDocument(t,a),t.isValidDocument()&&o.addEntry(t,a.commitVersion))})}),c.next(function(){return r.In.removeMutationBatch(i,s)})).next(function(){return h.apply(e)}).next(function(){return n.In.performConsistencyCheck(e)}).next(function(){return n.Qn.Pn(e,l)})})}function Pv(e){var t=mc(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",function(e){return t.ze.getLastRemoteSnapshotVersion(e)})}function Lv(e,t){var n=mc(e),r=t.snapshotVersion,i=n.Un;return n.persistence.runTransaction("Apply remote event","readwrite-primary",function(e){var a=n.jn.newChangeBuffer({trackRemovals:!0});i=n.Un;var o=[];t.targetChanges.forEach(function(t,a){var s=i.get(a);if(s){o.push(n.ze.removeMatchingKeys(e,t.removedDocuments,a).next(function(){return n.ze.addMatchingKeys(e,t.addedDocuments,a)}));var u,c,l,h=t.resumeToken;if(h.approximateByteSize()>0){var f=s.withResumeToken(h,r).withSequenceNumber(e.currentSequenceNumber);i=i.insert(a,f),u=s,l=t,pc((c=f).resumeToken.approximateByteSize()>0),(0===u.resumeToken.approximateByteSize()||c.snapshotVersion.toMicroseconds()-u.snapshotVersion.toMicroseconds()>=3e8||l.addedDocuments.size+l.modifiedDocuments.size+l.removedDocuments.size>0)&&o.push(n.ze.updateTargetData(e,f))}}});var s=zh();if(t.documentUpdates.forEach(function(r,i){t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))}),o.push(Fv(e,a,t.documentUpdates,r,void 0).next(function(e){s=e})),!r.isEqual(Dc.min())){var u=n.ze.getLastRemoteSnapshotVersion(e).next(function(t){return n.ze.setTargetsMetadata(e,e.currentSequenceNumber,r)});o.push(u)}return ld.waitFor(o).next(function(){return a.apply(e)}).next(function(){return n.Qn.vn(e,s)}).next(function(){return s})}).then(function(e){return n.Un=i,e})}function Fv(e,t,n,r,i){var a=Qh();return n.forEach(function(e){return a=a.add(e)}),t.getEntries(e,a).next(function(e){var a=zh();return n.forEach(function(n,o){var s=e.get(n),u=(null==i?void 0:i.get(n))||r;o.isNoDocument()&&o.version.isEqual(Dc.min())?(t.removeEntry(n,u),a=a.insert(n,o)):!s.isValidDocument()||o.version.compareTo(s.version)>0||0===o.version.compareTo(s.version)&&s.hasPendingWrites?(t.addEntry(o,u),a=a.insert(n,o)):lc("LocalStore","Ignoring outdated watch update for ",n,". Current version:",s.version," Watch version:",o.version)}),a})}function Mv(e,t){var n=mc(e);return n.persistence.runTransaction("Get next mutation batch","readonly",function(e){return void 0===t&&(t=-1),n.In.getNextMutationBatchAfterBatchId(e,t)})}function Uv(e,t){var n=mc(e);return n.persistence.runTransaction("Allocate target","readwrite",function(e){var r;return n.ze.getTargetData(e,t).next(function(i){return i?(r=i,ld.resolve(r)):n.ze.allocateTargetId(e).next(function(i){return r=new Td(t,i,0,e.currentSequenceNumber),n.ze.addTargetData(e,r).next(function(){return r})})})}).then(function(e){var r=n.Un.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Un=n.Un.insert(e.targetId,e),n.qn.set(t,e.targetId)),e})}function jv(e,t,n){return Vv.apply(this,arguments)}function Vv(){return(Vv=(0,Ki.Z)(regeneratorRuntime.mark(function e(t,n,r){var i,a,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(i=mc(t),a=i.Un.get(n),o=r?"readwrite":"readwrite-primary",e.prev=1,e.t0=r,e.t0){e.next=6;break}return e.next=6,i.persistence.runTransaction("Release target",o,function(e){return i.persistence.referenceDelegate.removeTarget(e,a)});case 6:e.next=13;break;case 8:if(e.prev=8,e.t1=e.catch(1),pd(e.t1)){e.next=12;break}throw e.t1;case 12:lc("LocalStore","Failed to update sequence numbers for target ".concat(n,": ").concat(e.t1));case 13:i.Un=i.Un.remove(n),i.qn.delete(a.target);case 14:case"end":return e.stop()}},e,null,[[1,8]])}))).apply(this,arguments)}function qv(e,t,n){var r=mc(e),i=Dc.min(),a=Qh();return r.persistence.runTransaction("Execute query","readonly",function(e){return(o=r,s=e,u=Gl(t),c=mc(o),l=c.qn.get(u),void 0!==l?ld.resolve(c.Un.get(l)):c.ze.getTargetData(s,u)).next(function(t){if(t)return i=t.lastLimboFreeSnapshotVersion,r.ze.getMatchingKeysForTargetId(e,t.targetId).next(function(e){a=e})}).next(function(){return r.Bn.getDocumentsMatchingQuery(e,t,n?i:Dc.min(),n?a:Qh())}).next(function(e){return{documents:e,Gn:a}});var o,s,u,c,l})}function Bv(e,t){var n=mc(e),r=mc(n.ze),i=n.Un.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",function(e){return r.Tt(e,t).next(function(e){return e?e.target:null})})}function zv(e){var t=mc(e);return t.persistence.runTransaction("Get new document changes","readonly",function(e){return n=t.jn,r=e,i=t.Kn,a=mc(n),o=zh(),s=Rd(i),u=mv(r),c=IDBKeyRange.lowerBound(s,!0),u.Kt({index:$f.readTimeIndex,range:c},function(e,t){var n=Sd(a.N,t);o=o.insert(n.key,n),s=t.readTime}).next(function(){return{En:o,readTime:Cd(s)}});var n,r,i,a,o,s,u,c}).then(function(e){var n=e.En,r=e.readTime;return t.Kn=r,n})}function Zv(){return(Zv=(0,Ki.Z)(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=mc(t),e.abrupt("return",n.persistence.runTransaction("Synchronize last document change read time","readonly",function(e){return t=mv(e),n=Dc.min(),t.Kt({index:$f.readTimeIndex,reverse:!0},function(e,t,r){t.readTime&&(n=Cd(t.readTime)),r.done()}).next(function(){return n});var t,n}).then(function(e){n.Kn=e}));case 2:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Hv(){return(Hv=(0,Ki.Z)(regeneratorRuntime.mark(function e(t,n,r,i){var a,o,u,c,l,h,f,d,v,p,m;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a=mc(t),o=Qh(),u=zh(),c=Kh(),l=s(r);try{for(l.s();!(h=l.n()).done;)f=h.value,d=n.zn(f.metadata.name),f.document&&(o=o.add(d)),u=u.insert(d,n.Hn(f)),c=c.insert(d,n.Jn(f.metadata.readTime))}catch(g){l.e(g)}finally{l.f()}return v=a.jn.newChangeBuffer({trackRemovals:!0}),e.next=7,Uv(a,(m=i,Gl(jl(Uc.fromString("__bundle__/docs/".concat(m))))));case 7:return p=e.sent,e.abrupt("return",a.persistence.runTransaction("Apply bundle documents","readwrite",function(e){return Fv(e,v,u,Dc.min(),c).next(function(t){return v.apply(e),t}).next(function(t){return a.ze.removeMatchingKeysForTargetId(e,p.targetId).next(function(){return a.ze.addMatchingKeys(e,o,p.targetId)}).next(function(){return a.Qn.vn(e,t)}).next(function(){return t})})}));case 9:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Gv(e,t){return Kv.apply(this,arguments)}function Kv(){return(Kv=(0,Ki.Z)(regeneratorRuntime.mark(function e(t,n){var r,i,a,o=arguments;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>2&&void 0!==o[2]?o[2]:Qh(),e.next=3,Uv(t,Gl(Ld(n.bundledQuery)));case 3:return i=e.sent,a=mc(t),e.abrupt("return",a.persistence.runTransaction("Save named query","readwrite",function(e){var t=vf(n.readTime);if(i.snapshotVersion.compareTo(t)>=0)return a.Je.saveNamedQuery(e,n);var o=i.withResumeToken(Bc.EMPTY_BYTE_STRING,t);return a.Un=a.Un.insert(o.targetId,o),a.ze.updateTargetData(e,o).next(function(){return a.ze.removeMatchingKeysForTargetId(e,i.targetId)}).next(function(){return a.ze.addMatchingKeys(e,r,i.targetId)}).next(function(){return a.Je.saveNamedQuery(e,n)})}));case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}var Wv=function(){function e(t){f(this,e),this.N=t,this.Yn=new Map,this.Xn=new Map}return h(e,[{key:"getBundleMetadata",value:function(e,t){return ld.resolve(this.Yn.get(t))}},{key:"saveBundleMetadata",value:function(e,t){var n;return this.Yn.set(t.id,{id:(n=t).id,version:n.version,createTime:vf(n.createTime)}),ld.resolve()}},{key:"getNamedQuery",value:function(e,t){return ld.resolve(this.Xn.get(t))}},{key:"saveNamedQuery",value:function(e,t){return this.Xn.set(t.name,{name:(n=t).name,query:Ld(n.bundledQuery),readTime:vf(n.readTime)}),ld.resolve();var n}}]),e}(),Qv=function(){function e(){f(this,e),this.Zn=new Vh(Yv.ts),this.es=new Vh(Yv.ns)}return h(e,[{key:"isEmpty",value:function(){return this.Zn.isEmpty()}},{key:"addReference",value:function(e,t){var n=new Yv(e,t);this.Zn=this.Zn.add(n),this.es=this.es.add(n)}},{key:"ss",value:function(e,t){var n=this;e.forEach(function(e){return n.addReference(e,t)})}},{key:"removeReference",value:function(e,t){this.rs(new Yv(e,t))}},{key:"os",value:function(e,t){var n=this;e.forEach(function(e){return n.removeReference(e,t)})}},{key:"cs",value:function(e){var t=this,n=new Xc(new Uc([])),r=new Yv(n,e),i=new Yv(n,e+1),a=[];return this.es.forEachInRange([r,i],function(e){t.rs(e),a.push(e.key)}),a}},{key:"us",value:function(){var e=this;this.Zn.forEach(function(t){return e.rs(t)})}},{key:"rs",value:function(e){this.Zn=this.Zn.delete(e),this.es=this.es.delete(e)}},{key:"hs",value:function(e){var t=new Xc(new Uc([])),n=new Yv(t,e),r=new Yv(t,e+1),i=Qh();return this.es.forEachInRange([n,r],function(e){i=i.add(e.key)}),i}},{key:"containsKey",value:function(e){var t=new Yv(e,0),n=this.Zn.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}]),e}(),Yv=function(){function e(t,n){f(this,e),this.key=t,this.ls=n}return h(e,null,[{key:"ts",value:function(e,t){return Xc.comparator(e.key,t.key)||Cc(e.ls,t.ls)}},{key:"ns",value:function(e,t){return Cc(e.ls,t.ls)||Xc.comparator(e.key,t.key)}}]),e}(),Jv=function(){function e(t,n){f(this,e),this.Ht=t,this.referenceDelegate=n,this.In=[],this.fs=1,this.ds=new Vh(Yv.ts)}return h(e,[{key:"checkEmpty",value:function(e){return ld.resolve(0===this.In.length)}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this.fs;this.fs++;var a=new _d(i,t,n,r);this.In.push(a);var o,u=s(r);try{for(u.s();!(o=u.n()).done;){var c=o.value;this.ds=this.ds.add(new Yv(c.key,i)),this.Ht.addToCollectionParentIndex(e,c.key.path.popLast())}}catch(l){u.e(l)}finally{u.f()}return ld.resolve(a)}},{key:"lookupMutationBatch",value:function(e,t){return ld.resolve(this.ws(t))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=this._s(t+1),r=n<0?0:n;return ld.resolve(this.In.length>r?this.In[r]:null)}},{key:"getHighestUnacknowledgedBatchId",value:function(){return ld.resolve(0===this.In.length?-1:this.fs-1)}},{key:"getAllMutationBatches",value:function(e){return ld.resolve(this.In.slice())}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=new Yv(t,0),i=new Yv(t,Number.POSITIVE_INFINITY),a=[];return this.ds.forEachInRange([r,i],function(e){var t=n.ws(e.ls);a.push(t)}),ld.resolve(a)}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new Vh(Cc);return t.forEach(function(e){var t=new Yv(e,0),i=new Yv(e,Number.POSITIVE_INFINITY);n.ds.forEachInRange([t,i],function(e){r=r.add(e.ls)})}),ld.resolve(this.gs(r))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=t.path,r=n.length+1,i=n;Xc.isDocumentKey(i)||(i=i.child(""));var a=new Yv(new Xc(i),0),o=new Vh(Cc);return this.ds.forEachWhile(function(e){var t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.ls)),!0)},a),ld.resolve(this.gs(o))}},{key:"gs",value:function(e){var t=this,n=[];return e.forEach(function(e){var r=t.ws(e);null!==r&&n.push(r)}),n}},{key:"removeMutationBatch",value:function(e,t){var n=this;pc(0===this.ys(t.batchId,"removed")),this.In.shift();var r=this.ds;return ld.forEach(t.mutations,function(i){var a=new Yv(i.key,t.batchId);return r=r.delete(a),n.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(function(){n.ds=r})}},{key:"te",value:function(e){}},{key:"containsKey",value:function(e,t){var n=new Yv(t,0),r=this.ds.firstAfterOrEqual(n);return ld.resolve(t.isEqual(r&&r.key))}},{key:"performConsistencyCheck",value:function(e){return ld.resolve()}},{key:"ys",value:function(e,t){return this._s(e)}},{key:"_s",value:function(e){return 0===this.In.length?0:e-this.In[0].batchId}},{key:"ws",value:function(e){var t=this._s(e);return t<0||t>=this.In.length?null:this.In[t]}}]),e}(),$v=function(){function e(t,n){f(this,e),this.Ht=t,this.ps=n,this.docs=new Mh(Xc.comparator),this.size=0}return h(e,[{key:"addEntry",value:function(e,t,n){var r=t.key,i=this.docs.get(r),a=i?i.size:0,o=this.ps(t);return this.docs=this.docs.insert(r,{document:t.clone(),size:o,readTime:n}),this.size+=o-a,this.Ht.addToCollectionParentIndex(e,r.path.popLast())}},{key:"removeEntry",value:function(e){var t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}},{key:"getEntry",value:function(e,t){var n=this.docs.get(t);return ld.resolve(n?n.document.clone():ml.newInvalidDocument(t))}},{key:"getEntries",value:function(e,t){var n=this,r=zh();return t.forEach(function(e){var t=n.docs.get(e);r=r.insert(e,t?t.document.clone():ml.newInvalidDocument(e))}),ld.resolve(r)}},{key:"getDocumentsMatchingQuery",value:function(e,t,n){for(var r=zh(),i=new Xc(t.path.child("")),a=this.docs.getIteratorFrom(i);a.hasNext();){var o=a.getNext(),s=o.key,u=o.value,c=u.document,l=u.readTime;if(!t.path.isPrefixOf(s.path))break;l.compareTo(n)<=0||Jl(t,c)&&(r=r.insert(c.key,c.clone()))}return ld.resolve(r)}},{key:"Ts",value:function(e,t){return ld.forEach(this.docs,function(e){return t(e)})}},{key:"newChangeBuffer",value:function(e){return new Xv(this)}},{key:"getSize",value:function(e){return ld.resolve(this.size)}}]),e}(),Xv=function(e){d(n,e);var t=v(n);function n(e){var r;return f(this,n),(r=t.call(this)).Se=e,r}return h(n,[{key:"applyChanges",value:function(e){var t=this,n=[];return this.changes.forEach(function(r,i){i.document.isValidDocument()?n.push(t.Se.addEntry(e,i.document,t.getReadTime(r))):t.Se.removeEntry(r)}),ld.waitFor(n)}},{key:"getFromCache",value:function(e,t){return this.Se.getEntry(e,t)}},{key:"getAllFromCache",value:function(e,t){return this.Se.getEntries(e,t)}}]),n}(fv),ep=function(){function e(t){f(this,e),this.persistence=t,this.Es=new hv(function(e){return kl(e)},wl),this.lastRemoteSnapshotVersion=Dc.min(),this.highestTargetId=0,this.Is=0,this.As=new Qv,this.targetCount=0,this.Rs=$d.se()}return h(e,[{key:"forEachTarget",value:function(e,t){return this.Es.forEach(function(e,n){return t(n)}),ld.resolve()}},{key:"getLastRemoteSnapshotVersion",value:function(e){return ld.resolve(this.lastRemoteSnapshotVersion)}},{key:"getHighestSequenceNumber",value:function(e){return ld.resolve(this.Is)}},{key:"allocateTargetId",value:function(e){return this.highestTargetId=this.Rs.next(),ld.resolve(this.highestTargetId)}},{key:"setTargetsMetadata",value:function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Is&&(this.Is=t),ld.resolve()}},{key:"ae",value:function(e){this.Es.set(e.target,e);var t=e.targetId;t>this.highestTargetId&&(this.Rs=new $d(t),this.highestTargetId=t),e.sequenceNumber>this.Is&&(this.Is=e.sequenceNumber)}},{key:"addTargetData",value:function(e,t){return this.ae(t),this.targetCount+=1,ld.resolve()}},{key:"updateTargetData",value:function(e,t){return this.ae(t),ld.resolve()}},{key:"removeTargetData",value:function(e,t){return this.Es.delete(t.target),this.As.cs(t.targetId),this.targetCount-=1,ld.resolve()}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return this.Es.forEach(function(o,s){s.sequenceNumber<=t&&null===n.get(s.targetId)&&(r.Es.delete(o),a.push(r.removeMatchingKeysForTargetId(e,s.targetId)),i++)}),ld.waitFor(a).next(function(){return i})}},{key:"getTargetCount",value:function(e){return ld.resolve(this.targetCount)}},{key:"getTargetData",value:function(e,t){var n=this.Es.get(t)||null;return ld.resolve(n)}},{key:"addMatchingKeys",value:function(e,t,n){return this.As.ss(t,n),ld.resolve()}},{key:"removeMatchingKeys",value:function(e,t,n){this.As.os(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach(function(t){i.push(r.markPotentiallyOrphaned(e,t))}),ld.waitFor(i)}},{key:"removeMatchingKeysForTargetId",value:function(e,t){return this.As.cs(t),ld.resolve()}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=this.As.hs(t);return ld.resolve(n)}},{key:"containsKey",value:function(e,t){return ld.resolve(this.As.containsKey(t))}}]),e}(),tp=function(){function e(t,n){var r=this;f(this,e),this.bs={},this.Le=new Sc(0),this.Be=!1,this.Be=!0,this.referenceDelegate=t(this),this.ze=new ep(this),this.Ht=new jd,this.He=new $v(this.Ht,function(e){return r.referenceDelegate.Ps(e)}),this.N=new Id(n),this.Je=new Wv(this.N)}return h(e,[{key:"start",value:function(){return Promise.resolve()}},{key:"shutdown",value:function(){return this.Be=!1,Promise.resolve()}},{key:"started",get:function(){return this.Be}},{key:"setDatabaseDeletedListener",value:function(){}},{key:"setNetworkEnabled",value:function(){}},{key:"getIndexManager",value:function(){return this.Ht}},{key:"getMutationQueue",value:function(e){var t=this.bs[e.toKey()];return t||(t=new Jv(this.Ht,this.referenceDelegate),this.bs[e.toKey()]=t),t}},{key:"getTargetCache",value:function(){return this.ze}},{key:"getRemoteDocumentCache",value:function(){return this.He}},{key:"getBundleCache",value:function(){return this.Je}},{key:"runTransaction",value:function(e,t,n){var r=this;lc("MemoryPersistence","Starting transaction:",e);var i=new np(this.Le.next());return this.referenceDelegate.vs(),n(i).next(function(e){return r.referenceDelegate.Vs(i).next(function(){return e})}).toPromise().then(function(e){return i.raiseOnCommittedEvent(),e})}},{key:"Ss",value:function(e,t){return ld.or(Object.values(this.bs).map(function(n){return function(){return n.containsKey(e,t)}}))}}]),e}(),np=function(e){d(n,e);var t=v(n);function n(e){var r;return f(this,n),(r=t.call(this)).currentSequenceNumber=e,r}return n}(cd),rp=function(){function e(t){f(this,e),this.persistence=t,this.Ds=new Qv,this.Cs=null}return h(e,[{key:"xs",get:function(){if(this.Cs)return this.Cs;throw vc()}},{key:"addReference",value:function(e,t,n){return this.Ds.addReference(n,t),this.xs.delete(n.toString()),ld.resolve()}},{key:"removeReference",value:function(e,t,n){return this.Ds.removeReference(n,t),this.xs.add(n.toString()),ld.resolve()}},{key:"markPotentiallyOrphaned",value:function(e,t){return this.xs.add(t.toString()),ld.resolve()}},{key:"removeTarget",value:function(e,t){var n=this;this.Ds.cs(t.targetId).forEach(function(e){return n.xs.add(e.toString())});var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(function(e){e.forEach(function(e){return n.xs.add(e.toString())})}).next(function(){return r.removeTargetData(e,t)})}},{key:"vs",value:function(){this.Cs=new Set}},{key:"Vs",value:function(e){var t=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ld.forEach(this.xs,function(r){var i=Xc.fromPath(r);return t.ks(e,i).next(function(e){e||n.removeEntry(i)})}).next(function(){return t.Cs=null,n.apply(e)})}},{key:"updateLimboDocument",value:function(e,t){var n=this;return this.ks(e,t).next(function(e){e?n.xs.delete(t.toString()):n.xs.add(t.toString())})}},{key:"Ps",value:function(e){return 0}},{key:"ks",value:function(e,t){var n=this;return ld.or([function(){return ld.resolve(n.Ds.containsKey(t))},function(){return n.persistence.getTargetCache().containsKey(e,t)},function(){return n.persistence.Ss(e,t)}])}}],[{key:"Ns",value:function(t){return new e(t)}}]),e}();function ip(e,t){return"firestore_clients_".concat(e,"_").concat(t)}function ap(e,t,n){var r="firestore_mutations_".concat(e,"_").concat(n);return t.isAuthenticated()&&(r+="_".concat(t.uid)),r}function op(e,t){return"firestore_targets_".concat(e,"_").concat(t)}var sp=function(){function e(t,n,r,i){f(this,e),this.user=t,this.batchId=n,this.state=r,this.error=i}return h(e,[{key:"Os",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"$s",value:function(t,n,r){var i,a=JSON.parse(r),o="object"==typeof a&&-1!==["pending","acknowledged","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return o&&a.error&&((o="string"==typeof a.error.message&&"string"==typeof a.error.code)&&(i=new yc(a.error.code,a.error.message))),o?new e(t,n,a.state,i):(hc("SharedClientState","Failed to parse mutation state for ID '".concat(n,"': ").concat(r)),null)}}]),e}(),up=function(){function e(t,n,r){f(this,e),this.targetId=t,this.state=n,this.error=r}return h(e,[{key:"Os",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"$s",value:function(t,n){var r,i=JSON.parse(n),a="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return a&&i.error&&((a="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new yc(i.error.code,i.error.message))),a?new e(t,i.state,r):(hc("SharedClientState","Failed to parse target state for ID '".concat(t,"': ").concat(n)),null)}}]),e}(),cp=function(){function e(t,n){f(this,e),this.clientId=t,this.activeTargetIds=n}return h(e,null,[{key:"$s",value:function(t,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,a=Jh(),o=0;i&&o<r.activeTargetIds.length;++o)i=$c(r.activeTargetIds[o]),a=a.add(r.activeTargetIds[o]);return i?new e(t,a):(hc("SharedClientState","Failed to parse client data for instance '".concat(t,"': ").concat(n)),null)}}]),e}(),lp=function(){function e(t,n){f(this,e),this.clientId=t,this.onlineState=n}return h(e,null,[{key:"$s",value:function(t){var n=JSON.parse(t);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new e(n.clientId,n.onlineState):(hc("SharedClientState","Failed to parse online state: ".concat(t)),null)}}]),e}(),hp=function(){function e(){f(this,e),this.activeTargetIds=Jh()}return h(e,[{key:"Fs",value:function(e){this.activeTargetIds=this.activeTargetIds.add(e)}},{key:"Ms",value:function(e){this.activeTargetIds=this.activeTargetIds.delete(e)}},{key:"Os",value:function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}]),e}(),fp=function(){function e(t,n,r,i,a){f(this,e),this.window=t,this.Oe=n,this.persistenceKey=r,this.Ls=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Bs=this.Us.bind(this),this.qs=new Mh(Cc),this.started=!1,this.Ks=[];var o,s=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.js=ip(this.persistenceKey,this.Ls),this.Qs="firestore_sequence_number_".concat(this.persistenceKey),this.qs=this.qs.insert(this.Ls,new hp),this.Ws=new RegExp("^firestore_clients_".concat(s,"_([^_]*)$")),this.Gs=new RegExp("^firestore_mutations_".concat(s,"_(\\d+)(?:_(.*))?$")),this.zs=new RegExp("^firestore_targets_".concat(s,"_(\\d+)$")),this.Hs="firestore_online_state_".concat(this.persistenceKey),this.Js=(o=this.persistenceKey,"firestore_bundle_loaded_".concat(o)),this.window.addEventListener("storage",this.Bs)}return h(e,[{key:"start",value:function(){var e=this;return(0,Ki.Z)(regeneratorRuntime.mark(function t(){var n,r,i,a,o,u,c,l,h,f,d;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.syncEngine.pn();case 2:n=t.sent,r=s(n),t.prev=4,r.s();case 6:if((i=r.n()).done){t.next=14;break}if((a=i.value)!==e.Ls){t.next=10;break}return t.abrupt("continue",12);case 10:(o=e.getItem(ip(e.persistenceKey,a)))&&(u=cp.$s(a,o))&&(e.qs=e.qs.insert(u.clientId,u));case 12:t.next=6;break;case 14:t.next=19;break;case 16:t.prev=16,t.t0=t.catch(4),r.e(t.t0);case 19:return t.prev=19,r.f(),t.finish(19);case 22:e.Ys(),(c=e.storage.getItem(e.Hs))&&(l=e.Xs(c))&&e.Zs(l),h=s(e.Ks);try{for(h.s();!(f=h.n()).done;)d=f.value,e.Us(d)}catch(v){h.e(v)}finally{h.f()}e.Ks=[],e.window.addEventListener("pagehide",function(){return e.shutdown()}),e.started=!0;case 28:case"end":return t.stop()}},t,null,[[4,16,19,22]])}))()}},{key:"writeSequenceNumber",value:function(e){this.setItem(this.Qs,JSON.stringify(e))}},{key:"getAllActiveQueryTargets",value:function(){return this.ti(this.qs)}},{key:"isActiveQueryTarget",value:function(e){var t=!1;return this.qs.forEach(function(n,r){r.activeTargetIds.has(e)&&(t=!0)}),t}},{key:"addPendingMutation",value:function(e){this.ei(e,"pending")}},{key:"updateMutationState",value:function(e,t,n){this.ei(e,t,n),this.ni(e)}},{key:"addLocalQueryTarget",value:function(e){var t="not-current";if(this.isActiveQueryTarget(e)){var n=this.storage.getItem(op(this.persistenceKey,e));if(n){var r=up.$s(e,n);r&&(t=r.state)}}return this.si.Fs(e),this.Ys(),t}},{key:"removeLocalQueryTarget",value:function(e){this.si.Ms(e),this.Ys()}},{key:"isLocalQueryTarget",value:function(e){return this.si.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){this.removeItem(op(this.persistenceKey,e))}},{key:"updateQueryState",value:function(e,t,n){this.ii(e,t,n)}},{key:"handleUserChange",value:function(e,t,n){var r=this;t.forEach(function(e){r.ni(e)}),this.currentUser=e,n.forEach(function(e){r.addPendingMutation(e)})}},{key:"setOnlineState",value:function(e){this.ri(e)}},{key:"notifyBundleLoaded",value:function(){this.oi()}},{key:"shutdown",value:function(){this.started&&(this.window.removeEventListener("storage",this.Bs),this.removeItem(this.js),this.started=!1)}},{key:"getItem",value:function(e){var t=this.storage.getItem(e);return lc("SharedClientState","READ",e,t),t}},{key:"setItem",value:function(e,t){lc("SharedClientState","SET",e,t),this.storage.setItem(e,t)}},{key:"removeItem",value:function(e){lc("SharedClientState","REMOVE",e),this.storage.removeItem(e)}},{key:"Us",value:function(e){var t=this,n=e;if(n.storageArea===this.storage){if(lc("SharedClientState","EVENT",n.key,n.newValue),n.key===this.js)return void hc("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Oe.enqueueRetryable((0,Ki.Z)(regeneratorRuntime.mark(function e(){var r,i,a,o,s,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.started){e.next=41;break}if(null===n.key){e.next=39;break}if(!t.Ws.test(n.key)){e.next=11;break}if(null!=n.newValue){e.next=6;break}return r=t.ai(n.key),e.abrupt("return",t.ci(r,null));case 6:if(!(i=t.ui(n.key,n.newValue))){e.next=9;break}return e.abrupt("return",t.ci(i.clientId,i));case 9:e.next=39;break;case 11:if(!t.Gs.test(n.key)){e.next=18;break}if(null===n.newValue){e.next=16;break}if(!(a=t.hi(n.key,n.newValue))){e.next=16;break}return e.abrupt("return",t.li(a));case 16:e.next=39;break;case 18:if(!t.zs.test(n.key)){e.next=25;break}if(null===n.newValue){e.next=23;break}if(!(o=t.fi(n.key,n.newValue))){e.next=23;break}return e.abrupt("return",t.di(o));case 23:e.next=39;break;case 25:if(n.key!==t.Hs){e.next=32;break}if(null===n.newValue){e.next=30;break}if(!(s=t.Xs(n.newValue))){e.next=30;break}return e.abrupt("return",t.Zs(s));case 30:e.next=39;break;case 32:if(n.key!==t.Qs){e.next=37;break}(u=function(e){var t=Sc.T;if(null!=e)try{var n=JSON.parse(e);pc("number"==typeof n),t=n}catch(n){hc("SharedClientState","Failed to read sequence number from WebStorage",n)}return t}(n.newValue))!==Sc.T&&t.sequenceNumberHandler(u),e.next=39;break;case 37:if(n.key!==t.Js){e.next=39;break}return e.abrupt("return",t.syncEngine.wi());case 39:e.next=42;break;case 41:t.Ks.push(n);case 42:case"end":return e.stop()}},e)})))}}},{key:"si",get:function(){return this.qs.get(this.Ls)}},{key:"Ys",value:function(){this.setItem(this.js,this.si.Os())}},{key:"ei",value:function(e,t,n){var r=new sp(this.currentUser,e,t,n),i=ap(this.persistenceKey,this.currentUser,e);this.setItem(i,r.Os())}},{key:"ni",value:function(e){var t=ap(this.persistenceKey,this.currentUser,e);this.removeItem(t)}},{key:"ri",value:function(e){this.storage.setItem(this.Hs,JSON.stringify({clientId:this.Ls,onlineState:e}))}},{key:"ii",value:function(e,t,n){var r=op(this.persistenceKey,e),i=new up(e,t,n);this.setItem(r,i.Os())}},{key:"oi",value:function(){this.setItem(this.Js,"value-not-used")}},{key:"ai",value:function(e){var t=this.Ws.exec(e);return t?t[1]:null}},{key:"ui",value:function(e,t){var n=this.ai(e);return cp.$s(n,t)}},{key:"hi",value:function(e,t){var n=this.Gs.exec(e),r=Number(n[1]);return sp.$s(new oc(void 0!==n[2]?n[2]:null),r,t)}},{key:"fi",value:function(e,t){var n=this.zs.exec(e),r=Number(n[1]);return up.$s(r,t)}},{key:"Xs",value:function(e){return lp.$s(e)}},{key:"li",value:function(e){var t=this;return(0,Ki.Z)(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(e.user.uid!==t.currentUser.uid){n.next=2;break}return n.abrupt("return",t.syncEngine._i(e.batchId,e.state,e.error));case 2:lc("SharedClientState","Ignoring mutation for non-active user ".concat(e.user.uid));case 3:case"end":return n.stop()}},n)}))()}},{key:"di",value:function(e){return this.syncEngine.mi(e.targetId,e.state,e.error)}},{key:"ci",value:function(e,t){var n=this,r=t?this.qs.insert(e,t):this.qs.remove(e),i=this.ti(this.qs),a=this.ti(r),o=[],s=[];return a.forEach(function(e){i.has(e)||o.push(e)}),i.forEach(function(e){a.has(e)||s.push(e)}),this.syncEngine.gi(o,s).then(function(){n.qs=r})}},{key:"Zs",value:function(e){this.qs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}},{key:"ti",value:function(e){var t=Jh();return e.forEach(function(e,n){t=t.unionWith(n.activeTargetIds)}),t}}],[{key:"bt",value:function(e){return!(!e||!e.localStorage)}}]),e}(),dp=function(){function e(){f(this,e),this.yi=new hp,this.pi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return h(e,[{key:"addPendingMutation",value:function(e){}},{key:"updateMutationState",value:function(e,t,n){}},{key:"addLocalQueryTarget",value:function(e){return this.yi.Fs(e),this.pi[e]||"not-current"}},{key:"updateQueryState",value:function(e,t,n){this.pi[e]=t}},{key:"removeLocalQueryTarget",value:function(e){this.yi.Ms(e)}},{key:"isLocalQueryTarget",value:function(e){return this.yi.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){delete this.pi[e]}},{key:"getAllActiveQueryTargets",value:function(){return this.yi.activeTargetIds}},{key:"isActiveQueryTarget",value:function(e){return this.yi.activeTargetIds.has(e)}},{key:"start",value:function(){return this.yi=new hp,Promise.resolve()}},{key:"handleUserChange",value:function(e,t,n){}},{key:"setOnlineState",value:function(e){}},{key:"shutdown",value:function(){}},{key:"writeSequenceNumber",value:function(e){}},{key:"notifyBundleLoaded",value:function(){}}]),e}(),vp=function(){function e(){f(this,e)}return h(e,[{key:"Ti",value:function(e){}},{key:"shutdown",value:function(){}}]),e}(),pp=function(){function e(){var t=this;f(this,e),this.Ei=function(){return t.Ii()},this.Ai=function(){return t.Ri()},this.bi=[],this.Pi()}return h(e,[{key:"Ti",value:function(e){this.bi.push(e)}},{key:"shutdown",value:function(){window.removeEventListener("online",this.Ei),window.removeEventListener("offline",this.Ai)}},{key:"Pi",value:function(){window.addEventListener("online",this.Ei),window.addEventListener("offline",this.Ai)}},{key:"Ii",value:function(){lc("ConnectivityMonitor","Network connectivity changed: AVAILABLE");var e,t=s(this.bi);try{for(t.s();!(e=t.n()).done;){(0,e.value)(0)}}catch(n){t.e(n)}finally{t.f()}}},{key:"Ri",value:function(){lc("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");var e,t=s(this.bi);try{for(t.s();!(e=t.n()).done;){(0,e.value)(1)}}catch(n){t.e(n)}finally{t.f()}}}],[{key:"bt",value:function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}]),e}(),mp={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},gp=function(){function e(t){f(this,e),this.vi=t.vi,this.Vi=t.Vi}return h(e,[{key:"Si",value:function(e){this.Di=e}},{key:"Ci",value:function(e){this.Ni=e}},{key:"onMessage",value:function(e){this.xi=e}},{key:"close",value:function(){this.Vi()}},{key:"send",value:function(e){this.vi(e)}},{key:"ki",value:function(){this.Di()}},{key:"$i",value:function(e){this.Ni(e)}},{key:"Oi",value:function(e){this.xi(e)}}]),e}(),yp=function(e){d(n,e);var t=v(n);function n(e){var r;return f(this,n),(r=t.call(this,e)).forceLongPolling=e.forceLongPolling,r.autoDetectLongPolling=e.autoDetectLongPolling,r.useFetchStreams=e.useFetchStreams,r}return h(n,[{key:"qi",value:function(e,t,n,r){return new Promise(function(i,a){var o=new ic;o.listenOnce(Xu.COMPLETE,function(){try{switch(o.getLastErrorCode()){case $u.NO_ERROR:var t=o.getResponseJson();lc("Connection","XHR received:",JSON.stringify(t)),i(t);break;case $u.TIMEOUT:lc("Connection",'RPC "'+e+'" timed out'),a(new yc(gc.DEADLINE_EXCEEDED,"Request time out"));break;case $u.HTTP_ERROR:var n=o.getStatus();if(lc("Connection",'RPC "'+e+'" failed with status:',n,"response text:",o.getResponseText()),n>0){var r=o.getResponseJson().error;if(r&&r.status&&r.message){var s=(u=r.status,c=u.toLowerCase().replace(/_/g,"-"),Object.values(gc).indexOf(c)>=0?c:gc.UNKNOWN);a(new yc(s,r.message))}else a(new yc(gc.UNKNOWN,"Server responded with status "+o.getStatus()))}else a(new yc(gc.UNAVAILABLE,"Connection failed."));break;default:vc()}}finally{lc("Connection",'RPC "'+e+'" completed.')}var u,c});var s=JSON.stringify(r);o.send(t,"POST",s,n,15)})}},{key:"ji",value:function(e,t){var n=[this.Fi,"/","google.firestore.v1.Firestore","/",e,"/channel"],r=Yu(),i=Ju(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(a.xmlHttpFactory=new nc({})),this.Ui(a.initMessageHeaders,t),(0,Ji.uI)()||(0,Ji.b$)()||(0,Ji.d)()||(0,Ji.w1)()||(0,Ji.Mn)()||(0,Ji.ru)()||(a.httpHeadersOverwriteParam="$httpHeaders");var o=n.join("");lc("Connection","Creating WebChannel: "+o,a);var s=r.createWebChannel(o,a),u=!1,c=!1,l=new gp({vi:function(e){c?lc("Connection","Not sending because WebChannel is closed:",e):(u||(lc("Connection","Opening WebChannel transport."),s.open(),u=!0),lc("Connection","WebChannel sending:",e),s.send(e))},Vi:function(){return s.close()}}),h=function(e,t,n){e.listen(t,function(e){try{n(e)}catch(t){setTimeout(function(){throw t},0)}})};return h(s,rc.EventType.OPEN,function(){c||lc("Connection","WebChannel transport opened.")}),h(s,rc.EventType.CLOSE,function(){c||(c=!0,lc("Connection","WebChannel transport closed"),l.$i())}),h(s,rc.EventType.ERROR,function(e){c||(c=!0,fc("Connection","WebChannel transport errored:",e),l.$i(new yc(gc.UNAVAILABLE,"The operation could not be completed")))}),h(s,rc.EventType.MESSAGE,function(e){var t;if(!c){var n=e.data[0];pc(!!n);var r=n,i=r.error||(null===(t=r[0])||void 0===t?void 0:t.error);if(i){lc("Connection","WebChannel received error:",i);var a=i.status,o=function(e){var t=Ah[e];if(void 0!==t)return Fh(t)}(a),u=i.message;void 0===o&&(o=gc.INTERNAL,u="Unknown error status: "+a+" with message "+i.message),c=!0,l.$i(new yc(o,u)),s.close()}else lc("Connection","WebChannel received:",n),l.Oi(n)}}),h(i,ec.STAT_EVENT,function(e){e.stat===tc.PROXY?lc("Connection","Detected buffering proxy"):e.stat===tc.NOPROXY&&lc("Connection","Detected no buffering proxy")}),setTimeout(function(){l.ki()},0),l}}]),n}(function(){function e(t){f(this,e),this.databaseInfo=t,this.databaseId=t.databaseId,this.Fi=(t.ssl?"https":"http")+"://"+t.host,this.Mi="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return h(e,[{key:"Li",value:function(e,t,n,r){var i=this.Bi(e,t);lc("RestConnection","Sending: ",i,n);var a={};return this.Ui(a,r),this.qi(e,i,a,n).then(function(e){return lc("RestConnection","Received: ",e),e},function(t){throw fc("RestConnection","".concat(e," failed with error: "),t,"url: ",i,"request:",n),t})}},{key:"Ki",value:function(e,t,n,r){return this.Li(e,t,n,r)}},{key:"Ui",value:function(e,t){if(e["X-Goog-Api-Client"]="gl-js/ fire/"+sc,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t)for(var n in t.authHeaders)t.authHeaders.hasOwnProperty(n)&&(e[n]=t.authHeaders[n])}},{key:"Bi",value:function(e,t){return"".concat(this.Fi,"/v1/").concat(t,":").concat(mp[e])}}]),e}());function kp(){return"undefined"!=typeof window?window:null}function wp(){return"undefined"!=typeof document?document:null}function bp(e){return new lf(e,!0)}var _p=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;f(this,e),this.Oe=t,this.timerId=n,this.Qi=r,this.Wi=i,this.Gi=a,this.zi=0,this.Hi=null,this.Ji=Date.now(),this.reset()}return h(e,[{key:"reset",value:function(){this.zi=0}},{key:"Yi",value:function(){this.zi=this.Gi}},{key:"Xi",value:function(e){var t=this;this.cancel();var n=Math.floor(this.zi+this.Zi()),r=Math.max(0,Date.now()-this.Ji),i=Math.max(0,n-r);i>0&&lc("ExponentialBackoff","Backing off for ".concat(i," ms (base delay: ").concat(this.zi," ms, delay with jitter: ").concat(n," ms, last attempt: ").concat(r," ms ago)")),this.Hi=this.Oe.enqueueAfterDelay(this.timerId,i,function(){return t.Ji=Date.now(),e()}),this.zi*=this.Wi,this.zi<this.Qi&&(this.zi=this.Qi),this.zi>this.Gi&&(this.zi=this.Gi)}},{key:"tr",value:function(){null!==this.Hi&&(this.Hi.skipDelay(),this.Hi=null)}},{key:"cancel",value:function(){null!==this.Hi&&(this.Hi.cancel(),this.Hi=null)}},{key:"Zi",value:function(){return(Math.random()-.5)*this.zi}}]),e}(),xp=function(){function e(t,n,r,i,a,o){f(this,e),this.Oe=t,this.er=r,this.nr=i,this.credentialsProvider=a,this.listener=o,this.state=0,this.sr=0,this.ir=null,this.stream=null,this.rr=new _p(t,n)}return h(e,[{key:"ar",value:function(){return 1===this.state||2===this.state||4===this.state}},{key:"cr",value:function(){return 2===this.state}},{key:"start",value:function(){3!==this.state?this.auth():this.ur()}},{key:"stop",value:function(){var e=this;return(0,Ki.Z)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=e.ar(),!t.t0){t.next=4;break}return t.next=4,e.close(0);case 4:case"end":return t.stop()}},t)}))()}},{key:"hr",value:function(){this.state=0,this.rr.reset()}},{key:"lr",value:function(){var e=this;this.cr()&&null===this.ir&&(this.ir=this.Oe.enqueueAfterDelay(this.er,6e4,function(){return e.dr()}))}},{key:"wr",value:function(e){this._r(),this.stream.send(e)}},{key:"dr",value:function(){var e=this;return(0,Ki.Z)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.cr()){t.next=2;break}return t.abrupt("return",e.close(0));case 2:case"end":return t.stop()}},t)}))()}},{key:"_r",value:function(){this.ir&&(this.ir.cancel(),this.ir=null)}},{key:"close",value:function(e,t){var n=this;return(0,Ki.Z)(regeneratorRuntime.mark(function r(){return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return n._r(),n.rr.cancel(),n.sr++,3!==e?n.rr.reset():t&&t.code===gc.RESOURCE_EXHAUSTED?(hc(t.toString()),hc("Using maximum backoff delay to prevent overloading the backend."),n.rr.Yi()):t&&t.code===gc.UNAUTHENTICATED&&n.credentialsProvider.invalidateToken(),null!==n.stream&&(n.mr(),n.stream.close(),n.stream=null),n.state=e,r.next=8,n.listener.Ci(t);case 8:case"end":return r.stop()}},r)}))()}},{key:"mr",value:function(){}},{key:"auth",value:function(){var e=this;this.state=1;var t=this.gr(this.sr),n=this.sr;this.credentialsProvider.getToken().then(function(t){e.sr===n&&e.yr(t)},function(n){t(function(){var t=new yc(gc.UNKNOWN,"Fetching auth token failed: "+n.message);return e.pr(t)})})}},{key:"yr",value:function(e){var t=this,n=this.gr(this.sr);this.stream=this.Tr(e),this.stream.Si(function(){n(function(){return t.state=2,t.listener.Si()})}),this.stream.Ci(function(e){n(function(){return t.pr(e)})}),this.stream.onMessage(function(e){n(function(){return t.onMessage(e)})})}},{key:"ur",value:function(){var e=this;this.state=4,this.rr.Xi((0,Ki.Z)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e.state=0,e.start();case 1:case"end":return t.stop()}},t)})))}},{key:"pr",value:function(e){return lc("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(3,e)}},{key:"gr",value:function(e){var t=this;return function(n){t.Oe.enqueueAndForget(function(){return t.sr===e?n():(lc("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())})}}}]),e}(),Tp=function(e){d(n,e);var t=v(n);function n(e,r,i,a,o){var s;return f(this,n),(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle",r,i,o)).N=a,s}return h(n,[{key:"Tr",value:function(e){return this.nr.ji("Listen",e)}},{key:"onMessage",value:function(e){this.rr.reset();var t=function(e,t){var n,r;if("targetChange"in t){var i="NO_CHANGE"===(r=t.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===r?1:"REMOVE"===r?2:"CURRENT"===r?3:"RESET"===r?4:vc(),a=t.targetChange.targetIds||[],o=function(e,t){return e.D?(pc(void 0===t||"string"==typeof t),Bc.fromBase64String(t||"")):(pc(void 0===t||t instanceof Uint8Array),Bc.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),s=t.targetChange.cause,u=s&&function(e){var t=void 0===e.code?gc.UNKNOWN:Fh(e.code);return new yc(t,e.message||"")}(s);n=new nf(i,a,o,u||null)}else if("documentChange"in t){var c=t.documentChange,l=yf(e,c.document.name),h=vf(c.document.updateTime),f=new vl({mapValue:{fields:c.document.fields}}),d=ml.newFoundDocument(l,h,f);n=new ef(c.targetIds||[],c.removedTargetIds||[],d.key,d)}else if("documentDelete"in t){var v=t.documentDelete,p=yf(e,v.document),m=v.readTime?vf(v.readTime):Dc.min(),g=ml.newNoDocument(p,m);n=new ef([],v.removedTargetIds||[],g.key,g)}else if("documentRemove"in t){var y=t.documentRemove,k=yf(e,y.document);n=new ef([],y.removedTargetIds||[],k,null)}else{if(!("filter"in t))return vc();var w=t.filter,b=new Ph(w.count||0);n=new tf(w.targetId,b)}return n}(this.N,e),n=function(e){if(!("targetChange"in e))return Dc.min();var t=e.targetChange;return t.targetIds&&t.targetIds.length?Dc.min():t.readTime?vf(t.readTime):Dc.min()}(e);return this.listener.Er(t,n)}},{key:"Ir",value:function(e){var t,n,r,i,a={};a.database=bf(this.N),a.addTarget=(t=this.N,i=(n=e).target,(r=bl(i)?{documents:Ef(t,i)}:{query:Rf(t,i)}).targetId=n.targetId,n.resumeToken.approximateByteSize()>0?r.resumeToken=ff(t,n.resumeToken):n.snapshotVersion.compareTo(Dc.min())>0&&(r.readTime=hf(t,n.snapshotVersion.toTimestamp())),r);var o=function(e,t){var n=function(e,t){switch(t){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return vc()}}(0,t.purpose);return null==n?null:{"goog-listen-tags":n}}(0,e);o&&(a.labels=o),this.wr(a)}},{key:"Ar",value:function(e){var t={};t.database=bf(this.N),t.removeTarget=e,this.wr(t)}}]),n}(xp),Ip=function(e){d(n,e);var t=v(n);function n(e,r,i,a,o){var s;return f(this,n),(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle",r,i,o)).N=a,s.Rr=!1,s}return h(n,[{key:"br",get:function(){return this.Rr}},{key:"start",value:function(){this.Rr=!1,this.lastStreamToken=void 0,i(b(n.prototype),"start",this).call(this)}},{key:"mr",value:function(){this.Rr&&this.Pr([])}},{key:"Tr",value:function(e){return this.nr.ji("Write",e)}},{key:"onMessage",value:function(e){if(pc(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Rr){this.rr.reset();var t=function(e,t){return e&&e.length>0?(pc(void 0!==t),e.map(function(e){return function(e,t){var n=vf(e.updateTime?e.updateTime:t);return n.isEqual(Dc.min())&&(n=vf(t)),new mh(n,e.transformResults||[])}(e,t)})):[]}(e.writeResults,e.commitTime),n=vf(e.commitTime);return this.listener.vr(n,t)}return pc(!e.writeResults||0===e.writeResults.length),this.Rr=!0,this.listener.Vr()}},{key:"Sr",value:function(){var e={};e.database=bf(this.N),this.wr(e)}},{key:"Pr",value:function(e){var t=this,n={streamToken:this.lastStreamToken,writes:e.map(function(e){return If(t.N,e)})};this.wr(n)}}]),n}(xp),Sp=function(e){d(n,e);var t=v(n);function n(e,r,i){var a;return f(this,n),(a=t.call(this)).credentials=e,a.nr=r,a.N=i,a.Dr=!1,a}return h(n,[{key:"Cr",value:function(){if(this.Dr)throw new yc(gc.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"Li",value:function(e,t,n){var r=this;return this.Cr(),this.credentials.getToken().then(function(i){return r.nr.Li(e,t,n,i)}).catch(function(e){throw"FirebaseError"===e.name?(e.code===gc.UNAUTHENTICATED&&r.credentials.invalidateToken(),e):new yc(gc.UNKNOWN,e.toString())})}},{key:"Ki",value:function(e,t,n){var r=this;return this.Cr(),this.credentials.getToken().then(function(i){return r.nr.Ki(e,t,n,i)}).catch(function(e){throw"FirebaseError"===e.name?(e.code===gc.UNAUTHENTICATED&&r.credentials.invalidateToken(),e):new yc(gc.UNKNOWN,e.toString())})}},{key:"terminate",value:function(){this.Dr=!0}}]),n}(function(){return function e(){f(this,e)}}()),Ep=function(){function e(t,n){f(this,e),this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.Nr=0,this.kr=null,this.$r=!0}return h(e,[{key:"Or",value:function(){var e=this;0===this.Nr&&(this.Fr("Unknown"),this.kr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,function(){return e.kr=null,e.Mr("Backend didn't respond within 10 seconds."),e.Fr("Offline"),Promise.resolve()}))}},{key:"Lr",value:function(e){"Online"===this.state?this.Fr("Unknown"):(this.Nr++,this.Nr>=1&&(this.Br(),this.Mr("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.Fr("Offline")))}},{key:"set",value:function(e){this.Br(),this.Nr=0,"Online"===e&&(this.$r=!1),this.Fr(e)}},{key:"Fr",value:function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}},{key:"Mr",value:function(e){var t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.$r?(hc(t),this.$r=!1):lc("OnlineStateTracker",t)}},{key:"Br",value:function(){null!==this.kr&&(this.kr.cancel(),this.kr=null)}}]),e}(),Rp=function e(t,n,r,i,a){f(this,e);var o=this;this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ur=[],this.qr=new Map,this.Kr=new Set,this.jr=[],this.Qr=a,this.Qr.Ti(function(e){r.enqueueAndForget((0,Ki.Z)(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=jp(o),!e.t0){e.next=5;break}return lc("RemoteStore","Restarting streams for network reachability change."),e.next=5,(t=(0,Ki.Z)(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(n=mc(t)).Kr.add(4),e.next=4,Np(n);case 4:return n.Wr.set("Unknown"),n.Kr.delete(4),e.next=8,Cp(n);case 8:case"end":return e.stop()}},e)})),function(e){return t.apply(this,arguments)})(o);case 5:case"end":return e.stop()}},e)})))}),this.Wr=new Ep(r,i)};function Cp(e){return Ap.apply(this,arguments)}function Ap(){return(Ap=(0,Ki.Z)(regeneratorRuntime.mark(function e(t){var n,r,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!jp(t)){e.next=18;break}n=s(t.jr),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=10;break}return i=r.value,e.next=8,i(!0);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}},e,null,[[2,12,15,18]])}))).apply(this,arguments)}function Np(e){return Op.apply(this,arguments)}function Op(){return(Op=(0,Ki.Z)(regeneratorRuntime.mark(function e(t){var n,r,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=s(t.jr),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=9;break}return i=r.value,e.next=7,i(!1);case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),n.e(e.t0);case 14:return e.prev=14,n.f(),e.finish(14);case 17:case"end":return e.stop()}},e,null,[[1,11,14,17]])}))).apply(this,arguments)}function Dp(e,t){var n=mc(e);n.qr.has(t.targetId)||(n.qr.set(t.targetId,t),Up(n)?Mp(n):fm(n).cr()&&Lp(n,t))}function Pp(e,t){var n=mc(e),r=fm(n);n.qr.delete(t),r.cr()&&Fp(n,t),0===n.qr.size&&(r.cr()?r.lr():jp(n)&&n.Wr.set("Unknown"))}function Lp(e,t){e.Gr.Y(t.targetId),fm(e).Ir(t)}function Fp(e,t){e.Gr.Y(t),fm(e).Ar(t)}function Mp(e){e.Gr=new af({getRemoteKeysForTarget:function(t){return e.remoteSyncer.getRemoteKeysForTarget(t)},Tt:function(t){return e.qr.get(t)||null}}),fm(e).start(),e.Wr.Or()}function Up(e){return jp(e)&&!fm(e).ar()&&e.qr.size>0}function jp(e){return 0===mc(e).Kr.size}function Vp(e){e.Gr=void 0}function qp(e){return Bp.apply(this,arguments)}function Bp(){return(Bp=(0,Ki.Z)(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.qr.forEach(function(e,n){Lp(t,e)});case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function zp(e,t){return Zp.apply(this,arguments)}function Zp(){return(Zp=(0,Ki.Z)(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:Vp(t),Up(t)?(t.Wr.Lr(n),Mp(t)):t.Wr.set("Unknown");case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Hp(e,t,n){return Gp.apply(this,arguments)}function Gp(){return(Gp=(0,Ki.Z)(regeneratorRuntime.mark(function e(t,n,r){var i,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.Wr.set("Online"),!(n instanceof nf&&2===n.state&&n.cause)){e.next=13;break}return e.prev=1,e.next=4,(a=(0,Ki.Z)(regeneratorRuntime.mark(function e(t,n){var r,i,a,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=n.cause,i=s(n.targetIds),e.prev=2,i.s();case 4:if((a=i.n()).done){e.next=14;break}if(o=a.value,e.t0=t.qr.has(o),!e.t0){e.next=12;break}return e.next=10,t.remoteSyncer.rejectListen(o,r);case 10:t.qr.delete(o),t.Gr.removeTarget(o);case 12:e.next=4;break;case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(2),i.e(e.t1);case 19:return e.prev=19,i.f(),e.finish(19);case 22:case"end":return e.stop()}},e,null,[[2,16,19,22]])})),function(e,t){return a.apply(this,arguments)})(t,n);case 4:e.next=11;break;case 6:return e.prev=6,e.t0=e.catch(1),lc("RemoteStore","Failed to remove targets %s: %s ",n.targetIds.join(","),e.t0),e.next=11,Kp(t,e.t0);case 11:e.next=29;break;case 13:if(n instanceof ef?t.Gr.rt(n):n instanceof tf?t.Gr.ft(n):t.Gr.ct(n),r.isEqual(Dc.min())){e.next=29;break}return e.prev=14,e.next=17,Pv(t.localStore);case 17:if(i=e.sent,e.t1=r.compareTo(i)>=0,!e.t1){e.next=22;break}return e.next=22,function(e,t){var n=e.Gr._t(t);return n.targetChanges.forEach(function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=e.qr.get(r);i&&e.qr.set(r,i.withResumeToken(n.resumeToken,t))}}),n.targetMismatches.forEach(function(t){var n=e.qr.get(t);if(n){e.qr.set(t,n.withResumeToken(Bc.EMPTY_BYTE_STRING,n.snapshotVersion)),Fp(e,t);var r=new Td(n.target,t,1,n.sequenceNumber);Lp(e,r)}}),e.remoteSyncer.applyRemoteEvent(n)}(t,r);case 22:e.next=29;break;case 24:return e.prev=24,e.t2=e.catch(14),lc("RemoteStore","Failed to raise snapshot:",e.t2),e.next=29,Kp(t,e.t2);case 29:case"end":return e.stop()}},e,null,[[1,6],[14,24]])}))).apply(this,arguments)}function Kp(e,t,n){return Wp.apply(this,arguments)}function Wp(){return(Wp=(0,Ki.Z)(regeneratorRuntime.mark(function e(t,n,r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(pd(n)){e.next=2;break}throw n;case 2:return t.Kr.add(1),e.next=5,Np(t);case 5:t.Wr.set("Offline"),r||(r=function(){return Pv(t.localStore)}),t.asyncQueue.enqueueRetryable((0,Ki.Z)(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return lc("RemoteStore","Retrying IndexedDB access"),e.next=3,r();case 3:return t.Kr.delete(1),e.next=6,Cp(t);case 6:case"end":return e.stop()}},e)})));case 8:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Qp(e,t){return t().catch(function(n){return Kp(e,n,t)})}function Yp(e){return Jp.apply(this,arguments)}function Jp(){return(Jp=(0,Ki.Z)(regeneratorRuntime.mark(function e(t){var n,r,i,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=mc(t),r=dm(n),i=n.Ur.length>0?n.Ur[n.Ur.length-1].batchId:-1;case 2:if(!$p(n)){e.next=19;break}return e.prev=3,e.next=6,Mv(n.localStore,i);case 6:if(null!==(a=e.sent)){e.next=10;break}return 0===n.Ur.length&&r.lr(),e.abrupt("break",19);case 10:i=a.batchId,Xp(n,a),e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(3),e.next=17,Kp(n,e.t0);case 17:e.next=2;break;case 19:em(n)&&tm(n);case 20:case"end":return e.stop()}},e,null,[[3,13]])}))).apply(this,arguments)}function $p(e){return jp(e)&&e.Ur.length<10}function Xp(e,t){e.Ur.push(t);var n=dm(e);n.cr()&&n.br&&n.Pr(t.mutations)}function em(e){return jp(e)&&!dm(e).ar()&&e.Ur.length>0}function tm(e){dm(e).start()}function nm(e){return rm.apply(this,arguments)}function rm(){return(rm=(0,Ki.Z)(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:dm(t).Sr();case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function im(e){return am.apply(this,arguments)}function am(){return(am=(0,Ki.Z)(regeneratorRuntime.mark(function e(t){var n,r,i,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=dm(t),r=s(t.Ur);try{for(r.s();!(i=r.n()).done;)a=i.value,n.Pr(a.mutations)}catch(o){r.e(o)}finally{r.f()}case 3:case"end":return e.stop()}},e)}))).apply(this,arguments)}function om(e,t,n){return sm.apply(this,arguments)}function sm(){return(sm=(0,Ki.Z)(regeneratorRuntime.mark(function e(t,n,r){var i,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.Ur.shift(),a=xd.from(i,n,r),e.next=3,Qp(t,function(){return t.remoteSyncer.applySuccessfulWrite(a)});case 3:return e.next=5,Yp(t);case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}function um(e,t){return cm.apply(this,arguments)}function cm(){return(cm=(0,Ki.Z)(regeneratorRuntime.mark(function e(t,n){var r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=n&&dm(t).br,!e.t0){e.next=4;break}return e.next=4,(r=(0,Ki.Z)(regeneratorRuntime.mark(function e(t,n){var r,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!Lh(i=n.code)||i===gc.ABORTED){e.next=7;break}return r=t.Ur.shift(),dm(t).hr(),e.next=5,Qp(t,function(){return t.remoteSyncer.rejectFailedWrite(r.batchId,n)});case 5:return e.next=7,Yp(t);case 7:case"end":return e.stop()}},e)})),function(e,t){return r.apply(this,arguments)})(t,n);case 4:em(t)&&tm(t);case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}function lm(e,t){return hm.apply(this,arguments)}function hm(){return(hm=(0,Ki.Z)(regeneratorRuntime.mark(function e(t,n){var r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=mc(t),!n){e.next=7;break}return r.Kr.delete(2),e.next=5,Cp(r);case 5:e.next=13;break;case 7:if(e.t0=n,e.t0){e.next=13;break}return r.Kr.add(2),e.next=12,Np(r);case 12:r.Wr.set("Unknown");case 13:case"end":return e.stop()}},e)}))).apply(this,arguments)}function fm(e){return e.zr||(e.zr=(t=e.datastore,n=e.asyncQueue,r={Si:qp.bind(null,e),Ci:zp.bind(null,e),Er:Hp.bind(null,e)},(i=mc(t)).Cr(),new Tp(n,i.nr,i.credentials,i.N,r)),e.jr.push(function(){var t=(0,Ki.Z)(regeneratorRuntime.mark(function t(n){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=4;break}e.zr.hr(),Up(e)?Mp(e):e.Wr.set("Unknown"),t.next=7;break;case 4:return t.next=6,e.zr.stop();case 6:Vp(e);case 7:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}())),e.zr;var t,n,r,i}function dm(e){return e.Hr||(e.Hr=(t=e.datastore,n=e.asyncQueue,r={Si:nm.bind(null,e),Ci:um.bind(null,e),Vr:im.bind(null,e),vr:om.bind(null,e)},(i=mc(t)).Cr(),new Ip(n,i.nr,i.credentials,i.N,r)),e.jr.push(function(){var t=(0,Ki.Z)(regeneratorRuntime.mark(function t(n){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=6;break}return e.Hr.hr(),t.next=4,Yp(e);case 4:t.next=9;break;case 6:return t.next=8,e.Hr.stop();case 8:e.Ur.length>0&&(lc("RemoteStore","Stopping write stream with ".concat(e.Ur.length," pending writes")),e.Ur=[]);case 9:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}())),e.Hr;var t,n,r,i}var vm=function(){function e(t,n,r,i,a){f(this,e),this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new kc,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(function(e){})}return h(e,[{key:"start",value:function(e){var t=this;this.timerHandle=setTimeout(function(){return t.handleDelayElapsed()},e)}},{key:"skipDelay",value:function(){return this.handleDelayElapsed()}},{key:"cancel",value:function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new yc(gc.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}},{key:"handleDelayElapsed",value:function(){var e=this;this.asyncQueue.enqueueAndForget(function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then(function(t){return e.deferred.resolve(t)})):Promise.resolve()})}},{key:"clearTimeout",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)})}],[{key:"createAndSchedule",value:function(t,n,r,i,a){var o=new e(t,n,Date.now()+r,i,a);return o.start(r),o}}]),e}();function pm(e,t){if(hc("AsyncQueue","".concat(t,": ").concat(e)),pd(e))return new yc(gc.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}var mm=function(){function e(t){f(this,e),this.comparator=t?function(e,n){return t(e,n)||Xc.comparator(e.key,n.key)}:function(e,t){return Xc.comparator(e.key,t.key)},this.keyedMap=Hh(),this.sortedSet=new Mh(this.comparator)}return h(e,[{key:"has",value:function(e){return null!=this.keyedMap.get(e)}},{key:"get",value:function(e){return this.keyedMap.get(e)}},{key:"first",value:function(){return this.sortedSet.minKey()}},{key:"last",value:function(){return this.sortedSet.maxKey()}},{key:"isEmpty",value:function(){return this.sortedSet.isEmpty()}},{key:"indexOf",value:function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}},{key:"size",get:function(){return this.sortedSet.size}},{key:"forEach",value:function(e){this.sortedSet.inorderTraversal(function(t,n){return e(t),!1})}},{key:"add",value:function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}},{key:"delete",value:function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}},{key:"isEqual",value:function(t){if(!(t instanceof e)||this.size!==t.size)return!1;for(var n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}},{key:"toString",value:function(){var e=[];return this.forEach(function(t){e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}},{key:"copy",value:function(t,n){var r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}],[{key:"emptySet",value:function(t){return new e(t.comparator)}}]),e}(),gm=function(){function e(){f(this,e),this.Jr=new Mh(Xc.comparator)}return h(e,[{key:"track",value:function(e){var t=e.doc.key,n=this.Jr.get(t);n?0!==e.type&&3===n.type?this.Jr=this.Jr.insert(t,e):3===e.type&&1!==n.type?this.Jr=this.Jr.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.Jr=this.Jr.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.Jr=this.Jr.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.Jr=this.Jr.remove(t):1===e.type&&2===n.type?this.Jr=this.Jr.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.Jr=this.Jr.insert(t,{type:2,doc:e.doc}):vc():this.Jr=this.Jr.insert(t,e)}},{key:"Yr",value:function(){var e=[];return this.Jr.inorderTraversal(function(t,n){e.push(n)}),e}}]),e}(),ym=function(){function e(t,n,r,i,a,o,s,u){f(this,e),this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=s,this.excludesMetadataChanges=u}return h(e,[{key:"hasPendingWrites",get:function(){return!this.mutatedKeys.isEmpty()}},{key:"isEqual",value:function(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Wl(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}],[{key:"fromInitialDocuments",value:function(t,n,r,i){var a=[];return n.forEach(function(e){a.push({type:0,doc:e})}),new e(t,n,mm.emptySet(n),a,r,i,!0,!1)}}]),e}(),km=function e(){f(this,e),this.Xr=void 0,this.listeners=[]},wm=function e(){f(this,e),this.queries=new hv(function(e){return Ql(e)},Wl),this.onlineState="Unknown",this.Zr=new Set};function bm(e,t){return _m.apply(this,arguments)}function _m(){return(_m=(0,Ki.Z)(regeneratorRuntime.mark(function e(t,n){var r,i,a,o,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=mc(t),i=n.query,a=!1,(o=r.queries.get(i))||(a=!0,o=new km),!a){e.next=13;break}return e.prev=3,e.next=6,r.onListen(i);case 6:o.Xr=e.sent,e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(3),s=pm(e.t0,"Initialization of query '".concat(Yl(n.query),"' failed")),e.abrupt("return",void n.onError(s));case 13:r.queries.set(i,o),o.listeners.push(n),n.eo(r.onlineState),o.Xr&&n.no(o.Xr)&&Em(r);case 14:case"end":return e.stop()}},e,null,[[3,9]])}))).apply(this,arguments)}function xm(e,t){return Tm.apply(this,arguments)}function Tm(){return(Tm=(0,Ki.Z)(regeneratorRuntime.mark(function e(t,n){var r,i,a,o,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=mc(t),i=n.query,a=!1,(o=r.queries.get(i))&&(s=o.listeners.indexOf(n))>=0&&(o.listeners.splice(s,1),a=0===o.listeners.length),!a){e.next=6;break}return e.abrupt("return",(r.queries.delete(i),r.onUnlisten(i)));case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Im(e,t){var n,r=mc(e),i=!1,a=s(t);try{for(a.s();!(n=a.n()).done;){var o=n.value,u=r.queries.get(o.query);if(u){var c,l=s(u.listeners);try{for(l.s();!(c=l.n()).done;){c.value.no(o)&&(i=!0)}}catch(h){l.e(h)}finally{l.f()}u.Xr=o}}}catch(h){a.e(h)}finally{a.f()}i&&Em(r)}function Sm(e,t,n){var r=mc(e),i=r.queries.get(t);if(i){var a,o=s(i.listeners);try{for(o.s();!(a=o.n()).done;){a.value.onError(n)}}catch(u){o.e(u)}finally{o.f()}}r.queries.delete(t)}function Em(e){e.Zr.forEach(function(e){e.next()})}var Rm=function(){function e(t,n,r){f(this,e),this.query=t,this.so=n,this.io=!1,this.ro=null,this.onlineState="Unknown",this.options=r||{}}return h(e,[{key:"no",value:function(e){if(!this.options.includeMetadataChanges){var t,n=[],r=s(e.docChanges);try{for(r.s();!(t=r.n()).done;){var i=t.value;3!==i.type&&n.push(i)}}catch(o){r.e(o)}finally{r.f()}e=new ym(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}var a=!1;return this.io?this.oo(e)&&(this.so.next(e),a=!0):this.ao(e,this.onlineState)&&(this.co(e),a=!0),this.ro=e,a}},{key:"onError",value:function(e){this.so.error(e)}},{key:"eo",value:function(e){this.onlineState=e;var t=!1;return this.ro&&!this.io&&this.ao(this.ro,e)&&(this.co(this.ro),t=!0),t}},{key:"ao",value:function(e,t){return!e.fromCache||!(this.options.uo&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}},{key:"oo",value:function(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.ro&&this.ro.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}},{key:"co",value:function(e){e=ym.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.io=!0,this.so.next(e)}}]),e}(),Cm=function(){function e(t,n){f(this,e),this.payload=t,this.byteLength=n}return h(e,[{key:"ho",value:function(){return"metadata"in this.payload}}]),e}(),Am=function(){function e(t){f(this,e),this.N=t}return h(e,[{key:"zn",value:function(e){return yf(this.N,e)}},{key:"Hn",value:function(e){return e.metadata.exists?Tf(this.N,e.document,!1):ml.newNoDocument(this.zn(e.metadata.name),this.Jn(e.metadata.readTime))}},{key:"Jn",value:function(e){return vf(e)}}]),e}(),Nm=function(){function e(t,n,r){f(this,e),this.lo=t,this.localStore=n,this.N=r,this.queries=[],this.documents=[],this.progress=Om(t)}return h(e,[{key:"fo",value:function(e){this.progress.bytesLoaded+=e.byteLength;var t=this.progress.documentsLoaded;return e.payload.namedQuery?this.queries.push(e.payload.namedQuery):e.payload.documentMetadata?(this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t):e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t),t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}},{key:"wo",value:function(e){var t,n=new Map,r=new Am(this.N),i=s(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;if(a.metadata.queries){var o,u=r.zn(a.metadata.name),c=s(a.metadata.queries);try{for(c.s();!(o=c.n()).done;){var l=o.value,h=(n.get(l)||Qh()).add(u);n.set(l,h)}}catch(f){c.e(f)}finally{c.f()}}}}catch(f){i.e(f)}finally{i.f()}return n}},{key:"complete",value:function(){var e=this;return(0,Ki.Z)(regeneratorRuntime.mark(function t(){var n,r,i,a,o;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,function(e,t,n,r){return Hv.apply(this,arguments)}(e.localStore,new Am(e.N),e.documents,e.lo.id);case 2:n=t.sent,r=e.wo(e.documents),i=s(e.queries),t.prev=5,i.s();case 7:if((a=i.n()).done){t.next=13;break}return o=a.value,t.next=11,Gv(e.localStore,o,r.get(o.name));case 11:t.next=7;break;case 13:t.next=18;break;case 15:t.prev=15,t.t0=t.catch(5),i.e(t.t0);case 18:return t.prev=18,i.f(),t.finish(18);case 21:return t.abrupt("return",(e.progress.taskState="Success",new Iv(Object.assign({},e.progress),n)));case 22:case"end":return t.stop()}},t,null,[[5,15,18,21]])}))()}}]),e}();function Om(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}var Dm=function e(t){f(this,e),this.key=t},Pm=function e(t){f(this,e),this.key=t},Lm=function(){function e(t,n){f(this,e),this.query=t,this._o=n,this.mo=null,this.current=!1,this.yo=Qh(),this.mutatedKeys=Qh(),this.po=$l(t),this.To=new mm(this.po)}return h(e,[{key:"Eo",get:function(){return this._o}},{key:"Io",value:function(e,t){var n=this,r=t?t.Ao:new gm,i=t?t.To:this.To,a=t?t.mutatedKeys:this.mutatedKeys,o=i,s=!1,u=Vl(this.query)&&i.size===this.query.limit?i.last():null,c=ql(this.query)&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal(function(e,t){var l=i.get(e),h=Jl(n.query,t)?t:null,f=!!l&&n.mutatedKeys.has(l.key),d=!!h&&(h.hasLocalMutations||n.mutatedKeys.has(h.key)&&h.hasCommittedMutations),v=!1;l&&h?l.data.isEqual(h.data)?f!==d&&(r.track({type:3,doc:h}),v=!0):n.Ro(l,h)||(r.track({type:2,doc:h}),v=!0,(u&&n.po(h,u)>0||c&&n.po(h,c)<0)&&(s=!0)):!l&&h?(r.track({type:0,doc:h}),v=!0):l&&!h&&(r.track({type:1,doc:l}),v=!0,(u||c)&&(s=!0)),v&&(h?(o=o.add(h),a=d?a.add(e):a.delete(e)):(o=o.delete(e),a=a.delete(e)))}),Vl(this.query)||ql(this.query))for(;o.size>this.query.limit;){var l=Vl(this.query)?o.last():o.first();o=o.delete(l.key),a=a.delete(l.key),r.track({type:1,doc:l})}return{To:o,Ao:r,Ln:s,mutatedKeys:a}}},{key:"Ro",value:function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}},{key:"applyChanges",value:function(e,t,n){var r=this,i=this.To;this.To=e.To,this.mutatedKeys=e.mutatedKeys;var a=e.Ao.Yr();a.sort(function(e,t){return n=e.type,i=t.type,(a=function(e){switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return vc()}})(n)-a(i)||r.po(e.doc,t.doc);var n,i,a}),this.bo(n);var o=t?this.Po():[],s=0===this.yo.size&&this.current?1:0,u=s!==this.mo;return this.mo=s,0!==a.length||u?{snapshot:new ym(this.query,e.To,i,a,e.mutatedKeys,0===s,u,!1),vo:o}:{vo:o}}},{key:"eo",value:function(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({To:this.To,Ao:new gm,mutatedKeys:this.mutatedKeys,Ln:!1},!1)):{vo:[]}}},{key:"Vo",value:function(e){return!this._o.has(e)&&!!this.To.has(e)&&!this.To.get(e).hasLocalMutations}},{key:"bo",value:function(e){var t=this;e&&(e.addedDocuments.forEach(function(e){return t._o=t._o.add(e)}),e.modifiedDocuments.forEach(function(e){}),e.removedDocuments.forEach(function(e){return t._o=t._o.delete(e)}),this.current=e.current)}},{key:"Po",value:function(){var e=this;if(!this.current)return[];var t=this.yo;this.yo=Qh(),this.To.forEach(function(t){e.Vo(t.key)&&(e.yo=e.yo.add(t.key))});var n=[];return t.forEach(function(t){e.yo.has(t)||n.push(new Pm(t))}),this.yo.forEach(function(e){t.has(e)||n.push(new Dm(e))}),n}},{key:"So",value:function(e){this._o=e.Gn,this.yo=Qh();var t=this.Io(e.documents);return this.applyChanges(t,!0)}},{key:"Do",value:function(){return ym.fromInitialDocuments(this.query,this.To,this.mutatedKeys,0===this.mo)}}]),e}(),Fm=function e(t,n,r){f(this,e),this.query=t,this.targetId=n,this.view=r},Mm=function e(t){f(this,e),this.key=t,this.Co=!1},Um=function(){function e(t,n,r,i,a,o){f(this,e),this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.No={},this.xo=new hv(function(e){return Ql(e)},Wl),this.ko=new Map,this.$o=new Set,this.Oo=new Mh(Xc.comparator),this.Fo=new Map,this.Mo=new Qv,this.Lo={},this.Bo=new Map,this.Uo=$d.ie(),this.onlineState="Unknown",this.qo=void 0}return h(e,[{key:"isPrimaryClient",get:function(){return!0===this.qo}}]),e}();function jm(e,t){return Vm.apply(this,arguments)}function Vm(){return(Vm=(0,Ki.Z)(regeneratorRuntime.mark(function e(t,n){var r,i,a,o,s,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Cg(t),!(o=r.xo.get(n))){e.next=6;break}i=o.targetId,r.sharedClientState.addLocalQueryTarget(i),a=o.view.Do(),e.next=15;break;case 6:return e.next=8,Uv(r.localStore,Gl(n));case 8:return s=e.sent,u=r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.targetId,e.next=13,qm(r,n,i,"current"===u);case 13:a=e.sent,r.isPrimaryClient&&Dp(r.remoteStore,s);case 15:return e.abrupt("return",a);case 16:case"end":return e.stop()}},e)}))).apply(this,arguments)}function qm(e,t,n,r){return Bm.apply(this,arguments)}function Bm(){return(Bm=(0,Ki.Z)(regeneratorRuntime.mark(function e(t,n,r,i){var a,o,s,u,c,l;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.Ko=function(e,n,r){return(i=(0,Ki.Z)(regeneratorRuntime.mark(function e(t,n,r,i){var a,o,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.view.Io(r),e.t0=a.Ln,!e.t0){e.next=6;break}return e.next=5,qv(t.localStore,n.query,!1).then(function(e){var t=e.documents;return n.view.Io(t,a)});case 5:a=e.sent;case 6:return o=i&&i.targetChanges.get(n.targetId),s=n.view.applyChanges(a,t.isPrimaryClient,o),e.abrupt("return",(og(t,n.targetId,s.vo),s.snapshot));case 8:case"end":return e.stop()}},e)})),function(e,t,n,r){return i.apply(this,arguments)})(t,e,n,r);var i},e.next=3,qv(t.localStore,n,!0);case 3:return a=e.sent,o=new Lm(n,a.Gn),s=o.Io(a.documents),u=Xh.createSynthesizedTargetChangeForCurrentChange(r,i&&"Offline"!==t.onlineState),c=o.applyChanges(s,t.isPrimaryClient,u),og(t,r,c.vo),l=new Fm(n,r,o),e.abrupt("return",(t.xo.set(n,l),t.ko.has(r)?t.ko.get(r).push(n):t.ko.set(r,[n]),c.snapshot));case 11:case"end":return e.stop()}},e)}))).apply(this,arguments)}function zm(e,t){return Zm.apply(this,arguments)}function Zm(){return(Zm=(0,Ki.Z)(regeneratorRuntime.mark(function e(t,n){var r,i,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=mc(t),i=r.xo.get(n),!((a=r.ko.get(i.targetId)).length>1)){e.next=3;break}return e.abrupt("return",(r.ko.set(i.targetId,a.filter(function(e){return!Wl(e,n)})),void r.xo.delete(n)));case 3:if(!r.isPrimaryClient){e.next=11;break}if(r.sharedClientState.removeLocalQueryTarget(i.targetId),e.t0=r.sharedClientState.isActiveQueryTarget(i.targetId),e.t0){e.next=9;break}return e.next=9,jv(r.localStore,i.targetId,!1).then(function(){r.sharedClientState.clearQueryState(i.targetId),Pp(r.remoteStore,i.targetId),ig(r,i.targetId)}).catch(rv);case 9:e.next=14;break;case 11:return ig(r,i.targetId),e.next=14,jv(r.localStore,i.targetId,!0);case 14:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Hm(){return(Hm=(0,Ki.Z)(regeneratorRuntime.mark(function e(t,n,r){var i,a,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=Ag(t),e.prev=1,e.next=4,function(e,t){var n,r=mc(e),i=Oc.now(),a=t.reduce(function(e,t){return e.add(t.key)},Qh());return r.persistence.runTransaction("Locally write mutations","readwrite",function(e){return r.Qn.Pn(e,a).next(function(a){n=a;var o,u=[],c=s(t);try{for(c.s();!(o=c.n()).done;){var l=o.value,h=_h(l,n.get(l.key));null!=h&&u.push(new Sh(l.key,h,pl(h.value.mapValue),gh.exists(!0)))}}catch(f){c.e(f)}finally{c.f()}return r.In.addMutationBatch(e,i,u,t)})}).then(function(e){return e.applyToLocalDocumentSet(n),{batchId:e.batchId,changes:n}})}(i.localStore,n);case 4:return a=e.sent,i.sharedClientState.addPendingMutation(a.batchId),function(e,t,n){var r=e.Lo[e.currentUser.toKey()];r||(r=new Mh(Cc)),r=r.insert(t,n),e.Lo[e.currentUser.toKey()]=r}(i,a.batchId,r),e.next=9,cg(i,a.changes);case 9:return e.next=11,Yp(i.remoteStore);case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),o=pm(e.t0,"Failed to persist write"),r.reject(o);case 17:case"end":return e.stop()}},e,null,[[1,13]])}))).apply(this,arguments)}function Gm(e,t){return Km.apply(this,arguments)}function Km(){return(Km=(0,Ki.Z)(regeneratorRuntime.mark(function e(t,n){var r,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=mc(t),e.prev=1,e.next=4,Lv(r.localStore,n);case 4:return i=e.sent,n.targetChanges.forEach(function(e,t){var n=r.Fo.get(t);n&&(pc(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?n.Co=!0:e.modifiedDocuments.size>0?pc(n.Co):e.removedDocuments.size>0&&(pc(n.Co),n.Co=!1))}),e.next=8,cg(r,i,n);case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(1),e.next=14,rv(e.t0);case 14:case"end":return e.stop()}},e,null,[[1,10]])}))).apply(this,arguments)}function Wm(e,t,n){var r=mc(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.xo.forEach(function(e,n){var r=n.view.eo(t);r.snapshot&&i.push(r.snapshot)}),function(e,t){var n=mc(e);n.onlineState=t;var r=!1;n.queries.forEach(function(e,n){var i,a=s(n.listeners);try{for(a.s();!(i=a.n()).done;){i.value.eo(t)&&(r=!0)}}catch(o){a.e(o)}finally{a.f()}}),r&&Em(n)}(r.eventManager,t),i.length&&r.No.Er(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function Qm(e,t,n){return Ym.apply(this,arguments)}function Ym(){return(Ym=(0,Ki.Z)(regeneratorRuntime.mark(function e(t,n,r){var i,a,o,s,u,c;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if((i=mc(t)).sharedClientState.updateQueryState(n,"rejected",r),a=i.Fo.get(n),!(o=a&&a.key)){e.next=14;break}return s=(s=new Mh(Xc.comparator)).insert(o,ml.newNoDocument(o,Dc.min())),u=Qh().add(o),c=new $h(Dc.min(),new Map,new Vh(Cc),s,u),e.next=9,Gm(i,c);case 9:i.Oo=i.Oo.remove(o),i.Fo.delete(n),ug(i),e.next=16;break;case 14:return e.next=16,jv(i.localStore,n,!1).then(function(){return ig(i,n,r)}).catch(rv);case 16:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Jm(e,t){return $m.apply(this,arguments)}function $m(){return($m=(0,Ki.Z)(regeneratorRuntime.mark(function e(t,n){var r,i,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=mc(t),i=n.batch.batchId,e.prev=1,e.next=4,Dv(r.localStore,n);case 4:return a=e.sent,rg(r,i,null),ng(r,i),r.sharedClientState.updateMutationState(i,"acknowledged"),e.next=10,cg(r,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,rv(e.t0);case 16:case"end":return e.stop()}},e,null,[[1,12]])}))).apply(this,arguments)}function Xm(e,t,n){return eg.apply(this,arguments)}function eg(){return(eg=(0,Ki.Z)(regeneratorRuntime.mark(function e(t,n,r){var i,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=mc(t),e.prev=1,e.next=4,function(e,t){var n=mc(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",function(e){var r;return n.In.lookupMutationBatch(e,t).next(function(t){return pc(null!==t),r=t.keys(),n.In.removeMutationBatch(e,t)}).next(function(){return n.In.performConsistencyCheck(e)}).next(function(){return n.Qn.Pn(e,r)})})}(i.localStore,n);case 4:return a=e.sent,rg(i,n,r),ng(i,n),i.sharedClientState.updateMutationState(n,"rejected",r),e.next=10,cg(i,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,rv(e.t0);case 16:case"end":return e.stop()}},e,null,[[1,12]])}))).apply(this,arguments)}function tg(){return(tg=(0,Ki.Z)(regeneratorRuntime.mark(function e(t,n){var r,i,a,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return jp((r=mc(t)).remoteStore)||lc("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),e.prev=2,e.next=5,function(e){var t=mc(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",function(e){return t.In.getHighestUnacknowledgedBatchId(e)})}(r.localStore);case 5:if(-1!==(i=e.sent)){e.next=8;break}return e.abrupt("return",void n.resolve());case 8:(a=r.Bo.get(i)||[]).push(n),r.Bo.set(i,a),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(2),o=pm(e.t0,"Initialization of waitForPendingWrites() operation failed"),n.reject(o);case 16:case"end":return e.stop()}},e,null,[[2,12]])}))).apply(this,arguments)}function ng(e,t){(e.Bo.get(t)||[]).forEach(function(e){e.resolve()}),e.Bo.delete(t)}function rg(e,t,n){var r=mc(e),i=r.Lo[r.currentUser.toKey()];if(i){var a=i.get(t);a&&(n?a.reject(n):a.resolve(),i=i.remove(t)),r.Lo[r.currentUser.toKey()]=i}}function ig(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);var r,i=s(e.ko.get(t));try{for(i.s();!(r=i.n()).done;){var a=r.value;e.xo.delete(a),n&&e.No.jo(a,n)}}catch(o){i.e(o)}finally{i.f()}e.ko.delete(t),e.isPrimaryClient&&e.Mo.cs(t).forEach(function(t){e.Mo.containsKey(t)||ag(e,t)})}function ag(e,t){e.$o.delete(t.path.canonicalString());var n=e.Oo.get(t);null!==n&&(Pp(e.remoteStore,n),e.Oo=e.Oo.remove(t),e.Fo.delete(n),ug(e))}function og(e,t,n){var r,i=s(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;a instanceof Dm?(e.Mo.addReference(a.key,t),sg(e,a)):a instanceof Pm?(lc("SyncEngine","Document no longer in limbo: "+a.key),e.Mo.removeReference(a.key,t),e.Mo.containsKey(a.key)||ag(e,a.key)):vc()}}catch(o){i.e(o)}finally{i.f()}}function sg(e,t){var n=t.key,r=n.path.canonicalString();e.Oo.get(n)||e.$o.has(r)||(lc("SyncEngine","New document in limbo: "+n),e.$o.add(r),ug(e))}function ug(e){for(;e.$o.size>0&&e.Oo.size<e.maxConcurrentLimboResolutions;){var t=e.$o.values().next().value;e.$o.delete(t);var n=new Xc(Uc.fromString(t)),r=e.Uo.next();e.Fo.set(r,new Mm(n)),e.Oo=e.Oo.insert(n,r),Dp(e.remoteStore,new Td(Gl(jl(n.path)),r,2,Sc.T))}}function cg(e,t,n){return lg.apply(this,arguments)}function lg(){return(lg=(0,Ki.Z)(regeneratorRuntime.mark(function e(t,n,r){var i,a,o,u,c;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(i=mc(t),a=[],o=[],u=[],e.t0=i.xo.isEmpty(),e.t0){e.next=9;break}return i.xo.forEach(function(e,t){u.push(i.Ko(t,n,r).then(function(e){if(e){i.isPrimaryClient&&i.sharedClientState.updateQueryState(t.targetId,e.fromCache?"not-current":"current"),a.push(e);var n=Ev.kn(t.targetId,e);o.push(n)}}))}),e.next=6,Promise.all(u);case 6:return i.No.Er(a),e.next=9,(c=(0,Ki.Z)(regeneratorRuntime.mark(function e(t,n){var r,i,a,o,u,c,l;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=mc(t),e.prev=1,e.next=4,r.persistence.runTransaction("notifyLocalViewChanges","readwrite",function(e){return ld.forEach(n,function(t){return ld.forEach(t.Nn,function(n){return r.persistence.referenceDelegate.addReference(e,t.targetId,n)}).next(function(){return ld.forEach(t.xn,function(n){return r.persistence.referenceDelegate.removeReference(e,t.targetId,n)})})})});case 4:e.next=11;break;case 6:if(e.prev=6,e.t0=e.catch(1),pd(e.t0)){e.next=10;break}throw e.t0;case 10:lc("LocalStore","Failed to update sequence numbers: "+e.t0);case 11:i=s(n);try{for(i.s();!(a=i.n()).done;)o=a.value,u=o.targetId,o.fromCache||(c=r.Un.get(u),l=c.withLastLimboFreeSnapshotVersion(c.snapshotVersion),r.Un=r.Un.insert(u,l))}catch(h){i.e(h)}finally{i.f()}case 13:case"end":return e.stop()}},e,null,[[1,6]])})),function(e,t){return c.apply(this,arguments)})(i.localStore,o);case 9:case"end":return e.stop()}},e)}))).apply(this,arguments)}function hg(e,t){return fg.apply(this,arguments)}function fg(){return(fg=(0,Ki.Z)(regeneratorRuntime.mark(function e(t,n){var r,i,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if((r=mc(t)).currentUser.isEqual(n)){e.next=12;break}return lc("SyncEngine","User change. New user:",n.toKey()),e.next=5,Nv(r.localStore,n);case 5:return i=e.sent,r.currentUser=n,(a=r).Bo.forEach(function(e){e.forEach(function(e){e.reject(new yc(gc.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),a.Bo.clear(),r.sharedClientState.handleUserChange(n,i.removedBatchIds,i.addedBatchIds),e.next=12,cg(r,i.Wn);case 12:case"end":return e.stop()}},e)}))).apply(this,arguments)}function dg(e,t){var n=mc(e),r=n.Fo.get(t);if(r&&r.Co)return Qh().add(r.key);var i=Qh(),a=n.ko.get(t);if(!a)return i;var o,u=s(a);try{for(u.s();!(o=u.n()).done;){var c=o.value,l=n.xo.get(c);i=i.unionWith(l.view.Eo)}}catch(h){u.e(h)}finally{u.f()}return i}function vg(e,t){return pg.apply(this,arguments)}function pg(){return(pg=(0,Ki.Z)(regeneratorRuntime.mark(function e(t,n){var r,i,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=mc(t),e.next=3,qv(r.localStore,n.query,!0);case 3:return i=e.sent,a=n.view.So(i),e.abrupt("return",(r.isPrimaryClient&&og(r,n.targetId,a.vo),a));case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}function mg(e){return gg.apply(this,arguments)}function gg(){return(gg=(0,Ki.Z)(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=mc(t),e.abrupt("return",zv(n.localStore).then(function(e){return cg(n,e)}));case 2:case"end":return e.stop()}},e)}))).apply(this,arguments)}function yg(e,t,n,r){return kg.apply(this,arguments)}function kg(){return(kg=(0,Ki.Z)(regeneratorRuntime.mark(function e(t,n,r,i){var a,o,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=mc(t),e.next=3,function(e,t){var n=mc(e),r=mc(n.In);return n.persistence.runTransaction("Lookup mutation documents","readonly",function(e){return r.Xt(e,t).next(function(t){return t?n.Qn.Pn(e,t):ld.resolve(null)})})}(a.localStore,n);case 3:if(null===(o=e.sent)){e.next=15;break}if("pending"!==r){e.next=10;break}return e.next=8,Yp(a.remoteStore);case 8:e.next=11;break;case 10:"acknowledged"===r||"rejected"===r?(rg(a,n,i||null),ng(a,n),s=n,mc(mc(a.localStore).In).te(s)):vc();case 11:return e.next=13,cg(a,o);case 13:e.next=16;break;case 15:lc("SyncEngine","Cannot apply mutation batch with id: "+n);case 16:case"end":return e.stop()}},e)}))).apply(this,arguments)}function wg(){return(wg=(0,Ki.Z)(regeneratorRuntime.mark(function e(t,n){var r,i,a,o,u,c,l,h;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(Cg(r=mc(t)),Ag(r),!0!==n||!0===r.qo){e.next=13;break}return i=r.sharedClientState.getAllActiveQueryTargets(),e.next=5,bg(r,i.toArray());case 5:return a=e.sent,r.qo=!0,e.next=9,lm(r.remoteStore,!0);case 9:o=s(a);try{for(o.s();!(u=o.n()).done;)c=u.value,Dp(r.remoteStore,c)}catch(f){o.e(f)}finally{o.f()}e.next=25;break;case 13:if(!1!==n||!1===r.qo){e.next=25;break}return l=[],h=Promise.resolve(),r.ko.forEach(function(e,t){r.sharedClientState.isLocalQueryTarget(t)?l.push(t):h=h.then(function(){return ig(r,t),jv(r.localStore,t,!0)}),Pp(r.remoteStore,t)}),e.next=19,h;case 19:return e.next=21,bg(r,l);case 21:return function(e){var t=mc(e);t.Fo.forEach(function(e,n){Pp(t.remoteStore,n)}),t.Mo.us(),t.Fo=new Map,t.Oo=new Mh(Xc.comparator)}(r),r.qo=!1,e.next=25,lm(r.remoteStore,!1);case 25:case"end":return e.stop()}},e)}))).apply(this,arguments)}function bg(e,t,n){return _g.apply(this,arguments)}function _g(){return(_g=(0,Ki.Z)(regeneratorRuntime.mark(function e(t,n,r){var i,a,o,u,c,l,h,f,d,v,p,m,g,y;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:i=mc(t),a=[],o=[],u=s(n),e.prev=2,u.s();case 4:if((c=u.n()).done){e.next=45;break}if(l=c.value,h=void 0,!(f=i.ko.get(l))||0===f.length){e.next=34;break}return e.next=11,Uv(i.localStore,Gl(f[0]));case 11:h=e.sent,d=s(f),e.prev=13,d.s();case 15:if((v=d.n()).done){e.next=24;break}return p=v.value,m=i.xo.get(p),e.next=20,vg(i,m);case 20:(g=e.sent).snapshot&&o.push(g.snapshot);case 22:e.next=15;break;case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(13),d.e(e.t0);case 29:return e.prev=29,d.f(),e.finish(29);case 32:e.next=42;break;case 34:return e.next=36,Bv(i.localStore,l);case 36:return y=e.sent,e.next=39,Uv(i.localStore,y);case 39:return h=e.sent,e.next=42,qm(i,xg(y),l,!1);case 42:a.push(h);case 43:e.next=4;break;case 45:e.next=50;break;case 47:e.prev=47,e.t1=e.catch(2),u.e(e.t1);case 50:return e.prev=50,u.f(),e.finish(50);case 53:return e.abrupt("return",(i.No.Er(o),a));case 54:case"end":return e.stop()}},e,null,[[2,47,50,53],[13,26,29,32]])}))).apply(this,arguments)}function xg(e){return Ul(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function Tg(e){var t=mc(e);return mc(mc(t.localStore).persistence).pn()}function Ig(e,t,n,r){return Sg.apply(this,arguments)}function Sg(){return(Sg=(0,Ki.Z)(regeneratorRuntime.mark(function e(t,n,r,i){var a,o,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=mc(t)).qo){e.next=5;break}lc("SyncEngine","Ignoring unexpected query state notification."),e.next=21;break;case 5:if(!a.ko.has(n)){e.next=21;break}e.t0=r,e.next="current"===e.t0||"not-current"===e.t0?9:"rejected"===e.t0?16:20;break;case 9:return e.next=11,zv(a.localStore);case 11:return o=e.sent,s=$h.createSynthesizedRemoteEventForCurrentChange(n,"current"===r),e.next=15,cg(a,o,s);case 15:return e.abrupt("break",21);case 16:return e.next=18,jv(a.localStore,n,!0);case 18:return ig(a,n,i),e.abrupt("break",21);case 20:vc();case 21:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Eg(e,t,n){return Rg.apply(this,arguments)}function Rg(){return(Rg=(0,Ki.Z)(regeneratorRuntime.mark(function e(t,n,r){var i,a,o,u,c,l,h,f,d;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i=Cg(t)).qo){e.next=45;break}a=s(n),e.prev=3,a.s();case 5:if((o=a.n()).done){e.next=21;break}if(u=o.value,!i.ko.has(u)){e.next=10;break}return lc("SyncEngine","Adding an already active target "+u),e.abrupt("continue",19);case 10:return e.next=12,Bv(i.localStore,u);case 12:return c=e.sent,e.next=15,Uv(i.localStore,c);case 15:return l=e.sent,e.next=18,qm(i,xg(c),l.targetId,!1);case 18:Dp(i.remoteStore,l);case 19:e.next=5;break;case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(3),a.e(e.t0);case 26:return e.prev=26,a.f(),e.finish(26);case 29:h=s(r),e.prev=30,d=regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=f.value,e.t0=i.ko.has(t),!e.t0){e.next=5;break}return e.next=5,jv(i.localStore,t,!1).then(function(){Pp(i.remoteStore,t),ig(i,t)}).catch(rv);case 5:case"end":return e.stop()}},e)}),h.s();case 33:if((f=h.n()).done){e.next=37;break}return e.delegateYield(d(),"t1",35);case 35:e.next=33;break;case 37:e.next=42;break;case 39:e.prev=39,e.t2=e.catch(30),h.e(e.t2);case 42:return e.prev=42,h.f(),e.finish(42);case 45:case"end":return e.stop()}},e,null,[[3,23,26,29],[30,39,42,45]])}))).apply(this,arguments)}function Cg(e){var t=mc(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=Gm.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=dg.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Qm.bind(null,t),t.No.Er=Im.bind(null,t.eventManager),t.No.jo=Sm.bind(null,t.eventManager),t}function Ag(e){var t=mc(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Jm.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Xm.bind(null,t),t}var Ng=function(){function e(){f(this,e),this.synchronizeTabs=!1}return h(e,[{key:"initialize",value:function(e){var t=this;return(0,Ki.Z)(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return t.N=bp(e.databaseInfo.databaseId),t.sharedClientState=t.Wo(e),t.persistence=t.Go(e),n.next=5,t.persistence.start();case 5:t.gcScheduler=t.zo(e),t.localStore=t.Ho(e);case 7:case"end":return n.stop()}},n)}))()}},{key:"zo",value:function(e){return null}},{key:"Ho",value:function(e){return Av(this.persistence,new Rv,e.initialUser,this.N)}},{key:"Go",value:function(e){return new tp(rp.Ns,this.N)}},{key:"Wo",value:function(e){return new dp}},{key:"terminate",value:function(){var e=this;return(0,Ki.Z)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.gcScheduler&&e.gcScheduler.stop(),t.next=3,e.sharedClientState.shutdown();case 3:return t.next=5,e.persistence.shutdown();case 5:case"end":return t.stop()}},t)}))()}}]),e}(),Og=function(e){d(n,e);var t=v(n);function n(e,r,i){var a;return f(this,n),(a=t.call(this)).Jo=e,a.cacheSizeBytes=r,a.forceOwnership=i,a.synchronizeTabs=!1,a}return h(n,[{key:"initialize",value:function(e){var t=this,r=this;return(0,Ki.Z)(regeneratorRuntime.mark(function a(){return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,i(b(n.prototype),"initialize",t).call(r,e);case 2:return a.next=4,function(e){return Zv.apply(this,arguments)}(r.localStore);case 4:return a.next=6,r.Jo.initialize(r,e);case 6:return a.next=8,Ag(r.Jo.syncEngine);case 8:return a.next=10,Yp(r.Jo.remoteStore);case 10:return a.next=12,r.persistence.nn(function(){return r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(r.localStore),Promise.resolve()});case 12:case"end":return a.stop()}},a)}))()}},{key:"Ho",value:function(e){return Av(this.persistence,new Rv,e.initialUser,this.N)}},{key:"zo",value:function(e){return new sv(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue)}},{key:"Go",value:function(e){var t=Tv(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?Zd.withCacheSize(this.cacheSizeBytes):Zd.DEFAULT;return new bv(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,kp(),wp(),this.N,this.sharedClientState,!!this.forceOwnership)}},{key:"Wo",value:function(e){return new dp}}]),n}(Ng),Dg=function(e){d(n,e);var t=v(n);function n(e,r){var i;return f(this,n),(i=t.call(this,e,r,!1)).Jo=e,i.cacheSizeBytes=r,i.synchronizeTabs=!0,i}return h(n,[{key:"initialize",value:function(e){var t=this,r=this;return(0,Ki.Z)(regeneratorRuntime.mark(function a(){var o;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,i(b(n.prototype),"initialize",t).call(r,e);case 2:if(o=r.Jo.syncEngine,a.t0=r.sharedClientState instanceof fp,!a.t0){a.next=8;break}return r.sharedClientState.syncEngine={_i:yg.bind(null,o),mi:Ig.bind(null,o),gi:Eg.bind(null,o),pn:Tg.bind(null,o),wi:mg.bind(null,o)},a.next=8,r.sharedClientState.start();case 8:return a.next=10,r.persistence.nn(function(){var e=(0,Ki.Z)(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,function(e,t){return wg.apply(this,arguments)}(r.Jo.syncEngine,t);case 2:r.gcScheduler&&(t&&!r.gcScheduler.started?r.gcScheduler.start(r.localStore):t||r.gcScheduler.stop());case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}());case 10:case"end":return a.stop()}},a)}))()}},{key:"Wo",value:function(e){var t=kp();if(!fp.bt(t))throw new yc(gc.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=Tv(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new fp(t,e.asyncQueue,n,e.clientId,e.initialUser)}}]),n}(Og),Pg=function(){function e(){f(this,e)}return h(e,[{key:"initialize",value:function(e,t){var n=this;return(0,Ki.Z)(regeneratorRuntime.mark(function r(){return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(r.t0=n.localStore,r.t0){r.next=12;break}return n.localStore=e.localStore,n.sharedClientState=e.sharedClientState,n.datastore=n.createDatastore(t),n.remoteStore=n.createRemoteStore(t),n.eventManager=n.createEventManager(t),n.syncEngine=n.createSyncEngine(t,!e.synchronizeTabs),n.sharedClientState.onlineStateHandler=function(e){return Wm(n.syncEngine,e,1)},n.remoteStore.remoteSyncer.handleCredentialChange=hg.bind(null,n.syncEngine),r.next=12,lm(n.remoteStore,n.syncEngine.isPrimaryClient);case 12:case"end":return r.stop()}},r)}))()}},{key:"createEventManager",value:function(e){return new wm}},{key:"createDatastore",value:function(e){var t=bp(e.databaseInfo.databaseId),n=new yp(e.databaseInfo);return new Sp(e.credentials,n,t)}},{key:"createRemoteStore",value:function(e){var t,n,r,i,a,o=this;return t=this.localStore,n=this.datastore,r=e.asyncQueue,i=function(e){return Wm(o.syncEngine,e,0)},a=pp.bt()?new pp:new vp,new Rp(t,n,r,i,a)}},{key:"createSyncEngine",value:function(e,t){return n=this.localStore,r=this.remoteStore,i=this.eventManager,a=this.sharedClientState,o=e.initialUser,s=e.maxConcurrentLimboResolutions,u=t,c=new Um(n,r,i,a,o,s),u&&(c.qo=!0),c;var n,r,i,a,o,s,u,c}},{key:"terminate",value:function(){return(e=(0,Ki.Z)(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=mc(t),lc("RemoteStore","RemoteStore shutting down."),n.Kr.add(5),e.next=5,Np(n);case 5:n.Qr.shutdown(),n.Wr.set("Unknown");case 7:case"end":return e.stop()}},e)})),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}]),e}();function Lg(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10240,n=0;return{read:function(){return(0,Ki.Z)(regeneratorRuntime.mark(function r(){var i;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(!(n<e.byteLength)){r.next=3;break}return i={value:e.slice(n,n+t),done:!1},r.abrupt("return",(n+=t,i));case 3:return r.abrupt("return",{done:!0});case 4:case"end":return r.stop()}},r)}))()},cancel:function(){return(0,Ki.Z)(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e)}))()},releaseLock:function(){},closed:Promise.reject("unimplemented")}}var Fg=function(){function e(t){f(this,e),this.observer=t,this.muted=!1}return h(e,[{key:"next",value:function(e){this.observer.next&&this.Yo(this.observer.next,e)}},{key:"error",value:function(e){this.observer.error?this.Yo(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}},{key:"Xo",value:function(){this.muted=!0}},{key:"Yo",value:function(e,t){var n=this;this.muted||setTimeout(function(){n.muted||e(t)},0)}}]),e}(),Mg=function(){function e(t,n){var r=this;f(this,e),this.Zo=t,this.N=n,this.metadata=new kc,this.buffer=new Uint8Array,this.ta=new TextDecoder("utf-8"),this.ea().then(function(e){e&&e.ho()?r.metadata.resolve(e.payload.metadata):r.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             ".concat(JSON.stringify(null==e?void 0:e.payload))))},function(e){return r.metadata.reject(e)})}return h(e,[{key:"close",value:function(){return this.Zo.cancel()}},{key:"getMetadata",value:function(){var e=this;return(0,Ki.Z)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.metadata.promise);case 1:case"end":return t.stop()}},t)}))()}},{key:"Qo",value:function(){var e=this;return(0,Ki.Z)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getMetadata();case 2:return t.abrupt("return",e.ea());case 3:case"end":return t.stop()}},t)}))()}},{key:"ea",value:function(){var e=this;return(0,Ki.Z)(regeneratorRuntime.mark(function t(){var n,r,i,a;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.na();case 2:if(null!==(n=t.sent)){t.next=5;break}return t.abrupt("return",null);case 5:return r=e.ta.decode(n),i=Number(r),isNaN(i)&&e.sa("length string (".concat(r,") is not valid number")),t.next=9,e.ia(i);case 9:return a=t.sent,t.abrupt("return",new Cm(JSON.parse(a),n.length+i));case 11:case"end":return t.stop()}},t)}))()}},{key:"ra",value:function(){return this.buffer.findIndex(function(e){return e==="{".charCodeAt(0)})}},{key:"na",value:function(){var e=this;return(0,Ki.Z)(regeneratorRuntime.mark(function t(){var n,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=e.ra()<0,!t.t0){t.next=5;break}return t.next=4,e.oa();case 4:t.t0=!t.sent;case 5:if(!t.t0){t.next=9;break}case 7:t.next=0;break;case 9:if(0!==e.buffer.length){t.next=11;break}return t.abrupt("return",null);case 11:return(n=e.ra())<0&&e.sa("Reached the end of bundle when a length string is expected."),r=e.buffer.slice(0,n),t.abrupt("return",(e.buffer=e.buffer.slice(n),r));case 15:case"end":return t.stop()}},t)}))()}},{key:"ia",value:function(e){var t=this;return(0,Ki.Z)(regeneratorRuntime.mark(function n(){var r;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(!(t.buffer.length<e)){n.next=8;break}return n.next=3,t.oa();case 3:if(n.t0=n.sent,!n.t0){n.next=6;break}t.sa("Reached the end of bundle when more is expected.");case 6:n.next=0;break;case 8:return r=t.ta.decode(t.buffer.slice(0,e)),n.abrupt("return",(t.buffer=t.buffer.slice(e),r));case 10:case"end":return n.stop()}},n)}))()}},{key:"sa",value:function(e){throw this.Zo.cancel(),new Error("Invalid bundle format: ".concat(e))}},{key:"oa",value:function(){var e=this;return(0,Ki.Z)(regeneratorRuntime.mark(function t(){var n,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.Zo.read();case 2:return(n=t.sent).done||((r=new Uint8Array(e.buffer.length+n.value.length)).set(e.buffer),r.set(n.value,e.buffer.length),e.buffer=r),t.abrupt("return",n.done);case 5:case"end":return t.stop()}},t)}))()}}]),e}(),Ug=function(){function e(t){f(this,e),this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return h(e,[{key:"lookup",value:function(e){var t=this;return(0,Ki.Z)(regeneratorRuntime.mark(function n(){var r,i;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(t.ensureCommitNotCalled(),!(t.mutations.length>0)){n.next=2;break}throw new yc(gc.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");case 2:return n.next=4,(i=(0,Ki.Z)(regeneratorRuntime.mark(function e(t,n){var r,i,a,o,s,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=mc(t),i=bf(r.N)+"/documents",a={documents:n.map(function(e){return gf(r.N,e)})},e.next=5,r.Ki("BatchGetDocuments",i,a);case 5:return o=e.sent,s=new Map,o.forEach(function(e){var t=function(e,t){return"found"in t?function(e,t){pc(!!t.found);var n=yf(e,t.found.name),r=vf(t.found.updateTime),i=new vl({mapValue:{fields:t.found.fields}});return ml.newFoundDocument(n,r,i)}(e,t):"missing"in t?function(e,t){pc(!!t.missing),pc(!!t.readTime);var n=yf(e,t.missing),r=vf(t.readTime);return ml.newNoDocument(n,r)}(e,t):vc()}(r.N,e);s.set(t.key.toString(),t)}),u=[],e.abrupt("return",(n.forEach(function(e){var t=s.get(e.toString());pc(!!t),u.push(t)}),u));case 10:case"end":return e.stop()}},e)})),function(e,t){return i.apply(this,arguments)})(t.datastore,e);case 4:return r=n.sent,n.abrupt("return",(r.forEach(function(e){return t.recordVersion(e)}),r));case 6:case"end":return n.stop()}},n)}))()}},{key:"set",value:function(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"update",value:function(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(n){this.lastWriteError=n}this.writtenDocs.add(e.toString())}},{key:"delete",value:function(e){this.write(new Oh(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"commit",value:function(){var e=this;return(0,Ki.Z)(regeneratorRuntime.mark(function t(){var n,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e.ensureCommitNotCalled(),!e.lastWriteError){t.next=2;break}throw e.lastWriteError;case 2:return n=e.readVersions,e.mutations.forEach(function(e){n.delete(e.key.toString())}),n.forEach(function(t,n){var r=Xc.fromPath(n);e.mutations.push(new Dh(r,e.precondition(r)))}),t.next=7,(r=(0,Ki.Z)(regeneratorRuntime.mark(function e(t,n){var r,i,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=mc(t),i=bf(r.N)+"/documents",a={writes:n.map(function(e){return If(r.N,e)})},e.next=3,r.Li("Commit",i,a);case 3:case"end":return e.stop()}},e)})),function(e,t){return r.apply(this,arguments)})(e.datastore,e.mutations);case 7:e.committed=!0;case 8:case"end":return t.stop()}},t)}))()}},{key:"recordVersion",value:function(e){var t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw vc();t=Dc.min()}var n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new yc(gc.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}},{key:"precondition",value:function(e){var t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?gh.updateTime(t):gh.none()}},{key:"preconditionForUpdate",value:function(e){var t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Dc.min()))throw new yc(gc.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return gh.updateTime(t)}return gh.exists(!0)}},{key:"write",value:function(e){this.ensureCommitNotCalled(),this.mutations.push(e)}},{key:"ensureCommitNotCalled",value:function(){}}]),e}(),jg=function(){function e(t,n,r,i){f(this,e),this.asyncQueue=t,this.datastore=n,this.updateFunction=r,this.deferred=i,this.aa=5,this.rr=new _p(this.asyncQueue,"transaction_retry")}return h(e,[{key:"run",value:function(){this.aa-=1,this.ca()}},{key:"ca",value:function(){var e=this;this.rr.Xi((0,Ki.Z)(regeneratorRuntime.mark(function t(){var n,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:n=new Ug(e.datastore),(r=e.ua(n))&&r.then(function(t){e.asyncQueue.enqueueAndForget(function(){return n.commit().then(function(){e.deferred.resolve(t)}).catch(function(t){e.ha(t)})})}).catch(function(t){e.ha(t)});case 2:case"end":return t.stop()}},t)})))}},{key:"ua",value:function(e){try{var t=this.updateFunction(e);return!Yc(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}},{key:"ha",value:function(e){var t=this;this.aa>0&&this.la(e)?(this.aa-=1,this.asyncQueue.enqueueAndForget(function(){return t.ca(),Promise.resolve()})):this.deferred.reject(e)}},{key:"la",value:function(e){if("FirebaseError"===e.name){var t=e.code;return"aborted"===t||"failed-precondition"===t||!Lh(t)}return!1}}]),e}(),Vg=function(){function e(t,n,r){f(this,e);var i,a=this;this.credentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=oc.UNAUTHENTICATED,this.clientId=Rc.I(),this.credentialListener=function(){return Promise.resolve()},this.credentials.start(n,(i=(0,Ki.Z)(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return lc("FirestoreClient","Received user=",t.uid),e.next=3,a.credentialListener(t);case 3:a.user=t;case 4:case"end":return e.stop()}},e)})),function(e){return i.apply(this,arguments)}))}return h(e,[{key:"getConfiguration",value:function(){var e=this;return(0,Ki.Z)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,credentials:e.credentials,initialUser:e.user,maxConcurrentLimboResolutions:100});case 1:case"end":return t.stop()}},t)}))()}},{key:"setCredentialChangeListener",value:function(e){this.credentialListener=e}},{key:"verifyNotTerminated",value:function(){if(this.asyncQueue.isShuttingDown)throw new yc(gc.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"terminate",value:function(){var e=this;this.asyncQueue.enterRestrictedMode();var t=new kc;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,Ki.Z)(regeneratorRuntime.mark(function n(){var r;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,n.t0=e.onlineComponents,!n.t0){n.next=5;break}return n.next=5,e.onlineComponents.terminate();case 5:if(n.t1=e.offlineComponents,!n.t1){n.next=9;break}return n.next=9,e.offlineComponents.terminate();case 9:e.credentials.shutdown(),t.resolve(),n.next=17;break;case 13:n.prev=13,n.t2=n.catch(0),r=pm(n.t2,"Failed to shutdown persistence"),t.reject(r);case 17:case"end":return n.stop()}},n,null,[[0,13]])}))),t.promise}}]),e}();function qg(e,t){return Bg.apply(this,arguments)}function Bg(){return(Bg=(0,Ki.Z)(regeneratorRuntime.mark(function e(t,n){var r,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),lc("FirestoreClient","Initializing OfflineComponentProvider"),e.next=3,t.getConfiguration();case 3:return r=e.sent,e.next=6,n.initialize(r);case 6:i=r.initialUser,t.setCredentialChangeListener(function(){var e=(0,Ki.Z)(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=i.isEqual(t),e.t0){e.next=5;break}return e.next=4,Nv(n.localStore,t);case 4:i=t;case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()),n.persistence.setDatabaseDeletedListener(function(){return t.terminate()}),t.offlineComponents=n;case 8:case"end":return e.stop()}},e)}))).apply(this,arguments)}function zg(e,t){return Zg.apply(this,arguments)}function Zg(){return(Zg=(0,Ki.Z)(regeneratorRuntime.mark(function e(t,n){var r,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),e.next=3,Hg(t);case 3:return r=e.sent,lc("FirestoreClient","Initializing OnlineComponentProvider"),e.next=7,t.getConfiguration();case 7:return i=e.sent,e.next=10,n.initialize(r,i);case 10:t.setCredentialChangeListener(function(e){return(t=(0,Ki.Z)(regeneratorRuntime.mark(function e(t,n){var r,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(r=mc(t)).asyncQueue.verifyOperationInProgress(),lc("RemoteStore","RemoteStore received new credentials"),i=jp(r),r.Kr.add(3),e.next=6,Np(r);case 6:return i&&r.Wr.set("Unknown"),e.next=9,r.remoteSyncer.handleCredentialChange(n);case 9:return r.Kr.delete(3),e.next=12,Cp(r);case 12:case"end":return e.stop()}},e)})),function(e,n){return t.apply(this,arguments)})(n.remoteStore,e);var t}),t.onlineComponents=n;case 12:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Hg(e){return Gg.apply(this,arguments)}function Gg(){return(Gg=(0,Ki.Z)(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.offlineComponents,e.t0){e.next=5;break}return lc("FirestoreClient","Using default OfflineComponentProvider"),e.next=5,qg(t,new Ng);case 5:return e.abrupt("return",t.offlineComponents);case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Kg(e){return Wg.apply(this,arguments)}function Wg(){return(Wg=(0,Ki.Z)(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.onlineComponents,e.t0){e.next=5;break}return lc("FirestoreClient","Using default OnlineComponentProvider"),e.next=5,zg(t,new Pg);case 5:return e.abrupt("return",t.onlineComponents);case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Qg(e){return Hg(e).then(function(e){return e.persistence})}function Yg(e){return Hg(e).then(function(e){return e.localStore})}function Jg(e){return Kg(e).then(function(e){return e.remoteStore})}function $g(e){return Kg(e).then(function(e){return e.syncEngine})}function Xg(e){return ey.apply(this,arguments)}function ey(){return(ey=(0,Ki.Z)(regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Kg(t);case 2:return n=e.sent,r=n.eventManager,e.abrupt("return",(r.onListen=jm.bind(null,n.syncEngine),r.onUnlisten=zm.bind(null,n.syncEngine),r));case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}function ty(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new kc;return e.asyncQueue.enqueueAndForget((0,Ki.Z)(regeneratorRuntime.mark(function i(){return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new Fg({next:function(a){t.enqueueAndForget(function(){return xm(e,o)});var s=a.docs.has(n);!s&&a.fromCache?i.reject(new yc(gc.UNAVAILABLE,"Failed to get document because the client is offline.")):s&&a.fromCache&&r&&"server"===r.source?i.reject(new yc(gc.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(a)},error:function(e){return i.reject(e)}}),o=new Rm(jl(n.path),a,{includeMetadataChanges:!0,uo:!0});return bm(e,o)},i.next=3,Xg(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}},i)}))),r.promise}function ny(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new kc;return e.asyncQueue.enqueueAndForget((0,Ki.Z)(regeneratorRuntime.mark(function i(){return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new Fg({next:function(n){t.enqueueAndForget(function(){return xm(e,o)}),n.fromCache&&"server"===r.source?i.reject(new yc(gc.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(e){return i.reject(e)}}),o=new Rm(n,a,{includeMetadataChanges:!0,uo:!0});return bm(e,o)},i.next=3,Xg(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}},i)}))),r.promise}var ry=function e(t,n,r,i,a,o,s,u){f(this,e),this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=s,this.useFetchStreams=u},iy=function(){function e(t,n){f(this,e),this.projectId=t,this.database=n||"(default)"}return h(e,[{key:"isDefaultDatabase",get:function(){return"(default)"===this.database}},{key:"isEqual",value:function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database}}]),e}(),ay=new Map;function oy(e,t,n){if(!n)throw new yc(gc.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function sy(e,t,n,r){if(!0===t&&!0===r)throw new yc(gc.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}function uy(e){if(!Xc.isDocumentKey(e))throw new yc(gc.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function cy(e){if(Xc.isDocumentKey(e))throw new yc(gc.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function ly(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";var t=(n=e).constructor?n.constructor.name:null;return t?"a custom ".concat(t," object"):"an object"}var n;return"function"==typeof e?"a function":vc()}function hy(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new yc(gc.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=ly(e);throw new yc(gc.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}return e}function fy(e,t){if(t<=0)throw new yc(gc.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}var dy=function(){function e(t){var n;if(f(this,e),void 0===t.host){if(void 0!==t.ssl)throw new yc(gc.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(n=t.ssl)||void 0===n||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new yc(gc.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,sy("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return h(e,[{key:"isEqual",value:function(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}]),e}(),vy=function(){function e(t,n){f(this,e),this._credentials=n,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new dy({}),this._settingsFrozen=!1,t instanceof iy?this._databaseId=t:(this._app=t,this._databaseId=function(e){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new yc(gc.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new iy(e.options.projectId)}(t))}return h(e,[{key:"app",get:function(){if(!this._app)throw new yc(gc.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}},{key:"_initialized",get:function(){return this._settingsFrozen}},{key:"_terminated",get:function(){return void 0!==this._terminateTask}},{key:"_setSettings",value:function(e){if(this._settingsFrozen)throw new yc(gc.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new dy(e),void 0!==e.credentials&&(this._credentials=function(e){if(!e)return new bc;switch(e.type){case"gapi":var t=e.client;return pc(!("object"!=typeof t||null===t||!t.auth||!t.auth.getAuthHeaderValueForFirstParty)),new Ic(t,e.sessionIndex||"0",e.iamToken||null);case"provider":return e.client;default:throw new yc(gc.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(e.credentials))}},{key:"_getSettings",value:function(){return this._settings}},{key:"_freezeSettings",value:function(){return this._settingsFrozen=!0,this._settings}},{key:"_delete",value:function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}},{key:"toJSON",value:function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}},{key:"_terminate",value:function(){return e=this,(t=ay.get(e))&&(lc("ComponentProvider","Removing Datastore"),ay.delete(e),t.terminate()),Promise.resolve();var e,t}}]),e}(),py=function(){function e(t,n,r){f(this,e),this.converter=n,this._key=r,this.type="document",this.firestore=t}return h(e,[{key:"_path",get:function(){return this._key.path}},{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"path",get:function(){return this._key.path.canonicalString()}},{key:"parent",get:function(){return new gy(this.firestore,this.converter,this._key.path.popLast())}},{key:"withConverter",value:function(t){return new e(this.firestore,t,this._key)}}]),e}(),my=function(){function e(t,n,r){f(this,e),this.converter=n,this._query=r,this.type="query",this.firestore=t}return h(e,[{key:"withConverter",value:function(t){return new e(this.firestore,t,this._query)}}]),e}(),gy=function(e){d(n,e);var t=v(n);function n(e,r,i){var a;return f(this,n),(a=t.call(this,e,r,jl(i)))._path=i,a.type="collection",a}return h(n,[{key:"id",get:function(){return this._query.path.lastSegment()}},{key:"path",get:function(){return this._query.path.canonicalString()}},{key:"parent",get:function(){var e=this._path.popLast();return e.isEmpty()?null:new py(this.firestore,null,new Xc(e))}},{key:"withConverter",value:function(e){return new n(this.firestore,e,this._path)}}]),n}(my);function yy(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=(0,Ji.m9)(e),oy("collection","path",t),e instanceof vy){var a=Uc.fromString.apply(Uc,[t].concat(r));return cy(a),new gy(e,null,a)}if(!(e instanceof py||e instanceof gy))throw new yc(gc.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(Uc.fromString.apply(Uc,[t].concat(r)));return cy(o),new gy(e.firestore,null,o)}function ky(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=(0,Ji.m9)(e),1===arguments.length&&(t=Rc.I()),oy("doc","path",t),e instanceof vy){var a=Uc.fromString.apply(Uc,[t].concat(r));return uy(a),new py(e,null,new Xc(a))}if(!(e instanceof py||e instanceof gy))throw new yc(gc.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(Uc.fromString.apply(Uc,[t].concat(r)));return uy(o),new py(e.firestore,e instanceof gy?e.converter:null,new Xc(o))}function wy(e,t){return e=(0,Ji.m9)(e),t=(0,Ji.m9)(t),(e instanceof py||e instanceof gy)&&(t instanceof py||t instanceof gy)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function by(e,t){return e=(0,Ji.m9)(e),t=(0,Ji.m9)(t),e instanceof my&&t instanceof my&&e.firestore===t.firestore&&Wl(e._query,t._query)&&e.converter===t.converter}var _y=function(){function e(){var t=this;f(this,e),this.fa=Promise.resolve(),this.da=[],this.wa=!1,this._a=[],this.ma=null,this.ga=!1,this.ya=!1,this.pa=[],this.rr=new _p(this,"async_queue_retry"),this.Ta=function(){var e=wp();e&&lc("AsyncQueue","Visibility state changed to "+e.visibilityState),t.rr.tr()};var n=wp();n&&"function"==typeof n.addEventListener&&n.addEventListener("visibilitychange",this.Ta)}return h(e,[{key:"isShuttingDown",get:function(){return this.wa}},{key:"enqueueAndForget",value:function(e){this.enqueue(e)}},{key:"enqueueAndForgetEvenWhileRestricted",value:function(e){this.Ea(),this.Ia(e)}},{key:"enterRestrictedMode",value:function(e){if(!this.wa){this.wa=!0,this.ya=e||!1;var t=wp();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Ta)}}},{key:"enqueue",value:function(e){var t=this;if(this.Ea(),this.wa)return new Promise(function(){});var n=new kc;return this.Ia(function(){return t.wa&&t.ya?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)}).then(function(){return n.promise})}},{key:"enqueueRetryable",value:function(e){var t=this;this.enqueueAndForget(function(){return t.da.push(e),t.Aa()})}},{key:"Aa",value:function(){var e=this;return(0,Ki.Z)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(0===e.da.length){t.next=14;break}return t.prev=1,t.next=4,e.da[0]();case 4:e.da.shift(),e.rr.reset(),t.next=13;break;case 8:if(t.prev=8,t.t0=t.catch(1),pd(t.t0)){t.next=12;break}throw t.t0;case 12:lc("AsyncQueue","Operation failed with retryable error: "+t.t0);case 13:e.da.length>0&&e.rr.Xi(function(){return e.Aa()});case 14:case"end":return t.stop()}},t,null,[[1,8]])}))()}},{key:"Ia",value:function(e){var t=this,n=this.fa.then(function(){return t.ga=!0,e().catch(function(e){throw t.ma=e,t.ga=!1,hc("INTERNAL UNHANDLED ERROR: ",(r=(n=e).message||"",n.stack&&(r=n.stack.includes(n.message)?n.stack:n.message+"\n"+n.stack),r)),e;var n,r}).then(function(e){return t.ga=!1,e})});return this.fa=n,n}},{key:"enqueueAfterDelay",value:function(e,t,n){var r=this;this.Ea(),this.pa.indexOf(e)>-1&&(t=0);var i=vm.createAndSchedule(this,e,t,n,function(e){return r.Ra(e)});return this._a.push(i),i}},{key:"Ea",value:function(){this.ma&&vc()}},{key:"verifyOperationInProgress",value:function(){}},{key:"ba",value:function(){var e=this;return(0,Ki.Z)(regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.fa,t.next=3,n;case 3:if(n!==e.fa){t.next=0;break}case 4:case"end":return t.stop()}},t)}))()}},{key:"Pa",value:function(e){var t,n=s(this._a);try{for(n.s();!(t=n.n()).done;){if(t.value.timerId===e)return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"va",value:function(e){var t=this;return this.ba().then(function(){t._a.sort(function(e,t){return e.targetTimeMs-t.targetTimeMs});var n,r=s(t._a);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i.skipDelay(),"all"!==e&&i.timerId===e)break}}catch(a){r.e(a)}finally{r.f()}return t.ba()})}},{key:"Va",value:function(e){this.pa.push(e)}},{key:"Ra",value:function(e){var t=this._a.indexOf(e);this._a.splice(t,1)}}]),e}();function xy(e){return function(e,t){if("object"!=typeof e||null===e)return!1;for(var n=e,r=0,i=["next","error","complete"];r<i.length;r++){var a=i[r];if(a in n&&"function"==typeof n[a])return!0}return!1}(e)}var Ty=function(){function e(){f(this,e),this._progressObserver={},this._taskCompletionResolver=new kc,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}return h(e,[{key:"onProgress",value:function(e,t,n){this._progressObserver={next:e,error:t,complete:n}}},{key:"catch",value:function(e){return this._taskCompletionResolver.promise.catch(e)}},{key:"then",value:function(e,t){return this._taskCompletionResolver.promise.then(e,t)}},{key:"_completeWith",value:function(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}},{key:"_failWith",value:function(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}},{key:"_updateProgress",value:function(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}]),e}(),Iy=function(e){d(n,e);var t=v(n);function n(e,r){var i;return f(this,n),(i=t.call(this,e,r)).type="firestore",i._queue=new _y,i._persistenceKey="name"in e?e.name:"[DEFAULT]",i}return h(n,[{key:"_terminate",value:function(){return this._firestoreClient||Ey(this),this._firestoreClient.terminate()}}]),n}(vy);function Sy(e){return e._firestoreClient||Ey(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function Ey(e){var t,n,r,i=e._freezeSettings(),a=(n=(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",new ry(e._databaseId,n,e._persistenceKey,(r=i).host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,r.useFetchStreams));e._firestoreClient=new Vg(e._credentials,e._queue,a)}function Ry(e,t,n){var r=new kc;return e.asyncQueue.enqueue((0,Ki.Z)(regeneratorRuntime.mark(function i(){var a;return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,qg(e,n);case 3:return i.next=5,zg(e,t);case 5:r.resolve(),i.next=13;break;case 8:if(i.prev=8,i.t0=i.catch(0),"FirebaseError"===(a=i.t0).name?a.code===gc.FAILED_PRECONDITION||a.code===gc.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&a instanceof DOMException)||22===a.code||20===a.code||11===a.code){i.next=12;break}throw i.t0;case 12:console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+i.t0),r.reject(i.t0);case 13:case"end":return i.stop()}},i,null,[[0,8]])}))).then(function(){return r.promise})}function Cy(e){if(e._initialized||e._terminated)throw new yc(gc.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var Ay=function(){function e(){f(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0;i<n.length;++i)if(0===n[i].length)throw new yc(gc.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Vc(n)}return h(e,[{key:"isEqual",value:function(e){return this._internalPath.isEqual(e._internalPath)}}]),e}(),Ny=function(){function e(t){f(this,e),this._byteString=t}return h(e,[{key:"toBase64",value:function(){return this._byteString.toBase64()}},{key:"toUint8Array",value:function(){return this._byteString.toUint8Array()}},{key:"toString",value:function(){return"Bytes(base64: "+this.toBase64()+")"}},{key:"isEqual",value:function(e){return this._byteString.isEqual(e._byteString)}}],[{key:"fromBase64String",value:function(t){try{return new e(Bc.fromBase64String(t))}catch(n){throw new yc(gc.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}},{key:"fromUint8Array",value:function(t){return new e(Bc.fromUint8Array(t))}}]),e}(),Oy=function e(t){f(this,e),this._methodName=t},Dy=function(){function e(t,n){if(f(this,e),!isFinite(t)||t<-90||t>90)throw new yc(gc.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new yc(gc.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}return h(e,[{key:"latitude",get:function(){return this._lat}},{key:"longitude",get:function(){return this._long}},{key:"isEqual",value:function(e){return this._lat===e._lat&&this._long===e._long}},{key:"toJSON",value:function(){return{latitude:this._lat,longitude:this._long}}},{key:"_compareTo",value:function(e){return Cc(this._lat,e._lat)||Cc(this._long,e._long)}}]),e}(),Py=/^__.*__$/,Ly=function(){function e(t,n,r){f(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return h(e,[{key:"toMutation",value:function(e,t){return null!==this.fieldMask?new Sh(e,this.data,this.fieldMask,t,this.fieldTransforms):new Ih(e,this.data,t,this.fieldTransforms)}}]),e}(),Fy=function(){function e(t,n,r){f(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return h(e,[{key:"toMutation",value:function(e,t){return new Sh(e,this.data,this.fieldMask,t,this.fieldTransforms)}}]),e}();function My(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw vc()}}var Uy=function(){function e(t,n,r,i,a,o){f(this,e),this.settings=t,this.databaseId=n,this.N=r,this.ignoreUndefinedProperties=i,void 0===a&&this.Sa(),this.fieldTransforms=a||[],this.fieldMask=o||[]}return h(e,[{key:"path",get:function(){return this.settings.path}},{key:"Da",get:function(){return this.settings.Da}},{key:"Ca",value:function(t){return new e(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.N,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}},{key:"Na",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Ca({path:n,xa:!1});return r.ka(e),r}},{key:"$a",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Ca({path:n,xa:!1});return r.Sa(),r}},{key:"Oa",value:function(e){return this.Ca({path:void 0,xa:!0})}},{key:"Fa",value:function(e){return ik(e,this.settings.methodName,this.settings.Ma||!1,this.path,this.settings.La)}},{key:"contains",value:function(e){return void 0!==this.fieldMask.find(function(t){return e.isPrefixOf(t)})||void 0!==this.fieldTransforms.find(function(t){return e.isPrefixOf(t.field)})}},{key:"Sa",value:function(){if(this.path)for(var e=0;e<this.path.length;e++)this.ka(this.path.get(e))}},{key:"ka",value:function(e){if(0===e.length)throw this.Fa("Document fields must not be empty");if(My(this.Da)&&Py.test(e))throw this.Fa('Document fields cannot begin and end with "__"')}}]),e}(),jy=function(){function e(t,n,r){f(this,e),this.databaseId=t,this.ignoreUndefinedProperties=n,this.N=r||bp(t)}return h(e,[{key:"Ba",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new Uy({Da:e,methodName:t,La:n,path:Vc.emptyPath(),xa:!1,Ma:r},this.databaseId,this.N,this.ignoreUndefinedProperties)}}]),e}();function Vy(e){var t=e._freezeSettings(),n=bp(e._databaseId);return new jy(e._databaseId,!!t.ignoreUndefinedProperties,n)}function qy(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},o=e.Ba(a.merge||a.mergeFields?2:0,t,n,i);ek("Data must be an object, but it was:",o,r);var u,c,l=$y(r,o);if(a.merge)u=new qc(o.fieldMask),c=o.fieldTransforms;else if(a.mergeFields){var h,f=[],d=s(a.mergeFields);try{for(d.s();!(h=d.n()).done;){var v=h.value,p=tk(t,v,n);if(!o.contains(p))throw new yc(gc.INVALID_ARGUMENT,"Field '".concat(p,"' is specified in your field mask but missing from your input data."));ak(f,p)||f.push(p)}}catch(m){d.e(m)}finally{d.f()}u=new qc(f),c=o.fieldTransforms.filter(function(e){return u.covers(e.field)})}else u=null,c=o.fieldTransforms;return new Ly(new vl(l),u,c)}var By=function(e){d(n,e);var t=v(n);function n(){return f(this,n),t.apply(this,arguments)}return h(n,[{key:"_toFieldTransform",value:function(e){if(2!==e.Da)throw e.Fa(1===e.Da?"".concat(this._methodName,"() can only appear at the top level of your update data"):"".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(Oy);function zy(e,t,n){return new Uy({Da:3,La:t.settings.La,methodName:e._methodName,xa:n},t.databaseId,t.N,t.ignoreUndefinedProperties)}var Zy=function(e){d(n,e);var t=v(n);function n(){return f(this,n),t.apply(this,arguments)}return h(n,[{key:"_toFieldTransform",value:function(e){return new ph(e.path,new sh)}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(Oy),Hy=function(e){d(n,e);var t=v(n);function n(e,r){var i;return f(this,n),(i=t.call(this,e)).Ua=r,i}return h(n,[{key:"_toFieldTransform",value:function(e){var t=zy(this,e,!0),n=this.Ua.map(function(e){return Jy(e,t)}),r=new uh(n);return new ph(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(Oy),Gy=function(e){d(n,e);var t=v(n);function n(e,r){var i;return f(this,n),(i=t.call(this,e)).Ua=r,i}return h(n,[{key:"_toFieldTransform",value:function(e){var t=zy(this,e,!0),n=this.Ua.map(function(e){return Jy(e,t)}),r=new lh(n);return new ph(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(Oy),Ky=function(e){d(n,e);var t=v(n);function n(e,r){var i;return f(this,n),(i=t.call(this,e)).qa=r,i}return h(n,[{key:"_toFieldTransform",value:function(e){var t=new fh(e.N,nh(e.N,this.qa));return new ph(e.path,t)}},{key:"isEqual",value:function(e){return this===e}}]),n}(Oy);function Wy(e,t,n,r){var i=e.Ba(1,t,n);ek("Data must be an object, but it was:",i,r);var a=[],o=vl.empty();Lc(r,function(e,r){var s=rk(t,e,n);r=(0,Ji.m9)(r);var u=i.$a(s);if(r instanceof By)a.push(s);else{var c=Jy(r,u);null!=c&&(a.push(s),o.set(s,c))}});var s=new qc(a);return new Fy(o,s,i.fieldTransforms)}function Qy(e,t,n,r,i,a){var o=e.Ba(1,t,n),s=[tk(t,r,n)],u=[i];if(a.length%2!=0)throw new yc(gc.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(var c=0;c<a.length;c+=2)s.push(tk(t,a[c])),u.push(a[c+1]);for(var l=[],h=vl.empty(),f=s.length-1;f>=0;--f)if(!ak(l,s[f])){var d=s[f],v=u[f];v=(0,Ji.m9)(v);var p=o.$a(d);if(v instanceof By)l.push(d);else{var m=Jy(v,p);null!=m&&(l.push(d),h.set(d,m))}}var g=new qc(l);return new Fy(h,g,o.fieldTransforms)}function Yy(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return Jy(n,e.Ba(r?4:3,t))}function Jy(e,t){if(Xy(e=(0,Ji.m9)(e)))return ek("Unsupported field value:",t,e),$y(e,t);if(e instanceof Oy)return function(e,t){if(!My(t.Da))throw t.Fa("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.Fa("".concat(e._methodName,"() is not currently supported inside arrays"));var n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.xa&&4!==t.Da)throw t.Fa("Nested arrays are not supported");return function(e,t){var n,r=[],i=0,a=s(e);try{for(a.s();!(n=a.n()).done;){var o=Jy(n.value,t.Oa(i));null==o&&(o={nullValue:"NULL_VALUE"}),r.push(o),i++}}catch(u){a.e(u)}finally{a.f()}return{arrayValue:{values:r}}}(e,t)}return function(e,t){if(null===(e=(0,Ji.m9)(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return nh(t.N,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){var n=Oc.fromDate(e);return{timestampValue:hf(t.N,n)}}if(e instanceof Oc){var r=new Oc(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:hf(t.N,r)}}if(e instanceof Dy)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof Ny)return{bytesValue:ff(t.N,e._byteString)};if(e instanceof py){var i=t.databaseId,a=e.firestore._databaseId;if(!a.isEqual(i))throw t.Fa("Document reference is for database ".concat(a.projectId,"/").concat(a.database," but should be for database ").concat(i.projectId,"/").concat(i.database));return{referenceValue:pf(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.Fa("Unsupported field value: ".concat(ly(e)))}(e,t)}function $y(e,t){var n={};return Fc(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Lc(e,function(e,r){var i=Jy(r,t.Na(e));null!=i&&(n[e]=i)}),{mapValue:{fields:n}}}function Xy(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof Oc||e instanceof Dy||e instanceof Ny||e instanceof py||e instanceof Oy)}function ek(e,t,n){if(!Xy(n)||"object"!=typeof(i=n)||null===i||Object.getPrototypeOf(i)!==Object.prototype&&null!==Object.getPrototypeOf(i)){var r=ly(n);throw t.Fa("an object"===r?e+" a custom object":e+" "+r)}var i}function tk(e,t,n){if((t=(0,Ji.m9)(t))instanceof Ay)return t._internalPath;if("string"==typeof t)return rk(e,t);throw ik("Field path arguments must be of type string or FieldPath.",e,!1,void 0,n)}var nk=new RegExp("[~\\*/\\[\\]]");function rk(e,t,n){if(t.search(nk)>=0)throw ik("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return y(Ay,a(t.split(".")))._internalPath}catch(r){throw ik("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function ik(e,t,n,r,i){var a=r&&!r.isEmpty(),o=void 0!==i,s="Function ".concat(t,"() called with invalid data");n&&(s+=" (via `toFirestore()`)"),s+=". ";var u="";return(a||o)&&(u+=" (found",a&&(u+=" in field ".concat(r)),o&&(u+=" in document ".concat(i)),u+=")"),new yc(gc.INVALID_ARGUMENT,s+e+u)}function ak(e,t){return e.some(function(e){return e.isEqual(t)})}var ok=function(){function e(t,n,r,i,a){f(this,e),this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=a}return h(e,[{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"ref",get:function(){return new py(this._firestore,this._converter,this._key)}},{key:"exists",value:function(){return null!==this._document}},{key:"data",value:function(){if(this._document){if(this._converter){var e=new sk(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}},{key:"get",value:function(e){if(this._document){var t=this._document.data.field(uk("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}]),e}(),sk=function(e){d(n,e);var t=v(n);function n(){return f(this,n),t.apply(this,arguments)}return h(n,[{key:"data",value:function(){return i(b(n.prototype),"data",this).call(this)}}]),n}(ok);function uk(e,t){return"string"==typeof t?rk(e,t):t instanceof Ay?t._internalPath:t._delegate._internalPath}var ck=function(){function e(t,n){f(this,e),this.hasPendingWrites=t,this.fromCache=n}return h(e,[{key:"isEqual",value:function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}]),e}(),lk=function(e){d(n,e);var t=v(n);function n(e,r,i,a,o,s){var u;return f(this,n),(u=t.call(this,e,r,i,a,s))._firestore=e,u._firestoreImpl=e,u.metadata=o,u}return h(n,[{key:"exists",value:function(){return i(b(n.prototype),"exists",this).call(this)}},{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){var t=new hk(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){var n=this._document.data.field(uk("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}]),n}(ok),hk=function(e){d(n,e);var t=v(n);function n(){return f(this,n),t.apply(this,arguments)}return h(n,[{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return i(b(n.prototype),"data",this).call(this,e)}}]),n}(lk),fk=function(){function e(t,n,r,i){f(this,e),this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new ck(i.hasPendingWrites,i.fromCache),this.query=r}return h(e,[{key:"docs",get:function(){var e=[];return this.forEach(function(t){return e.push(t)}),e}},{key:"size",get:function(){return this._snapshot.docs.size}},{key:"empty",get:function(){return 0===this.size}},{key:"forEach",value:function(e,t){var n=this;this._snapshot.docs.forEach(function(r){e.call(t,new hk(n._firestore,n._userDataWriter,r.key,r,new ck(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))})}},{key:"docChanges",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new yc(gc.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){var n=0;return e._snapshot.docChanges.map(function(t){return{type:"added",doc:new hk(e._firestore,e._userDataWriter,t.doc.key,t.doc,new ck(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),oldIndex:-1,newIndex:n++}})}var r=e._snapshot.oldDocs;return e._snapshot.docChanges.filter(function(e){return t||3!==e.type}).map(function(t){var n=new hk(e._firestore,e._userDataWriter,t.doc.key,t.doc,new ck(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),i=-1,a=-1;return 0!==t.type&&(i=r.indexOf(t.doc.key),r=r.delete(t.doc.key)),1!==t.type&&(a=(r=r.add(t.doc)).indexOf(t.doc.key)),{type:dk(t.type),doc:n,oldIndex:i,newIndex:a}})}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}]),e}();function dk(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return vc()}}function vk(e,t){return e instanceof lk&&t instanceof lk?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof fk&&t instanceof fk&&e._firestore===t._firestore&&by(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}function pk(e){if(ql(e)&&0===e.explicitOrderBy.length)throw new yc(gc.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var mk=function e(){f(this,e)};function gk(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=o._apply(e)}return e}var yk=function(e){d(n,e);var t=v(n);function n(e,r,i){var a;return f(this,n),(a=t.call(this)).Ka=e,a.ja=r,a.Qa=i,a.type="where",a}return h(n,[{key:"_apply",value:function(e){var t,n,r,i=Vy(e.firestore),a=function(e,t,n,r,i,a,o){var u;if(i.isKeyField()){if("array-contains"===a||"array-contains-any"===a)throw new yc(gc.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(a,"' queries on FieldPath.documentId()."));if("in"===a||"not-in"===a){Ik(o,a);var c,l=[],h=s(o);try{for(h.s();!(c=h.n()).done;){var f=c.value;l.push(Tk(r,e,f))}}catch(v){h.e(v)}finally{h.f()}u={arrayValue:{values:l}}}else u=Tk(r,e,o)}else"in"!==a&&"not-in"!==a&&"array-contains-any"!==a||Ik(o,a),u=Yy(n,"where",o,"in"===a||"not-in"===a);var d=_l.create(i,a,u);return function(e,t){if(t.v()){var n=zl(e);if(null!==n&&!n.isEqual(t.field))throw new yc(gc.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '".concat(n.toString(),"' and '").concat(t.field.toString(),"'"));var r=Bl(e);null!==r&&Sk(0,t.field,r)}var i=function(e,t){var n,r=s(e.filters);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(t.indexOf(i.op)>=0)return i.op}}catch(v){r.e(v)}finally{r.f()}return null}(e,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==i)throw new yc(gc.INVALID_ARGUMENT,i===t.op?"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter."):"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(i.toString(),"' filters."))}(e,d),d}(e._query,0,i,e.firestore._databaseId,this.Ka,this.ja,this.Qa);return new my(e.firestore,e.converter,(t=e._query,n=a,r=t.filters.concat([n]),new Ml(t.path,t.collectionGroup,t.explicitOrderBy.slice(),r,t.limit,t.limitType,t.startAt,t.endAt)))}}]),n}(mk),kk=function(e){d(n,e);var t=v(n);function n(e,r){var i;return f(this,n),(i=t.call(this)).Ka=e,i.Wa=r,i.type="orderBy",i}return h(n,[{key:"_apply",value:function(e){var t,n,r,i=function(e,t,n){if(null!==e.startAt)throw new yc(gc.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new yc(gc.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new Dl(t,n);return function(e,t){if(null===Bl(e)){var n=zl(e);null!==n&&Sk(0,n,t.field)}}(e,r),r}(e._query,this.Ka,this.Wa);return new my(e.firestore,e.converter,(t=e._query,n=i,r=t.explicitOrderBy.concat([n]),new Ml(t.path,t.collectionGroup,r,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)))}}]),n}(mk),wk=function(e){d(n,e);var t=v(n);function n(e,r,i){var a;return f(this,n),(a=t.call(this)).type=e,a.Ga=r,a.za=i,a}return h(n,[{key:"_apply",value:function(e){return new my(e.firestore,e.converter,Kl(e._query,this.Ga,this.za))}}]),n}(mk),bk=function(e){d(n,e);var t=v(n);function n(e,r,i){var a;return f(this,n),(a=t.call(this)).type=e,a.Ha=r,a.Ja=i,a}return h(n,[{key:"_apply",value:function(e){var t,n,r=xk(e,this.type,this.Ha,this.Ja);return new my(e.firestore,e.converter,(n=r,new Ml((t=e._query).path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,n,t.endAt)))}}]),n}(mk),_k=function(e){d(n,e);var t=v(n);function n(e,r,i){var a;return f(this,n),(a=t.call(this)).type=e,a.Ha=r,a.Ja=i,a}return h(n,[{key:"_apply",value:function(e){var t,n,r=xk(e,this.type,this.Ha,this.Ja);return new my(e.firestore,e.converter,(n=r,new Ml((t=e._query).path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,n)))}}]),n}(mk);function xk(e,t,n,r){if(n[0]=(0,Ji.m9)(n[0]),n[0]instanceof ok)return function(e,t,n,r,i){if(!r)throw new yc(gc.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(n,"()."));var a,o=[],u=s(Hl(e));try{for(u.s();!(a=u.n()).done;){var c=a.value;if(c.field.isKeyField())o.push(sl(t,r.key));else{var l=r.data.field(c.field);if(Kc(l))throw new yc(gc.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+c.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===l){var h=c.field.canonicalString();throw new yc(gc.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(h,"' (used as the orderBy) does not exist."))}o.push(l)}}}catch(f){u.e(f)}finally{u.f()}return new Nl(o,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);var i=Vy(e.firestore);return function(e,t,n,r,i,a){var o=e.explicitOrderBy;if(i.length>o.length)throw new yc(gc.INVALID_ARGUMENT,"Too many arguments provided to ".concat(r,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));for(var s=[],u=0;u<i.length;u++){var c=i[u];if(o[u].field.isKeyField()){if("string"!=typeof c)throw new yc(gc.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(r,"(), but got a ").concat(typeof c));if(!Zl(e)&&-1!==c.indexOf("/"))throw new yc(gc.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to ".concat(r,"() must be a plain document ID, but '").concat(c,"' contains a slash."));var l=e.path.child(Uc.fromString(c));if(!Xc.isDocumentKey(l))throw new yc(gc.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to ".concat(r,"() must result in a valid document path, but '").concat(l,"' is not because it contains an odd number of segments."));var h=new Xc(l);s.push(sl(t,h))}else{var f=Yy(n,r,c);s.push(f)}}return new Nl(s,a)}(e._query,e.firestore._databaseId,i,t,n,r)}function Tk(e,t,n){if("string"==typeof(n=(0,Ji.m9)(n))){if(""===n)throw new yc(gc.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!Zl(t)&&-1!==n.indexOf("/"))throw new yc(gc.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));var r=t.path.child(Uc.fromString(n));if(!Xc.isDocumentKey(r))throw new yc(gc.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return sl(e,new Xc(r))}if(n instanceof py)return sl(e,n._key);throw new yc(gc.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(ly(n),"."))}function Ik(e,t){if(!Array.isArray(e)||0===e.length)throw new yc(gc.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."));if(e.length>10)throw new yc(gc.INVALID_ARGUMENT,"Invalid Query. '".concat(t.toString(),"' filters support a maximum of 10 elements in the value array."))}function Sk(e,t,n){if(!n.isEqual(t))throw new yc(gc.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '".concat(t.toString(),"' and so you must also use '").concat(t.toString(),"' as your first argument to orderBy(), but your first orderBy() is on field '").concat(n.toString(),"' instead."))}var Ek=function(){function e(){f(this,e)}return h(e,[{key:"convertValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(el(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Hc(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Gc(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw vc()}}},{key:"convertObject",value:function(e,t){var n=this,r={};return Lc(e.fields,function(e,i){r[e]=n.convertValue(i,t)}),r}},{key:"convertGeoPoint",value:function(e){return new Dy(Hc(e.latitude),Hc(e.longitude))}},{key:"convertArray",value:function(e,t){var n=this;return(e.values||[]).map(function(e){return n.convertValue(e,t)})}},{key:"convertServerTimestamp",value:function(e,t){switch(t){case"previous":var n=Wc(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(Qc(e));default:return null}}},{key:"convertTimestamp",value:function(e){var t=Zc(e);return new Oc(t.seconds,t.nanos)}},{key:"convertDocumentKey",value:function(e,t){var n=Uc.fromString(e);pc(Vf(n));var r=new iy(n.get(1),n.get(3)),i=new Xc(n.popFirst(5));return r.isEqual(t)||hc("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}]),e}();function Rk(e,t,n){return e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t}var Ck=function(e){d(n,e);var t=v(n);function n(e){var r;return f(this,n),(r=t.call(this)).firestore=e,r}return h(n,[{key:"convertBytes",value:function(e){return new Ny(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new py(this.firestore,null,t)}}]),n}(Ek),Ak=function(){function e(t,n){f(this,e),this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Vy(t)}return h(e,[{key:"set",value:function(e,t,n){this._verifyNotCommitted();var r=Nk(e,this._firestore),i=Rk(r.converter,t,n),a=qy(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(a.toMutation(r._key,gh.none())),this}},{key:"update",value:function(e,t,n){this._verifyNotCommitted();for(var r,i=Nk(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),s=3;s<a;s++)o[s-3]=arguments[s];return r="string"==typeof(t=(0,Ji.m9)(t))||t instanceof Ay?Qy(this._dataReader,"WriteBatch.update",i._key,t,n,o):Wy(this._dataReader,"WriteBatch.update",i._key,t),this._mutations.push(r.toMutation(i._key,gh.exists(!0))),this}},{key:"delete",value:function(e){this._verifyNotCommitted();var t=Nk(e,this._firestore);return this._mutations=this._mutations.concat(new Oh(t._key,gh.none())),this}},{key:"commit",value:function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}},{key:"_verifyNotCommitted",value:function(){if(this._committed)throw new yc(gc.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}]),e}();function Nk(e,t){if((e=(0,Ji.m9)(e)).firestore!==t)throw new yc(gc.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}var Ok=function(e){d(n,e);var t=v(n);function n(e){var r;return f(this,n),(r=t.call(this)).firestore=e,r}return h(n,[{key:"convertBytes",value:function(e){return new Ny(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new py(this.firestore,null,t)}}]),n}(Ek);function Dk(e,t,n){e=hy(e,py);var r=hy(e.firestore,Iy),i=Rk(e.converter,t,n);return Fk(r,[qy(Vy(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,gh.none())])}function Pk(e,t,n){e=hy(e,py);for(var r=hy(e.firestore,Iy),i=Vy(r),a=arguments.length,o=new Array(a>3?a-3:0),s=3;s<a;s++)o[s-3]=arguments[s];return Fk(r,[("string"==typeof(t=(0,Ji.m9)(t))||t instanceof Ay?Qy(i,"updateDoc",e._key,t,n,o):Wy(i,"updateDoc",e._key,t)).toMutation(e._key,gh.exists(!0))])}function Lk(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,a,o;e=(0,Ji.m9)(e);var s={includeMetadataChanges:!1},u=0;"object"!=typeof n[u]||xy(n[u])||(s=n[u],u++);var c,l,h,f={includeMetadataChanges:s.includeMetadataChanges};if(xy(n[u])){var d=n[u];n[u]=null===(i=d.next)||void 0===i?void 0:i.bind(d),n[u+1]=null===(a=d.error)||void 0===a?void 0:a.bind(d),n[u+2]=null===(o=d.complete)||void 0===o?void 0:o.bind(d)}if(e instanceof py)l=hy(e.firestore,Iy),h=jl(e._key.path),c={next:function(t){n[u]&&n[u](Mk(l,e,t))},error:n[u+1],complete:n[u+2]};else{var v=hy(e,my);l=hy(v.firestore,Iy),h=v._query;var p=new Ok(l);c={next:function(e){n[u]&&n[u](new fk(l,p,v,e))},error:n[u+1],complete:n[u+2]},pk(e._query)}return function(e,t,n,r){var i=new Fg(r),a=new Rm(t,i,n);return e.asyncQueue.enqueueAndForget((0,Ki.Z)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=bm,t.next=3,Xg(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}},t)}))),function(){i.Xo(),e.asyncQueue.enqueueAndForget((0,Ki.Z)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=xm,t.next=3,Xg(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}},t)})))}}(Sy(l),h,f,c)}function Fk(e,t){return n=Sy(e),r=t,i=new kc,n.asyncQueue.enqueueAndForget((0,Ki.Z)(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=function(e,t,n){return Hm.apply(this,arguments)},e.next=3,$g(n);case 3:return e.t1=e.sent,e.t2=r,e.t3=i,e.abrupt("return",(0,e.t0)(e.t1,e.t2,e.t3));case 7:case"end":return e.stop()}},e)}))),i.promise;var n,r,i}function Mk(e,t,n){var r=n.docs.get(t._key),i=new Ok(e);return new lk(e,i,t._key,r,new ck(n.hasPendingWrites,n.fromCache),t.converter)}var Uk=function(e){d(n,e);var t=v(n);function n(e,r){var i;return f(this,n),(i=t.call(this,e,r))._firestore=e,i}return h(n,[{key:"get",value:function(e){var t=this,r=Nk(e,this._firestore),a=new Ok(this._firestore);return i(b(n.prototype),"get",this).call(this,e).then(function(e){return new lk(t._firestore,a,r._key,e._document,new ck(!1,!1),r.converter)})}}]),n}(function(){function e(t,n){f(this,e),this._firestore=t,this._transaction=n,this._dataReader=Vy(t)}return h(e,[{key:"get",value:function(e){var t=this,n=Nk(e,this._firestore),r=new Ck(this._firestore);return this._transaction.lookup([n._key]).then(function(e){if(!e||1!==e.length)return vc();var i=e[0];if(i.isFoundDocument())return new ok(t._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new ok(t._firestore,r,n._key,null,n.converter);throw vc()})}},{key:"set",value:function(e,t,n){var r=Nk(e,this._firestore),i=Rk(r.converter,t,n),a=qy(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,a),this}},{key:"update",value:function(e,t,n){for(var r,i=Nk(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),s=3;s<a;s++)o[s-3]=arguments[s];return r="string"==typeof(t=(0,Ji.m9)(t))||t instanceof Ay?Qy(this._dataReader,"Transaction.update",i._key,t,n,o):Wy(this._dataReader,"Transaction.update",i._key,t),this._transaction.update(i._key,r),this}},{key:"delete",value:function(e){var t=Nk(e,this._firestore);return this._transaction.delete(t._key),this}}]),e}());function jk(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new yc("invalid-argument","Invalid options passed to function ".concat(e,'(): You cannot specify both "merge" and "mergeFields".'));return t}function Vk(){if("undefined"==typeof Uint8Array)throw new yc("unimplemented","Uint8Arrays are not available in this environment.")}function qk(){if("undefined"==typeof atob)throw new yc("unimplemented","Blobs are unavailable in Firestore in this environment.")}(function(e){sc=e})(Wi.SDK_VERSION),(0,Wi._registerComponent)(new Qi.wA("firestore",function(e,t){var n=t.options,r=e.getProvider("app").getImmediate(),i=new Iy(r,new xc(e.getProvider("auth-internal")));return n=Object.assign({useFetchStreams:!0},n),i._setSettings(n),i},"PUBLIC")),(0,Wi.registerVersion)(ac,"3.1.1",void 0),(0,Wi.registerVersion)(ac,"3.1.1","esm2017");var Bk=function(){function e(t){f(this,e),this._delegate=t}return h(e,[{key:"toBase64",value:function(){return qk(),this._delegate.toBase64()}},{key:"toUint8Array",value:function(){return Vk(),this._delegate.toUint8Array()}},{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}},{key:"toString",value:function(){return"Blob(base64: "+this.toBase64()+")"}}],[{key:"fromBase64String",value:function(t){return qk(),new e(Ny.fromBase64String(t))}},{key:"fromUint8Array",value:function(t){return Vk(),new e(Ny.fromUint8Array(t))}}]),e}();function zk(e){return function(e,t){if("object"!=typeof e||null===e)return!1;for(var n=e,r=0,i=["next","error","complete"];r<i.length;r++){var a=i[r];if(a in n&&"function"==typeof n[a])return!0}return!1}(e)}var Zk=function(){function e(){f(this,e)}return h(e,[{key:"enableIndexedDbPersistence",value:function(e,t){return function(e,t){Cy(e=hy(e,Iy));var n=Sy(e),r=e._freezeSettings(),i=new Pg;return Ry(n,i,new Og(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})}},{key:"enableMultiTabIndexedDbPersistence",value:function(e){return function(e){Cy(e=hy(e,Iy));var t=Sy(e),n=e._freezeSettings(),r=new Pg;return Ry(t,r,new Dg(r,n.cacheSizeBytes))}(e._delegate)}},{key:"clearIndexedDbPersistence",value:function(e){return function(e){if(e._initialized&&!e._terminated)throw new yc(gc.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var t=new kc;return e._queue.enqueueAndForgetEvenWhileRestricted((0,Ki.Z)(regeneratorRuntime.mark(function n(){var r;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,(r=(0,Ki.Z)(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(fd.bt()){e.next=2;break}return e.abrupt("return",Promise.resolve());case 2:return n=t+"main",e.next=5,fd.delete(n);case 5:case"end":return e.stop()}},e)})),function(e){return r.apply(this,arguments)})(Tv(e._databaseId,e._persistenceKey));case 3:t.resolve(),n.next=9;break;case 6:n.prev=6,n.t0=n.catch(0),t.reject(n.t0);case 9:case"end":return n.stop()}},n,null,[[0,6]])}))),t.promise}(e._delegate)}}]),e}(),Hk=function(){function e(t,n,r){var i=this;f(this,e),this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:function(){return i.terminate()}},t instanceof iy||(this._appCompat=t)}return h(e,[{key:"_databaseId",get:function(){return this._delegate._databaseId}},{key:"settings",value:function(e){var t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&fc("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}},{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};!function(e,t,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=(e=hy(e,vy))._getSettings();if("firestore.googleapis.com"!==a.host&&a.host!==t&&fc("Host has been set in both settings() and useEmulator(), emulator host will be used"),e._setSettings(Object.assign(Object.assign({},a),{host:"".concat(t,":").concat(n),ssl:!1})),i.mockUserToken){var o,s;if("string"==typeof i.mockUserToken)o=i.mockUserToken,s=oc.MOCK_USER;else{o=(0,Ji.Sg)(i.mockUserToken,null===(r=e._app)||void 0===r?void 0:r.options.projectId);var u=i.mockUserToken.sub||i.mockUserToken.user_id;if(!u)throw new yc(gc.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");s=new oc(u)}e._credentials=new _c(new wc(o,s))}}(this._delegate,e,t,n)}},{key:"enableNetwork",value:function(){return function(e){return function(e){return e.asyncQueue.enqueue((0,Ki.Z)(regeneratorRuntime.mark(function t(){var n,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Qg(e);case 2:return n=t.sent,t.next=5,Jg(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!0),i=void 0,(i=mc(r)).Kr.delete(0),Cp(i)));case 7:case"end":return t.stop()}var i},t)})))}(Sy(e=hy(e,Iy)))}(this._delegate)}},{key:"disableNetwork",value:function(){return function(e){return function(e){return e.asyncQueue.enqueue((0,Ki.Z)(regeneratorRuntime.mark(function t(){var n,r,i;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Qg(e);case 2:return n=t.sent,t.next=5,Jg(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!1),(i=(0,Ki.Z)(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(n=mc(t)).Kr.add(0),e.next=4,Np(n);case 4:n.Wr.set("Offline");case 5:case"end":return e.stop()}},e)})),function(e){return i.apply(this,arguments)})(r)));case 7:case"end":return t.stop()}},t)})))}(Sy(e=hy(e,Iy)))}(this._delegate)}},{key:"enablePersistence",value:function(e){var t=!1,n=!1;return e&&sy("synchronizeTabs",t=!!e.synchronizeTabs,"experimentalForceOwningTab",n=!!e.experimentalForceOwningTab),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}},{key:"clearPersistence",value:function(){return this._persistenceProvider.clearIndexedDbPersistence(this)}},{key:"terminate",value:function(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}},{key:"waitForPendingWrites",value:function(){return function(e){return t=Sy(e=hy(e,Iy)),n=new kc,t.asyncQueue.enqueueAndForget((0,Ki.Z)(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=function(e,t){return tg.apply(this,arguments)},e.next=3,$g(t);case 3:return e.t1=e.sent,e.t2=n,e.abrupt("return",(0,e.t0)(e.t1,e.t2));case 6:case"end":return e.stop()}},e)}))),n.promise;var t,n}(this._delegate)}},{key:"onSnapshotsInSync",value:function(e){return function(e,t){return function(e,t){var n=new Fg(t);return e.asyncQueue.enqueueAndForget((0,Ki.Z)(regeneratorRuntime.mark(function t(){var r,i;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Xg(e);case 2:return r=t.sent,i=n,mc(r).Zr.add(i),t.abrupt("return",void i.next());case 6:case"end":return t.stop()}},t)}))),function(){n.Xo(),e.asyncQueue.enqueueAndForget((0,Ki.Z)(regeneratorRuntime.mark(function t(){var r,i;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Xg(e);case 2:return r=t.sent,i=n,t.abrupt("return",void mc(r).Zr.delete(i));case 5:case"end":return t.stop()}},t)})))}}(Sy(e=hy(e,Iy)),xy(t)?t:{next:t})}(this._delegate,e)}},{key:"app",get:function(){if(!this._appCompat)throw new yc("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}},{key:"collection",value:function(e){try{return new aw(this,yy(this._delegate,e))}catch(t){throw Jk(t,"collection()","Firestore.collection()")}}},{key:"doc",value:function(e){try{return new Yk(this,ky(this._delegate,e))}catch(t){throw Jk(t,"doc()","Firestore.doc()")}}},{key:"collectionGroup",value:function(e){try{return new nw(this,function(e,t){if(e=hy(e,vy),oy("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new yc(gc.INVALID_ARGUMENT,"Invalid collection ID '".concat(t,"' passed to function collectionGroup(). Collection IDs must not contain '/'."));return new my(e,null,(n=t,new Ml(Uc.emptyPath(),n)));var n}(this._delegate,e))}catch(t){throw Jk(t,"collectionGroup()","Firestore.collectionGroup()")}}},{key:"runTransaction",value:function(e){var t=this;return function(e,t){return function(e,t){var n=new kc;return e.asyncQueue.enqueueAndForget((0,Ki.Z)(regeneratorRuntime.mark(function r(){var i;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Kg(e).then(function(e){return e.datastore});case 2:i=r.sent,new jg(e.asyncQueue,i,t,n).run();case 4:case"end":return r.stop()}},r)}))),n.promise}(Sy(e),function(n){return t(new Uk(e,n))})}(this._delegate,function(n){return e(new Kk(t,n))})}},{key:"batch",value:function(){var e=this;return Sy(this._delegate),new Wk(new Ak(this._delegate,function(t){return Fk(e._delegate,t)}))}},{key:"loadBundle",value:function(e){return function(e,t){var n=Sy(e=hy(e,Iy)),r=new Ty;return function(e,t,n,r){var i,a,o,s=(i=n,a=bp(t),o=function(e,t){if(e instanceof Uint8Array)return Lg(e,t);if(e instanceof ArrayBuffer)return Lg(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}("string"==typeof i?(new TextEncoder).encode(i):i),new Mg(o,a));e.asyncQueue.enqueueAndForget((0,Ki.Z)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t,n){var r,i=mc(e);(r=(0,Ki.Z)(regeneratorRuntime.mark(function e(t,n,r){var i,a,o,s,u,c;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.getMetadata();case 3:return i=e.sent,e.next=6,function(e,t){var n=mc(e),r=vf(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",function(e){return n.Je.getBundleMetadata(e,t.id)}).then(function(e){return!!e&&e.createTime.compareTo(r)>=0})}(t.localStore,i);case 6:if(!e.sent){e.next=10;break}return e.next=9,n.close();case 9:return e.abrupt("return",void r._completeWith((c=i,{taskState:"Success",documentsLoaded:c.totalDocuments,bytesLoaded:c.totalBytes,totalDocuments:c.totalDocuments,totalBytes:c.totalBytes})));case 10:return r._updateProgress(Om(i)),a=new Nm(i,t.localStore,n.N),e.next=14,n.Qo();case 14:o=e.sent;case 15:if(!o){e.next=25;break}return e.next=18,a.fo(o);case 18:return(s=e.sent)&&r._updateProgress(s),e.next=22,n.Qo();case 22:o=e.sent;case 23:e.next=15;break;case 25:return e.next=27,a.complete();case 27:return u=e.sent,e.next=30,cg(t,u.En,void 0);case 30:return e.next=32,function(e,t){var n=mc(e);return n.persistence.runTransaction("Save bundle","readwrite",function(e){return n.Je.saveBundleMetadata(e,t)})}(t.localStore,i);case 32:r._completeWith(u.progress),e.next=38;break;case 35:e.prev=35,e.t0=e.catch(0),fc("SyncEngine","Loading bundle failed with ".concat(e.t0)),r._failWith(e.t0);case 38:case"end":return e.stop()}},e,null,[[0,35]])})),function(e,t,n){return r.apply(this,arguments)})(i,t,n).then(function(){i.sharedClientState.notifyBundleLoaded()})},t.next=3,$g(e);case 3:t.t1=t.sent,t.t2=s,t.t3=r,(0,t.t0)(t.t1,t.t2,t.t3);case 7:case"end":return t.stop()}},t)})))}(n,e._databaseId,t,r),r}(this._delegate,e)}},{key:"namedQuery",value:function(e){var t=this;return function(e,t){return function(e,t){return e.asyncQueue.enqueue((0,Ki.Z)(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=function(e,t){var n=mc(e);return n.persistence.runTransaction("Get named query","readonly",function(e){return n.Je.getNamedQuery(e,t)})},n.next=3,Yg(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}},n)})))}(Sy(e=hy(e,Iy)),t).then(function(t){return t?new my(e,null,t.query):null})}(this._delegate,e).then(function(e){return e?new nw(t,e):null})}}]),e}(),Gk=function(e){d(n,e);var t=v(n);function n(e){var r;return f(this,n),(r=t.call(this)).firestore=e,r}return h(n,[{key:"convertBytes",value:function(e){return new Bk(new Ny(e))}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return Yk.forKey(t,this.firestore,null)}}]),n}(Ek),Kk=function(){function e(t,n){f(this,e),this._firestore=t,this._delegate=n,this._userDataWriter=new Gk(t)}return h(e,[{key:"get",value:function(e){var t=this,n=ow(e);return this._delegate.get(n).then(function(e){return new ew(t._firestore,new lk(t._firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,n.converter))})}},{key:"set",value:function(e,t,n){var r=ow(e);return n?(jk("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r,i=arguments.length,a=new Array(i>3?i-3:0),o=3;o<i;o++)a[o-3]=arguments[o];var s=ow(e);return 2===arguments.length?this._delegate.update(s,t):(r=this._delegate).update.apply(r,[s,t,n].concat(a)),this}},{key:"delete",value:function(e){var t=ow(e);return this._delegate.delete(t),this}}]),e}(),Wk=function(){function e(t){f(this,e),this._delegate=t}return h(e,[{key:"set",value:function(e,t,n){var r=ow(e);return n?(jk("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r,i=arguments.length,a=new Array(i>3?i-3:0),o=3;o<i;o++)a[o-3]=arguments[o];var s=ow(e);return 2===arguments.length?this._delegate.update(s,t):(r=this._delegate).update.apply(r,[s,t,n].concat(a)),this}},{key:"delete",value:function(e){var t=ow(e);return this._delegate.delete(t),this}},{key:"commit",value:function(){return this._delegate.commit()}}]),e}(),Qk=function(){function e(t,n,r){f(this,e),this._firestore=t,this._userDataWriter=n,this._delegate=r}return h(e,[{key:"fromFirestore",value:function(e,t){var n=new hk(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new tw(this._firestore,n),null!=t?t:{})}},{key:"toFirestore",value:function(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}}],[{key:"getInstance",value:function(t,n){var r=e.INSTANCES,i=r.get(t);i||(i=new WeakMap,r.set(t,i));var a=i.get(n);return a||(a=new e(t,new Gk(t),n),i.set(n,a)),a}}]),e}();Qk.INSTANCES=new WeakMap;var Yk=function(){function e(t,n){f(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new Gk(t)}return h(e,[{key:"id",get:function(){return this._delegate.id}},{key:"parent",get:function(){return new aw(this.firestore,this._delegate.parent)}},{key:"path",get:function(){return this._delegate.path}},{key:"collection",value:function(e){try{return new aw(this.firestore,yy(this._delegate,e))}catch(t){throw Jk(t,"collection()","DocumentReference.collection()")}}},{key:"isEqual",value:function(e){return(e=(0,Ji.m9)(e))instanceof py&&wy(this._delegate,e)}},{key:"set",value:function(e,t){t=jk("DocumentReference.set",t);try{return t?Dk(this._delegate,e,t):Dk(this._delegate,e)}catch(n){throw Jk(n,"setDoc()","DocumentReference.set()")}}},{key:"update",value:function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];try{return 1===arguments.length?Pk(this._delegate,e):Pk.apply(void 0,[this._delegate,e,t].concat(r))}catch(a){throw Jk(a,"updateDoc()","DocumentReference.update()")}}},{key:"delete",value:function(){return function(e){return Fk(hy(e.firestore,Iy),[new Oh(e._key,gh.none())])}(this._delegate)}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=$k(n),a=Xk(n,function(t){return new ew(e.firestore,new lk(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))});return Lk(this._delegate,i,a)}},{key:"get",value:function(e){var t=this;return("cache"===(null==e?void 0:e.source)?function(e){e=hy(e,py);var t=hy(e.firestore,Iy),n=Sy(t),r=new Ok(t);return function(e,t){var n=new kc;return e.asyncQueue.enqueueAndForget((0,Ki.Z)(regeneratorRuntime.mark(function r(){var i;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=(i=(0,Ki.Z)(regeneratorRuntime.mark(function e(t,n,r){var i,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,function(e,t){var n=mc(e);return n.persistence.runTransaction("read document","readonly",function(e){return n.Qn.An(e,t)})}(t,n);case 3:(i=e.sent).isFoundDocument()?r.resolve(i):i.isNoDocument()?r.resolve(null):r.reject(new yc(gc.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),a=pm(e.t0,"Failed to get document '".concat(n," from cache")),r.reject(a);case 11:case"end":return e.stop()}},e,null,[[0,7]])})),function(e,t,n){return i.apply(this,arguments)}),r.next=3,Yg(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}},r)}))),n.promise}(n,e._key).then(function(n){return new lk(t,r,e._key,n,new ck(null!==n&&n.hasLocalMutations,!0),e.converter)})}(this._delegate):"server"===(null==e?void 0:e.source)?function(e){e=hy(e,py);var t=hy(e.firestore,Iy);return ty(Sy(t),e._key,{source:"server"}).then(function(n){return Mk(t,e,n)})}(this._delegate):function(e){e=hy(e,py);var t=hy(e.firestore,Iy);return ty(Sy(t),e._key).then(function(n){return Mk(t,e,n)})}(this._delegate)).then(function(e){return new ew(t.firestore,new lk(t.firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,t._delegate.converter))})}},{key:"withConverter",value:function(t){return new e(this.firestore,this._delegate.withConverter(t?Qk.getInstance(this.firestore,t):null))}}],[{key:"forPath",value:function(t,n,r){if(t.length%2!=0)throw new yc("invalid-argument","Invalid document reference. Document references must have an even number of segments, but ".concat(t.canonicalString()," has ").concat(t.length));return new e(n,new py(n._delegate,r,new Xc(t)))}},{key:"forKey",value:function(t,n,r){return new e(n,new py(n._delegate,r,t))}}]),e}();function Jk(e,t,n){return e.message=e.message.replace(t,n),e}function $k(e){var t,n=s(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;if("object"==typeof r&&!zk(r))return r}}catch(i){n.e(i)}finally{n.f()}return{}}function Xk(e,t){var n,r,i;return{next:function(e){i.next&&i.next(t(e))},error:null===(n=(i=zk(e[0])?e[0]:zk(e[1])?e[1]:"function"==typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var ew=function(){function e(t,n){f(this,e),this._firestore=t,this._delegate=n}return h(e,[{key:"ref",get:function(){return new Yk(this._firestore,this._delegate.ref)}},{key:"id",get:function(){return this._delegate.id}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"exists",get:function(){return this._delegate.exists()}},{key:"data",value:function(e){return this._delegate.data(e)}},{key:"get",value:function(e,t){return this._delegate.get(e,t)}},{key:"isEqual",value:function(e){return vk(this._delegate,e._delegate)}}]),e}(),tw=function(e){d(n,e);var t=v(n);function n(){return f(this,n),t.apply(this,arguments)}return h(n,[{key:"data",value:function(e){var t=this._delegate.data(e);return function(e,t){e||vc()}(void 0!==t),t}}]),n}(ew),nw=function(){function e(t,n){f(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new Gk(t)}return h(e,[{key:"where",value:function(t,n,r){try{return new e(this.firestore,gk(this._delegate,function(e,t,n){var r=t,i=uk("where",e);return new yk(i,r,n)}(t,n,r)))}catch(i){throw Jk(i,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"orderBy",value:function(t,n){try{return new e(this.firestore,gk(this._delegate,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=t,r=uk("orderBy",e);return new kk(r,n)}(t,n)))}catch(r){throw Jk(r,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"limit",value:function(t){try{return new e(this.firestore,gk(this._delegate,function(e){return fy("limit",e),new wk("limit",e,"F")}(t)))}catch(n){throw Jk(n,"limit()","Query.limit()")}}},{key:"limitToLast",value:function(t){try{return new e(this.firestore,gk(this._delegate,function(e){return fy("limitToLast",e),new wk("limitToLast",e,"L")}(t)))}catch(n){throw Jk(n,"limitToLast()","Query.limitToLast()")}}},{key:"startAt",value:function(){try{return new e(this.firestore,gk(this._delegate,(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new bk("startAt",t,!0)}).apply(void 0,arguments)))}catch(t){throw Jk(t,"startAt()","Query.startAt()")}}},{key:"startAfter",value:function(){try{return new e(this.firestore,gk(this._delegate,(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new bk("startAfter",t,!1)}).apply(void 0,arguments)))}catch(t){throw Jk(t,"startAfter()","Query.startAfter()")}}},{key:"endBefore",value:function(){try{return new e(this.firestore,gk(this._delegate,(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new _k("endBefore",t,!0)}).apply(void 0,arguments)))}catch(t){throw Jk(t,"endBefore()","Query.endBefore()")}}},{key:"endAt",value:function(){try{return new e(this.firestore,gk(this._delegate,(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new _k("endAt",t,!1)}).apply(void 0,arguments)))}catch(t){throw Jk(t,"endAt()","Query.endAt()")}}},{key:"isEqual",value:function(e){return by(this._delegate,e._delegate)}},{key:"get",value:function(e){var t=this;return("cache"===(null==e?void 0:e.source)?function(e){e=hy(e,my);var t=hy(e.firestore,Iy),n=Sy(t),r=new Ok(t);return function(e,t){var n=new kc;return e.asyncQueue.enqueueAndForget((0,Ki.Z)(regeneratorRuntime.mark(function r(){var i;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=(i=(0,Ki.Z)(regeneratorRuntime.mark(function e(t,n,r){var i,a,o,s,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,qv(t,n,!0);case 3:i=e.sent,a=new Lm(n,i.Gn),o=a.Io(i.documents),s=a.applyChanges(o,!1),r.resolve(s.snapshot),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),u=pm(e.t0,"Failed to execute query '".concat(n," against cache")),r.reject(u);case 14:case"end":return e.stop()}},e,null,[[0,10]])})),function(e,t,n){return i.apply(this,arguments)}),r.next=3,Yg(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}},r)}))),n.promise}(n,e._query).then(function(n){return new fk(t,r,e,n)})}(this._delegate):"server"===(null==e?void 0:e.source)?function(e){e=hy(e,my);var t=hy(e.firestore,Iy),n=Sy(t),r=new Ok(t);return ny(n,e._query,{source:"server"}).then(function(n){return new fk(t,r,e,n)})}(this._delegate):function(e){e=hy(e,my);var t=hy(e.firestore,Iy),n=Sy(t),r=new Ok(t);return pk(e._query),ny(n,e._query).then(function(n){return new fk(t,r,e,n)})}(this._delegate)).then(function(e){return new iw(t.firestore,new fk(t.firestore._delegate,t._userDataWriter,t._delegate,e._snapshot))})}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=$k(n),a=Xk(n,function(t){return new iw(e.firestore,new fk(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))});return Lk(this._delegate,i,a)}},{key:"withConverter",value:function(t){return new e(this.firestore,this._delegate.withConverter(t?Qk.getInstance(this.firestore,t):null))}}]),e}(),rw=function(){function e(t,n){f(this,e),this._firestore=t,this._delegate=n}return h(e,[{key:"type",get:function(){return this._delegate.type}},{key:"doc",get:function(){return new tw(this._firestore,this._delegate.doc)}},{key:"oldIndex",get:function(){return this._delegate.oldIndex}},{key:"newIndex",get:function(){return this._delegate.newIndex}}]),e}(),iw=function(){function e(t,n){f(this,e),this._firestore=t,this._delegate=n}return h(e,[{key:"query",get:function(){return new nw(this._firestore,this._delegate.query)}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"size",get:function(){return this._delegate.size}},{key:"empty",get:function(){return this._delegate.empty}},{key:"docs",get:function(){var e=this;return this._delegate.docs.map(function(t){return new tw(e._firestore,t)})}},{key:"docChanges",value:function(e){var t=this;return this._delegate.docChanges(e).map(function(e){return new rw(t._firestore,e)})}},{key:"forEach",value:function(e,t){var n=this;this._delegate.forEach(function(r){e.call(t,new tw(n._firestore,r))})}},{key:"isEqual",value:function(e){return vk(this._delegate,e._delegate)}}]),e}(),aw=function(e){d(n,e);var t=v(n);function n(e,r){var i;return f(this,n),(i=t.call(this,e,r)).firestore=e,i._delegate=r,i}return h(n,[{key:"id",get:function(){return this._delegate.id}},{key:"path",get:function(){return this._delegate.path}},{key:"parent",get:function(){var e=this._delegate.parent;return e?new Yk(this.firestore,e):null}},{key:"doc",value:function(e){try{return new Yk(this.firestore,void 0===e?ky(this._delegate):ky(this._delegate,e))}catch(t){throw Jk(t,"doc()","CollectionReference.doc()")}}},{key:"add",value:function(e){var t=this;return function(e,t){var n=hy(e.firestore,Iy),r=ky(e),i=Rk(e.converter,t);return Fk(n,[qy(Vy(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,gh.exists(!1))]).then(function(){return r})}(this._delegate,e).then(function(e){return new Yk(t.firestore,e)})}},{key:"isEqual",value:function(e){return wy(this._delegate,e._delegate)}},{key:"withConverter",value:function(e){return new n(this.firestore,this._delegate.withConverter(e?Qk.getInstance(this.firestore,e):null))}}]),n}(nw);function ow(e){return hy(e,py)}var sw={Firestore:Hk,GeoPoint:Dy,Timestamp:Oc,Blob:Bk,Transaction:Kk,WriteBatch:Wk,DocumentReference:Yk,DocumentSnapshot:ew,Query:nw,QueryDocumentSnapshot:tw,QuerySnapshot:iw,CollectionReference:aw,FieldPath:function(){function e(){f(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];this._delegate=y(Ay,n)}return h(e,[{key:"isEqual",value:function(e){return(e=(0,Ji.m9)(e))instanceof Ay&&this._delegate._internalPath.isEqual(e._internalPath)}}],[{key:"documentId",value:function(){return new e(Vc.keyField().canonicalString())}}]),e}(),FieldValue:function(){function e(t){f(this,e),this._delegate=t}return h(e,[{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}}],[{key:"serverTimestamp",value:function(){var t=new Zy("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new e(t)}},{key:"delete",value:function(){var t=new By("deleteField");return t._methodName="FieldValue.delete",new e(t)}},{key:"arrayUnion",value:function(){var t=(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Hy("arrayUnion",t)}).apply(void 0,arguments);return t._methodName="FieldValue.arrayUnion",new e(t)}},{key:"arrayRemove",value:function(){var t=(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Gy("arrayRemove",t)}).apply(void 0,arguments);return t._methodName="FieldValue.arrayRemove",new e(t)}},{key:"increment",value:function(t){var n=function(e){return new Ky("increment",e)}(t);return n._methodName="FieldValue.increment",new e(n)}}]),e}(),setLogLevel:function(e){!function(e){uc.setLogLevel(e)}(e)},CACHE_SIZE_UNLIMITED:-1};!function(e){(function(e,t){e.INTERNAL.registerComponent(new Qi.wA("firestore-compat",function(e){return function(e,t){return new Hk(e,t,new Zk)}(e.getProvider("app-compat").getImmediate(),e.getProvider("firestore").getImmediate())},"PUBLIC").setServiceProps(Object.assign({},sw)))})(e),e.registerVersion("@firebase/firestore-compat","0.1.4")}(Gi.Z);var uw=o(6682),cw=o(309),lw=o(7771),hw=o(8858),fw=function(e){d(n,e);var t=v(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Number.POSITIVE_INFINITY,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.POSITIVE_INFINITY,a=arguments.length>2?arguments[2]:void 0;return f(this,n),(e=t.call(this)).scheduler=a,e._events=[],e._infiniteTimeWindow=!1,e._bufferSize=r<1?1:r,e._windowTime=i<1?1:i,i===Number.POSITIVE_INFINITY?(e._infiniteTimeWindow=!0,e.next=e.nextInfiniteTimeWindow):e.next=e.nextTimeWindow,e}return h(n,[{key:"nextInfiniteTimeWindow",value:function(e){if(!this.isStopped){var t=this._events;t.push(e),t.length>this._bufferSize&&t.shift()}i(b(n.prototype),"next",this).call(this,e)}},{key:"nextTimeWindow",value:function(e){this.isStopped||(this._events.push(new dw(this._getNow(),e)),this._trimBufferThenGetEvents()),i(b(n.prototype),"next",this).call(this,e)}},{key:"_subscribe",value:function(e){var t,n=this._infiniteTimeWindow,r=n?this._events:this._trimBufferThenGetEvents(),i=this.scheduler,a=r.length;if(this.closed)throw new Oe.N;if(this.isStopped||this.hasError?t=Dt.w.EMPTY:(this.observers.push(e),t=new hw.W(this,e)),i&&e.add(e=new cw.ht(e,i)),n)for(var o=0;o<a&&!e.closed;o++)e.next(r[o]);else for(var s=0;s<a&&!e.closed;s++)e.next(r[s].value);return this.hasError?e.error(this.thrownError):this.isStopped&&e.complete(),t}},{key:"_getNow",value:function(){return(this.scheduler||lw.c).now()}},{key:"_trimBufferThenGetEvents",value:function(){for(var e=this._getNow(),t=this._bufferSize,n=this._windowTime,r=this._events,i=r.length,a=0;a<i&&!(e-r[a].time<n);)a++;return i>t&&(a=Math.max(a,i-t)),a>0&&r.splice(0,a),r}}]),n}(Ne.xQ),dw=function e(t,n){f(this,e),this.time=t,this.value=n};function vw(e,t,n){var r;return r=e&&"object"==typeof e?e:{bufferSize:e,windowTime:t,refCount:!1,scheduler:n},function(e){return e.lift(function(e){var t,n,r=e.bufferSize,i=void 0===r?Number.POSITIVE_INFINITY:r,a=e.windowTime,o=void 0===a?Number.POSITIVE_INFINITY:a,s=e.refCount,u=e.scheduler,c=0,l=!1,h=!1;return function(e){var r;c++,!t||l?(l=!1,t=new fw(i,o,u),r=t.subscribe(this),n=e.subscribe({next:function(e){t.next(e)},error:function(e){l=!0,t.error(e)},complete:function(){h=!0,n=void 0,t.complete()}}),h&&(n=void 0)):r=t.subscribe(this),this.add(function(){c--,r.unsubscribe(),r=void 0,n&&!h&&s&&0===c&&(n.unsubscribe(),n=void 0,t=void 0)})}}(r))}}function pw(e,t){return t?et(function(){return e},t):et(function(){return e})}var mw=o(3101);o(2329);var gw=new Map,yw={activated:!1,tokenObservers:[]},kw={initialized:!1,enabled:!1};function ww(e){return gw.get(e)||yw}function bw(e,t){gw.set(e,t)}function _w(){return kw}var xw=function(){function e(t,n,r,i,a){if(f(this,e),this.operation=t,this.retryPolicy=n,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=a,this.pending=null,this.nextErrorWaitInterval=i,i>a)throw new Error("Proactive refresh lower bound greater than upper bound!")}return h(e,[{key:"start",value:function(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(function(){})}},{key:"stop",value:function(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}},{key:"isRunning",value:function(){return!!this.pending}},{key:"process",value:function(e){var t=this;return(0,Ki.Z)(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return t.stop(),n.prev=1,t.pending=new Ji.BH,n.next=5,function(e){return new Promise(function(t){setTimeout(t,e)})}(t.getNextRun(e));case 5:return t.pending.resolve(),n.next=8,t.pending.promise;case 8:return t.pending=new Ji.BH,n.next=11,t.operation();case 11:return t.pending.resolve(),n.next=14,t.pending.promise;case 14:t.process(!0).catch(function(){}),n.next=20;break;case 17:n.prev=17,n.t0=n.catch(1),t.retryPolicy(n.t0)?t.process(!1).catch(function(){}):t.stop();case 20:case"end":return n.stop()}},n,null,[[1,17]])}))()}},{key:"getNextRun",value:function(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();var t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}]),e}(),Tw=new Ji.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error."});function Iw(e){if(!ww(e).activated)throw Tw.create("use-before-activation",{appName:e.name})}function Sw(e,t){return Ew.apply(this,arguments)}function Ew(){return(Ew=(0,Ki.Z)(regeneratorRuntime.mark(function e(t,n){var r,i,a,o,s,u,c,l,h,f;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.url,i=t.body,a={"Content-Type":"application/json"},(o=n.getImmediate({optional:!0}))&&(a["X-Firebase-Client"]=o.getPlatformInfoString()),s={method:"POST",body:JSON.stringify(i),headers:a},e.prev=4,e.next=7,fetch(r,s);case 7:u=e.sent,e.next=13;break;case 10:throw e.prev=10,e.t0=e.catch(4),Tw.create("fetch-network-error",{originalErrorMessage:e.t0.message});case 13:if(200===u.status){e.next=15;break}throw Tw.create("fetch-status-error",{httpStatus:u.status});case 15:return e.prev=15,e.next=18,u.json();case 18:c=e.sent,e.next=24;break;case 21:throw e.prev=21,e.t1=e.catch(15),Tw.create("fetch-parse-error",{originalErrorMessage:e.t1.message});case 24:if((l=c.ttl.match(/^([\d.]+)(s)$/))&&l[2]&&!isNaN(Number(l[1]))){e.next=27;break}throw Tw.create("fetch-parse-error",{originalErrorMessage:"ttl field (timeToLive) is not in standard Protobuf Duration format: ".concat(c.ttl)});case 27:return h=1e3*Number(l[1]),f=Date.now(),e.abrupt("return",{token:c.attestationToken,expireTimeMillis:f+h,issuedAtTimeMillis:f});case 29:case"end":return e.stop()}},e,null,[[4,10],[15,21]])}))).apply(this,arguments)}function Rw(e,t){var n=e.options,r=n.projectId,i=n.appId,a=n.apiKey;return{url:"https://content-firebaseappcheck.googleapis.com/v1beta/projects/".concat(r,"/apps/").concat(i,":exchangeDebugToken?key=").concat(a),body:{debug_token:t}}}var Cw="firebase-app-check-store",Aw=null;function Nw(){return Aw||(Aw=new Promise(function(e,t){try{var n=indexedDB.open("firebase-app-check-database",1);n.onsuccess=function(t){e(t.target.result)},n.onerror=function(e){var n;t(Tw.create("storage-open",{originalErrorMessage:null===(n=e.target.error)||void 0===n?void 0:n.message}))},n.onupgradeneeded=function(e){var t=e.target.result;switch(e.oldVersion){case 0:t.createObjectStore(Cw,{keyPath:"compositeKey"})}}}catch(n){t(Tw.create("storage-open",{originalErrorMessage:n.message}))}}))}function Ow(){return(Ow=(0,Ki.Z)(regeneratorRuntime.mark(function e(t,n){var r,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Nw();case 2:return r=e.sent.transaction(Cw,"readwrite"),i=r.objectStore(Cw).put({compositeKey:t,value:n}),e.abrupt("return",new Promise(function(e,t){i.onsuccess=function(t){e()},r.onerror=function(e){var n;t(Tw.create("storage-set",{originalErrorMessage:null===(n=e.target.error)||void 0===n?void 0:n.message}))}}));case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}var Dw=new Yi.Yd("@firebase/app-check");function Pw(e,t){return(0,Ji.hl)()?function(e,t){return function(e,t){return Ow.apply(this,arguments)}(function(e){return"".concat(e.options.appId,"-").concat(e.name)}(e),t)}(e,t).catch(function(e){Dw.warn("Failed to write token to IndexedDB. Error: ".concat(e))}):Promise.resolve()}function Lw(){return _w().enabled}function Fw(){return Mw.apply(this,arguments)}function Mw(){return(Mw=(0,Ki.Z)(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=_w()).enabled||!t.token){e.next=3;break}return e.abrupt("return",t.token.promise);case 3:throw Error("\n            Can't get debug token in production mode.\n        ");case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}var Uw={error:"UNKNOWN_ERROR"};function jw(e){return Ji.US.encodeString(JSON.stringify(e),!1)}function Vw(e){return qw.apply(this,arguments)}function qw(){return(qw=(0,Ki.Z)(regeneratorRuntime.mark(function e(t){var n,r,i,a,o,s,u,c,l=arguments;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=l.length>1&&void 0!==l[1]&&l[1],Iw(r=t.app),i=ww(r),s=i.token){e.next=10;break}return e.next=8,i.cachedTokenPromise;case 8:(u=e.sent)&&Zw(u)&&(s=u,bw(r,Object.assign(Object.assign({},i),{token:s})),zw(r,{token:s.token}));case 10:if(n||!s||!Zw(s)){e.next=12;break}return e.abrupt("return",{token:s.token});case 12:if(!Lw()){e.next=28;break}return e.t0=Sw,e.t1=Rw,e.t2=r,e.next=18,Fw();case 18:return e.t3=e.sent,e.t4=(0,e.t1)(e.t2,e.t3),e.t5=t.platformLoggerProvider,e.next=23,(0,e.t0)(e.t4,e.t5);case 23:return c=e.sent,e.next=26,Pw(r,c);case 26:return bw(r,Object.assign(Object.assign({},i),{token:c})),e.abrupt("return",{token:c.token});case 28:return e.prev=28,e.next=31,i.provider.getToken();case 31:s=e.sent,e.next=37;break;case 34:e.prev=34,e.t6=e.catch(28),Dw.error(e.t6),a=e.t6;case 37:if(!s){e.next=44;break}return o={token:s.token},bw(r,Object.assign(Object.assign({},i),{token:s})),e.next=42,Pw(r,s);case 42:e.next=45;break;case 44:o=Hw(a);case 45:return zw(r,o),e.abrupt("return",o);case 47:case"end":return e.stop()}},e,null,[[28,34]])}))).apply(this,arguments)}function Bw(e,t){var n=ww(e),r=n.tokenObservers.filter(function(e){return e.next!==t});0===r.length&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),bw(e,Object.assign(Object.assign({},n),{tokenObservers:r}))}function zw(e,t){var n,r=s(ww(e).tokenObservers);try{for(r.s();!(n=r.n()).done;){var i=n.value;try{"EXTERNAL"===i.type&&null!=t.error?i.error(t.error):i.next(t)}catch(a){}}}catch(o){r.e(o)}finally{r.f()}}function Zw(e){return e.expireTimeMillis-Date.now()>0}function Hw(e){return{token:jw(Uw),error:e}}var Gw=function(){function e(t,n){f(this,e),this.app=t,this.platformLoggerProvider=n}return h(e,[{key:"_delete",value:function(){var e,t=s(ww(this.app).tokenObservers);try{for(t.s();!(e=t.n()).done;){var n=e.value;Bw(this.app,n.next)}}catch(r){t.e(r)}finally{t.f()}return Promise.resolve()}}]),e}(),Kw="app-check-internal";(0,Wi._registerComponent)(new Qi.wA("app-check",function(e){return function(e,t){return new Gw(e,t)}(e.getProvider("app").getImmediate(),e.getProvider("platform-logger"))},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(function(e,t,n){e.getProvider(Kw).initialize()})),(0,Wi._registerComponent)(new Qi.wA(Kw,function(e){return function(e){return{getToken:function(t){return Vw(e,t)},addTokenListener:function(t){return function(e,t,n,r){var i=e.app,o=ww(i),s={next:n,error:void 0,type:"INTERNAL"},u=Object.assign(Object.assign({},o),{tokenObservers:[].concat(a(o.tokenObservers),[s])});if(!u.tokenRefresher){var c=function(e){var t=e.app;return new xw((0,Ki.Z)(regeneratorRuntime.mark(function n(){var r;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(!ww(t).token){n.next=6;break}return n.next=3,Vw(e,!0);case 3:n.t0=n.sent,n.next=9;break;case 6:return n.next=8,Vw(e);case 8:n.t0=n.sent;case 9:if(!(r=n.t0).error){n.next=12;break}throw r.error;case 12:case"end":return n.stop()}},n)})),function(){return!0},function(){var e=ww(t);if(e.token){var n=e.token.issuedAtTimeMillis+.5*(e.token.expireTimeMillis-e.token.issuedAtTimeMillis)+3e5;return n=Math.min(n,e.token.expireTimeMillis-3e5),Math.max(0,n-Date.now())}return 0},3e4,96e4)}(e);u.tokenRefresher=c}if(!u.tokenRefresher.isRunning()&&o.isTokenAutoRefreshEnabled&&u.tokenRefresher.start(),o.token&&Zw(o.token)){var l=o.token;Promise.resolve().then(function(){return n({token:l.token})}).catch(function(){})}else null==o.token&&o.cachedTokenPromise.then(function(e){e&&Zw(e)&&n({token:e.token})}).catch(function(){});bw(i,u)}(e,0,t)},removeTokenListener:function(t){return Bw(e.app,t)}}}(e.getProvider("app-check").getImmediate())},"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Wi.registerVersion)("@firebase/app-check","0.4.2");var Ww=function e(){return f(this,e),(0,Ui.vb)("app-check")};"undefined"!=typeof window&&window,o(7841);var Qw=new u.OlP("angularfire2.auth.use-emulator"),Yw=new u.OlP("angularfire2.auth.settings"),Jw=new u.OlP("angularfire2.auth.tenant-id"),$w=new u.OlP("angularfire2.auth.langugage-code"),Xw=new u.OlP("angularfire2.auth.use-device-language"),eb=new u.OlP("angularfire.auth.persistence"),tb=function(e,n,r,i,o,s,u,c){return(0,Hi.cc)("".concat(e.name,".auth"),"AngularFireAuth",e.name,function(){var l=n.runOutsideAngular(function(){return e.auth()});if(r&&l.useEmulator.apply(l,a(r)),i&&(l.tenantId=i),l.languageCode=o,s&&l.useDeviceLanguage(),u)for(var h=0,f=Object.entries(u);h<f.length;h++){var d=t(f[h],2),v=d[0],p=d[1];l.settings[v]=p}return c&&l.setPersistence(c),l},[r,i,o,s,u,c])},nb=function(){var e=function e(t,n,r,i,a,s,u,c,l,h,d,v){f(this,e);var p=new Ne.xQ,m=(0,Ae.of)(void 0).pipe((0,cw.QV)(a.outsideAngular),et(function(){return i.runOutsideAngular(function(){return Promise.resolve().then(o.bind(o,4671))})}),(0,$e.U)(function(){return(0,Hi.on)(t,i,n)}),(0,$e.U)(function(e){return tb(e,i,s,c,l,h,u,d)}),vw({bufferSize:1,refCount:!1}));if(G(r))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,Ae.of)(null);else{m.pipe(At()).subscribe();var g=m.pipe(et(function(e){return e.getRedirectResult().then(function(e){return e},function(){return null})}),Ui.iC,vw({bufferSize:1,refCount:!1})),y=m.pipe(et(function(e){return new Ve.y(function(t){return{unsubscribe:i.runOutsideAngular(function(){return e.onAuthStateChanged(function(e){return t.next(e)},function(e){return t.error(e)},function(){return t.complete()})})}})})),k=m.pipe(et(function(e){return new Ve.y(function(t){return{unsubscribe:i.runOutsideAngular(function(){return e.onIdTokenChanged(function(e){return t.next(e)},function(e){return t.error(e)},function(){return t.complete()})})}})}));this.authState=g.pipe(pw(y),(0,mw.R)(a.outsideAngular),(0,cw.QV)(a.insideAngular)),this.user=g.pipe(pw(k),(0,mw.R)(a.outsideAngular),(0,cw.QV)(a.insideAngular)),this.idToken=this.user.pipe(et(function(e){return e?(0,Ce.D)(e.getIdToken()):(0,Ae.of)(null)})),this.idTokenResult=this.user.pipe(et(function(e){return e?(0,Ce.D)(e.getIdTokenResult()):(0,Ae.of)(null)})),this.credential=(0,uw.T)(g,p,this.authState.pipe(ht(function(e){return!e}))).pipe((0,$e.U)(function(e){return(null==e?void 0:e.user)?e:null}),(0,mw.R)(a.outsideAngular),(0,cw.QV)(a.insideAngular))}return(0,Hi.pX)(this,m,i,{spy:{apply:function(e,t,n){(e.startsWith("signIn")||e.startsWith("createUser"))&&n.then(function(e){return p.next(e)})}}})};return e.\u0275fac=function(t){return new(t||e)(u.LFG(Hi.Dh),u.LFG(Hi.xv,8),u.LFG(u.Lbi),u.LFG(u.R0b),u.LFG(Ui.HU),u.LFG(Qw,8),u.LFG(Yw,8),u.LFG(Jw,8),u.LFG($w,8),u.LFG(Xw,8),u.LFG(eb,8),u.LFG(Ww,8))},e.\u0275prov=u.Yz7({token:e,factory:e.\u0275fac,providedIn:"any"}),e}();function rb(e,t){return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Mi.z;return new Ve.y(function(n){var r;return null!=t?t.schedule(function(){r=e.onSnapshot({includeMetadataChanges:!0},n)}):r=e.onSnapshot({includeMetadataChanges:!0},n),function(){null!=r&&r()}})}(e,t)}function ib(e,t){return rb(e,t).pipe((0,$e.U)(function(e){return{payload:e,type:"query"}}))}function ab(e,n){return ib(e,n).pipe(st(void 0),ji(),(0,$e.U)(function(e){var n=t(e,2),r=n[0],i=n[1],a=i.payload.docChanges(),o=a.map(function(e){return{type:e.type,payload:e}});return r&&JSON.stringify(r.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach(function(e,t){var n=a.find(function(t){return t.doc.ref.isEqual(e.ref)}),i=null==r?void 0:r.payload.docs.find(function(t){return t.ref.isEqual(e.ref)});n&&JSON.stringify(n.doc.metadata)===JSON.stringify(e.metadata)||!n&&i&&JSON.stringify(i.metadata)===JSON.stringify(e.metadata)||o.push({type:"modified",payload:{oldIndex:t,newIndex:t,type:"modified",doc:e}})}),o}))}function ob(e,t,n){return ab(e,n).pipe(ut(function(e,n){return function(e,t,n){return t.forEach(function(t){n.indexOf(t.type)>-1&&(e=function(e,t){switch(t.type){case"added":if(!e[t.newIndex]||!e[t.newIndex].doc.ref.isEqual(t.doc.ref))return sb(e,t.newIndex,0,t);break;case"modified":if(null==e[t.oldIndex]||e[t.oldIndex].doc.ref.isEqual(t.doc.ref)){if(t.oldIndex!==t.newIndex){var n=e.slice();return n.splice(t.oldIndex,1),n.splice(t.newIndex,0,t),n}return sb(e,t.newIndex,1,t)}break;case"removed":if(e[t.oldIndex]&&e[t.oldIndex].doc.ref.isEqual(t.doc.ref))return sb(e,t.oldIndex,1)}return e}(e,t))}),e}(e,n.map(function(e){return e.payload}),t)},[]),function(e){return e.lift(new zi(void 0,void 0))},(0,$e.U)(function(e){return e.map(function(e){return{type:e.type,payload:e}})}))}function sb(e,t,n){for(var r=e.slice(),i=arguments.length,a=new Array(i>3?i-3:0),o=3;o<i;o++)a[o-3]=arguments[o];return r.splice.apply(r,[t,n].concat(a)),r}function ub(e){return(!e||0===e.length)&&(e=["added","removed","modified"]),e}var cb=function(){function n(e,t,r){f(this,n),this.ref=e,this.query=t,this.afs=r}return h(n,[{key:"stateChanges",value:function(e){var n=ab(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(n=n.pipe((0,$e.U)(function(t){return t.filter(function(t){return e.indexOf(t.type)>-1})}))),n.pipe(st(void 0),ji(),ht(function(e){var n=t(e,2),r=n[0];return n[1].length>0||!r}),(0,$e.U)(function(e){var n=t(e,2);n[0];return n[1]}),Ui.iC)}},{key:"auditTrail",value:function(e){return this.stateChanges(e).pipe(ut(function(e,t){return[].concat(a(e),a(t))},[]))}},{key:"snapshotChanges",value:function(e){var t=ub(e);return ob(this.query,t,this.afs.schedulers.outsideAngular).pipe(Ui.iC)}},{key:"valueChanges",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return ib(this.query,this.afs.schedulers.outsideAngular).pipe((0,$e.U)(function(n){return n.payload.docs.map(function(n){return t.idField?Object.assign(Object.assign({},n.data()),e({},t.idField,n.id)):n.data()})}),Ui.iC)}},{key:"get",value:function(e){return(0,Ce.D)(this.query.get(e)).pipe(Ui.iC)}},{key:"add",value:function(e){return this.ref.add(e)}},{key:"doc",value:function(e){return new lb(this.ref.doc(e),this.afs)}}]),n}(),lb=function(){function n(e,t){f(this,n),this.ref=e,this.afs=t}return h(n,[{key:"set",value:function(e,t){return this.ref.set(e,t)}},{key:"update",value:function(e){return this.ref.update(e)}},{key:"delete",value:function(){return this.ref.delete()}},{key:"collection",value:function(e,t){var n=mb(this.ref.collection(e),t),r=n.ref,i=n.query;return new cb(r,i,this.afs)}},{key:"snapshotChanges",value:function(){return function(e,n){return rb(e,n).pipe(st(void 0),ji(),(0,$e.U)(function(e){var n=t(e,2),r=n[0],i=n[1];return i.exists?(null==r?void 0:r.exists)?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Ui.iC)}},{key:"valueChanges",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.snapshotChanges().pipe((0,$e.U)(function(n){var r=n.payload;return t.idField?Object.assign(Object.assign({},r.data()),e({},t.idField,r.id)):r.data()}))}},{key:"get",value:function(e){return(0,Ce.D)(this.ref.get(e)).pipe(Ui.iC)}}]),n}(),hb=function(){function t(e,n){f(this,t),this.query=e,this.afs=n}return h(t,[{key:"stateChanges",value:function(e){return e&&0!==e.length?ab(this.query,this.afs.schedulers.outsideAngular).pipe((0,$e.U)(function(t){return t.filter(function(t){return e.indexOf(t.type)>-1})}),ht(function(e){return e.length>0}),Ui.iC):ab(this.query,this.afs.schedulers.outsideAngular).pipe(Ui.iC)}},{key:"auditTrail",value:function(e){return this.stateChanges(e).pipe(ut(function(e,t){return[].concat(a(e),a(t))},[]))}},{key:"snapshotChanges",value:function(e){var t=ub(e);return ob(this.query,t,this.afs.schedulers.outsideAngular).pipe(Ui.iC)}},{key:"valueChanges",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return ib(this.query,this.afs.schedulers.outsideAngular).pipe((0,$e.U)(function(n){return n.payload.docs.map(function(n){return t.idField?Object.assign(e({},t.idField,n.id),n.data()):n.data()})}),Ui.iC)}},{key:"get",value:function(e){return(0,Ce.D)(this.query.get(e)).pipe(Ui.iC)}}]),t}(),fb=new u.OlP("angularfire2.enableFirestorePersistence"),db=new u.OlP("angularfire2.firestore.persistenceSettings"),vb=new u.OlP("angularfire2.firestore.settings"),pb=new u.OlP("angularfire2.firestore.use-emulator");function mb(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e){return e};return{query:t(e),ref:e}}var gb=function(){var e=function(){function e(n,r,i,o,s,u,c,l,h,d,v,p,m,g,y,k,w){var b;f(this,e),this.schedulers=c;var _=(0,Hi.on)(n,u,r),x=h;d&&tb(_,u,v,m,g,y,p,k),b=t((0,Hi.cc)("".concat(_.name,".firestore"),"AngularFirestore",_.name,function(){var e=u.runOutsideAngular(function(){return _.firestore()});if(o&&e.settings(o),x&&e.useEmulator.apply(e,a(x)),i&&!G(s)){return[e,u.runOutsideAngular(function(){try{return(0,Ce.D)(e.enablePersistence(l||void 0).then(function(){return!0},function(){return!1}))}catch(t){return"undefined"!=typeof console&&console.warn(t),(0,Ae.of)(!1)}})]}return[e,(0,Ae.of)(!1)]},[o,x,i]),2),this.firestore=b[0],this.persistenceEnabled$=b[1]}return h(e,[{key:"collection",value:function(e,t){var n=mb("string"==typeof e?this.firestore.collection(e):e,t),r=n.ref,i=n.query,a=this.schedulers.ngZone.run(function(){return r});return new cb(a,i,this)}},{key:"collectionGroup",value:function(e,t){var n=t||function(e){return e},r=this.firestore.collectionGroup(e);return new hb(n(r),this)}},{key:"doc",value:function(e){var t;t="string"==typeof e?this.firestore.doc(e):e;var n=this.schedulers.ngZone.run(function(){return t});return new lb(n,this)}},{key:"createId",value:function(){return this.firestore.collection("_").doc().id}}]),e}();return e.\u0275fac=function(t){return new(t||e)(u.LFG(Hi.Dh),u.LFG(Hi.xv,8),u.LFG(fb,8),u.LFG(vb,8),u.LFG(u.Lbi),u.LFG(u.R0b),u.LFG(Ui.HU),u.LFG(db,8),u.LFG(pb,8),u.LFG(nb,8),u.LFG(Qw,8),u.LFG(Yw,8),u.LFG(Jw,8),u.LFG($w,8),u.LFG(Xw,8),u.LFG(eb,8),u.LFG(Ww,8))},e.\u0275prov=u.Yz7({token:e,factory:e.\u0275fac,providedIn:"any"}),e}(),yb=function(){var e=function(){function e(t){f(this,e),this.af=t}return h(e,[{key:"getDiario",value:function(e){return this.af.collection("diario",function(t){return t.where("fecha","==",e)}).valueChanges()}}]),e}();return e.\u0275fac=function(t){return new(t||e)(u.LFG(gb))},e.\u0275prov=u.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e}();function kb(e,t){1&e&&(u.TgZ(0,"div",7),u.TgZ(1,"span",8),u._uU(2,"Loading..."),u.qZA(),u.qZA())}function wb(e,t){if(1&e&&(u.TgZ(0,"h1"),u._uU(1),u.qZA()),2&e){var n=u.oxw();u.xp6(1),u.Oqu(n.reporteDiario.contagiados)}}function bb(e,t){1&e&&(u.TgZ(0,"div",7),u.TgZ(1,"span",8),u._uU(2,"Loading..."),u.qZA(),u.qZA())}function _b(e,t){if(1&e&&(u.TgZ(0,"h1"),u._uU(1),u.qZA()),2&e){var n=u.oxw();u.xp6(1),u.Oqu(n.reporteDiario.recuperados)}}function xb(e,t){1&e&&(u.TgZ(0,"div",7),u.TgZ(1,"span",8),u._uU(2,"Loading..."),u.qZA(),u.qZA())}function Tb(e,t){if(1&e&&(u.TgZ(0,"h1"),u._uU(1),u.qZA()),2&e){var n=u.oxw();u.xp6(1),u.Oqu(n.reporteDiario.fallecidos)}}var Ib=function(){var e=function(){function e(t){f(this,e),this._proyecto=t,this.hayDiario=!1}return h(e,[{key:"ngOnInit",value:function(){this.getDiario()}},{key:"getDiario",value:function(){var e=this;this.diario=this._proyecto.getDiario(this.getToday()),setTimeout(function(){e.diario.forEach(function(t){e.reporteDiario=t[0],e.hayDiario=!0})},300)}},{key:"getToday",value:function(){var e=new Date,t=e.getDate(),n=e.getMonth()+1,r=e.getFullYear();return n<10?"".concat(t,"/0").concat(n,"/").concat(r):"".concat(t,"/").concat(n,"/").concat(r)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(u.Y36(yb))},e.\u0275cmp=u.Xpm({type:e,selectors:[["app-reporte-diario"]],decls:22,vars:6,consts:[[1,"row"],[1,"col-md-4"],[1,"card"],[1,"card-header"],[1,"card-body","text-center"],["class","spinner-grow text-info","style","width: 3rem; height: 3rem;","role","status",4,"ngIf"],[4,"ngIf"],["role","status",1,"spinner-grow","text-info",2,"width","3rem","height","3rem"],[1,"sr-only"]],template:function(e,t){1&e&&(u.TgZ(0,"div",0),u.TgZ(1,"div",1),u.TgZ(2,"div",2),u.TgZ(3,"div",3),u._uU(4," Contagiados "),u.qZA(),u.TgZ(5,"div",4),u.YNc(6,kb,3,0,"div",5),u.YNc(7,wb,2,1,"h1",6),u.qZA(),u.qZA(),u.qZA(),u.TgZ(8,"div",1),u.TgZ(9,"div",2),u.TgZ(10,"div",3),u._uU(11," Recuperados "),u.qZA(),u.TgZ(12,"div",4),u.YNc(13,bb,3,0,"div",5),u.YNc(14,_b,2,1,"h1",6),u.qZA(),u.qZA(),u.qZA(),u.TgZ(15,"div",1),u.TgZ(16,"div",2),u.TgZ(17,"div",3),u._uU(18," Fallecidos "),u.qZA(),u.TgZ(19,"div",4),u.YNc(20,xb,3,0,"div",5),u.YNc(21,Tb,2,1,"h1",6),u.qZA(),u.qZA(),u.qZA(),u.qZA()),2&e&&(u.xp6(6),u.Q6J("ngIf",!t.hayDiario),u.xp6(1),u.Q6J("ngIf",t.hayDiario),u.xp6(6),u.Q6J("ngIf",!t.hayDiario),u.xp6(1),u.Q6J("ngIf",t.hayDiario),u.xp6(6),u.Q6J("ngIf",!t.hayDiario),u.xp6(1),u.Q6J("ngIf",t.hayDiario))},directives:[B],styles:[""]}),e}(),Sb=function(){var e=function(){function e(){f(this,e)}return h(e,[{key:"ngOnInit",value:function(){}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=u.Xpm({type:e,selectors:[["app-reporte-semanal"]],decls:2,vars:0,template:function(e,t){1&e&&(u.TgZ(0,"p"),u._uU(1,"reporte-semanal"),u.qZA())},styles:[""]}),e}(),Eb=function(){var e=function(){function e(){f(this,e)}return h(e,[{key:"ngOnInit",value:function(){}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=u.Xpm({type:e,selectors:[["app-inicio"]],decls:9,vars:0,consts:[[1,"container"],[1,"row"],[1,"text-center","col-sm-12"],[1,"row","col-md-12"],[1,"col-md-6"]],template:function(e,t){1&e&&(u.TgZ(0,"div",0),u.TgZ(1,"div",1),u.TgZ(2,"h4",2),u._uU(3,"Bienvebido al sistema"),u.qZA(),u.TgZ(4,"div",3),u.TgZ(5,"div",4),u._UZ(6,"app-reporte-diario"),u.qZA(),u.TgZ(7,"div",4),u._UZ(8,"app-reporte-semanal"),u.qZA(),u.qZA(),u.qZA(),u.qZA())},directives:[Ib,Sb],styles:[""]}),e}(),Rb=[{path:"",component:Eb},{path:"inicio",component:Eb}],Cb=function(){var e=function e(){f(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=u.oAB({type:e}),e.\u0275inj=u.cJS({imports:[[Ri.forRoot(Rb)],Ri]}),e}(),Ab=function(){var e=function(){function e(){f(this,e)}return h(e,[{key:"ngOnInit",value:function(){}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=u.Xpm({type:e,selectors:[["app-header"]],decls:21,vars:0,consts:[[1,"navbar","navbar-expand-lg","navbar-light","bar-color"],["href","#",1,"navbar-brand"],["src","assets/images/salud_icono.png",1,"icono-logo"],["type","button","data-toggle","collapse","data-target","#navbarNav","aria-controls","navbarNav","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","navbarNav",1,"collapse","navbar-collapse"],[1,"navbar-nav"],["routerLinkActive","active",1,"nav-item"],["routerLink","/inicio",1,"nav-link"],[1,"fas","fa-home"],[1,"sr-only"],["routerLinkActive","active",1,"nav-item","ml-3"],["routerLink","/",1,"nav-link"],[1,"fas","fa-first-aid"],[1,"fas","fa-user"]],template:function(e,t){1&e&&(u.TgZ(0,"nav",0),u.TgZ(1,"a",1),u._UZ(2,"img",2),u.qZA(),u.TgZ(3,"button",3),u._UZ(4,"span",4),u.qZA(),u.TgZ(5,"div",5),u.TgZ(6,"ul",6),u.TgZ(7,"li",7),u.TgZ(8,"a",8),u._UZ(9,"i",9),u._uU(10," Inicio "),u.TgZ(11,"span",10),u._uU(12,"(current)"),u.qZA(),u.qZA(),u.qZA(),u.TgZ(13,"li",11),u.TgZ(14,"a",12),u._UZ(15,"i",13),u._uU(16," S\xedntomas"),u.qZA(),u.qZA(),u.TgZ(17,"li",11),u.TgZ(18,"a",12),u._UZ(19,"i",14),u._uU(20," Iniciar Sesi\xf3n"),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA())},directives:[gi,pi],styles:[""]}),e}(),Nb=function(){var e=function(){function e(){f(this,e)}return h(e,[{key:"ngOnInit",value:function(){}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=u.Xpm({type:e,selectors:[["app-footer"]],decls:3,vars:0,consts:[[1,"bg-dark","text-center","text-lg-start","ftr"],[1,"text-center","p-3","text-muted"]],template:function(e,t){1&e&&(u.TgZ(0,"footer",0),u.TgZ(1,"div",1),u._uU(2," \xa9 2022 Derechos reservados "),u.qZA(),u.qZA())},styles:[""]}),e}(),Ob=function(){var e=function e(){f(this,e),this.title="apptextil-frontend"};return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=u.Xpm({type:e,selectors:[["app-root"]],decls:4,vars:0,consts:[[1,"container-fluid"]],template:function(e,t){1&e&&(u._UZ(0,"app-header"),u.TgZ(1,"div",0),u._UZ(2,"router-outlet"),u.qZA(),u._UZ(3,"app-footer"))},directives:[Ab,yi,Nb],styles:[""]}),e}();o(1555);var Db=function(){var e=function e(){f(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=u.oAB({type:e}),e.\u0275inj=u.cJS({}),e}(),Pb=new u.OlP("NgModelWithFormControlWarning"),Lb=function(){var e=function e(){f(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=u.oAB({type:e}),e.\u0275inj=u.cJS({imports:[[Db]]}),e}(),Fb=function(){var e=function(){function e(){f(this,e)}return h(e,null,[{key:"withConfig",value:function(t){return{ngModule:e,providers:[{provide:Pb,useValue:t.warnOnNgModelWithFormControl}]}}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=u.oAB({type:e}),e.\u0275inj=u.cJS({imports:[Lb]}),e}(),Mb=function e(){f(this,e)},Ub="*";function jb(e,t){return{type:7,name:e,definitions:t,options:{}}}function Vb(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return{type:4,styles:t,timings:e}}function qb(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return{type:2,steps:e,options:t}}function Bb(e){return{type:6,styles:e,offset:null}}function zb(e,t,n){return{type:0,name:e,styles:t,options:n}}function Zb(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return{type:1,expr:e,animation:t,options:n}}function Hb(e){Promise.resolve(null).then(e)}var Gb=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;f(this,e),this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=t+n}return h(e,[{key:"_onFinish",value:function(){this._finished||(this._finished=!0,this._onDoneFns.forEach(function(e){return e()}),this._onDoneFns=[])}},{key:"onStart",value:function(e){this._onStartFns.push(e)}},{key:"onDone",value:function(e){this._onDoneFns.push(e)}},{key:"onDestroy",value:function(e){this._onDestroyFns.push(e)}},{key:"hasStarted",value:function(){return this._started}},{key:"init",value:function(){}},{key:"play",value:function(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}},{key:"triggerMicrotask",value:function(){var e=this;Hb(function(){return e._onFinish()})}},{key:"_onStart",value:function(){this._onStartFns.forEach(function(e){return e()}),this._onStartFns=[]}},{key:"pause",value:function(){}},{key:"restart",value:function(){}},{key:"finish",value:function(){this._onFinish()}},{key:"destroy",value:function(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(function(e){return e()}),this._onDestroyFns=[])}},{key:"reset",value:function(){this._started=!1}},{key:"setPosition",value:function(e){this._position=this.totalTime?e*this.totalTime:1}},{key:"getPosition",value:function(){return this.totalTime?this._position/this.totalTime:1}},{key:"triggerCallback",value:function(e){var t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(function(e){return e()}),t.length=0}}]),e}(),Kb=function(){function e(t){var n=this;f(this,e),this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=t;var r=0,i=0,a=0,o=this.players.length;0==o?Hb(function(){return n._onFinish()}):this.players.forEach(function(e){e.onDone(function(){++r==o&&n._onFinish()}),e.onDestroy(function(){++i==o&&n._onDestroy()}),e.onStart(function(){++a==o&&n._onStart()})}),this.totalTime=this.players.reduce(function(e,t){return Math.max(e,t.totalTime)},0)}return h(e,[{key:"_onFinish",value:function(){this._finished||(this._finished=!0,this._onDoneFns.forEach(function(e){return e()}),this._onDoneFns=[])}},{key:"init",value:function(){this.players.forEach(function(e){return e.init()})}},{key:"onStart",value:function(e){this._onStartFns.push(e)}},{key:"_onStart",value:function(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(function(e){return e()}),this._onStartFns=[])}},{key:"onDone",value:function(e){this._onDoneFns.push(e)}},{key:"onDestroy",value:function(e){this._onDestroyFns.push(e)}},{key:"hasStarted",value:function(){return this._started}},{key:"play",value:function(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(function(e){return e.play()})}},{key:"pause",value:function(){this.players.forEach(function(e){return e.pause()})}},{key:"restart",value:function(){this.players.forEach(function(e){return e.restart()})}},{key:"finish",value:function(){this._onFinish(),this.players.forEach(function(e){return e.finish()})}},{key:"destroy",value:function(){this._onDestroy()}},{key:"_onDestroy",value:function(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(function(e){return e.destroy()}),this._onDestroyFns.forEach(function(e){return e()}),this._onDestroyFns=[])}},{key:"reset",value:function(){this.players.forEach(function(e){return e.reset()}),this._destroyed=!1,this._finished=!1,this._started=!1}},{key:"setPosition",value:function(e){var t=e*this.totalTime;this.players.forEach(function(e){var n=e.totalTime?Math.min(1,t/e.totalTime):1;e.setPosition(n)})}},{key:"getPosition",value:function(){var e=this.players.reduce(function(e,t){return null===e||t.totalTime>e.totalTime?t:e},null);return null!=e?e.getPosition():0}},{key:"beforeDestroy",value:function(){this.players.forEach(function(e){e.beforeDestroy&&e.beforeDestroy()})}},{key:"triggerCallback",value:function(e){var t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(function(e){return e()}),t.length=0}}]),e}(),Wb=["toast-component",""];function Qb(e,t){if(1&e){var n=u.EpF();u.TgZ(0,"button",5),u.NdJ("click",function(){return u.CHM(n),u.oxw().remove()}),u.TgZ(1,"span",6),u._uU(2,"\xd7"),u.qZA(),u.qZA()}}function Yb(e,t){if(1&e&&(u.ynx(0),u._uU(1),u.BQk()),2&e){var n=u.oxw(2);u.xp6(1),u.hij("[",n.duplicatesCount+1,"]")}}function Jb(e,t){if(1&e&&(u.TgZ(0,"div"),u._uU(1),u.YNc(2,Yb,2,1,"ng-container",4),u.qZA()),2&e){var n=u.oxw();u.Tol(n.options.titleClass),u.uIk("aria-label",n.title),u.xp6(1),u.hij(" ",n.title," "),u.xp6(1),u.Q6J("ngIf",n.duplicatesCount)}}function $b(e,t){if(1&e&&u._UZ(0,"div",7),2&e){var n=u.oxw();u.Tol(n.options.messageClass),u.Q6J("innerHTML",n.message,u.oJD)}}function Xb(e,t){if(1&e&&(u.TgZ(0,"div",8),u._uU(1),u.qZA()),2&e){var n=u.oxw();u.Tol(n.options.messageClass),u.uIk("aria-label",n.message),u.xp6(1),u.hij(" ",n.message," ")}}function e_(e,t){if(1&e&&(u.TgZ(0,"div"),u._UZ(1,"div",9),u.qZA()),2&e){var n=u.oxw();u.xp6(1),u.Udp("width",n.width+"%")}}function t_(e,t){if(1&e){var n=u.EpF();u.TgZ(0,"button",5),u.NdJ("click",function(){return u.CHM(n),u.oxw().remove()}),u.TgZ(1,"span",6),u._uU(2,"\xd7"),u.qZA(),u.qZA()}}function n_(e,t){if(1&e&&(u.ynx(0),u._uU(1),u.BQk()),2&e){var n=u.oxw(2);u.xp6(1),u.hij("[",n.duplicatesCount+1,"]")}}function r_(e,t){if(1&e&&(u.TgZ(0,"div"),u._uU(1),u.YNc(2,n_,2,1,"ng-container",4),u.qZA()),2&e){var n=u.oxw();u.Tol(n.options.titleClass),u.uIk("aria-label",n.title),u.xp6(1),u.hij(" ",n.title," "),u.xp6(1),u.Q6J("ngIf",n.duplicatesCount)}}function i_(e,t){if(1&e&&u._UZ(0,"div",7),2&e){var n=u.oxw();u.Tol(n.options.messageClass),u.Q6J("innerHTML",n.message,u.oJD)}}function a_(e,t){if(1&e&&(u.TgZ(0,"div",8),u._uU(1),u.qZA()),2&e){var n=u.oxw();u.Tol(n.options.messageClass),u.uIk("aria-label",n.message),u.xp6(1),u.hij(" ",n.message," ")}}function o_(e,t){if(1&e&&(u.TgZ(0,"div"),u._UZ(1,"div",9),u.qZA()),2&e){var n=u.oxw();u.xp6(1),u.Udp("width",n.width+"%")}}var s_=function(){function e(t,n,r,i,a,o){var s=this;f(this,e),this.toastId=t,this.config=n,this.message=r,this.title=i,this.toastType=a,this.toastRef=o,this._onTap=new Ne.xQ,this._onAction=new Ne.xQ,this.toastRef.afterClosed().subscribe(function(){s._onAction.complete(),s._onTap.complete()})}return h(e,[{key:"triggerTap",value:function(){this._onTap.next(),this.config.tapToDismiss&&this._onTap.complete()}},{key:"onTap",value:function(){return this._onTap.asObservable()}},{key:"triggerAction",value:function(e){this._onAction.next(e)}},{key:"onAction",value:function(){return this._onAction.asObservable()}}]),e}(),u_={maxOpened:0,autoDismiss:!1,newestOnTop:!0,preventDuplicates:!1,countDuplicates:!1,resetTimeoutOnDuplicate:!1,includeTitleDuplicates:!1,iconClasses:{error:"toast-error",info:"toast-info",success:"toast-success",warning:"toast-warning"},closeButton:!1,disableTimeOut:!1,timeOut:5e3,extendedTimeOut:1e3,enableHtml:!1,progressBar:!1,toastClass:"ngx-toastr",positionClass:"toast-top-right",titleClass:"toast-title",messageClass:"toast-message",easing:"ease-in",easeTime:300,tapToDismiss:!0,onActivateTick:!1,progressAnimation:"decreasing",payload:null},c_=new u.OlP("ToastConfig"),l_=function(){function e(t,n){f(this,e),this.component=t,this.injector=n}return h(e,[{key:"attach",value:function(e,t){return this._attachedHost=e,e.attach(this,t)}},{key:"detach",value:function(){var e=this._attachedHost;if(e)return this._attachedHost=void 0,e.detach()}},{key:"isAttached",get:function(){return null!=this._attachedHost}},{key:"setAttachedHost",value:function(e){this._attachedHost=e}}]),e}(),h_=function(e){d(n,e);var t=v(n);function n(e,r,i){var a;return f(this,n),(a=t.call(this))._hostDomElement=e,a._componentFactoryResolver=r,a._appRef=i,a}return h(n,[{key:"attachComponentPortal",value:function(e,t){var n,r=this,i=this._componentFactoryResolver.resolveComponentFactory(e.component);return n=i.create(e.injector),this._appRef.attachView(n.hostView),this.setDisposeFn(function(){r._appRef.detachView(n.hostView),n.destroy()}),t?this._hostDomElement.insertBefore(this._getComponentRootNode(n),this._hostDomElement.firstChild):this._hostDomElement.appendChild(this._getComponentRootNode(n)),n}},{key:"_getComponentRootNode",value:function(e){return e.hostView.rootNodes[0]}}]),n}(function(){function e(){f(this,e)}return h(e,[{key:"attach",value:function(e,t){return this._attachedPortal=e,this.attachComponentPortal(e,t)}},{key:"detach",value:function(){this._attachedPortal&&this._attachedPortal.setAttachedHost(),this._attachedPortal=void 0,this._disposeFn&&(this._disposeFn(),this._disposeFn=void 0)}},{key:"setDisposeFn",value:function(e){this._disposeFn=e}}]),e}()),f_=function(){var e=function(){function e(t){f(this,e),this._document=t}return h(e,[{key:"ngOnDestroy",value:function(){this._containerElement&&this._containerElement.parentNode&&this._containerElement.parentNode.removeChild(this._containerElement)}},{key:"getContainerElement",value:function(){return this._containerElement||this._createContainer(),this._containerElement}},{key:"_createContainer",value:function(){var e=this._document.createElement("div");e.classList.add("overlay-container"),this._document.body.appendChild(e),this._containerElement=e}}]),e}();return e.\u0275fac=function(t){return new(t||e)(u.LFG(k))},e.\u0275prov=u.Yz7({factory:function(){return new e(u.LFG(k))},token:e,providedIn:"root"}),e}(),d_=function(){function e(t){f(this,e),this._portalHost=t}return h(e,[{key:"attach",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return this._portalHost.attach(e,t)}},{key:"detach",value:function(){return this._portalHost.detach()}}]),e}(),v_=function(){var e=function(){function e(t,n,r,i){f(this,e),this._overlayContainer=t,this._componentFactoryResolver=n,this._appRef=r,this._document=i,this._paneElements=new Map}return h(e,[{key:"create",value:function(e,t){return this._createOverlayRef(this.getPaneElement(e,t))}},{key:"getPaneElement",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;return this._paneElements.get(t)||this._paneElements.set(t,{}),this._paneElements.get(t)[e]||(this._paneElements.get(t)[e]=this._createPaneElement(e,t)),this._paneElements.get(t)[e]}},{key:"_createPaneElement",value:function(e,t){var n=this._document.createElement("div");return n.id="toast-container",n.classList.add(e),n.classList.add("toast-container"),t?t.getContainerElement().appendChild(n):this._overlayContainer.getContainerElement().appendChild(n),n}},{key:"_createPortalHost",value:function(e){return new h_(e,this._componentFactoryResolver,this._appRef)}},{key:"_createOverlayRef",value:function(e){return new d_(this._createPortalHost(e))}}]),e}();return e.\u0275fac=function(t){return new(t||e)(u.LFG(f_),u.LFG(u._Vd),u.LFG(u.z2F),u.LFG(k))},e.\u0275prov=u.Yz7({factory:function(){return new e(u.LFG(f_),u.LFG(u._Vd),u.LFG(u.z2F),u.LFG(k))},token:e,providedIn:"root"}),e}(),p_=function(){function e(t){f(this,e),this._overlayRef=t,this.duplicatesCount=0,this._afterClosed=new Ne.xQ,this._activate=new Ne.xQ,this._manualClose=new Ne.xQ,this._resetTimeout=new Ne.xQ,this._countDuplicate=new Ne.xQ}return h(e,[{key:"manualClose",value:function(){this._manualClose.next(),this._manualClose.complete()}},{key:"manualClosed",value:function(){return this._manualClose.asObservable()}},{key:"timeoutReset",value:function(){return this._resetTimeout.asObservable()}},{key:"countDuplicate",value:function(){return this._countDuplicate.asObservable()}},{key:"close",value:function(){this._overlayRef.detach(),this._afterClosed.next(),this._manualClose.next(),this._afterClosed.complete(),this._manualClose.complete(),this._activate.complete(),this._resetTimeout.complete(),this._countDuplicate.complete()}},{key:"afterClosed",value:function(){return this._afterClosed.asObservable()}},{key:"isInactive",value:function(){return this._activate.isStopped}},{key:"activate",value:function(){this._activate.next(),this._activate.complete()}},{key:"afterActivate",value:function(){return this._activate.asObservable()}},{key:"onDuplicate",value:function(e,t){e&&this._resetTimeout.next(),t&&this._countDuplicate.next(++this.duplicatesCount)}}]),e}(),m_=function(){function e(t,n){f(this,e),this._toastPackage=t,this._parentInjector=n}return h(e,[{key:"get",value:function(e,t,n){return e===s_?this._toastPackage:this._parentInjector.get(e,t,n)}}]),e}(),g_=function(){var e=function(){function e(t,n,r,i,a){f(this,e),this.overlay=n,this._injector=r,this.sanitizer=i,this.ngZone=a,this.currentlyActive=0,this.toasts=[],this.index=0,this.toastrConfig=Object.assign(Object.assign({},t.default),t.config),t.config.iconClasses&&(this.toastrConfig.iconClasses=Object.assign(Object.assign({},t.default.iconClasses),t.config.iconClasses))}return h(e,[{key:"show",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";return this._preBuildNotification(r,e,t,this.applyConfig(n))}},{key:"success",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this._preBuildNotification(this.toastrConfig.iconClasses.success||"",e,t,this.applyConfig(n))}},{key:"error",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this._preBuildNotification(this.toastrConfig.iconClasses.error||"",e,t,this.applyConfig(n))}},{key:"info",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this._preBuildNotification(this.toastrConfig.iconClasses.info||"",e,t,this.applyConfig(n))}},{key:"warning",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this._preBuildNotification(this.toastrConfig.iconClasses.warning||"",e,t,this.applyConfig(n))}},{key:"clear",value:function(e){var t,n=s(this.toasts);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(void 0!==e){if(r.toastId===e)return void r.toastRef.manualClose()}else r.toastRef.manualClose()}}catch(i){n.e(i)}finally{n.f()}}},{key:"remove",value:function(e){var t=this._findToast(e);if(!t||(t.activeToast.toastRef.close(),this.toasts.splice(t.index,1),this.currentlyActive=this.currentlyActive-1,!this.toastrConfig.maxOpened||!this.toasts.length))return!1;if(this.currentlyActive<this.toastrConfig.maxOpened&&this.toasts[this.currentlyActive]){var n=this.toasts[this.currentlyActive].toastRef;n.isInactive()||(this.currentlyActive=this.currentlyActive+1,n.activate())}return!0}},{key:"findDuplicate",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,a=this.toastrConfig.includeTitleDuplicates,o=s(this.toasts);try{for(o.s();!(e=o.n()).done;){var u=e.value,c=a&&u.title===t;if((!a||c)&&u.message===n)return u.toastRef.onDuplicate(r,i),u}}catch(l){o.e(l)}finally{o.f()}return null}},{key:"applyConfig",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.assign(Object.assign({},this.toastrConfig),e)}},{key:"_findToast",value:function(e){for(var t=0;t<this.toasts.length;t++)if(this.toasts[t].toastId===e)return{index:t,activeToast:this.toasts[t]};return null}},{key:"_preBuildNotification",value:function(e,t,n,r){var i=this;return r.onActivateTick?this.ngZone.run(function(){return i._buildNotification(e,t,n,r)}):this._buildNotification(e,t,n,r)}},{key:"_buildNotification",value:function(e,t,n,r){if(!r.toastComponent)throw new Error("toastComponent required");var i=this.findDuplicate(n,t,this.toastrConfig.resetTimeoutOnDuplicate&&r.timeOut>0,this.toastrConfig.countDuplicates);if((this.toastrConfig.includeTitleDuplicates&&n||t)&&this.toastrConfig.preventDuplicates&&null!==i)return i;this.previousToastMessage=t;var a=!1;this.toastrConfig.maxOpened&&this.currentlyActive>=this.toastrConfig.maxOpened&&(a=!0,this.toastrConfig.autoDismiss&&this.clear(this.toasts[0].toastId));var o=this.overlay.create(r.positionClass,this.overlayContainer);this.index=this.index+1;var s=t;t&&r.enableHtml&&(s=this.sanitizer.sanitize(u.q3G.HTML,t));var c=new p_(o),l=new s_(this.index,r,s,n,e,c),h=new m_(l,this._injector),f=new l_(r.toastComponent,h),d=o.attach(f,this.toastrConfig.newestOnTop);c.componentInstance=d.instance;var v={toastId:this.index,title:n||"",message:t||"",toastRef:c,onShown:c.afterActivate(),onHidden:c.afterClosed(),onTap:l.onTap(),onAction:l.onAction(),portal:d};return a||(this.currentlyActive=this.currentlyActive+1,setTimeout(function(){v.toastRef.activate()})),this.toasts.push(v),v}}]),e}();return e.\u0275fac=function(t){return new(t||e)(u.LFG(c_),u.LFG(v_),u.LFG(u.zs3),u.LFG(xe),u.LFG(u.R0b))},e.\u0275prov=u.Yz7({factory:function(){return new e(u.LFG(c_),u.LFG(v_),u.LFG(u.gxx),u.LFG(xe),u.LFG(u.R0b))},token:e,providedIn:"root"}),e}(),y_=function(){var e=function(){function e(t,n,r){var i=this;f(this,e),this.toastrService=t,this.toastPackage=n,this.ngZone=r,this.width=-1,this.toastClasses="",this.state={value:"inactive",params:{easeTime:this.toastPackage.config.easeTime,easing:"ease-in"}},this.message=n.message,this.title=n.title,this.options=n.config,this.originalTimeout=n.config.timeOut,this.toastClasses="".concat(n.toastType," ").concat(n.config.toastClass),this.sub=n.toastRef.afterActivate().subscribe(function(){i.activateToast()}),this.sub1=n.toastRef.manualClosed().subscribe(function(){i.remove()}),this.sub2=n.toastRef.timeoutReset().subscribe(function(){i.resetTimeout()}),this.sub3=n.toastRef.countDuplicate().subscribe(function(e){i.duplicatesCount=e})}return h(e,[{key:"displayStyle",get:function(){if("inactive"===this.state.value)return"none"}},{key:"ngOnDestroy",value:function(){this.sub.unsubscribe(),this.sub1.unsubscribe(),this.sub2.unsubscribe(),this.sub3.unsubscribe(),clearInterval(this.intervalId),clearTimeout(this.timeout)}},{key:"activateToast",value:function(){var e=this;this.state=Object.assign(Object.assign({},this.state),{value:"active"}),!0!==this.options.disableTimeOut&&"timeOut"!==this.options.disableTimeOut&&this.options.timeOut&&(this.outsideTimeout(function(){return e.remove()},this.options.timeOut),this.hideTime=(new Date).getTime()+this.options.timeOut,this.options.progressBar&&this.outsideInterval(function(){return e.updateProgress()},10))}},{key:"updateProgress",value:function(){if(0!==this.width&&100!==this.width&&this.options.timeOut){var e=(new Date).getTime();this.width=(this.hideTime-e)/this.options.timeOut*100,"increasing"===this.options.progressAnimation&&(this.width=100-this.width),this.width<=0&&(this.width=0),this.width>=100&&(this.width=100)}}},{key:"resetTimeout",value:function(){var e=this;clearTimeout(this.timeout),clearInterval(this.intervalId),this.state=Object.assign(Object.assign({},this.state),{value:"active"}),this.outsideTimeout(function(){return e.remove()},this.originalTimeout),this.options.timeOut=this.originalTimeout,this.hideTime=(new Date).getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&this.outsideInterval(function(){return e.updateProgress()},10)}},{key:"remove",value:function(){var e=this;"removed"!==this.state.value&&(clearTimeout(this.timeout),this.state=Object.assign(Object.assign({},this.state),{value:"removed"}),this.outsideTimeout(function(){return e.toastrService.remove(e.toastPackage.toastId)},+this.toastPackage.config.easeTime))}},{key:"tapToast",value:function(){"removed"!==this.state.value&&(this.toastPackage.triggerTap(),this.options.tapToDismiss&&this.remove())}},{key:"stickAround",value:function(){"removed"!==this.state.value&&(clearTimeout(this.timeout),this.options.timeOut=0,this.hideTime=0,clearInterval(this.intervalId),this.width=0)}},{key:"delayedHideToast",value:function(){var e=this;!0===this.options.disableTimeOut||"extendedTimeOut"===this.options.disableTimeOut||0===this.options.extendedTimeOut||"removed"===this.state.value||(this.outsideTimeout(function(){return e.remove()},this.options.extendedTimeOut),this.options.timeOut=this.options.extendedTimeOut,this.hideTime=(new Date).getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&this.outsideInterval(function(){return e.updateProgress()},10))}},{key:"outsideTimeout",value:function(e,t){var n=this;this.ngZone?this.ngZone.runOutsideAngular(function(){return n.timeout=setTimeout(function(){return n.runInsideAngular(e)},t)}):this.timeout=setTimeout(function(){return e()},t)}},{key:"outsideInterval",value:function(e,t){var n=this;this.ngZone?this.ngZone.runOutsideAngular(function(){return n.intervalId=setInterval(function(){return n.runInsideAngular(e)},t)}):this.intervalId=setInterval(function(){return e()},t)}},{key:"runInsideAngular",value:function(e){this.ngZone?this.ngZone.run(function(){return e()}):e()}}]),e}();return e.\u0275fac=function(t){return new(t||e)(u.Y36(g_),u.Y36(s_),u.Y36(u.R0b))},e.\u0275cmp=u.Xpm({type:e,selectors:[["","toast-component",""]],hostVars:5,hostBindings:function(e,t){1&e&&u.NdJ("click",function(){return t.tapToast()})("mouseenter",function(){return t.stickAround()})("mouseleave",function(){return t.delayedHideToast()}),2&e&&(u.d8E("@flyInOut",t.state),u.Tol(t.toastClasses),u.Udp("display",t.displayStyle))},attrs:Wb,decls:5,vars:5,consts:[["type","button","class","toast-close-button","aria-label","Close",3,"click",4,"ngIf"],[3,"class",4,"ngIf"],["role","alertdialog","aria-live","polite",3,"class","innerHTML",4,"ngIf"],["role","alertdialog","aria-live","polite",3,"class",4,"ngIf"],[4,"ngIf"],["type","button","aria-label","Close",1,"toast-close-button",3,"click"],["aria-hidden","true"],["role","alertdialog","aria-live","polite",3,"innerHTML"],["role","alertdialog","aria-live","polite"],[1,"toast-progress"]],template:function(e,t){1&e&&(u.YNc(0,Qb,3,0,"button",0),u.YNc(1,Jb,3,5,"div",1),u.YNc(2,$b,1,3,"div",2),u.YNc(3,Xb,2,4,"div",3),u.YNc(4,e_,2,2,"div",4)),2&e&&(u.Q6J("ngIf",t.options.closeButton),u.xp6(1),u.Q6J("ngIf",t.title),u.xp6(1),u.Q6J("ngIf",t.message&&t.options.enableHtml),u.xp6(1),u.Q6J("ngIf",t.message&&!t.options.enableHtml),u.xp6(1),u.Q6J("ngIf",t.options.progressBar))},directives:[B],encapsulation:2,data:{animation:[jb("flyInOut",[zb("inactive",Bb({opacity:0})),zb("active",Bb({opacity:1})),zb("removed",Bb({opacity:0})),Zb("inactive => active",Vb("{{ easeTime }}ms {{ easing }}")),Zb("active => removed",Vb("{{ easeTime }}ms {{ easing }}"))])]}}),e}(),k_=Object.assign(Object.assign({},u_),{toastComponent:y_}),w_=function(){var e=function(){function e(){f(this,e)}return h(e,null,[{key:"forRoot",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{ngModule:e,providers:[{provide:c_,useValue:{default:k_,config:t}}]}}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=u.oAB({type:e}),e.\u0275inj=u.cJS({imports:[[H]]}),e}(),b_=function(){var e=function(){function e(t,n,r){var i=this;f(this,e),this.toastrService=t,this.toastPackage=n,this.appRef=r,this.width=-1,this.toastClasses="",this.state="inactive",this.message=n.message,this.title=n.title,this.options=n.config,this.originalTimeout=n.config.timeOut,this.toastClasses="".concat(n.toastType," ").concat(n.config.toastClass),this.sub=n.toastRef.afterActivate().subscribe(function(){i.activateToast()}),this.sub1=n.toastRef.manualClosed().subscribe(function(){i.remove()}),this.sub2=n.toastRef.timeoutReset().subscribe(function(){i.resetTimeout()}),this.sub3=n.toastRef.countDuplicate().subscribe(function(e){i.duplicatesCount=e})}return h(e,[{key:"displayStyle",get:function(){if("inactive"===this.state)return"none"}},{key:"ngOnDestroy",value:function(){this.sub.unsubscribe(),this.sub1.unsubscribe(),this.sub2.unsubscribe(),this.sub3.unsubscribe(),clearInterval(this.intervalId),clearTimeout(this.timeout)}},{key:"activateToast",value:function(){var e=this;this.state="active",!(!0===this.options.disableTimeOut||"timeOut"===this.options.disableTimeOut)&&this.options.timeOut&&(this.timeout=setTimeout(function(){e.remove()},this.options.timeOut),this.hideTime=(new Date).getTime()+this.options.timeOut,this.options.progressBar&&(this.intervalId=setInterval(function(){return e.updateProgress()},10))),this.options.onActivateTick&&this.appRef.tick()}},{key:"updateProgress",value:function(){if(0!==this.width&&100!==this.width&&this.options.timeOut){var e=(new Date).getTime();this.width=(this.hideTime-e)/this.options.timeOut*100,"increasing"===this.options.progressAnimation&&(this.width=100-this.width),this.width<=0&&(this.width=0),this.width>=100&&(this.width=100)}}},{key:"resetTimeout",value:function(){var e=this;clearTimeout(this.timeout),clearInterval(this.intervalId),this.state="active",this.options.timeOut=this.originalTimeout,this.timeout=setTimeout(function(){return e.remove()},this.originalTimeout),this.hideTime=(new Date).getTime()+(this.originalTimeout||0),this.width=-1,this.options.progressBar&&(this.intervalId=setInterval(function(){return e.updateProgress()},10))}},{key:"remove",value:function(){var e=this;"removed"!==this.state&&(clearTimeout(this.timeout),this.state="removed",this.timeout=setTimeout(function(){return e.toastrService.remove(e.toastPackage.toastId)}))}},{key:"tapToast",value:function(){"removed"!==this.state&&(this.toastPackage.triggerTap(),this.options.tapToDismiss&&this.remove())}},{key:"stickAround",value:function(){"removed"!==this.state&&(clearTimeout(this.timeout),this.options.timeOut=0,this.hideTime=0,clearInterval(this.intervalId),this.width=0)}},{key:"delayedHideToast",value:function(){var e=this;!0===this.options.disableTimeOut||"extendedTimeOut"===this.options.disableTimeOut||0===this.options.extendedTimeOut||"removed"===this.state||(this.timeout=setTimeout(function(){return e.remove()},this.options.extendedTimeOut),this.options.timeOut=this.options.extendedTimeOut,this.hideTime=(new Date).getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&(this.intervalId=setInterval(function(){return e.updateProgress()},10)))}}]),e}();return e.\u0275fac=function(t){return new(t||e)(u.Y36(g_),u.Y36(s_),u.Y36(u.z2F))},e.\u0275cmp=u.Xpm({type:e,selectors:[["","toast-component",""]],hostVars:4,hostBindings:function(e,t){1&e&&u.NdJ("click",function(){return t.tapToast()})("mouseenter",function(){return t.stickAround()})("mouseleave",function(){return t.delayedHideToast()}),2&e&&(u.Tol(t.toastClasses),u.Udp("display",t.displayStyle))},attrs:Wb,decls:5,vars:5,consts:[["type","button","class","toast-close-button","aria-label","Close",3,"click",4,"ngIf"],[3,"class",4,"ngIf"],["role","alert","aria-live","polite",3,"class","innerHTML",4,"ngIf"],["role","alert","aria-live","polite",3,"class",4,"ngIf"],[4,"ngIf"],["type","button","aria-label","Close",1,"toast-close-button",3,"click"],["aria-hidden","true"],["role","alert","aria-live","polite",3,"innerHTML"],["role","alert","aria-live","polite"],[1,"toast-progress"]],template:function(e,t){1&e&&(u.YNc(0,t_,3,0,"button",0),u.YNc(1,r_,3,5,"div",1),u.YNc(2,i_,1,3,"div",2),u.YNc(3,a_,2,4,"div",3),u.YNc(4,o_,2,2,"div",4)),2&e&&(u.Q6J("ngIf",t.options.closeButton),u.xp6(1),u.Q6J("ngIf",t.title),u.xp6(1),u.Q6J("ngIf",t.message&&t.options.enableHtml),u.xp6(1),u.Q6J("ngIf",t.message&&!t.options.enableHtml),u.xp6(1),u.Q6J("ngIf",t.options.progressBar))},directives:[B],encapsulation:2}),e}();function __(){return"undefined"!=typeof window&&void 0!==window.document}function x_(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function T_(e){switch(e.length){case 0:return new Gb;case 1:return e[0];default:return new Kb(e)}}function I_(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},o=[],s=[],u=-1,c=null;if(r.forEach(function(e){var n=e.offset,r=n==u,l=r&&c||{};Object.keys(e).forEach(function(n){var r=n,s=e[n];if("offset"!==n)switch(r=t.normalizePropertyName(r,o),s){case"!":s=i[n];break;case Ub:s=a[n];break;default:s=t.normalizeStyleValue(n,r,s,o)}l[r]=s}),r||s.push(l),c=l,u=n}),o.length){var l="\n - ";throw new Error("Unable to animate due to the following errors:".concat(l).concat(o.join(l)))}return s}function S_(e,t,n,r){switch(t){case"start":e.onStart(function(){return r(n&&E_(n,"start",e))});break;case"done":e.onDone(function(){return r(n&&E_(n,"done",e))});break;case"destroy":e.onDestroy(function(){return r(n&&E_(n,"destroy",e))})}}function E_(e,t,n){var r=n.totalTime,i=R_(e.element,e.triggerName,e.fromState,e.toState,t||e.phaseName,null==r?e.totalTime:r,!!n.disabled),a=e._data;return null!=a&&(i._data=a),i}function R_(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,o=arguments.length>6?arguments[6]:void 0;return{element:e,triggerName:t,fromState:n,toState:r,phaseName:i,totalTime:a,disabled:!!o}}function C_(e,t,n){var r;return e instanceof Map?(r=e.get(t))||e.set(t,r=n):(r=e[t])||(r=e[t]=n),r}function A_(e){var t=e.indexOf(":");return[e.substring(1,t),e.substr(t+1)]}Object.assign(Object.assign({},u_),{toastComponent:b_});var N_=function(e,t){return!1},O_=function(e,t){return!1},D_=function(e,t,n){return[]},P_=x_();(P_||"undefined"!=typeof Element)&&(N_=__()?function(e,t){for(;t&&t!==document.documentElement;){if(t===e)return!0;t=t.parentNode||t.host}return!1}:function(e,t){return e.contains(t)},O_=function(){if(P_||Element.prototype.matches)return function(e,t){return e.matches(t)};var e=Element.prototype,t=e.matchesSelector||e.mozMatchesSelector||e.msMatchesSelector||e.oMatchesSelector||e.webkitMatchesSelector;return t?function(e,n){return t.apply(e,[n])}:O_}(),D_=function(e,t,n){var r=[];if(n)for(var i=e.querySelectorAll(t),a=0;a<i.length;a++)r.push(i[a]);else{var o=e.querySelector(t);o&&r.push(o)}return r});var L_=null,F_=!1;function M_(e){L_||(L_=("undefined"!=typeof document?document.body:null)||{},F_=!!L_.style&&"WebkitAppearance"in L_.style);var t=!0;return L_.style&&!function(e){return"ebkit"==e.substring(1,6)}(e)&&(!(t=e in L_.style)&&F_&&(t="Webkit"+e.charAt(0).toUpperCase()+e.substr(1)in L_.style)),t}var U_=O_,j_=N_,V_=D_;function q_(e){var t={};return Object.keys(e).forEach(function(n){var r=n.replace(/([a-z])([A-Z])/g,"$1-$2");t[r]=e[n]}),t}var B_=function(){var e=function(){function e(){f(this,e)}return h(e,[{key:"validateStyleProperty",value:function(e){return M_(e)}},{key:"matchesElement",value:function(e,t){return U_(e,t)}},{key:"containsElement",value:function(e,t){return j_(e,t)}},{key:"query",value:function(e,t,n){return V_(e,t,n)}},{key:"computeStyle",value:function(e,t,n){return n||""}},{key:"animate",value:function(e,t,n,r,i){return new Gb(n,r)}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=u.Yz7({token:e,factory:e.\u0275fac}),e}(),z_=function(){var e=function e(){f(this,e)};return e.NOOP=new B_,e}(),Z_="ng-enter",H_="ng-leave",G_="ng-trigger",K_=".ng-trigger",W_="ng-animating",Q_=".ng-animating";function Y_(e){if("number"==typeof e)return e;var t=e.match(/^(-?[\.\d]+)(m?s)/);return!t||t.length<2?0:J_(parseFloat(t[1]),t[2])}function J_(e,t){switch(t){case"s":return 1e3*e;default:return e}}function $_(e,t,n){return e.hasOwnProperty("duration")?e:function(e,t,n){var r,i=0,a="";if("string"==typeof e){var o=e.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===o)return t.push('The provided timing value "'.concat(e,'" is invalid.')),{duration:0,delay:0,easing:""};r=J_(parseFloat(o[1]),o[2]);var s=o[3];null!=s&&(i=J_(parseFloat(s),o[4]));var u=o[5];u&&(a=u)}else r=e;if(!n){var c=!1,l=t.length;r<0&&(t.push("Duration values below 0 are not allowed for this animation step."),c=!0),i<0&&(t.push("Delay values below 0 are not allowed for this animation step."),c=!0),c&&t.splice(l,0,'The provided timing value "'.concat(e,'" is invalid.'))}return{duration:r,delay:i,easing:a}}(e,t,n)}function X_(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object.keys(e).forEach(function(n){t[n]=e[n]}),t}function ex(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(t)for(var r in e)n[r]=e[r];else X_(e,n);return n}function tx(e,t,n){return n?t+":"+n+";":""}function nx(e){for(var t="",n=0;n<e.style.length;n++){var r=e.style.item(n);t+=tx(0,r,e.style.getPropertyValue(r))}for(var i in e.style)e.style.hasOwnProperty(i)&&!i.startsWith("_")&&(t+=tx(0,fx(i),e.style[i]));e.setAttribute("style",t)}function rx(e,t,n){e.style&&(Object.keys(t).forEach(function(r){var i=hx(r);n&&!n.hasOwnProperty(r)&&(n[r]=e.style[i]),e.style[i]=t[r]}),x_()&&nx(e))}function ix(e,t){e.style&&(Object.keys(t).forEach(function(t){var n=hx(t);e.style[n]=""}),x_()&&nx(e))}function ax(e){return Array.isArray(e)?1==e.length?e[0]:qb(e):e}var ox=new RegExp("{{\\s*(.+?)\\s*}}","g");function sx(e){var t=[];if("string"==typeof e){for(var n;n=ox.exec(e);)t.push(n[1]);ox.lastIndex=0}return t}function ux(e,t,n){var r=e.toString(),i=r.replace(ox,function(e,r){var i=t[r];return t.hasOwnProperty(r)||(n.push("Please provide a value for the animation param ".concat(r)),i=""),i.toString()});return i==r?e:i}function cx(e){for(var t=[],n=e.next();!n.done;)t.push(n.value),n=e.next();return t}var lx=/-+([a-z0-9])/g;function hx(e){return e.replace(lx,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t[1].toUpperCase()})}function fx(e){return e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function dx(e,t){return 0===e||0===t}function vx(e,t,n){var r=Object.keys(n);if(r.length&&t.length){var i=t[0],a=[];if(r.forEach(function(e){i.hasOwnProperty(e)||a.push(e),i[e]=n[e]}),a.length)for(var o=function(){var n=t[s];a.forEach(function(t){n[t]=mx(e,t)})},s=1;s<t.length;s++)o()}return t}function px(e,t,n){switch(t.type){case 7:return e.visitTrigger(t,n);case 0:return e.visitState(t,n);case 1:return e.visitTransition(t,n);case 2:return e.visitSequence(t,n);case 3:return e.visitGroup(t,n);case 4:return e.visitAnimate(t,n);case 5:return e.visitKeyframes(t,n);case 6:return e.visitStyle(t,n);case 8:return e.visitReference(t,n);case 9:return e.visitAnimateChild(t,n);case 10:return e.visitAnimateRef(t,n);case 11:return e.visitQuery(t,n);case 12:return e.visitStagger(t,n);default:throw new Error("Unable to resolve animation metadata node #".concat(t.type))}}function mx(e,t){return window.getComputedStyle(e)[t]}function gx(e,t){var n=[];return"string"==typeof e?e.split(/\s*,\s*/).forEach(function(e){return function(e,t,n){if(":"==e[0]){var r=function(e,t){switch(e){case":enter":return"void => *";case":leave":return"* => void";case":increment":return function(e,t){return parseFloat(t)>parseFloat(e)};case":decrement":return function(e,t){return parseFloat(t)<parseFloat(e)};default:return t.push('The transition alias value "'.concat(e,'" is not supported')),"* => *"}}(e,n);if("function"==typeof r)return void t.push(r);e=r}var i=e.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==i||i.length<4)return n.push('The provided transition expression "'.concat(e,'" is not supported')),t;var a=i[1],o=i[2],s=i[3];t.push(wx(a,s)),"<"==o[0]&&("*"!=a||"*"!=s)&&t.push(wx(s,a))}(e,n,t)}):n.push(e),n}var yx=new Set(["true","1"]),kx=new Set(["false","0"]);function wx(e,t){var n=yx.has(e)||kx.has(e),r=yx.has(t)||kx.has(t);return function(i,a){var o="*"==e||e==i,s="*"==t||t==a;return!o&&n&&"boolean"==typeof i&&(o=i?yx.has(e):kx.has(e)),!s&&r&&"boolean"==typeof a&&(s=a?yx.has(t):kx.has(t)),o&&s}}var bx=new RegExp("s*:selfs*,?","g");function _x(e,t,n){return new xx(e).build(t,n)}var xx=function(){function e(t){f(this,e),this._driver=t}return h(e,[{key:"build",value:function(e,t){var n=new Tx(t);return this._resetContextStyleTimingState(n),px(this,ax(e),n)}},{key:"_resetContextStyleTimingState",value:function(e){e.currentQuerySelector="",e.collectedStyles={},e.collectedStyles[""]={},e.currentTime=0}},{key:"visitTrigger",value:function(e,t){var n=this,r=t.queryCount=0,i=t.depCount=0,a=[],o=[];return"@"==e.name.charAt(0)&&t.errors.push("animation triggers cannot be prefixed with an `@` sign (e.g. trigger('@foo', [...]))"),e.definitions.forEach(function(e){if(n._resetContextStyleTimingState(t),0==e.type){var s=e,u=s.name;u.toString().split(/\s*,\s*/).forEach(function(e){s.name=e,a.push(n.visitState(s,t))}),s.name=u}else if(1==e.type){var c=n.visitTransition(e,t);r+=c.queryCount,i+=c.depCount,o.push(c)}else t.errors.push("only state() and transition() definitions can sit inside of a trigger()")}),{type:7,name:e.name,states:a,transitions:o,queryCount:r,depCount:i,options:null}}},{key:"visitState",value:function(e,t){var n=this.visitStyle(e.styles,t),r=e.options&&e.options.params||null;if(n.containsDynamicStyles){var i=new Set,a=r||{};if(n.styles.forEach(function(e){if(Ix(e)){var t=e;Object.keys(t).forEach(function(e){sx(t[e]).forEach(function(e){a.hasOwnProperty(e)||i.add(e)})})}}),i.size){var o=cx(i.values());t.errors.push('state("'.concat(e.name,'", ...) must define default values for all the following style substitutions: ').concat(o.join(", ")))}}return{type:0,name:e.name,style:n,options:r?{params:r}:null}}},{key:"visitTransition",value:function(e,t){t.queryCount=0,t.depCount=0;var n=px(this,ax(e.animation),t);return{type:1,matchers:gx(e.expr,t.errors),animation:n,queryCount:t.queryCount,depCount:t.depCount,options:Sx(e.options)}}},{key:"visitSequence",value:function(e,t){var n=this;return{type:2,steps:e.steps.map(function(e){return px(n,e,t)}),options:Sx(e.options)}}},{key:"visitGroup",value:function(e,t){var n=this,r=t.currentTime,i=0,a=e.steps.map(function(e){t.currentTime=r;var a=px(n,e,t);return i=Math.max(i,t.currentTime),a});return t.currentTime=i,{type:3,steps:a,options:Sx(e.options)}}},{key:"visitAnimate",value:function(e,t){var n=function(e,t){var n=null;if(e.hasOwnProperty("duration"))n=e;else if("number"==typeof e)return Ex($_(e,t).duration,0,"");var r=e;if(r.split(/\s+/).some(function(e){return"{"==e.charAt(0)&&"{"==e.charAt(1)})){var i=Ex(0,0,"");return i.dynamic=!0,i.strValue=r,i}return Ex((n=n||$_(r,t)).duration,n.delay,n.easing)}(e.timings,t.errors);t.currentAnimateTimings=n;var r,i=e.styles?e.styles:Bb({});if(5==i.type)r=this.visitKeyframes(i,t);else{var a=e.styles,o=!1;if(!a){o=!0;var s={};n.easing&&(s.easing=n.easing),a=Bb(s)}t.currentTime+=n.duration+n.delay;var u=this.visitStyle(a,t);u.isEmptyStep=o,r=u}return t.currentAnimateTimings=null,{type:4,timings:n,style:r,options:null}}},{key:"visitStyle",value:function(e,t){var n=this._makeStyleAst(e,t);return this._validateStyleAst(n,t),n}},{key:"_makeStyleAst",value:function(e,t){var n=[];Array.isArray(e.styles)?e.styles.forEach(function(e){"string"==typeof e?e==Ub?n.push(e):t.errors.push("The provided style string value ".concat(e," is not allowed.")):n.push(e)}):n.push(e.styles);var r=!1,i=null;return n.forEach(function(e){if(Ix(e)){var t=e,n=t.easing;if(n&&(i=n,delete t.easing),!r)for(var a in t)if(t[a].toString().indexOf("{{")>=0){r=!0;break}}}),{type:6,styles:n,easing:i,offset:e.offset,containsDynamicStyles:r,options:null}}},{key:"_validateStyleAst",value:function(e,t){var n=this,r=t.currentAnimateTimings,i=t.currentTime,a=t.currentTime;r&&a>0&&(a-=r.duration+r.delay),e.styles.forEach(function(e){"string"!=typeof e&&Object.keys(e).forEach(function(r){if(n._driver.validateStyleProperty(r)){var o=t.collectedStyles[t.currentQuerySelector],s=o[r],u=!0;s&&(a!=i&&a>=s.startTime&&i<=s.endTime&&(t.errors.push('The CSS property "'.concat(r,'" that exists between the times of "').concat(s.startTime,'ms" and "').concat(s.endTime,'ms" is also being animated in a parallel animation between the times of "').concat(a,'ms" and "').concat(i,'ms"')),u=!1),a=s.startTime),u&&(o[r]={startTime:a,endTime:i}),t.options&&function(e,t,n){var r=t.params||{},i=sx(e);i.length&&i.forEach(function(e){r.hasOwnProperty(e)||n.push("Unable to resolve the local animation param ".concat(e," in the given list of values"))})}(e[r],t.options,t.errors)}else t.errors.push('The provided animation property "'.concat(r,'" is not a supported CSS property for animations'))})})}},{key:"visitKeyframes",value:function(e,t){var n=this,r={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push("keyframes() must be placed inside of a call to animate()"),r;var i=0,a=[],o=!1,s=!1,u=0,c=e.steps.map(function(e){var r=n._makeStyleAst(e,t),c=null!=r.offset?r.offset:function(e){if("string"==typeof e)return null;var t=null;if(Array.isArray(e))e.forEach(function(e){if(Ix(e)&&e.hasOwnProperty("offset")){var n=e;t=parseFloat(n.offset),delete n.offset}});else if(Ix(e)&&e.hasOwnProperty("offset")){var n=e;t=parseFloat(n.offset),delete n.offset}return t}(r.styles),l=0;return null!=c&&(i++,l=r.offset=c),s=s||l<0||l>1,o=o||l<u,u=l,a.push(l),r});s&&t.errors.push("Please ensure that all keyframe offsets are between 0 and 1"),o&&t.errors.push("Please ensure that all keyframe offsets are in order");var l=e.steps.length,h=0;i>0&&i<l?t.errors.push("Not all style() steps within the declared keyframes() contain offsets"):0==i&&(h=1/(l-1));var f=l-1,d=t.currentTime,v=t.currentAnimateTimings,p=v.duration;return c.forEach(function(e,i){var o=h>0?i==f?1:h*i:a[i],s=o*p;t.currentTime=d+v.delay+s,v.duration=s,n._validateStyleAst(e,t),e.offset=o,r.styles.push(e)}),r}},{key:"visitReference",value:function(e,t){return{type:8,animation:px(this,ax(e.animation),t),options:Sx(e.options)}}},{key:"visitAnimateChild",value:function(e,t){return t.depCount++,{type:9,options:Sx(e.options)}}},{key:"visitAnimateRef",value:function(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:Sx(e.options)}}},{key:"visitQuery",value:function(e,n){var r=n.currentQuerySelector,i=e.options||{};n.queryCount++,n.currentQuery=e;var a=t(function(e){var t=!!e.split(/\s*,\s*/).find(function(e){return":self"==e});return t&&(e=e.replace(bx,"")),[e=e.replace(/@\*/g,K_).replace(/@\w+/g,function(e){return K_+"-"+e.substr(1)}).replace(/:animating/g,Q_),t]}(e.selector),2),o=a[0],s=a[1];n.currentQuerySelector=r.length?r+" "+o:o,C_(n.collectedStyles,n.currentQuerySelector,{});var u=px(this,ax(e.animation),n);return n.currentQuery=null,n.currentQuerySelector=r,{type:11,selector:o,limit:i.limit||0,optional:!!i.optional,includeSelf:s,animation:u,originalSelector:e.selector,options:Sx(e.options)}}},{key:"visitStagger",value:function(e,t){t.currentQuery||t.errors.push("stagger() can only be used inside of query()");var n="full"===e.timings?{duration:0,delay:0,easing:"full"}:$_(e.timings,t.errors,!0);return{type:12,animation:px(this,ax(e.animation),t),timings:n,options:null}}}]),e}(),Tx=function e(t){f(this,e),this.errors=t,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null};function Ix(e){return!Array.isArray(e)&&"object"==typeof e}function Sx(e){return e?(e=X_(e)).params&&(e.params=function(e){return e?X_(e):null}(e.params)):e={},e}function Ex(e,t,n){return{duration:e,delay:t,easing:n}}function Rx(e,t,n,r,i,a){var o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,s=arguments.length>7&&void 0!==arguments[7]&&arguments[7];return{type:1,element:e,keyframes:t,preStyleProps:n,postStyleProps:r,duration:i,delay:a,totalTime:i+a,easing:o,subTimeline:s}}var Cx=function(){function e(){f(this,e),this._map=new Map}return h(e,[{key:"consume",value:function(e){var t=this._map.get(e);return t?this._map.delete(e):t=[],t}},{key:"append",value:function(e,t){var n,r=this._map.get(e);r||this._map.set(e,r=[]),(n=r).push.apply(n,a(t))}},{key:"has",value:function(e){return this._map.has(e)}},{key:"clear",value:function(){this._map.clear()}}]),e}(),Ax=new RegExp(":enter","g"),Nx=new RegExp(":leave","g");function Ox(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:{},s=arguments.length>7?arguments[7]:void 0,u=arguments.length>8?arguments[8]:void 0,c=arguments.length>9&&void 0!==arguments[9]?arguments[9]:[];return(new Dx).buildKeyframes(e,t,n,r,i,a,o,s,u,c)}var Dx=function(){function e(){f(this,e)}return h(e,[{key:"buildKeyframes",value:function(e,t,n,r,i,a,o,s,u){var c=arguments.length>9&&void 0!==arguments[9]?arguments[9]:[];u=u||new Cx;var l=new Lx(e,t,u,r,i,c,[]);l.options=s,l.currentTimeline.setStyles([a],null,l.errors,s),px(this,n,l);var h=l.timelines.filter(function(e){return e.containsAnimation()});if(h.length&&Object.keys(o).length){var f=h[h.length-1];f.allowOnlyTimelineStyles()||f.setStyles([o],null,l.errors,s)}return h.length?h.map(function(e){return e.buildKeyframes()}):[Rx(t,[],[],[],0,0,"",!1)]}},{key:"visitTrigger",value:function(e,t){}},{key:"visitState",value:function(e,t){}},{key:"visitTransition",value:function(e,t){}},{key:"visitAnimateChild",value:function(e,t){var n=t.subInstructions.consume(t.element);if(n){var r=t.createSubContext(e.options),i=t.currentTimeline.currentTime,a=this._visitSubInstructions(n,r,r.options);i!=a&&t.transformIntoNewTimeline(a)}t.previousNode=e}},{key:"visitAnimateRef",value:function(e,t){var n=t.createSubContext(e.options);n.transformIntoNewTimeline(),this.visitReference(e.animation,n),t.transformIntoNewTimeline(n.currentTimeline.currentTime),t.previousNode=e}},{key:"_visitSubInstructions",value:function(e,t,n){var r=t.currentTimeline.currentTime,i=null!=n.duration?Y_(n.duration):null,a=null!=n.delay?Y_(n.delay):null;return 0!==i&&e.forEach(function(e){var n=t.appendInstructionToTimeline(e,i,a);r=Math.max(r,n.duration+n.delay)}),r}},{key:"visitReference",value:function(e,t){t.updateOptions(e.options,!0),px(this,e.animation,t),t.previousNode=e}},{key:"visitSequence",value:function(e,t){var n=this,r=t.subContextCount,i=t,a=e.options;if(a&&(a.params||a.delay)&&((i=t.createSubContext(a)).transformIntoNewTimeline(),null!=a.delay)){6==i.previousNode.type&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=Px);var o=Y_(a.delay);i.delayNextStep(o)}e.steps.length&&(e.steps.forEach(function(e){return px(n,e,i)}),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>r&&i.transformIntoNewTimeline()),t.previousNode=e}},{key:"visitGroup",value:function(e,t){var n=this,r=[],i=t.currentTimeline.currentTime,a=e.options&&e.options.delay?Y_(e.options.delay):0;e.steps.forEach(function(o){var s=t.createSubContext(e.options);a&&s.delayNextStep(a),px(n,o,s),i=Math.max(i,s.currentTimeline.currentTime),r.push(s.currentTimeline)}),r.forEach(function(e){return t.currentTimeline.mergeTimelineCollectedStyles(e)}),t.transformIntoNewTimeline(i),t.previousNode=e}},{key:"_visitTiming",value:function(e,t){if(e.dynamic){var n=e.strValue;return $_(t.params?ux(n,t.params,t.errors):n,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}},{key:"visitAnimate",value:function(e,t){var n=t.currentAnimateTimings=this._visitTiming(e.timings,t),r=t.currentTimeline;n.delay&&(t.incrementTime(n.delay),r.snapshotCurrentStyles());var i=e.style;5==i.type?this.visitKeyframes(i,t):(t.incrementTime(n.duration),this.visitStyle(i,t),r.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}},{key:"visitStyle",value:function(e,t){var n=t.currentTimeline,r=t.currentAnimateTimings;!r&&n.getCurrentStyleProperties().length&&n.forwardFrame();var i=r&&r.easing||e.easing;e.isEmptyStep?n.applyEmptyStep(i):n.setStyles(e.styles,i,t.errors,t.options),t.previousNode=e}},{key:"visitKeyframes",value:function(e,t){var n=t.currentAnimateTimings,r=t.currentTimeline.duration,i=n.duration,a=t.createSubContext().currentTimeline;a.easing=n.easing,e.styles.forEach(function(e){a.forwardTime((e.offset||0)*i),a.setStyles(e.styles,e.easing,t.errors,t.options),a.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(a),t.transformIntoNewTimeline(r+i),t.previousNode=e}},{key:"visitQuery",value:function(e,t){var n=this,r=t.currentTimeline.currentTime,i=e.options||{},a=i.delay?Y_(i.delay):0;a&&(6===t.previousNode.type||0==r&&t.currentTimeline.getCurrentStyleProperties().length)&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=Px);var o=r,s=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!i.optional,t.errors);t.currentQueryTotal=s.length;var u=null;s.forEach(function(r,i){t.currentQueryIndex=i;var s=t.createSubContext(e.options,r);a&&s.delayNextStep(a),r===t.element&&(u=s.currentTimeline),px(n,e.animation,s),s.currentTimeline.applyStylesToKeyframe(),o=Math.max(o,s.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(o),u&&(t.currentTimeline.mergeTimelineCollectedStyles(u),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}},{key:"visitStagger",value:function(e,t){var n=t.parentContext,r=t.currentTimeline,i=e.timings,a=Math.abs(i.duration),o=a*(t.currentQueryTotal-1),s=a*t.currentQueryIndex;switch(i.duration<0?"reverse":i.easing){case"reverse":s=o-s;break;case"full":s=n.currentStaggerTime}var u=t.currentTimeline;s&&u.delayNextStep(s);var c=u.currentTime;px(this,e.animation,t),t.previousNode=e,n.currentStaggerTime=r.currentTime-c+(r.startTime-n.currentTimeline.startTime)}}]),e}(),Px={},Lx=function(){function e(t,n,r,i,a,o,s,u){f(this,e),this._driver=t,this.element=n,this.subInstructions=r,this._enterClassName=i,this._leaveClassName=a,this.errors=o,this.timelines=s,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=Px,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=u||new Fx(this._driver,n,0),s.push(this.currentTimeline)}return h(e,[{key:"params",get:function(){return this.options.params}},{key:"updateOptions",value:function(e,t){var n=this;if(e){var r=e,i=this.options;null!=r.duration&&(i.duration=Y_(r.duration)),null!=r.delay&&(i.delay=Y_(r.delay));var a=r.params;if(a){var o=i.params;o||(o=this.options.params={}),Object.keys(a).forEach(function(e){(!t||!o.hasOwnProperty(e))&&(o[e]=ux(a[e],o,n.errors))})}}}},{key:"_copyOptions",value:function(){var e={};if(this.options){var t=this.options.params;if(t){var n=e.params={};Object.keys(t).forEach(function(e){n[e]=t[e]})}}return e}},{key:"createSubContext",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0,i=n||this.element,a=new e(this._driver,i,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(i,r||0));return a.previousNode=this.previousNode,a.currentAnimateTimings=this.currentAnimateTimings,a.options=this._copyOptions(),a.updateOptions(t),a.currentQueryIndex=this.currentQueryIndex,a.currentQueryTotal=this.currentQueryTotal,a.parentContext=this,this.subContextCount++,a}},{key:"transformIntoNewTimeline",value:function(e){return this.previousNode=Px,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}},{key:"appendInstructionToTimeline",value:function(e,t,n){var r={duration:null!=t?t:e.duration,delay:this.currentTimeline.currentTime+(null!=n?n:0)+e.delay,easing:""},i=new Mx(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,r,e.stretchStartingKeyframe);return this.timelines.push(i),r}},{key:"incrementTime",value:function(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}},{key:"delayNextStep",value:function(e){e>0&&this.currentTimeline.delayNextStep(e)}},{key:"invokeQuery",value:function(e,t,n,r,i,o){var s=[];if(r&&s.push(this.element),e.length>0){e=(e=e.replace(Ax,"."+this._enterClassName)).replace(Nx,"."+this._leaveClassName);var u=this._driver.query(this.element,e,1!=n);0!==n&&(u=n<0?u.slice(u.length+n,u.length):u.slice(0,n)),s.push.apply(s,a(u))}return!i&&0==s.length&&o.push('`query("'.concat(t,'")` returned zero elements. (Use `query("').concat(t,'", { optional: true })` if you wish to allow this.)')),s}}]),e}(),Fx=function(){function e(t,n,r,i){f(this,e),this._driver=t,this.element=n,this.startTime=r,this._elementTimelineStylesLookup=i,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(n),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(n,this._localTimelineStyles)),this._loadKeyframe()}return h(e,[{key:"containsAnimation",value:function(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}},{key:"getCurrentStyleProperties",value:function(){return Object.keys(this._currentKeyframe)}},{key:"currentTime",get:function(){return this.startTime+this.duration}},{key:"delayNextStep",value:function(e){var t=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}},{key:"fork",value:function(t,n){return this.applyStylesToKeyframe(),new e(this._driver,t,n||this.currentTime,this._elementTimelineStylesLookup)}},{key:"_loadKeyframe",value:function(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}},{key:"forwardFrame",value:function(){this.duration+=1,this._loadKeyframe()}},{key:"forwardTime",value:function(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}},{key:"_updateStyle",value:function(e,t){this._localTimelineStyles[e]=t,this._globalTimelineStyles[e]=t,this._styleSummary[e]={time:this.currentTime,value:t}}},{key:"allowOnlyTimelineStyles",value:function(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}},{key:"applyEmptyStep",value:function(e){var t=this;e&&(this._previousKeyframe.easing=e),Object.keys(this._globalTimelineStyles).forEach(function(e){t._backFill[e]=t._globalTimelineStyles[e]||Ub,t._currentKeyframe[e]=Ub}),this._currentEmptyStepKeyframe=this._currentKeyframe}},{key:"setStyles",value:function(e,t,n,r){var i=this;t&&(this._previousKeyframe.easing=t);var a=r&&r.params||{},o=function(e,t){var n,r={};return e.forEach(function(e){"*"===e?(n=n||Object.keys(t)).forEach(function(e){r[e]=Ub}):ex(e,!1,r)}),r}(e,this._globalTimelineStyles);Object.keys(o).forEach(function(e){var t=ux(o[e],a,n);i._pendingStyles[e]=t,i._localTimelineStyles.hasOwnProperty(e)||(i._backFill[e]=i._globalTimelineStyles.hasOwnProperty(e)?i._globalTimelineStyles[e]:Ub),i._updateStyle(e,t)})}},{key:"applyStylesToKeyframe",value:function(){var e=this,t=this._pendingStyles,n=Object.keys(t);0!=n.length&&(this._pendingStyles={},n.forEach(function(n){e._currentKeyframe[n]=t[n]}),Object.keys(this._localTimelineStyles).forEach(function(t){e._currentKeyframe.hasOwnProperty(t)||(e._currentKeyframe[t]=e._localTimelineStyles[t])}))}},{key:"snapshotCurrentStyles",value:function(){var e=this;Object.keys(this._localTimelineStyles).forEach(function(t){var n=e._localTimelineStyles[t];e._pendingStyles[t]=n,e._updateStyle(t,n)})}},{key:"getFinalKeyframe",value:function(){return this._keyframes.get(this.duration)}},{key:"properties",get:function(){var e=[];for(var t in this._currentKeyframe)e.push(t);return e}},{key:"mergeTimelineCollectedStyles",value:function(e){var t=this;Object.keys(e._styleSummary).forEach(function(n){var r=t._styleSummary[n],i=e._styleSummary[n];(!r||i.time>r.time)&&t._updateStyle(n,i.value)})}},{key:"buildKeyframes",value:function(){var e=this;this.applyStylesToKeyframe();var t=new Set,n=new Set,r=1===this._keyframes.size&&0===this.duration,i=[];this._keyframes.forEach(function(a,o){var s=ex(a,!0);Object.keys(s).forEach(function(e){var r=s[e];"!"==r?t.add(e):r==Ub&&n.add(e)}),r||(s.offset=o/e.duration),i.push(s)});var a=t.size?cx(t.values()):[],o=n.size?cx(n.values()):[];if(r){var s=i[0],u=X_(s);s.offset=0,u.offset=1,i=[s,u]}return Rx(this.element,i,a,o,this.duration,this.startTime,this.easing,!1)}}]),e}(),Mx=function(e){d(n,e);var t=v(n);function n(e,r,i,a,o,s){var u,c=arguments.length>6&&void 0!==arguments[6]&&arguments[6];return f(this,n),(u=t.call(this,e,r,s.delay)).keyframes=i,u.preStyleProps=a,u.postStyleProps=o,u._stretchStartingKeyframe=c,u.timings={duration:s.duration,delay:s.delay,easing:s.easing},u}return h(n,[{key:"containsAnimation",value:function(){return this.keyframes.length>1}},{key:"buildKeyframes",value:function(){var e=this.keyframes,t=this.timings,n=t.delay,r=t.duration,i=t.easing;if(this._stretchStartingKeyframe&&n){var a=[],o=r+n,s=n/o,u=ex(e[0],!1);u.offset=0,a.push(u);var c=ex(e[0],!1);c.offset=Ux(s),a.push(c);for(var l=e.length-1,h=1;h<=l;h++){var f=ex(e[h],!1);f.offset=Ux((n+f.offset*r)/o),a.push(f)}r=o,n=0,i="",e=a}return Rx(this.element,e,this.preStyleProps,this.postStyleProps,r,n,i,!0)}}]),n}(Fx);function Ux(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,n=Math.pow(10,t-1);return Math.round(e*n)/n}var jx=function e(){f(this,e)},Vx=function(e){d(n,e);var t=v(n);function n(){return f(this,n),t.apply(this,arguments)}return h(n,[{key:"normalizePropertyName",value:function(e,t){return hx(e)}},{key:"normalizeStyleValue",value:function(e,t,n,r){var i="",a=n.toString().trim();if(qx[t]&&0!==n&&"0"!==n)if("number"==typeof n)i="px";else{var o=n.match(/^[+-]?[\d\.]+([a-z]*)$/);o&&0==o[1].length&&r.push("Please provide a CSS unit value for ".concat(e,":").concat(n))}return a+i}}]),n}(jx),qx=function(e){var t={};return e.forEach(function(e){return t[e]=!0}),t}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(","));function Bx(e,t,n,r,i,a,o,s,u,c,l,h,f){return{type:0,element:e,triggerName:t,isRemovalTransition:i,fromState:n,fromStyles:a,toState:r,toStyles:o,timelines:s,queriedElements:u,preStyleProps:c,postStyleProps:l,totalTime:h,errors:f}}var zx={},Zx=function(){function e(t,n,r){f(this,e),this._triggerName=t,this.ast=n,this._stateStyles=r}return h(e,[{key:"match",value:function(e,t,n,r){return function(e,t,n,r,i){return e.some(function(e){return e(t,n,r,i)})}(this.ast.matchers,e,t,n,r)}},{key:"buildStyles",value:function(e,t,n){var r=this._stateStyles["*"],i=this._stateStyles[e],a=r?r.buildStyles(t,n):{};return i?i.buildStyles(t,n):a}},{key:"build",value:function(e,t,n,r,i,a,o,s,u,c){var l=[],h=this.ast.options&&this.ast.options.params||zx,f=this.buildStyles(n,o&&o.params||zx,l),d=s&&s.params||zx,v=this.buildStyles(r,d,l),p=new Set,m=new Map,g=new Map,y="void"===r,k={params:Object.assign(Object.assign({},h),d)},w=c?[]:Ox(e,t,this.ast.animation,i,a,f,v,k,u,l),b=0;if(w.forEach(function(e){b=Math.max(e.duration+e.delay,b)}),l.length)return Bx(t,this._triggerName,n,r,y,f,v,[],[],m,g,b,l);w.forEach(function(e){var n=e.element,r=C_(m,n,{});e.preStyleProps.forEach(function(e){return r[e]=!0});var i=C_(g,n,{});e.postStyleProps.forEach(function(e){return i[e]=!0}),n!==t&&p.add(n)});var _=cx(p.values());return Bx(t,this._triggerName,n,r,y,f,v,w,_,m,g,b)}}]),e}(),Hx=function(){function e(t,n,r){f(this,e),this.styles=t,this.defaultParams=n,this.normalizer=r}return h(e,[{key:"buildStyles",value:function(e,t){var n=this,r={},i=X_(this.defaultParams);return Object.keys(e).forEach(function(t){var n=e[t];null!=n&&(i[t]=n)}),this.styles.styles.forEach(function(e){if("string"!=typeof e){var a=e;Object.keys(a).forEach(function(e){var o=a[e];o.length>1&&(o=ux(o,i,t));var s=n.normalizer.normalizePropertyName(e,t);o=n.normalizer.normalizeStyleValue(e,s,o,t),r[s]=o})}}),r}}]),e}(),Gx=function(){function e(t,n,r){var i=this;f(this,e),this.name=t,this.ast=n,this._normalizer=r,this.transitionFactories=[],this.states={},n.states.forEach(function(e){i.states[e.name]=new Hx(e.style,e.options&&e.options.params||{},r)}),Kx(this.states,"true","1"),Kx(this.states,"false","0"),n.transitions.forEach(function(e){i.transitionFactories.push(new Zx(t,e,i.states))}),this.fallbackTransition=function(e,t,n){return new Zx(e,{type:1,animation:{type:2,steps:[],options:null},matchers:[function(e,t){return!0}],options:null,queryCount:0,depCount:0},t)}(t,this.states)}return h(e,[{key:"containsQueries",get:function(){return this.ast.queryCount>0}},{key:"matchTransition",value:function(e,t,n,r){return this.transitionFactories.find(function(i){return i.match(e,t,n,r)})||null}},{key:"matchStyles",value:function(e,t,n){return this.fallbackTransition.buildStyles(e,t,n)}}]),e}();function Kx(e,t,n){e.hasOwnProperty(t)?e.hasOwnProperty(n)||(e[n]=e[t]):e.hasOwnProperty(n)&&(e[t]=e[n])}var Wx=new Cx,Qx=function(){function e(t,n,r){f(this,e),this.bodyNode=t,this._driver=n,this._normalizer=r,this._animations={},this._playersById={},this.players=[]}return h(e,[{key:"register",value:function(e,t){var n=[],r=_x(this._driver,t,n);if(n.length)throw new Error("Unable to build the animation due to the following errors: ".concat(n.join("\n")));this._animations[e]=r}},{key:"_buildPlayer",value:function(e,t,n){var r=e.element,i=I_(0,this._normalizer,0,e.keyframes,t,n);return this._driver.animate(r,i,e.duration,e.delay,e.easing,[],!0)}},{key:"create",value:function(e,t){var n,r=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=[],o=this._animations[e],s=new Map;if(o?(n=Ox(this._driver,t,o,Z_,H_,{},{},i,Wx,a)).forEach(function(e){var t=C_(s,e.element,{});e.postStyleProps.forEach(function(e){return t[e]=null})}):(a.push("The requested animation doesn't exist or has already been destroyed"),n=[]),a.length)throw new Error("Unable to create the animation due to the following errors: ".concat(a.join("\n")));s.forEach(function(e,t){Object.keys(e).forEach(function(n){e[n]=r._driver.computeStyle(t,n,Ub)})});var u=T_(n.map(function(e){var t=s.get(e.element);return r._buildPlayer(e,{},t)}));return this._playersById[e]=u,u.onDestroy(function(){return r.destroy(e)}),this.players.push(u),u}},{key:"destroy",value:function(e){var t=this._getPlayer(e);t.destroy(),delete this._playersById[e];var n=this.players.indexOf(t);n>=0&&this.players.splice(n,1)}},{key:"_getPlayer",value:function(e){var t=this._playersById[e];if(!t)throw new Error("Unable to find the timeline player referenced by ".concat(e));return t}},{key:"listen",value:function(e,t,n,r){var i=R_(t,"","","");return S_(this._getPlayer(e),n,i,r),function(){}}},{key:"command",value:function(e,t,n,r){if("register"!=n)if("create"!=n){var i=this._getPlayer(e);switch(n){case"play":i.play();break;case"pause":i.pause();break;case"reset":i.reset();break;case"restart":i.restart();break;case"finish":i.finish();break;case"init":i.init();break;case"setPosition":i.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(e)}}else this.create(e,t,r[0]||{});else this.register(e,r[0])}}]),e}(),Yx="ng-animate-queued",Jx="ng-animate-disabled",$x=".ng-animate-disabled",Xx=[],eT={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},tT={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},nT="__ng_removed",rT=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";f(this,e),this.namespaceId=n;var r=t&&t.hasOwnProperty("value");if(this.value=function(e){return null!=e?e:null}(r?t.value:t),r){var i=X_(t);delete i.value,this.options=i}else this.options={};this.options.params||(this.options.params={})}return h(e,[{key:"params",get:function(){return this.options.params}},{key:"absorbOptions",value:function(e){var t=e.params;if(t){var n=this.options.params;Object.keys(t).forEach(function(e){null==n[e]&&(n[e]=t[e])})}}}]),e}(),iT="void",aT=new rT(iT),oT=function(){function e(t,n,r){f(this,e),this.id=t,this.hostElement=n,this._engine=r,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+t,vT(n,this._hostClassName)}return h(e,[{key:"listen",value:function(e,t,n,r){var i=this;if(!this._triggers.hasOwnProperty(t))throw new Error('Unable to listen on the animation trigger event "'.concat(n,'" because the animation trigger "').concat(t,"\" doesn't exist!"));if(null==n||0==n.length)throw new Error('Unable to listen on the animation trigger "'.concat(t,'" because the provided event is undefined!'));if(!function(e){return"start"==e||"done"==e}(n))throw new Error('The provided animation trigger event "'.concat(n,'" for the animation trigger "').concat(t,'" is not supported!'));var a=C_(this._elementListeners,e,[]),o={name:t,phase:n,callback:r};a.push(o);var s=C_(this._engine.statesByElement,e,{});return s.hasOwnProperty(t)||(vT(e,G_),vT(e,G_+"-"+t),s[t]=aT),function(){i._engine.afterFlush(function(){var e=a.indexOf(o);e>=0&&a.splice(e,1),i._triggers[t]||delete s[t]})}}},{key:"register",value:function(e,t){return!this._triggers[e]&&(this._triggers[e]=t,!0)}},{key:"_getTrigger",value:function(e){var t=this._triggers[e];if(!t)throw new Error('The provided animation trigger "'.concat(e,'" has not been registered!'));return t}},{key:"trigger",value:function(e,t,n){var r=this,i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a=this._getTrigger(t),o=new uT(this.id,t,e),s=this._engine.statesByElement.get(e);s||(vT(e,G_),vT(e,G_+"-"+t),this._engine.statesByElement.set(e,s={}));var u=s[t],c=new rT(n,this.id);if(!(n&&n.hasOwnProperty("value"))&&u&&c.absorbOptions(u.options),s[t]=c,u||(u=aT),c.value===iT||u.value!==c.value){var l=C_(this._engine.playersByElement,e,[]);l.forEach(function(e){e.namespaceId==r.id&&e.triggerName==t&&e.queued&&e.destroy()});var h=a.matchTransition(u.value,c.value,e,c.params),f=!1;if(!h){if(!i)return;h=a.fallbackTransition,f=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:h,fromState:u,toState:c,player:o,isFallbackTransition:f}),f||(vT(e,Yx),o.onStart(function(){pT(e,Yx)})),o.onDone(function(){var t=r.players.indexOf(o);t>=0&&r.players.splice(t,1);var n=r._engine.playersByElement.get(e);if(n){var i=n.indexOf(o);i>=0&&n.splice(i,1)}}),this.players.push(o),l.push(o),o}if(!function(e,t){var n=Object.keys(e),r=Object.keys(t);if(n.length!=r.length)return!1;for(var i=0;i<n.length;i++){var a=n[i];if(!t.hasOwnProperty(a)||e[a]!==t[a])return!1}return!0}(u.params,c.params)){var d=[],v=a.matchStyles(u.value,u.params,d),p=a.matchStyles(c.value,c.params,d);d.length?this._engine.reportError(d):this._engine.afterFlush(function(){ix(e,v),rx(e,p)})}}},{key:"deregister",value:function(e){var t=this;delete this._triggers[e],this._engine.statesByElement.forEach(function(t,n){delete t[e]}),this._elementListeners.forEach(function(n,r){t._elementListeners.set(r,n.filter(function(t){return t.name!=e}))})}},{key:"clearElementCache",value:function(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);var t=this._engine.playersByElement.get(e);t&&(t.forEach(function(e){return e.destroy()}),this._engine.playersByElement.delete(e))}},{key:"_signalRemovalForInnerTriggers",value:function(e,t){var n=this,r=this._engine.driver.query(e,K_,!0);r.forEach(function(e){if(!e[nT]){var r=n._engine.fetchNamespacesByElement(e);r.size?r.forEach(function(n){return n.triggerLeaveAnimation(e,t,!1,!0)}):n.clearElementCache(e)}}),this._engine.afterFlushAnimationsDone(function(){return r.forEach(function(e){return n.clearElementCache(e)})})}},{key:"triggerLeaveAnimation",value:function(e,t,n,r){var i=this,a=this._engine.statesByElement.get(e);if(a){var o=[];if(Object.keys(a).forEach(function(t){if(i._triggers[t]){var n=i.trigger(e,t,iT,r);n&&o.push(n)}}),o.length)return this._engine.markElementAsRemoved(this.id,e,!0,t),n&&T_(o).onDone(function(){return i._engine.processLeaveNode(e)}),!0}return!1}},{key:"prepareLeaveAnimationListeners",value:function(e){var t=this,n=this._elementListeners.get(e),r=this._engine.statesByElement.get(e);if(n&&r){var i=new Set;n.forEach(function(n){var a=n.name;if(!i.has(a)){i.add(a);var o=t._triggers[a].fallbackTransition,s=r[a]||aT,u=new rT(iT),c=new uT(t.id,a,e);t._engine.totalQueuedPlayers++,t._queue.push({element:e,triggerName:a,transition:o,fromState:s,toState:u,player:c,isFallbackTransition:!0})}})}}},{key:"removeNode",value:function(e,t){var n=this,r=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),!this.triggerLeaveAnimation(e,t,!0)){var i=!1;if(r.totalAnimations){var a=r.players.length?r.playersByQueriedElement.get(e):[];if(a&&a.length)i=!0;else for(var o=e;o=o.parentNode;)if(r.statesByElement.get(o)){i=!0;break}}if(this.prepareLeaveAnimationListeners(e),i)r.markElementAsRemoved(this.id,e,!1,t);else{var s=e[nT];(!s||s===eT)&&(r.afterFlush(function(){return n.clearElementCache(e)}),r.destroyInnerAnimations(e),r._onRemovalComplete(e,t))}}}},{key:"insertNode",value:function(e,t){vT(e,this._hostClassName)}},{key:"drainQueuedTransitions",value:function(e){var t=this,n=[];return this._queue.forEach(function(r){var i=r.player;if(!i.destroyed){var a=r.element,o=t._elementListeners.get(a);o&&o.forEach(function(t){if(t.name==r.triggerName){var n=R_(a,r.triggerName,r.fromState.value,r.toState.value);n._data=e,S_(r.player,t.phase,n,t.callback)}}),i.markedForDestroy?t._engine.afterFlush(function(){i.destroy()}):n.push(r)}}),this._queue=[],n.sort(function(e,n){var r=e.transition.ast.depCount,i=n.transition.ast.depCount;return 0==r||0==i?r-i:t._engine.driver.containsElement(e.element,n.element)?1:-1})}},{key:"destroy",value:function(e){this.players.forEach(function(e){return e.destroy()}),this._signalRemovalForInnerTriggers(this.hostElement,e)}},{key:"elementContainsData",value:function(e){var t=!1;return this._elementListeners.has(e)&&(t=!0),t=!!this._queue.find(function(t){return t.element===e})||t}}]),e}(),sT=function(){function e(t,n,r){f(this,e),this.bodyNode=t,this.driver=n,this._normalizer=r,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=function(e,t){}}return h(e,[{key:"_onRemovalComplete",value:function(e,t){this.onRemovalComplete(e,t)}},{key:"queuedPlayers",get:function(){var e=[];return this._namespaceList.forEach(function(t){t.players.forEach(function(t){t.queued&&e.push(t)})}),e}},{key:"createNamespace",value:function(e,t){var n=new oT(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(n,t):(this.newHostElements.set(t,n),this.collectEnterElement(t)),this._namespaceLookup[e]=n}},{key:"_balanceNamespaceList",value:function(e,t){var n=this._namespaceList.length-1;if(n>=0){for(var r=!1,i=n;i>=0;i--)if(this.driver.containsElement(this._namespaceList[i].hostElement,t)){this._namespaceList.splice(i+1,0,e),r=!0;break}r||this._namespaceList.splice(0,0,e)}else this._namespaceList.push(e);return this.namespacesByHostElement.set(t,e),e}},{key:"register",value:function(e,t){var n=this._namespaceLookup[e];return n||(n=this.createNamespace(e,t)),n}},{key:"registerTrigger",value:function(e,t,n){var r=this._namespaceLookup[e];r&&r.register(t,n)&&this.totalAnimations++}},{key:"destroy",value:function(e,t){var n=this;if(e){var r=this._fetchNamespace(e);this.afterFlush(function(){n.namespacesByHostElement.delete(r.hostElement),delete n._namespaceLookup[e];var t=n._namespaceList.indexOf(r);t>=0&&n._namespaceList.splice(t,1)}),this.afterFlushAnimationsDone(function(){return r.destroy(t)})}}},{key:"_fetchNamespace",value:function(e){return this._namespaceLookup[e]}},{key:"fetchNamespacesByElement",value:function(e){var t=new Set,n=this.statesByElement.get(e);if(n)for(var r=Object.keys(n),i=0;i<r.length;i++){var a=n[r[i]].namespaceId;if(a){var o=this._fetchNamespace(a);o&&t.add(o)}}return t}},{key:"trigger",value:function(e,t,n,r){if(cT(t)){var i=this._fetchNamespace(e);if(i)return i.trigger(t,n,r),!0}return!1}},{key:"insertNode",value:function(e,t,n,r){if(cT(t)){var i=t[nT];if(i&&i.setForRemoval){i.setForRemoval=!1,i.setForMove=!0;var a=this.collectedLeaveElements.indexOf(t);a>=0&&this.collectedLeaveElements.splice(a,1)}if(e){var o=this._fetchNamespace(e);o&&o.insertNode(t,n)}r&&this.collectEnterElement(t)}}},{key:"collectEnterElement",value:function(e){this.collectedEnterElements.push(e)}},{key:"markElementAsDisabled",value:function(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),vT(e,Jx)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),pT(e,Jx))}},{key:"removeNode",value:function(e,t,n,r){if(cT(t)){var i=e?this._fetchNamespace(e):null;if(i?i.removeNode(t,r):this.markElementAsRemoved(e,t,!1,r),n){var a=this.namespacesByHostElement.get(t);a&&a.id!==e&&a.removeNode(t,r)}}else this._onRemovalComplete(t,r)}},{key:"markElementAsRemoved",value:function(e,t,n,r){this.collectedLeaveElements.push(t),t[nT]={namespaceId:e,setForRemoval:r,hasAnimation:n,removedBeforeQueried:!1}}},{key:"listen",value:function(e,t,n,r,i){return cT(t)?this._fetchNamespace(e).listen(t,n,r,i):function(){}}},{key:"_buildInstruction",value:function(e,t,n,r,i){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,n,r,e.fromState.options,e.toState.options,t,i)}},{key:"destroyInnerAnimations",value:function(e){var t=this,n=this.driver.query(e,K_,!0);n.forEach(function(e){return t.destroyActiveAnimationsForElement(e)}),0!=this.playersByQueriedElement.size&&(n=this.driver.query(e,Q_,!0)).forEach(function(e){return t.finishActiveQueriedAnimationOnElement(e)})}},{key:"destroyActiveAnimationsForElement",value:function(e){var t=this.playersByElement.get(e);t&&t.forEach(function(e){e.queued?e.markedForDestroy=!0:e.destroy()})}},{key:"finishActiveQueriedAnimationOnElement",value:function(e){var t=this.playersByQueriedElement.get(e);t&&t.forEach(function(e){return e.finish()})}},{key:"whenRenderingDone",value:function(){var e=this;return new Promise(function(t){if(e.players.length)return T_(e.players).onDone(function(){return t()});t()})}},{key:"processLeaveNode",value:function(e){var t=this,n=e[nT];if(n&&n.setForRemoval){if(e[nT]=eT,n.namespaceId){this.destroyInnerAnimations(e);var r=this._fetchNamespace(n.namespaceId);r&&r.clearElementCache(e)}this._onRemovalComplete(e,n.setForRemoval)}this.driver.matchesElement(e,$x)&&this.markElementAsDisabled(e,!1),this.driver.query(e,$x,!0).forEach(function(e){t.markElementAsDisabled(e,!1)})}},{key:"flush",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,n=[];if(this.newHostElements.size&&(this.newHostElements.forEach(function(t,n){return e._balanceNamespaceList(t,n)}),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(var r=0;r<this.collectedEnterElements.length;r++)vT(this.collectedEnterElements[r],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){var i=[];try{n=this._flushAnimations(i,t)}finally{for(var a=0;a<i.length;a++)i[a]()}}else for(var o=0;o<this.collectedLeaveElements.length;o++)this.processLeaveNode(this.collectedLeaveElements[o]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(function(e){return e()}),this._flushFns=[],this._whenQuietFns.length){var s=this._whenQuietFns;this._whenQuietFns=[],n.length?T_(n).onDone(function(){s.forEach(function(e){return e()})}):s.forEach(function(e){return e()})}}},{key:"reportError",value:function(e){throw new Error("Unable to process animations due to the following failed trigger transitions\n ".concat(e.join("\n")))}},{key:"_flushAnimations",value:function(e,t){var n=this,r=new Cx,i=[],o=new Map,s=[],u=new Map,c=new Map,l=new Map,h=new Set;this.disabledNodes.forEach(function(e){h.add(e);for(var t=n.driver.query(e,".ng-animate-queued",!0),r=0;r<t.length;r++)h.add(t[r])});var f=this.bodyNode,d=Array.from(this.statesByElement.keys()),v=fT(d,this.collectedEnterElements),p=new Map,m=0;v.forEach(function(e,t){var n=Z_+m++;p.set(t,n),e.forEach(function(e){return vT(e,n)})});for(var g=[],y=new Set,k=new Set,w=0;w<this.collectedLeaveElements.length;w++){var b=this.collectedLeaveElements[w],_=b[nT];_&&_.setForRemoval&&(g.push(b),y.add(b),_.hasAnimation?this.driver.query(b,".ng-star-inserted",!0).forEach(function(e){return y.add(e)}):k.add(b))}var x=new Map,T=fT(d,Array.from(y));T.forEach(function(e,t){var n=H_+m++;x.set(t,n),e.forEach(function(e){return vT(e,n)})}),e.push(function(){v.forEach(function(e,t){var n=p.get(t);e.forEach(function(e){return pT(e,n)})}),T.forEach(function(e,t){var n=x.get(t);e.forEach(function(e){return pT(e,n)})}),g.forEach(function(e){n.processLeaveNode(e)})});for(var I=[],S=[],E=this._namespaceList.length-1;E>=0;E--)this._namespaceList[E].drainQueuedTransitions(t).forEach(function(e){var t=e.player,a=e.element;if(I.push(t),n.collectedEnterElements.length){var o=a[nT];if(o&&o.setForMove)return void t.destroy()}var h=!f||!n.driver.containsElement(f,a),d=x.get(a),v=p.get(a),m=n._buildInstruction(e,r,v,d,h);if(m.errors&&m.errors.length)S.push(m);else{if(h)return t.onStart(function(){return ix(a,m.fromStyles)}),t.onDestroy(function(){return rx(a,m.toStyles)}),void i.push(t);if(e.isFallbackTransition)return t.onStart(function(){return ix(a,m.fromStyles)}),t.onDestroy(function(){return rx(a,m.toStyles)}),void i.push(t);m.timelines.forEach(function(e){return e.stretchStartingKeyframe=!0}),r.append(a,m.timelines),s.push({instruction:m,player:t,element:a}),m.queriedElements.forEach(function(e){return C_(u,e,[]).push(t)}),m.preStyleProps.forEach(function(e,t){var n=Object.keys(e);if(n.length){var r=c.get(t);r||c.set(t,r=new Set),n.forEach(function(e){return r.add(e)})}}),m.postStyleProps.forEach(function(e,t){var n=Object.keys(e),r=l.get(t);r||l.set(t,r=new Set),n.forEach(function(e){return r.add(e)})})}});if(S.length){var R=[];S.forEach(function(e){R.push("@".concat(e.triggerName," has failed due to:\n")),e.errors.forEach(function(e){return R.push("- ".concat(e,"\n"))})}),I.forEach(function(e){return e.destroy()}),this.reportError(R)}var C=new Map,A=new Map;s.forEach(function(e){var t=e.element;r.has(t)&&(A.set(t,t),n._beforeAnimationBuild(e.player.namespaceId,e.instruction,C))}),i.forEach(function(e){var t=e.element;n._getPreviousPlayers(t,!1,e.namespaceId,e.triggerName,null).forEach(function(e){C_(C,t,[]).push(e),e.destroy()})});var N=g.filter(function(e){return yT(e,c,l)}),O=new Map;hT(O,this.driver,k,l,Ub).forEach(function(e){yT(e,c,l)&&N.push(e)});var D=new Map;v.forEach(function(e,t){hT(D,n.driver,new Set(e),c,"!")}),N.forEach(function(e){var t=O.get(e),n=D.get(e);O.set(e,Object.assign(Object.assign({},t),n))});var P=[],L=[],F={};s.forEach(function(e){var t=e.element,a=e.player,s=e.instruction;if(r.has(t)){if(h.has(t))return a.onDestroy(function(){return rx(t,s.toStyles)}),a.disabled=!0,a.overrideTotalTime(s.totalTime),void i.push(a);var u=F;if(A.size>1){for(var c=t,l=[];c=c.parentNode;){var f=A.get(c);if(f){u=f;break}l.push(c)}l.forEach(function(e){return A.set(e,u)})}var d=n._buildAnimation(a.namespaceId,s,C,o,D,O);if(a.setRealPlayer(d),u===F)P.push(a);else{var v=n.playersByElement.get(u);v&&v.length&&(a.parentPlayer=T_(v)),i.push(a)}}else ix(t,s.fromStyles),a.onDestroy(function(){return rx(t,s.toStyles)}),L.push(a),h.has(t)&&i.push(a)}),L.forEach(function(e){var t=o.get(e.element);if(t&&t.length){var n=T_(t);e.setRealPlayer(n)}}),i.forEach(function(e){e.parentPlayer?e.syncPlayerEvents(e.parentPlayer):e.destroy()});for(var M=0;M<g.length;M++){var U=g[M],j=U[nT];if(pT(U,H_),!j||!j.hasAnimation){var V=[];if(u.size){var q=u.get(U);q&&q.length&&V.push.apply(V,a(q));for(var B=this.driver.query(U,Q_,!0),z=0;z<B.length;z++){var Z=u.get(B[z]);Z&&Z.length&&V.push.apply(V,a(Z))}}var H=V.filter(function(e){return!e.destroyed});H.length?mT(this,U,H):this.processLeaveNode(U)}}return g.length=0,P.forEach(function(e){n.players.push(e),e.onDone(function(){e.destroy();var t=n.players.indexOf(e);n.players.splice(t,1)}),e.play()}),P}},{key:"elementContainsData",value:function(e,t){var n=!1,r=t[nT];return r&&r.setForRemoval&&(n=!0),this.playersByElement.has(t)&&(n=!0),this.playersByQueriedElement.has(t)&&(n=!0),this.statesByElement.has(t)&&(n=!0),this._fetchNamespace(e).elementContainsData(t)||n}},{key:"afterFlush",value:function(e){this._flushFns.push(e)}},{key:"afterFlushAnimationsDone",value:function(e){this._whenQuietFns.push(e)}},{key:"_getPreviousPlayers",value:function(e,t,n,r,i){var a=[];if(t){var o=this.playersByQueriedElement.get(e);o&&(a=o)}else{var s=this.playersByElement.get(e);if(s){var u=!i||i==iT;s.forEach(function(e){e.queued||!u&&e.triggerName!=r||a.push(e)})}}return(n||r)&&(a=a.filter(function(e){return!(n&&n!=e.namespaceId||r&&r!=e.triggerName)})),a}},{key:"_beforeAnimationBuild",value:function(e,t,n){var r,i=this,a=t.element,o=t.isRemovalTransition?void 0:e,u=t.isRemovalTransition?void 0:t.triggerName,c=s(t.timelines);try{var l=function(){var e=r.value.element,s=e!==a,c=C_(n,e,[]);i._getPreviousPlayers(e,s,o,u,t.toState).forEach(function(e){var t=e.getRealPlayer();t.beforeDestroy&&t.beforeDestroy(),e.destroy(),c.push(e)})};for(c.s();!(r=c.n()).done;)l()}catch(h){c.e(h)}finally{c.f()}ix(a,t.fromStyles)}},{key:"_buildAnimation",value:function(e,t,n,r,i,a){var o=this,s=t.triggerName,u=t.element,c=[],l=new Set,h=new Set,f=t.timelines.map(function(t){var f=t.element;l.add(f);var d=f[nT];if(d&&d.removedBeforeQueried)return new Gb(t.duration,t.delay);var v=f!==u,p=function(e){var t=[];return gT(e,t),t}((n.get(f)||Xx).map(function(e){return e.getRealPlayer()})).filter(function(e){return!!e.element&&e.element===f}),m=i.get(f),g=a.get(f),y=I_(0,o._normalizer,0,t.keyframes,m,g),k=o._buildPlayer(t,y,p);if(t.subTimeline&&r&&h.add(f),v){var w=new uT(e,s,f);w.setRealPlayer(k),c.push(w)}return k});c.forEach(function(e){C_(o.playersByQueriedElement,e.element,[]).push(e),e.onDone(function(){return function(e,t,n){var r;if(e instanceof Map){if(r=e.get(t)){if(r.length){var i=r.indexOf(n);r.splice(i,1)}0==r.length&&e.delete(t)}}else if(r=e[t]){if(r.length){var a=r.indexOf(n);r.splice(a,1)}0==r.length&&delete e[t]}return r}(o.playersByQueriedElement,e.element,e)})}),l.forEach(function(e){return vT(e,W_)});var d=T_(f);return d.onDestroy(function(){l.forEach(function(e){return pT(e,W_)}),rx(u,t.toStyles)}),h.forEach(function(e){C_(r,e,[]).push(d)}),d}},{key:"_buildPlayer",value:function(e,t,n){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,n):new Gb(e.duration,e.delay)}}]),e}(),uT=function(){function e(t,n,r){f(this,e),this.namespaceId=t,this.triggerName=n,this.element=r,this._player=new Gb,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}return h(e,[{key:"setRealPlayer",value:function(e){var t=this;this._containsRealPlayer||(this._player=e,Object.keys(this._queuedCallbacks).forEach(function(n){t._queuedCallbacks[n].forEach(function(t){return S_(e,n,void 0,t)})}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}},{key:"getRealPlayer",value:function(){return this._player}},{key:"overrideTotalTime",value:function(e){this.totalTime=e}},{key:"syncPlayerEvents",value:function(e){var t=this,n=this._player;n.triggerCallback&&e.onStart(function(){return n.triggerCallback("start")}),e.onDone(function(){return t.finish()}),e.onDestroy(function(){return t.destroy()})}},{key:"_queueEvent",value:function(e,t){C_(this._queuedCallbacks,e,[]).push(t)}},{key:"onDone",value:function(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}},{key:"onStart",value:function(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}},{key:"onDestroy",value:function(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}},{key:"init",value:function(){this._player.init()}},{key:"hasStarted",value:function(){return!this.queued&&this._player.hasStarted()}},{key:"play",value:function(){!this.queued&&this._player.play()}},{key:"pause",value:function(){!this.queued&&this._player.pause()}},{key:"restart",value:function(){!this.queued&&this._player.restart()}},{key:"finish",value:function(){this._player.finish()}},{key:"destroy",value:function(){this.destroyed=!0,this._player.destroy()}},{key:"reset",value:function(){!this.queued&&this._player.reset()}},{key:"setPosition",value:function(e){this.queued||this._player.setPosition(e)}},{key:"getPosition",value:function(){return this.queued?0:this._player.getPosition()}},{key:"triggerCallback",value:function(e){var t=this._player;t.triggerCallback&&t.triggerCallback(e)}}]),e}();function cT(e){return e&&1===e.nodeType}function lT(e,t){var n=e.style.display;return e.style.display=null!=t?t:"none",n}function hT(e,t,n,r,i){var a=[];n.forEach(function(e){return a.push(lT(e))});var o=[];r.forEach(function(n,r){var a={};n.forEach(function(e){var n=a[e]=t.computeStyle(r,e,i);(!n||0==n.length)&&(r[nT]=tT,o.push(r))}),e.set(r,a)});var s=0;return n.forEach(function(e){return lT(e,a[s++])}),o}function fT(e,t){var n=new Map;if(e.forEach(function(e){return n.set(e,[])}),0==t.length)return n;var r=new Set(t),i=new Map;function a(e){if(!e)return 1;var t=i.get(e);if(t)return t;var o=e.parentNode;return t=n.has(o)?o:r.has(o)?1:a(o),i.set(e,t),t}return t.forEach(function(e){var t=a(e);1!==t&&n.get(t).push(e)}),n}var dT="$$classes";function vT(e,t){if(e.classList)e.classList.add(t);else{var n=e[dT];n||(n=e[dT]={}),n[t]=!0}}function pT(e,t){if(e.classList)e.classList.remove(t);else{var n=e[dT];n&&delete n[t]}}function mT(e,t,n){T_(n).onDone(function(){return e.processLeaveNode(t)})}function gT(e,t){for(var n=0;n<e.length;n++){var r=e[n];r instanceof Kb?gT(r.players,t):t.push(r)}}function yT(e,t,n){var r=n.get(e);if(!r)return!1;var i=t.get(e);return i?r.forEach(function(e){return i.add(e)}):t.set(e,r),n.delete(e),!0}var kT=function(){function e(t,n,r){var i=this;f(this,e),this.bodyNode=t,this._driver=n,this._normalizer=r,this._triggerCache={},this.onRemovalComplete=function(e,t){},this._transitionEngine=new sT(t,n,r),this._timelineEngine=new Qx(t,n,r),this._transitionEngine.onRemovalComplete=function(e,t){return i.onRemovalComplete(e,t)}}return h(e,[{key:"registerTrigger",value:function(e,t,n,r,i){var a=e+"-"+r,o=this._triggerCache[a];if(!o){var s=[],u=_x(this._driver,i,s);if(s.length)throw new Error('The animation trigger "'.concat(r,'" has failed to build due to the following errors:\n - ').concat(s.join("\n - ")));o=function(e,t,n){return new Gx(e,t,n)}(r,u,this._normalizer),this._triggerCache[a]=o}this._transitionEngine.registerTrigger(t,r,o)}},{key:"register",value:function(e,t){this._transitionEngine.register(e,t)}},{key:"destroy",value:function(e,t){this._transitionEngine.destroy(e,t)}},{key:"onInsert",value:function(e,t,n,r){this._transitionEngine.insertNode(e,t,n,r)}},{key:"onRemove",value:function(e,t,n,r){this._transitionEngine.removeNode(e,t,r||!1,n)}},{key:"disableAnimations",value:function(e,t){this._transitionEngine.markElementAsDisabled(e,t)}},{key:"process",value:function(e,n,r,i){if("@"==r.charAt(0)){var a=t(A_(r),2),o=a[0],s=a[1];this._timelineEngine.command(o,n,s,i)}else this._transitionEngine.trigger(e,n,r,i)}},{key:"listen",value:function(e,n,r,i,a){if("@"==r.charAt(0)){var o=t(A_(r),2),s=o[0],u=o[1];return this._timelineEngine.listen(s,n,u,a)}return this._transitionEngine.listen(e,n,r,i,a)}},{key:"flush",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;this._transitionEngine.flush(e)}},{key:"players",get:function(){return this._transitionEngine.players.concat(this._timelineEngine.players)}},{key:"whenRenderingDone",value:function(){return this._transitionEngine.whenRenderingDone()}}]),e}();function wT(e,t){var n=null,r=null;return Array.isArray(t)&&t.length?(n=_T(t[0]),t.length>1&&(r=_T(t[t.length-1]))):t&&(n=_T(t)),n||r?new bT(e,n,r):null}var bT=function(){var e=function(){function e(t,n,r){f(this,e),this._element=t,this._startStyles=n,this._endStyles=r,this._state=0;var i=e.initialStylesByElement.get(t);i||e.initialStylesByElement.set(t,i={}),this._initialStyles=i}return h(e,[{key:"start",value:function(){this._state<1&&(this._startStyles&&rx(this._element,this._startStyles,this._initialStyles),this._state=1)}},{key:"finish",value:function(){this.start(),this._state<2&&(rx(this._element,this._initialStyles),this._endStyles&&(rx(this._element,this._endStyles),this._endStyles=null),this._state=1)}},{key:"destroy",value:function(){this.finish(),this._state<3&&(e.initialStylesByElement.delete(this._element),this._startStyles&&(ix(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(ix(this._element,this._endStyles),this._endStyles=null),rx(this._element,this._initialStyles),this._state=3)}}]),e}();return e.initialStylesByElement=new WeakMap,e}();function _T(e){for(var t=null,n=Object.keys(e),r=0;r<n.length;r++){var i=n[r];xT(i)&&((t=t||{})[i]=e[i])}return t}function xT(e){return"display"===e||"position"===e}var TT="animation",IT="animationend",ST=function(){function e(t,n,r,i,a,o,s){var u=this;f(this,e),this._element=t,this._name=n,this._duration=r,this._delay=i,this._easing=a,this._fillMode=o,this._onDoneFn=s,this._finished=!1,this._destroyed=!1,this._startTime=0,this._position=0,this._eventFn=function(e){return u._handleCallback(e)}}return h(e,[{key:"apply",value:function(){(function(e,t){var n=OT(e,"").trim();n.length&&(function(e,t){for(var n=0,r=0;r<e.length;r++)","===e.charAt(r)&&n++}(n),t="".concat(n,", ").concat(t)),NT(e,"",t)})(this._element,"".concat(this._duration,"ms ").concat(this._easing," ").concat(this._delay,"ms 1 normal ").concat(this._fillMode," ").concat(this._name)),AT(this._element,this._eventFn,!1),this._startTime=Date.now()}},{key:"pause",value:function(){ET(this._element,this._name,"paused")}},{key:"resume",value:function(){ET(this._element,this._name,"running")}},{key:"setPosition",value:function(e){var t=RT(this._element,this._name);this._position=e*this._duration,NT(this._element,"Delay","-".concat(this._position,"ms"),t)}},{key:"getPosition",value:function(){return this._position}},{key:"_handleCallback",value:function(e){var t=e._ngTestManualTimestamp||Date.now(),n=1e3*parseFloat(e.elapsedTime.toFixed(3));e.animationName==this._name&&Math.max(t-this._startTime,0)>=this._delay&&n>=this._duration&&this.finish()}},{key:"finish",value:function(){this._finished||(this._finished=!0,this._onDoneFn(),AT(this._element,this._eventFn,!0))}},{key:"destroy",value:function(){this._destroyed||(this._destroyed=!0,this.finish(),function(e,t){var n=OT(e,"").split(","),r=CT(n,t);r>=0&&(n.splice(r,1),NT(e,"",n.join(",")))}(this._element,this._name))}}]),e}();function ET(e,t,n){NT(e,"PlayState",n,RT(e,t))}function RT(e,t){var n=OT(e,"");return n.indexOf(",")>0?CT(n.split(","),t):CT([n],t)}function CT(e,t){for(var n=0;n<e.length;n++)if(e[n].indexOf(t)>=0)return n;return-1}function AT(e,t,n){n?e.removeEventListener(IT,t):e.addEventListener(IT,t)}function NT(e,t,n,r){var i=TT+t;if(null!=r){var a=e.style[i];if(a.length){var o=a.split(",");o[r]=n,n=o.join(",")}}e.style[i]=n}function OT(e,t){return e.style[TT+t]||""}var DT=function(){function e(t,n,r,i,a,o,s,u){f(this,e),this.element=t,this.keyframes=n,this.animationName=r,this._duration=i,this._delay=a,this._finalStyles=s,this._specialStyles=u,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this.currentSnapshot={},this._state=0,this.easing=o||"linear",this.totalTime=i+a,this._buildStyler()}return h(e,[{key:"onStart",value:function(e){this._onStartFns.push(e)}},{key:"onDone",value:function(e){this._onDoneFns.push(e)}},{key:"onDestroy",value:function(e){this._onDestroyFns.push(e)}},{key:"destroy",value:function(){this.init(),!(this._state>=4)&&(this._state=4,this._styler.destroy(),this._flushStartFns(),this._flushDoneFns(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(function(e){return e()}),this._onDestroyFns=[])}},{key:"_flushDoneFns",value:function(){this._onDoneFns.forEach(function(e){return e()}),this._onDoneFns=[]}},{key:"_flushStartFns",value:function(){this._onStartFns.forEach(function(e){return e()}),this._onStartFns=[]}},{key:"finish",value:function(){this.init(),!(this._state>=3)&&(this._state=3,this._styler.finish(),this._flushStartFns(),this._specialStyles&&this._specialStyles.finish(),this._flushDoneFns())}},{key:"setPosition",value:function(e){this._styler.setPosition(e)}},{key:"getPosition",value:function(){return this._styler.getPosition()}},{key:"hasStarted",value:function(){return this._state>=2}},{key:"init",value:function(){this._state>=1||(this._state=1,this._styler.apply(),this._delay&&this._styler.pause())}},{key:"play",value:function(){this.init(),this.hasStarted()||(this._flushStartFns(),this._state=2,this._specialStyles&&this._specialStyles.start()),this._styler.resume()}},{key:"pause",value:function(){this.init(),this._styler.pause()}},{key:"restart",value:function(){this.reset(),this.play()}},{key:"reset",value:function(){this._state=0,this._styler.destroy(),this._buildStyler(),this._styler.apply()}},{key:"_buildStyler",value:function(){var e=this;this._styler=new ST(this.element,this.animationName,this._duration,this._delay,this.easing,"forwards",function(){return e.finish()})}},{key:"triggerCallback",value:function(e){var t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(function(e){return e()}),t.length=0}},{key:"beforeDestroy",value:function(){var e=this;this.init();var t={};if(this.hasStarted()){var n=this._state>=3;Object.keys(this._finalStyles).forEach(function(r){"offset"!=r&&(t[r]=n?e._finalStyles[r]:mx(e.element,r))})}this.currentSnapshot=t}}]),e}(),PT=function(e){d(n,e);var t=v(n);function n(e,r){var i;return f(this,n),(i=t.call(this)).element=e,i._startingStyles={},i.__initialized=!1,i._styles=q_(r),i}return h(n,[{key:"init",value:function(){var e=this;this.__initialized||!this._startingStyles||(this.__initialized=!0,Object.keys(this._styles).forEach(function(t){e._startingStyles[t]=e.element.style[t]}),i(b(n.prototype),"init",this).call(this))}},{key:"play",value:function(){var e=this;!this._startingStyles||(this.init(),Object.keys(this._styles).forEach(function(t){return e.element.style.setProperty(t,e._styles[t])}),i(b(n.prototype),"play",this).call(this))}},{key:"destroy",value:function(){var e=this;!this._startingStyles||(Object.keys(this._startingStyles).forEach(function(t){var n=e._startingStyles[t];n?e.element.style.setProperty(t,n):e.element.style.removeProperty(t)}),this._startingStyles=null,i(b(n.prototype),"destroy",this).call(this))}}]),n}(Gb),LT=function(){function e(){f(this,e),this._count=0}return h(e,[{key:"validateStyleProperty",value:function(e){return M_(e)}},{key:"matchesElement",value:function(e,t){return U_(e,t)}},{key:"containsElement",value:function(e,t){return j_(e,t)}},{key:"query",value:function(e,t,n){return V_(e,t,n)}},{key:"computeStyle",value:function(e,t,n){return window.getComputedStyle(e)[t]}},{key:"buildKeyframeElement",value:function(e,t,n){n=n.map(function(e){return q_(e)});var r="@keyframes ".concat(t," {\n"),i="";n.forEach(function(e){i=" ";var t=parseFloat(e.offset);r+="".concat(i).concat(100*t,"% {\n"),i+=" ",Object.keys(e).forEach(function(t){var n=e[t];switch(t){case"offset":return;case"easing":return void(n&&(r+="".concat(i,"animation-timing-function: ").concat(n,";\n")));default:return void(r+="".concat(i).concat(t,": ").concat(n,";\n"))}}),r+="".concat(i,"}\n")}),r+="}\n";var a=document.createElement("style");return a.textContent=r,a}},{key:"animate",value:function(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[],o=a.filter(function(e){return e instanceof DT}),s={};dx(n,r)&&o.forEach(function(e){var t=e.currentSnapshot;Object.keys(t).forEach(function(e){return s[e]=t[e]})});var u=function(e){var t={};return e&&(Array.isArray(e)?e:[e]).forEach(function(e){Object.keys(e).forEach(function(n){"offset"==n||"easing"==n||(t[n]=e[n])})}),t}(t=vx(e,t,s));if(0==n)return new PT(e,u);var c="gen_css_kf_"+this._count++,l=this.buildKeyframeElement(e,c,t);(function(e){var t,n=null===(t=e.getRootNode)||void 0===t?void 0:t.call(e);return"undefined"!=typeof ShadowRoot&&n instanceof ShadowRoot?n:document.head})(e).appendChild(l);var h=wT(e,t),f=new DT(e,t,c,n,r,i,u,h);return f.onDestroy(function(){return function(e){e.parentNode.removeChild(e)}(l)}),f}}]),e}(),FT=function(){function e(t,n,r,i){f(this,e),this.element=t,this.keyframes=n,this.options=r,this._specialStyles=i,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}return h(e,[{key:"_onFinish",value:function(){this._finished||(this._finished=!0,this._onDoneFns.forEach(function(e){return e()}),this._onDoneFns=[])}},{key:"init",value:function(){this._buildPlayer(),this._preparePlayerBeforeStart()}},{key:"_buildPlayer",value:function(){var e=this;if(!this._initialized){this._initialized=!0;var t=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,t,this.options),this._finalKeyframe=t.length?t[t.length-1]:{},this.domPlayer.addEventListener("finish",function(){return e._onFinish()})}}},{key:"_preparePlayerBeforeStart",value:function(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}},{key:"_triggerWebAnimation",value:function(e,t,n){return e.animate(t,n)}},{key:"onStart",value:function(e){this._onStartFns.push(e)}},{key:"onDone",value:function(e){this._onDoneFns.push(e)}},{key:"onDestroy",value:function(e){this._onDestroyFns.push(e)}},{key:"play",value:function(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(function(e){return e()}),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}},{key:"pause",value:function(){this.init(),this.domPlayer.pause()}},{key:"finish",value:function(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}},{key:"reset",value:function(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}},{key:"_resetDomPlayerState",value:function(){this.domPlayer&&this.domPlayer.cancel()}},{key:"restart",value:function(){this.reset(),this.play()}},{key:"hasStarted",value:function(){return this._started}},{key:"destroy",value:function(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(function(e){return e()}),this._onDestroyFns=[])}},{key:"setPosition",value:function(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}},{key:"getPosition",value:function(){return this.domPlayer.currentTime/this.time}},{key:"totalTime",get:function(){return this._delay+this._duration}},{key:"beforeDestroy",value:function(){var e=this,t={};this.hasStarted()&&Object.keys(this._finalKeyframe).forEach(function(n){"offset"!=n&&(t[n]=e._finished?e._finalKeyframe[n]:mx(e.element,n))}),this.currentSnapshot=t}},{key:"triggerCallback",value:function(e){var t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(function(e){return e()}),t.length=0}}]),e}(),MT=function(){function e(){f(this,e),this._isNativeImpl=/\{\s*\[native\s+code\]\s*\}/.test(UT().toString()),this._cssKeyframesDriver=new LT}return h(e,[{key:"validateStyleProperty",value:function(e){return M_(e)}},{key:"matchesElement",value:function(e,t){return U_(e,t)}},{key:"containsElement",value:function(e,t){return j_(e,t)}},{key:"query",value:function(e,t,n){return V_(e,t,n)}},{key:"computeStyle",value:function(e,t,n){return window.getComputedStyle(e)[t]}},{key:"overrideWebAnimationsSupport",value:function(e){this._isNativeImpl=e}},{key:"animate",value:function(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[],o=arguments.length>6?arguments[6]:void 0;if(!o&&!this._isNativeImpl)return this._cssKeyframesDriver.animate(e,t,n,r,i,a);var s={duration:n,delay:r,fill:0==r?"both":"forwards"};i&&(s.easing=i);var u={},c=a.filter(function(e){return e instanceof FT});dx(n,r)&&c.forEach(function(e){var t=e.currentSnapshot;Object.keys(t).forEach(function(e){return u[e]=t[e]})});var l=wT(e,t=vx(e,t=t.map(function(e){return ex(e,!1)}),u));return new FT(e,t,s,l)}}]),e}();function UT(){return __()&&Element.prototype.animate||{}}var jT=function(){var e=function(e){d(n,e);var t=v(n);function n(e,r){var i;return f(this,n),(i=t.call(this))._nextAnimationId=0,i._renderer=e.createRenderer(r.body,{id:"0",encapsulation:u.ifc.None,styles:[],data:{animation:[]}}),i}return h(n,[{key:"build",value:function(e){var t=this._nextAnimationId.toString();this._nextAnimationId++;var n=Array.isArray(e)?qb(e):e;return BT(this._renderer,null,t,"register",[n]),new VT(t,this._renderer)}}]),n}(Mb);return e.\u0275fac=function(t){return new(t||e)(u.LFG(u.FYo),u.LFG(k))},e.\u0275prov=u.Yz7({token:e,factory:e.\u0275fac}),e}(),VT=function(e){d(n,e);var t=v(n);function n(e,r){var i;return f(this,n),(i=t.call(this))._id=e,i._renderer=r,i}return h(n,[{key:"create",value:function(e,t){return new qT(this._id,e,t||{},this._renderer)}}]),n}(function(){return function e(){f(this,e)}}()),qT=function(){function e(t,n,r,i){f(this,e),this.id=t,this.element=n,this._renderer=i,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",r)}return h(e,[{key:"_listen",value:function(e,t){return this._renderer.listen(this.element,"@@".concat(this.id,":").concat(e),t)}},{key:"_command",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return BT(this._renderer,this.element,this.id,e,n)}},{key:"onDone",value:function(e){this._listen("done",e)}},{key:"onStart",value:function(e){this._listen("start",e)}},{key:"onDestroy",value:function(e){this._listen("destroy",e)}},{key:"init",value:function(){this._command("init")}},{key:"hasStarted",value:function(){return this._started}},{key:"play",value:function(){this._command("play"),this._started=!0}},{key:"pause",value:function(){this._command("pause")}},{key:"restart",value:function(){this._command("restart")}},{key:"finish",value:function(){this._command("finish")}},{key:"destroy",value:function(){this._command("destroy")}},{key:"reset",value:function(){this._command("reset"),this._started=!1}},{key:"setPosition",value:function(e){this._command("setPosition",e)}},{key:"getPosition",value:function(){var e,t;return null!==(t=null===(e=this._renderer.engine.players[+this.id])||void 0===e?void 0:e.getPosition())&&void 0!==t?t:0}}]),e}();function BT(e,t,n,r,i){return e.setProperty(t,"@@".concat(n,":").concat(r),i)}var zT="@.disabled",ZT=function(){var e=function(){function e(t,n,r){f(this,e),this.delegate=t,this.engine=n,this._zone=r,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),n.onRemovalComplete=function(e,t){t&&t.parentNode(e)&&t.removeChild(e.parentNode,e)}}return h(e,[{key:"createRenderer",value:function(e,t){var n=this,r=this.delegate.createRenderer(e,t);if(!(e&&t&&t.data&&t.data.animation)){var i=this._rendererCache.get(r);return i||(i=new HT("",r,this.engine),this._rendererCache.set(r,i)),i}var a=t.id,o=t.id+"-"+this._currentId;this._currentId++,this.engine.register(o,e);return t.data.animation.forEach(function t(r){Array.isArray(r)?r.forEach(t):n.engine.registerTrigger(a,o,e,r.name,r)}),new GT(this,o,r,this.engine)}},{key:"begin",value:function(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}},{key:"_scheduleCountTask",value:function(){var e=this;this.promise.then(function(){e._microtaskId++})}},{key:"scheduleListenerCallback",value:function(e,n,r){var i=this;e>=0&&e<this._microtaskId?this._zone.run(function(){return n(r)}):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(function(){i._zone.run(function(){i._animationCallbacksBuffer.forEach(function(e){var n=t(e,2);(0,n[0])(n[1])}),i._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([n,r]))}},{key:"end",value:function(){var e=this;this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(function(){e._scheduleCountTask(),e.engine.flush(e._microtaskId)}),this.delegate.end&&this.delegate.end()}},{key:"whenRenderingDone",value:function(){return this.engine.whenRenderingDone()}}]),e}();return e.\u0275fac=function(t){return new(t||e)(u.LFG(u.FYo),u.LFG(kT),u.LFG(u.R0b))},e.\u0275prov=u.Yz7({token:e,factory:e.\u0275fac}),e}(),HT=function(){function e(t,n,r){f(this,e),this.namespaceId=t,this.delegate=n,this.engine=r,this.destroyNode=this.delegate.destroyNode?function(e){return n.destroyNode(e)}:null}return h(e,[{key:"data",get:function(){return this.delegate.data}},{key:"destroy",value:function(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}},{key:"createElement",value:function(e,t){return this.delegate.createElement(e,t)}},{key:"createComment",value:function(e){return this.delegate.createComment(e)}},{key:"createText",value:function(e){return this.delegate.createText(e)}},{key:"appendChild",value:function(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}},{key:"insertBefore",value:function(e,t,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];this.delegate.insertBefore(e,t,n),this.engine.onInsert(this.namespaceId,t,e,r)}},{key:"removeChild",value:function(e,t,n){this.engine.onRemove(this.namespaceId,t,this.delegate,n)}},{key:"selectRootElement",value:function(e,t){return this.delegate.selectRootElement(e,t)}},{key:"parentNode",value:function(e){return this.delegate.parentNode(e)}},{key:"nextSibling",value:function(e){return this.delegate.nextSibling(e)}},{key:"setAttribute",value:function(e,t,n,r){this.delegate.setAttribute(e,t,n,r)}},{key:"removeAttribute",value:function(e,t,n){this.delegate.removeAttribute(e,t,n)}},{key:"addClass",value:function(e,t){this.delegate.addClass(e,t)}},{key:"removeClass",value:function(e,t){this.delegate.removeClass(e,t)}},{key:"setStyle",value:function(e,t,n,r){this.delegate.setStyle(e,t,n,r)}},{key:"removeStyle",value:function(e,t,n){this.delegate.removeStyle(e,t,n)}},{key:"setProperty",value:function(e,t,n){"@"==t.charAt(0)&&t==zT?this.disableAnimations(e,!!n):this.delegate.setProperty(e,t,n)}},{key:"setValue",value:function(e,t){this.delegate.setValue(e,t)}},{key:"listen",value:function(e,t,n){return this.delegate.listen(e,t,n)}},{key:"disableAnimations",value:function(e,t){this.engine.disableAnimations(e,t)}}]),e}(),GT=function(e){d(r,e);var n=v(r);function r(e,t,i,a){var o;return f(this,r),(o=n.call(this,t,i,a)).factory=e,o.namespaceId=t,o}return h(r,[{key:"setProperty",value:function(e,t,n){"@"==t.charAt(0)?"."==t.charAt(1)&&t==zT?this.disableAnimations(e,n=void 0===n||!!n):this.engine.process(this.namespaceId,e,t.substr(1),n):this.delegate.setProperty(e,t,n)}},{key:"listen",value:function(e,n,r){var i=this;if("@"==n.charAt(0)){var a,o=function(e){switch(e){case"body":return document.body;case"document":return document;case"window":return window;default:return e}}(e),s=n.substr(1),u="";return"@"!=s.charAt(0)&&(s=(a=t(function(e){var t=e.indexOf(".");return[e.substring(0,t),e.substr(t+1)]}(s),2))[0],u=a[1]),this.engine.listen(this.namespaceId,o,s,u,function(e){i.factory.scheduleListenerCallback(e._data||-1,r,e)})}return this.delegate.listen(e,n,r)}}]),r}(HT),KT=function(){var e=function(e){d(n,e);var t=v(n);function n(e,r,i){return f(this,n),t.call(this,e.body,r,i)}return h(n,[{key:"ngOnDestroy",value:function(){this.flush()}}]),n}(kT);return e.\u0275fac=function(t){return new(t||e)(u.LFG(k),u.LFG(z_),u.LFG(jx))},e.\u0275prov=u.Yz7({token:e,factory:e.\u0275fac}),e}(),WT=new u.OlP("AnimationModuleType"),QT=[{provide:Mb,useClass:jT},{provide:jx,useFactory:function(){return new Vx}},{provide:kT,useClass:KT},{provide:u.FYo,useFactory:function(e,t,n){return new ZT(e,t,n)},deps:[de,kT,u.R0b]}],YT=[{provide:z_,useFactory:function(){return"function"==typeof UT()?new MT:new LT}},{provide:WT,useValue:"BrowserAnimations"}].concat(QT),JT=[{provide:z_,useClass:B_},{provide:WT,useValue:"NoopAnimations"}].concat(QT),$T=function(){var e=function(){function e(){f(this,e)}return h(e,null,[{key:"withConfig",value:function(t){return{ngModule:e,providers:t.disableAnimations?JT:YT}}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=u.oAB({type:e}),e.\u0275inj=u.cJS({providers:YT,imports:[Ee]}),e}(),XT=function(){var e=function e(){f(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=u.oAB({type:e,bootstrap:[Ob]}),e.\u0275inj=u.cJS({providers:[{provide:A,useClass:P}],imports:[[Ee,Cb,Fb,H,Hi.hO.initializeApp(Re),$T,w_.forRoot()]]}),e}();(0,u.G48)(),Ie().bootstrapModule(XT).catch(function(e){return console.error(e)})},4762:function(e,t,n){"use strict";function r(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}function i(e,t,n,r){return new(n||(n=Promise))(function(i,a){function o(e){try{u(r.next(e))}catch(t){a(t)}}function s(e){try{u(r.throw(e))}catch(t){a(t)}}function u(e){e.done?i(e.value):function(e){return e instanceof n?e:new n(function(t){t(e)})}(e.value).then(o,s)}u((r=r.apply(e,t||[])).next())})}function a(e,t){var n,r,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,r=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(s){a=[6,s],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}}function o(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function s(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,a=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)o.push(r.value)}catch(s){i={error:s}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(i)throw i.error}}return o}function u(e,t,n){if(n||2===arguments.length)for(var r,i=0,a=t.length;i<a;i++)(r||!(i in t))&&(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}n.d(t,{_T:function(){return r},mG:function(){return i},Jh:function(){return a},XA:function(){return o},CR:function(){return s},ev:function(){return u}})},8239:function(e,t,n){"use strict";function r(e,t,n,r,i,a,o){try{var s=e[a](o),u=s.value}catch(c){return void n(c)}s.done?t(u):Promise.resolve(u).then(r,i)}function i(e){return function(){var t=this,n=arguments;return new Promise(function(i,a){var o=e.apply(t,n);function s(e){r(o,i,a,s,u,"next",e)}function u(e){r(o,i,a,s,u,"throw",e)}s(void 0)})}}n.d(t,{Z:function(){return i}})}},function(e){e(e.s=4272)}])}();